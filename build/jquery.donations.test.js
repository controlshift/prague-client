function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}var donationsForm={},$,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};donationsForm.init=function(jQuery,opts){$=jQuery;var bindButtons,bindSelect,config,form,icons,k,metaViewport,symbol,updateCurrencyFields,updateDonationHeader,updateHeadersUntil,v,validateFieldset;config=$.extend({},{imgpath:"https://d3dy5gmtp8yhk7.cloudfront.net",metaviewporttag:!0},opts,donationsForm.parseQueryString(document.URL.split("?")[1])),metaViewport='<meta name="viewport" content="width=device-width, initial-scale=1">',config.metaviewporttag===!1&&(metaViewport=""),$(".donations-form-anchor").append(function(){return'<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n'+metaViewport+'\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" value="'+config.org+'">\n  <input type="hidden" name="customer.charges_attributes[0].currency" value="usd">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\'>$</span><span class=\'donation-header-amt\'>0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header dph-active" id="dnt-progress-amount">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first">\n    <div class="donations-currency-select-row">\n      Currency: \n      <select class="donations-currency-select"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n    </span>\n    <div class="donation-input-row">\n      <div class="donation-btn donation-btn-sm '+("1"===config.select?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt1||15)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("2"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt2||35)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("3"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt3||50)+'</span></div>\n    </div>\n    <div class="donation-input-row">      \n      <div class="donation-btn donation-btn-sm '+("4"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt4||100)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("5"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt5||250)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("6"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt6||500)+'</span></div>\n    </div>\n    <div class="donation-input-row"> \n      <div class="donation-btn donation-btn-sm '+("7"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt7||1e3)+'</span></div>\n      <input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount">\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc">\n    </div>\n    <div class="donation-payment-errors">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>'}),bindSelect=function(currency){var curr,currOptions,selectThis,_i,_len,_ref;for(currOptions=[],_ref=donationsForm.currenciesArray,_i=0,_len=_ref.length;_len>_i;_i++)curr=_ref[_i],selectThis=curr===currency?"selected":"",currOptions.push('<option value="',curr,'" ',selectThis,">",curr,"</option>");return $(".donations-currency-select").append(currOptions.join("")),$(".donations-currency-select").change(function(){var selected;return selected=$("option:selected",this),updateCurrencyFields(donationsForm.getSymbolFromCurrency(selected.val()),selected.val())})},bindSelect(),bindButtons=function(){return $(".donation-btn-lg").payment("restrictNumeric"),$(".donation-btn-sm").click(function(){return gaDonations("send","event","amount","click",$(this).text(),1),$(".donation-header-amt").text($(this).find(".donation-amt").text()),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active")}),$(".donation-btn-lg").change(function(){var lgButton;return lgButton=$(this),$(this).val()?(gaDonations("send","event","amount","click",$(this).val(),1),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active"),$(".donation-header-amt").text(lgButton.val())):void 0}),$(".donation-next-btn").click(function(){var currentFS,nextFS;return validateFieldset($(this).parent())?(gaDonations("send","event","advance-button","click#success",$(this).attr("id"),1),currentFS=$(this).parent(),nextFS=$(this).parent().next(),$(".donation-progress-header").eq($(".donation-input-set").index(nextFS)).addClass("dph-active"),nextFS.show(),currentFS.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$(".donation-submit").click(function(){return validateFieldset($(this).parent())})},bindButtons(),updateDonationHeader=function(){var text;return text=$(".donation-btn-active .donation-amt").text(),$(".donation-header-amt").text(text?text:"0")},updateCurrencyFields=function(symbol,currency,conversionRate){return currency=null!=currency?currency:config.currency,$("input[name='customer.charges_attributes[0].currency']").val(currency),$(".donation-currency").html(symbol),$("#input-set-first").html(donationsForm.donationsButtons(config.seedamount,config.seedvalues,config.select,symbol,conversionRate)),updateDonationHeader(),bindButtons(),bindSelect(currency)},null!=config.currency?(symbol=donationsForm.getSymbolFromCurrency(config.currency),updateCurrencyFields(symbol,config.currency)):$.ajax({type:"get",url:"https://freegeoip.net/json/",dataType:"jsonp",success:function(data){var currency,updateWithRates;return currency=donationsForm.getCurrencyFromCountryCode(data.country_code),symbol=donationsForm.getSymbolFromCurrency(currency),updateCurrencyFields(symbol,currency),config.seedcurrency!==currency?(updateWithRates=function(rates){var rate;return rates=config.rates?config.rates:rates,rate=donationsForm.conversionRt(config.seedcurrency,currency,rates),updateCurrencyFields(symbol,currency,rate)},null!=config.rates||null!=$("#donations-config").attr("defaults")?updateWithRates(JSON.parse($("#donations-config").attr("defaults")).rates):$("#donation-script").on("donations:defaultsloaded",function(event,dat){return updateWithRates(dat.rates)})):updateCurrencyFields(symbol,currency)}}),$("#donation-form").show(),form=this,icons={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"};for(k in icons)v=icons[k],$(k).css("background-image","url('"+config.imgpath+"/"+v+"')");return validateFieldset=function(FS){var field,valid,validText,_i,_len,_ref;if(valid=!0,0===$(".donation-input-set").index(FS)&&0===FS.find(".donation-btn-active").length)return gaDonations("send","event","error","initiated","amount",1),$(".donation-error-label").first().show(),!1;for($(".donation-error-label").first().hide(),_ref=FS.find(".donation-text-field, .donation-select"),_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],validText=donationsForm.validField($(field).val(),$(field).attr("type")),validText!==!0?(gaDonations("send","event","error","initiated",$(field).attr("name"),1),valid=!1,$(field).addClass("donation-text-field-error"),$(field).parent().find(".donation-error-label").text(validText),$(field).parent().find(".donation-error-label").show()):($(field).removeClass("donation-text-field-error"),$(field).parent().find(".donation-error-label").hide());return valid},$(".donation-text-field").blur(function(){var thisField,validText;return thisField=$(this),validText=donationsForm.validField(thisField.val(),thisField.attr("type")),validText===!0?(thisField.removeClass("donation-text-field-error"),thisField.parent().find(".donation-error-label").hide(),thisField.addClass("donation-text-field-completed")):(thisField.addClass("donation-text-field-error"),thisField.parent().find(".donation-error-label").text(validText),thisField.parent().find(".donation-error-label").show(),void 0)}),$(".donation-text-field[type=cc-num]").blur(function(){var ccNumField,ccType;return ccNumField=$(this),ccType=$.payment.cardType(ccNumField.val()),"amex"===ccType||"mastercard"===ccType||"visa"===ccType||"discover"===ccType||"dinersclub"===ccType?ccNumField.css("background-image","url("+config.imgpath+"/icon-cc-"+ccType+".png)"):void 0}),$(".donation-select[type='month']").html(function(){var i,output,txt;for(output=["<option value='' disabled selected>Month</option>"],i=1;12>=i;)txt=i>9?""+i:"0"+i,output.push("<option value='"+txt+"'>"+txt+"</option>"),i++;return output.join("")}),$(".donation-select[type='year']").html(function(){var output,year,yr,_i,_ref;for(year=(new Date).getFullYear(),output=["<option value='' disabled selected>Year</option>"],yr=_i=year,_ref=year+19;_ref>=year?_ref>=_i:_i>=_ref;yr=_ref>=year?++_i:--_i)output.push("<option value='"+yr+"'>"+yr+"</option>");return output}),updateHeadersUntil=function(index){var i,_results;for(i=1;index>=i;)$(".donation-progress-header").eq(i).addClass("dph-active"),i++;for(_results=[];2>=i;)$(".donation-progress-header").eq(i).removeClass("dph-active"),_results.push(i++);return _results},$(".donation-progress-header").click(function(){var activeIndex,currentFS,nextFS;return activeIndex=$(".donation-progress-header").index($(this)),nextFS=$(".donation-input-set").eq(activeIndex),currentFS=$(".donation-input-set").filter(":visible:first"),validateFieldset(currentFS)?(gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1),updateHeadersUntil(activeIndex),nextFS.show(),currentFS.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),donationsForm.connectToServer(config),this},donationsForm.parseQueryString=function(q){var hash,i,vars;if(hash={},void 0!==q&&""!==q)for(q=q.split("&"),i=0;i<q.length;)vars=q[i].split("="),hash[vars[0]]=vars[1],i++;return hash},donationsForm.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAN",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},donationsForm.currenciesArray=["USD","GBP","CAN","AUD","EUR","NZD","SEK","NOK","DKK"],donationsForm.conversionRt=function(currencyFrom,currencyTo,table){return 1/table[currencyTo]*table[currencyFrom]},donationsForm.donationsButtons=function(seedAmount,seedValues,selectNo,symbol,conversionRate){var counter,section,seedVals,val,_fn,_i,_len;for(null==conversionRate&&(conversionRate=1),seedVals=seedValues.split(","),section=' <div class="donations-currency-select-row">\n  Currency: \n  <select class="donations-currency-select"></select>\n</div>\n<span class="donation-field-label">\n  <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n</span> ',section+="<div class='donation-input-row'>",counter=1,_fn=function(){var amount;return amount=(conversionRate*parseFloat(val)*parseFloat(seedAmount)/100).toFixed(),section+='<div class="donation-btn donation-btn-sm '+(selectNo===counter.toString()?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>"+symbol+"</span><span class='donation-amt'>"+amount+"</span></div>",counter%3===0?section+="</div><div class='donation-input-row'>":void 0},_i=0,_len=seedVals.length;_len>_i;_i++)val=seedVals[_i],_fn(),counter+=1;return seedVals.length%5===0&&(section+="</div><div class='donation-input-row'>"),section+='<input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount"></div>\n<div class="donation-next-btn" id="donation-first-next-btn">\n  <div class="donation-next-btn-header">\n    NEXT\n  </div>\n</div>'},donationsForm.getCurrencyFromCountryCode=function(code){var currency,europeanCountries;return europeanCountries=["AT","BE","BG","HR","CY","CZ","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES"],currency=donationsForm.currencies[code],null!=currency?currency:__indexOf.call(europeanCountries,code)>=0?"EUR":"USD"},donationsForm.getSymbolFromCurrency=function(currency){var symbols;return symbols={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAN:"C$"},symbols[currency]||currency},donationsForm.validField=function(value,type){var mo,re,yr;return value?"email"===type?(re=/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,re.test(value)?!0:"Invalid email format."):"cc-num"===type?$.payment.validateCardNumber(value)?!0:"Invalid card format.":"cvc"===type?$.payment.validateCardCVC(value)?!0:"Invalid CVC.":"month"===type||"year"===type?("month"===type&&(yr=$(".donation-select[type='year']").val(),mo=value),"year"===type&&(mo=$(".donation-select[type='month']").val(),yr=value),/^\d+$/.test(mo)&&/^\d+$/.test(yr)?$.payment.validateCardExpiry(mo,yr)?!0:"Expiry must be in the future.":"Invalid expiry date."):!0:"Can't be blank"},donationsForm.hide=function(){return $("#donation-form").hide()},donationsForm.connectToServer=function(opts){var config,stripeResponseHandler,subscribeToDonationChannel;return config=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},opts),Stripe.setPublishableKey(config.stripepublickey),$.fn.serializeObject=function(){var amount,serialObj;return serialObj=form2js(this.attr("id"),".",!0),amount=$(".donation-btn-active").text()?$(".donation-btn-active").text():$(".donation-btn-active").val(),serialObj.customer.charges_attributes[0].amount=amount.replace("$","")+"00",serialObj},subscribeToDonationChannel=function(channelToken){var channel,pusher;return pusher=new Pusher(config.pusherpublickey),channel=pusher.subscribe(channelToken),channel.bind("charge_completed",function(data){return $(".donation-loading-overlay").hide(),pusher.disconnect(),"success"===data.status?($("#donation-script").trigger("donations:success"),null!=config.redirectto&&window.location.replace(config.redirectto),donationsForm.hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(data.message||"Something went wrong.").show()})},stripeResponseHandler=function(status,response){var $form,addtionalParams,fullConfig,key,req,token,val;if($form=$("#donation-form"),response.error)return gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(response.error.message),$form.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide();token=response.id,$form.append($('<input type="hidden" name="card_token" />').val(token)),fullConfig=$.extend(JSON.parse($("#donations-config").attr("defaults")),config),addtionalParams={};for(key in fullConfig)val=fullConfig[key],$.extend(addtionalParams,"ak"===key.substring(0,2)?{key:val}:void 0);return req=$.ajax({url:""+config.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),addtionalParams)}),req.done(function(response){return gaDonations("send","event","advance-button","click#success","submit",1),subscribeToDonationChannel(response.pusher_channel_token)}),req.fail(function(response,textStatus,errorThrown){return gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(errorThrown||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1},$("#donation-form").submit(function(){var $form;return gaDonations("send","event","advance-button","click#submit","submit",1),$form=$(this),$(".donation-loading-overlay").show(),$form.find("button").prop("disabled",!0),Stripe.createToken($form,stripeResponseHandler),!1})},function(){function extend(destination,source){for(var property in source)destination[property]=source[property];return destination}window.jasmine=jasmineRequire.core(jasmineRequire),jasmineRequire.html(jasmine);var env=jasmine.getEnv(),jasmineInterface={describe:function(description,specDefinitions){return env.describe(description,specDefinitions)},xdescribe:function(description,specDefinitions){return env.xdescribe(description,specDefinitions)},it:function(desc,func){return env.it(desc,func)},xit:function(desc,func){return env.xit(desc,func)},beforeEach:function(beforeEachFunction){return env.beforeEach(beforeEachFunction)},afterEach:function(afterEachFunction){return env.afterEach(afterEachFunction)},expect:function(actual){return env.expect(actual)},pending:function(){return env.pending()},spyOn:function(obj,methodName){return env.spyOn(obj,methodName)},jsApiReporter:new jasmine.JsApiReporter({timer:new jasmine.Timer})};"undefined"==typeof window&&"object"==typeof exports?extend(exports,jasmineInterface):extend(window,jasmineInterface),jasmine.addCustomEqualityTester=function(tester){env.addCustomEqualityTester(tester)},jasmine.addMatchers=function(matchers){return env.addMatchers(matchers)},jasmine.clock=function(){return env.clock};var queryString=new jasmine.QueryString({getWindowLocation:function(){return window.location}}),catchingExceptions=queryString.getParam("catch");env.catchExceptions("undefined"==typeof catchingExceptions?!0:catchingExceptions);var htmlReporter=new jasmine.HtmlReporter({env:env,onRaiseExceptionsClick:function(){queryString.setParam("catch",!env.catchingExceptions())},getContainer:function(){return document.body},createElement:function(){return document.createElement.apply(document,arguments)},createTextNode:function(){return document.createTextNode.apply(document,arguments)},timer:new jasmine.Timer});env.addReporter(jasmineInterface.jsApiReporter),env.addReporter(htmlReporter);var specFilter=new jasmine.HtmlSpecFilter({filterString:function(){return queryString.getParam("spec")}});env.specFilter=function(spec){return specFilter.matches(spec.getFullName())},window.setTimeout=window.setTimeout,window.setInterval=window.setInterval,window.clearTimeout=window.clearTimeout,window.clearInterval=window.clearInterval;var currentWindowOnload=window.onload;window.onload=function(){currentWindowOnload&&currentWindowOnload(),htmlReporter.initialize(),env.execute()}}(),getJasmineRequireObj().console=function(jRequire,j$){j$.ConsoleReporter=jRequire.ConsoleReporter()},getJasmineRequireObj().ConsoleReporter=function(){function ConsoleReporter(options){function printNewline(){print("\n")}function colored(color,str){return showColors?ansi[color]+str+ansi.none:str}function plural(str,count){return 1==count?str:str+"s"}function repeat(thing,times){for(var arr=[],i=0;times>i;i++)arr.push(thing);return arr}function indent(str,spaces){for(var lines=(str||"").split("\n"),newArr=[],i=0;i<lines.length;i++)newArr.push(repeat(" ",spaces).join("")+lines[i]);return newArr.join("\n")}function specFailureDetails(result){printNewline(),print(result.fullName);for(var i=0;i<result.failedExpectations.length;i++){var failedExpectation=result.failedExpectations[i];printNewline(),print(indent(failedExpectation.stack,2))}printNewline()}var specCount,failureCount,pendingCount,print=options.print,showColors=options.showColors||!1,onComplete=options.onComplete||function(){},timer=options.timer||noopTimer,failedSpecs=[],ansi={green:"[32m",red:"[31m",yellow:"[33m",none:"[0m"};return this.jasmineStarted=function(){specCount=0,failureCount=0,pendingCount=0,print("Started"),printNewline(),timer.start()},this.jasmineDone=function(){printNewline();for(var i=0;i<failedSpecs.length;i++)specFailureDetails(failedSpecs[i]);printNewline();var specCounts=specCount+" "+plural("spec",specCount)+", "+failureCount+" "+plural("failure",failureCount);pendingCount&&(specCounts+=", "+pendingCount+" pending "+plural("spec",pendingCount)),print(specCounts),printNewline();var seconds=timer.elapsed()/1e3;print("Finished in "+seconds+" "+plural("second",seconds)),printNewline(),onComplete(0===failureCount)},this.specDone=function(result){return specCount++,"pending"==result.status?(pendingCount++,void print(colored("yellow","*"))):"passed"==result.status?void print(colored("green",".")):void("failed"==result.status&&(failureCount++,failedSpecs.push(result),print(colored("red","F"))))},this}var noopTimer={start:function(){},elapsed:function(){return 0}};return ConsoleReporter},jasmineRequire.html=function(j$){j$.ResultsNode=jasmineRequire.ResultsNode(),j$.HtmlReporter=jasmineRequire.HtmlReporter(j$),j$.QueryString=jasmineRequire.QueryString(),j$.HtmlSpecFilter=jasmineRequire.HtmlSpecFilter()},jasmineRequire.HtmlReporter=function(j$){function HtmlReporter(options){function find(selector){return getContainer().querySelector(selector)}function createDom(type,attrs){for(var el=createElement(type),i=2;i<arguments.length;i++){var child=arguments[i];"string"==typeof child?el.appendChild(createTextNode(child)):child&&el.appendChild(child)}for(var attr in attrs)"className"==attr?el[attr]=attrs[attr]:el.setAttribute(attr,attrs[attr]);return el}function pluralize(singular,count){var word=1==count?singular:singular+"s";return""+count+" "+word}function specHref(result){return"?spec="+encodeURIComponent(result.fullName)}function setMenuModeTo(mode){htmlReporterMain.setAttribute("class","html-reporter "+mode)}var htmlReporterMain,symbols,env=options.env||{},getContainer=options.getContainer,createElement=options.createElement,createTextNode=options.createTextNode,onRaiseExceptionsClick=options.onRaiseExceptionsClick||function(){},timer=options.timer||noopTimer,specsExecuted=0,failureCount=0,pendingSpecCount=0;this.initialize=function(){htmlReporterMain=createDom("div",{className:"html-reporter"},createDom("div",{className:"banner"},createDom("span",{className:"title"},"Jasmine"),createDom("span",{className:"version"},j$.version)),createDom("ul",{className:"symbol-summary"}),createDom("div",{className:"alert"}),createDom("div",{className:"results"},createDom("div",{className:"failures"}))),getContainer().appendChild(htmlReporterMain),symbols=find(".symbol-summary")};var totalSpecsDefined;this.jasmineStarted=function(options){totalSpecsDefined=options.totalSpecsDefined||0,timer.start()};var summary=createDom("div",{className:"summary"}),topResults=new j$.ResultsNode({},"",null),currentParent=topResults;this.suiteStarted=function(result){currentParent.addChild(result,"suite"),currentParent=currentParent.last()},this.suiteDone=function(){currentParent!=topResults&&(currentParent=currentParent.parent)},this.specStarted=function(result){currentParent.addChild(result,"spec")};var failures=[];return this.specDone=function(result){if("disabled"!=result.status&&specsExecuted++,symbols.appendChild(createDom("li",{className:result.status,id:"spec_"+result.id,title:result.fullName})),"failed"==result.status){failureCount++;for(var failure=createDom("div",{className:"spec-detail failed"},createDom("div",{className:"description"},createDom("a",{title:result.fullName,href:specHref(result)},result.fullName)),createDom("div",{className:"messages"})),messages=failure.childNodes[1],i=0;i<result.failedExpectations.length;i++){var expectation=result.failedExpectations[i];messages.appendChild(createDom("div",{className:"result-message"},expectation.message)),messages.appendChild(createDom("div",{className:"stack-trace"},expectation.stack))}failures.push(failure)}"pending"==result.status&&pendingSpecCount++},this.jasmineDone=function(){function summaryList(resultsTree,domParent){for(var specListNode,i=0;i<resultsTree.children.length;i++){var resultNode=resultsTree.children[i];if("suite"==resultNode.type){var suiteListNode=createDom("ul",{className:"suite",id:"suite-"+resultNode.result.id},createDom("li",{className:"suite-detail"},createDom("a",{href:specHref(resultNode.result)},resultNode.result.description)));summaryList(resultNode,suiteListNode),domParent.appendChild(suiteListNode)}"spec"==resultNode.type&&("specs"!=domParent.getAttribute("class")&&(specListNode=createDom("ul",{className:"specs"}),domParent.appendChild(specListNode)),specListNode.appendChild(createDom("li",{className:resultNode.result.status,id:"spec-"+resultNode.result.id},createDom("a",{href:specHref(resultNode.result)},resultNode.result.description))))}}var banner=find(".banner");banner.appendChild(createDom("span",{className:"duration"},"finished in "+timer.elapsed()/1e3+"s"));var alert=find(".alert");alert.appendChild(createDom("span",{className:"exceptions"},createDom("label",{className:"label","for":"raise-exceptions"},"raise exceptions"),createDom("input",{className:"raise",id:"raise-exceptions",type:"checkbox"})));var checkbox=find("input");if(checkbox.checked=!env.catchingExceptions(),checkbox.onclick=onRaiseExceptionsClick,totalSpecsDefined>specsExecuted){var skippedMessage="Ran "+specsExecuted+" of "+totalSpecsDefined+" specs - run all";alert.appendChild(createDom("span",{className:"bar skipped"},createDom("a",{href:"?",title:"Run all specs"},skippedMessage)))}var statusBarMessage=""+pluralize("spec",specsExecuted)+", "+pluralize("failure",failureCount);pendingSpecCount&&(statusBarMessage+=", "+pluralize("pending spec",pendingSpecCount));var statusBarClassName="bar "+(failureCount>0?"failed":"passed");alert.appendChild(createDom("span",{className:statusBarClassName},statusBarMessage));var results=find(".results");if(results.appendChild(summary),summaryList(topResults,summary),failures.length){alert.appendChild(createDom("span",{className:"menu bar spec-list"},createDom("span",{},"Spec List | "),createDom("a",{className:"failures-menu",href:"#"},"Failures"))),alert.appendChild(createDom("span",{className:"menu bar failure-list"},createDom("a",{className:"spec-list-menu",href:"#"},"Spec List"),createDom("span",{}," | Failures "))),find(".failures-menu").onclick=function(){setMenuModeTo("failure-list")},find(".spec-list-menu").onclick=function(){setMenuModeTo("spec-list")},setMenuModeTo("failure-list");for(var failureNode=find(".failures"),i=0;i<failures.length;i++)failureNode.appendChild(failures[i])}},this}var noopTimer={start:function(){},elapsed:function(){return 0}};return HtmlReporter},jasmineRequire.HtmlSpecFilter=function(){function HtmlSpecFilter(options){var filterString=options&&options.filterString()&&options.filterString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),filterPattern=new RegExp(filterString);this.matches=function(specName){return filterPattern.test(specName)}}return HtmlSpecFilter},jasmineRequire.ResultsNode=function(){function ResultsNode(result,type,parent){this.result=result,this.type=type,this.parent=parent,this.children=[],this.addChild=function(result,type){this.children.push(new ResultsNode(result,type,this))},this.last=function(){return this.children[this.children.length-1]}}return ResultsNode},jasmineRequire.QueryString=function(){function QueryString(options){function toQueryString(paramMap){var qStrPairs=[];for(var prop in paramMap)qStrPairs.push(encodeURIComponent(prop)+"="+encodeURIComponent(paramMap[prop]));return"?"+qStrPairs.join("&")}function queryStringToParamMap(){var paramStr=options.getWindowLocation().search.substring(1),params=[],paramMap={};if(paramStr.length>0){params=paramStr.split("&");for(var i=0;i<params.length;i++){var p=params[i].split("="),value=decodeURIComponent(p[1]);("true"===value||"false"===value)&&(value=JSON.parse(value)),paramMap[decodeURIComponent(p[0])]=value}}return paramMap}return this.setParam=function(key,value){var paramMap=queryStringToParamMap();paramMap[key]=value,options.getWindowLocation().search=toQueryString(paramMap)},this.getParam=function(key){return queryStringToParamMap()[key]},this}return QueryString},+function(window,jasmine,$){"use strict";jasmine.spiedEventsKey=function(selector,eventName){return[$(selector).selector,eventName].toString()
},jasmine.getFixtures=function(){return jasmine.currentFixtures_=jasmine.currentFixtures_||new jasmine.Fixtures},jasmine.getStyleFixtures=function(){return jasmine.currentStyleFixtures_=jasmine.currentStyleFixtures_||new jasmine.StyleFixtures},jasmine.Fixtures=function(){this.containerId="jasmine-fixtures",this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures"},jasmine.Fixtures.prototype.set=function(html){return this.cleanUp(),this.createContainer_(html)},jasmine.Fixtures.prototype.appendSet=function(html){this.addToContainer_(html)},jasmine.Fixtures.prototype.preload=function(){this.read.apply(this,arguments)},jasmine.Fixtures.prototype.load=function(){this.cleanUp(),this.createContainer_(this.read.apply(this,arguments))},jasmine.Fixtures.prototype.appendLoad=function(){this.addToContainer_(this.read.apply(this,arguments))},jasmine.Fixtures.prototype.read=function(){for(var htmlChunks=[],fixtureUrls=arguments,urlCount=fixtureUrls.length,urlIndex=0;urlCount>urlIndex;urlIndex++)htmlChunks.push(this.getFixtureHtml_(fixtureUrls[urlIndex]));return htmlChunks.join("")},jasmine.Fixtures.prototype.clearCache=function(){this.fixturesCache_={}},jasmine.Fixtures.prototype.cleanUp=function(){$("#"+this.containerId).remove()},jasmine.Fixtures.prototype.sandbox=function(attributes){var attributesToSet=attributes||{};return $('<div id="sandbox" />').attr(attributesToSet)},jasmine.Fixtures.prototype.createContainer_=function(html){var container=$("<div>").attr("id",this.containerId).html(html);return $(document.body).append(container),container},jasmine.Fixtures.prototype.addToContainer_=function(html){var container=$(document.body).find("#"+this.containerId).append(html);container.length||this.createContainer_(html)},jasmine.Fixtures.prototype.getFixtureHtml_=function(url){return"undefined"==typeof this.fixturesCache_[url]&&this.loadFixtureIntoCache_(url),this.fixturesCache_[url]},jasmine.Fixtures.prototype.loadFixtureIntoCache_=function(relativeUrl){var self=this,url=this.makeFixtureUrl_(relativeUrl),htmlText="",scripts=($.ajax({async:!1,cache:!1,url:url,success:function(data,status,$xhr){htmlText=$xhr.responseText}}).fail(function(){throw new Error("Fixture could not be loaded: "+url+" (status: "+status+", message: "+errorThrown.message+")")}),$($.parseHTML(htmlText,!0)).find("script[src]")||[]);scripts.each(function(){$.ajax({async:!1,cache:!1,dataType:"script",url:$(this).attr("src"),success:function(data,status,$xhr){htmlText+="<script>"+$xhr.responseText+"</script>"},error:function(jqXHR,status,errorThrown){throw new Error("Script could not be loaded: "+scriptSrc+" (status: "+status+", message: "+errorThrown.message+")")}})}),self.fixturesCache_[relativeUrl]=htmlText},jasmine.Fixtures.prototype.makeFixtureUrl_=function(relativeUrl){return this.fixturesPath.match("/$")?this.fixturesPath+relativeUrl:this.fixturesPath+"/"+relativeUrl},jasmine.Fixtures.prototype.proxyCallTo_=function(methodName,passedArguments){return this[methodName].apply(this,passedArguments)},jasmine.StyleFixtures=function(){this.fixturesCache_={},this.fixturesNodes_=[],this.fixturesPath="spec/javascripts/fixtures"},jasmine.StyleFixtures.prototype.set=function(css){this.cleanUp(),this.createStyle_(css)},jasmine.StyleFixtures.prototype.appendSet=function(css){this.createStyle_(css)},jasmine.StyleFixtures.prototype.preload=function(){this.read_.apply(this,arguments)},jasmine.StyleFixtures.prototype.load=function(){this.cleanUp(),this.createStyle_(this.read_.apply(this,arguments))},jasmine.StyleFixtures.prototype.appendLoad=function(){this.createStyle_(this.read_.apply(this,arguments))},jasmine.StyleFixtures.prototype.cleanUp=function(){for(;this.fixturesNodes_.length;)this.fixturesNodes_.pop().remove()},jasmine.StyleFixtures.prototype.createStyle_=function(html){var styleText=$("<div></div>").html(html).text(),style=$("<style>"+styleText+"</style>");this.fixturesNodes_.push(style),$("head").append(style)},jasmine.StyleFixtures.prototype.clearCache=jasmine.Fixtures.prototype.clearCache,jasmine.StyleFixtures.prototype.read_=jasmine.Fixtures.prototype.read,jasmine.StyleFixtures.prototype.getFixtureHtml_=jasmine.Fixtures.prototype.getFixtureHtml_,jasmine.StyleFixtures.prototype.loadFixtureIntoCache_=jasmine.Fixtures.prototype.loadFixtureIntoCache_,jasmine.StyleFixtures.prototype.makeFixtureUrl_=jasmine.Fixtures.prototype.makeFixtureUrl_,jasmine.StyleFixtures.prototype.proxyCallTo_=jasmine.Fixtures.prototype.proxyCallTo_,jasmine.getJSONFixtures=function(){return jasmine.currentJSONFixtures_=jasmine.currentJSONFixtures_||new jasmine.JSONFixtures},jasmine.JSONFixtures=function(){this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures/json"},jasmine.JSONFixtures.prototype.load=function(){return this.read.apply(this,arguments),this.fixturesCache_},jasmine.JSONFixtures.prototype.read=function(){for(var fixtureUrls=arguments,urlCount=fixtureUrls.length,urlIndex=0;urlCount>urlIndex;urlIndex++)this.getFixtureData_(fixtureUrls[urlIndex]);return this.fixturesCache_},jasmine.JSONFixtures.prototype.clearCache=function(){this.fixturesCache_={}},jasmine.JSONFixtures.prototype.getFixtureData_=function(url){return this.fixturesCache_[url]||this.loadFixtureIntoCache_(url),this.fixturesCache_[url]},jasmine.JSONFixtures.prototype.loadFixtureIntoCache_=function(relativeUrl){var self=this,url=this.fixturesPath.match("/$")?this.fixturesPath+relativeUrl:this.fixturesPath+"/"+relativeUrl;$.ajax({async:!1,cache:!1,dataType:"json",url:url,success:function(data){self.fixturesCache_[relativeUrl]=data},error:function(jqXHR,status,errorThrown){throw new Error("JSONFixture could not be loaded: "+url+" (status: "+status+", message: "+errorThrown.message+")")}})},jasmine.JSONFixtures.prototype.proxyCallTo_=function(methodName,passedArguments){return this[methodName].apply(this,passedArguments)},jasmine.jQuery=function(){},jasmine.jQuery.browserTagCaseIndependentHtml=function(html){return $("<div/>").append(html).html()},jasmine.jQuery.elementToString=function(element){return $(element).map(function(){return this.outerHTML}).toArray().join(", ")};var data={spiedEvents:{},handlers:[]};jasmine.jQuery.events={spyOn:function(selector,eventName){var handler=function(){data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)]=jasmine.util.argsToArray(arguments)};return $(selector).on(eventName,handler),data.handlers.push(handler),{selector:selector,eventName:eventName,handler:handler,reset:function(){delete data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)]}}},args:function(selector,eventName){var actualArgs=data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)];if(!actualArgs)throw"There is no spy for "+eventName+" on "+selector.toString()+". Make sure to create a spy using spyOnEvent.";return actualArgs},wasTriggered:function(selector,eventName){return!!data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)]},wasTriggeredWith:function(selector,eventName,expectedArgs,util,customEqualityTesters){var actualArgs=jasmine.jQuery.events.args(selector,eventName).slice(1);return"[object Array]"!==Object.prototype.toString.call(expectedArgs)&&(actualArgs=actualArgs[0]),util.equals(expectedArgs,actualArgs,customEqualityTesters)},wasPrevented:function(selector,eventName){var args=data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)],e=args?args[0]:void 0;return e&&e.isDefaultPrevented()},wasStopped:function(selector,eventName){var args=data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)],e=args?args[0]:void 0;return e&&e.isPropagationStopped()},cleanUp:function(){data.spiedEvents={},data.handlers=[]}};var hasProperty=function(actualValue,expectedValue){return void 0===expectedValue?void 0!==actualValue:actualValue===expectedValue};beforeEach(function(){jasmine.addMatchers({toHaveClass:function(){return{compare:function(actual,className){return{pass:$(actual).hasClass(className)}}}},toHaveCss:function(){return{compare:function(actual,css){for(var prop in css){var value=css[prop];if(("auto"!==value||"auto"!==$(actual).get(0).style[prop])&&$(actual).css(prop)!==value)return{pass:!1}}return{pass:!0}}}},toBeVisible:function(){return{compare:function(actual){return{pass:$(actual).is(":visible")}}}},toBeHidden:function(){return{compare:function(actual){return{pass:$(actual).is(":hidden")}}}},toBeSelected:function(){return{compare:function(actual){return{pass:$(actual).is(":selected")}}}},toBeChecked:function(){return{compare:function(actual){return{pass:$(actual).is(":checked")}}}},toBeEmpty:function(){return{compare:function(actual){return{pass:$(actual).is(":empty")}}}},toBeInDOM:function(){return{compare:function(actual){return{pass:$.contains(document.documentElement,$(actual)[0])}}}},toExist:function(){return{compare:function(actual){return{pass:$(actual).length}}}},toHaveLength:function(){return{compare:function(actual,length){return{pass:$(actual).length===length}}}},toHaveAttr:function(){return{compare:function(actual,attributeName,expectedAttributeValue){return{pass:hasProperty($(actual).attr(attributeName),expectedAttributeValue)}}}},toHaveProp:function(){return{compare:function(actual,propertyName,expectedPropertyValue){return{pass:hasProperty($(actual).prop(propertyName),expectedPropertyValue)}}}},toHaveId:function(){return{compare:function(actual,id){return{pass:$(actual).attr("id")==id}}}},toHaveHtml:function(){return{compare:function(actual,html){return{pass:$(actual).html()==jasmine.jQuery.browserTagCaseIndependentHtml(html)}}}},toContainHtml:function(){return{compare:function(actual,html){var actualHtml=$(actual).html(),expectedHtml=jasmine.jQuery.browserTagCaseIndependentHtml(html);return{pass:actualHtml.indexOf(expectedHtml)>=0}}}},toHaveText:function(){return{compare:function(actual,text){var trimmedText=$.trim($(actual).text());return text&&$.isFunction(text.test)?{pass:text.test(trimmedText)}:{pass:trimmedText==text}}}},toContainText:function(){return{compare:function(actual,text){var trimmedText=$.trim($(actual).text());return text&&$.isFunction(text.test)?{pass:text.test(trimmedText)}:{pass:-1!=trimmedText.indexOf(text)}}}},toHaveValue:function(){return{compare:function(actual,value){return{pass:$(actual).val()===value}}}},toHaveData:function(){return{compare:function(actual,key,expectedValue){return{pass:hasProperty($(actual).data(key),expectedValue)}}}},toContainElement:function(){return{compare:function(actual,selector){return window.debug,{pass:$(actual).find(selector).length}}}},toBeMatchedBy:function(){return{compare:function(actual,selector){return{pass:$(actual).filter(selector).length}}}},toBeDisabled:function(){return{compare:function(actual){return{pass:$(actual).is(":disabled")}}}},toBeFocused:function(){return{compare:function(actual){return{pass:$(actual)[0]===$(actual)[0].ownerDocument.activeElement}}}},toHandle:function(){return{compare:function(actual,event){var events=$._data($(actual).get(0),"events");if(!events||!event||"string"!=typeof event)return{pass:!1};var namespaces=event.split("."),eventType=namespaces.shift(),sortedNamespaces=namespaces.slice(0).sort(),namespaceRegExp=new RegExp("(^|\\.)"+sortedNamespaces.join("\\.(?:.*\\.)?")+"(\\.|$)");if(!events[eventType]||!namespaces.length)return{pass:events[eventType]&&events[eventType].length>0};for(var i=0;i<events[eventType].length;i++){var namespace=events[eventType][i].namespace;if(namespaceRegExp.test(namespace))return{pass:!0}}return{pass:!1}}}},toHandleWith:function(){return{compare:function(actual,eventName,eventHandler){for(var normalizedEventName=eventName.split(".")[0],stack=$._data($(actual).get(0),"events")[normalizedEventName],i=0;i<stack.length;i++)if(stack[i].handler==eventHandler)return{pass:!0};return{pass:!1}}}},toHaveBeenTriggeredOn:function(){return{compare:function(actual,selector){var result={pass:jasmine.jQuery.events.wasTriggered(selector,actual)};return result.message=result.pass?"Expected event "+$(actual)+" not to have been triggered on "+selector:"Expected event "+$(actual)+" to have been triggered on "+selector,result}}},toHaveBeenTriggered:function(){return{compare:function(actual){var eventName=actual.eventName,selector=actual.selector,result={pass:jasmine.jQuery.events.wasTriggered(selector,eventName)};return result.message=result.pass?"Expected event "+eventName+" not to have been triggered on "+selector:"Expected event "+eventName+" to have been triggered on "+selector,result}}},toHaveBeenTriggeredOnAndWith:function(j$,customEqualityTesters){return{compare:function(actual,selector,expectedArgs){var wasTriggered=jasmine.jQuery.events.wasTriggered(selector,actual),result={pass:wasTriggered&&jasmine.jQuery.events.wasTriggeredWith(selector,actual,expectedArgs,j$,customEqualityTesters)};if(wasTriggered){var actualArgs=jasmine.jQuery.events.args(selector,actual,expectedArgs)[1];result.message=result.pass?"Expected event "+actual+" not to have been triggered with "+jasmine.pp(expectedArgs)+" but it was triggered with "+jasmine.pp(actualArgs):"Expected event "+actual+" to have been triggered with "+jasmine.pp(expectedArgs)+"  but it was triggered with "+jasmine.pp(actualArgs)}else result.message=result.pass?"Expected event "+actual+" not to have been triggered on "+selector:"Expected event "+actual+" to have been triggered on "+selector;return result}}},toHaveBeenPreventedOn:function(){return{compare:function(actual,selector){var result={pass:jasmine.jQuery.events.wasPrevented(selector,actual)};return result.message=result.pass?"Expected event "+actual+" not to have been prevented on "+selector:"Expected event "+actual+" to have been prevented on "+selector,result}}},toHaveBeenPrevented:function(){return{compare:function(actual){var eventName=actual.eventName,selector=actual.selector,result={pass:jasmine.jQuery.events.wasPrevented(selector,eventName)};return result.message=result.pass?"Expected event "+eventName+" not to have been prevented on "+selector:"Expected event "+eventName+" to have been prevented on "+selector,result}}},toHaveBeenStoppedOn:function(){return{compare:function(actual,selector){var result={pass:jasmine.jQuery.events.wasStopped(selector,actual)};return result.message=result.pass?"Expected event "+actual+" not to have been stopped on "+selector:"Expected event "+actual+" to have been stopped on "+selector,result}}},toHaveBeenStopped:function(){return{compare:function(actual){var eventName=actual.eventName,selector=actual.selector,result={pass:jasmine.jQuery.events.wasStopped(selector,eventName)};return result.message=result.pass?"Expected event "+eventName+" not to have been stopped on "+selector:"Expected event "+eventName+" to have been stopped on "+selector,result}}}}),jasmine.getEnv().addCustomEqualityTester(function(a,b){if(a&&b){if(a instanceof $||jasmine.isDomNode(a)){var $a=$(a);return b instanceof $?$a.length==b.length&&a.is(b):$a.is(b)}if(b instanceof $||jasmine.isDomNode(b)){var $b=$(b);return a instanceof jQuery?a.length==$b.length&&$b.is(a):$(b).is(a)}}}),jasmine.getEnv().addCustomEqualityTester(function(a,b){return a instanceof jQuery&&b instanceof jQuery&&a.size()==b.size()?a.is(b):void 0})}),afterEach(function(){jasmine.getFixtures().cleanUp(),jasmine.getStyleFixtures().cleanUp(),jasmine.jQuery.events.cleanUp()}),window.readFixtures=function(){return jasmine.getFixtures().proxyCallTo_("read",arguments)},window.preloadFixtures=function(){jasmine.getFixtures().proxyCallTo_("preload",arguments)},window.loadFixtures=function(){jasmine.getFixtures().proxyCallTo_("load",arguments)},window.appendLoadFixtures=function(){jasmine.getFixtures().proxyCallTo_("appendLoad",arguments)},window.setFixtures=function(){return jasmine.getFixtures().proxyCallTo_("set",arguments)},window.appendSetFixtures=function(){jasmine.getFixtures().proxyCallTo_("appendSet",arguments)},window.sandbox=function(attributes){return jasmine.getFixtures().sandbox(attributes)},window.spyOnEvent=function(selector,eventName){return jasmine.jQuery.events.spyOn(selector,eventName)},window.preloadStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("preload",arguments)},window.loadStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("load",arguments)},window.appendLoadStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("appendLoad",arguments)},window.setStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("set",arguments)},window.appendSetStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("appendSet",arguments)},window.loadJSONFixtures=function(){return jasmine.getJSONFixtures().proxyCallTo_("load",arguments)},window.getJSONFixture=function(url){return jasmine.getJSONFixtures().proxyCallTo_("read",arguments)[url]}}(window,window.jasmine,window.jQuery),getJasmineRequireObj().core=function(jRequire){var j$={};return jRequire.base(j$),j$.util=jRequire.util(),j$.Any=jRequire.Any(),j$.CallTracker=jRequire.CallTracker(),j$.Clock=jRequire.Clock(),j$.DelayedFunctionScheduler=jRequire.DelayedFunctionScheduler(),j$.Env=jRequire.Env(j$),j$.ExceptionFormatter=jRequire.ExceptionFormatter(),j$.Expectation=jRequire.Expectation(),j$.buildExpectationResult=jRequire.buildExpectationResult(),j$.JsApiReporter=jRequire.JsApiReporter(),j$.matchersUtil=jRequire.matchersUtil(j$),j$.ObjectContaining=jRequire.ObjectContaining(j$),j$.pp=jRequire.pp(j$),j$.QueueRunner=jRequire.QueueRunner(),j$.ReportDispatcher=jRequire.ReportDispatcher(),j$.Spec=jRequire.Spec(j$),j$.SpyStrategy=jRequire.SpyStrategy(),j$.Suite=jRequire.Suite(),j$.Timer=jRequire.Timer(),j$.version=jRequire.version(),j$.matchers=jRequire.requireMatchers(jRequire,j$),j$},getJasmineRequireObj().requireMatchers=function(jRequire,j$){for(var availableMatchers=["toBe","toBeCloseTo","toBeDefined","toBeFalsy","toBeGreaterThan","toBeLessThan","toBeNaN","toBeNull","toBeTruthy","toBeUndefined","toContain","toEqual","toHaveBeenCalled","toHaveBeenCalledWith","toMatch","toThrow","toThrowError"],matchers={},i=0;i<availableMatchers.length;i++){var name=availableMatchers[i];matchers[name]=jRequire[name](j$)}return matchers},getJasmineRequireObj().base=function(j$){j$.unimplementedMethod_=function(){throw new Error("unimplemented method")},j$.MAX_PRETTY_PRINT_DEPTH=40,j$.DEFAULT_TIMEOUT_INTERVAL=5e3,j$.getGlobal=function(){var jasmineGlobal=eval.call(null,"this");return function(){return jasmineGlobal}}(),j$.getEnv=function(options){var env=j$.currentEnv_=j$.currentEnv_||new j$.Env(options);return env},j$.isArray_=function(value){return j$.isA_("Array",value)},j$.isString_=function(value){return j$.isA_("String",value)},j$.isNumber_=function(value){return j$.isA_("Number",value)},j$.isA_=function(typeName,value){return Object.prototype.toString.apply(value)==="[object "+typeName+"]"},j$.isDomNode=function(obj){return obj.nodeType>0},j$.any=function(clazz){return new j$.Any(clazz)},j$.objectContaining=function(sample){return new j$.ObjectContaining(sample)},j$.createSpy=function(name,originalFn){var spyStrategy=new j$.SpyStrategy({name:name,fn:originalFn,getSpy:function(){return spy}}),callTracker=new j$.CallTracker,spy=function(){return callTracker.track({object:this,args:Array.prototype.slice.apply(arguments)}),spyStrategy.exec.apply(this,arguments)};for(var prop in originalFn){if("and"===prop||"calls"===prop)throw new Error("Jasmine spies would overwrite the 'and' and 'calls' properties on the object being spied upon");spy[prop]=originalFn[prop]}return spy.and=spyStrategy,spy.calls=callTracker,spy},j$.isSpy=function(putativeSpy){return putativeSpy?putativeSpy.and instanceof j$.SpyStrategy&&putativeSpy.calls instanceof j$.CallTracker:!1},j$.createSpyObj=function(baseName,methodNames){if(!j$.isArray_(methodNames)||0===methodNames.length)throw"createSpyObj requires a non-empty array of method names to create spies for";for(var obj={},i=0;i<methodNames.length;i++)obj[methodNames[i]]=j$.createSpy(baseName+"."+methodNames[i]);return obj}},getJasmineRequireObj().util=function(){var util={};return util.inherit=function(childClass,parentClass){var Subclass=function(){};Subclass.prototype=parentClass.prototype,childClass.prototype=new Subclass},util.htmlEscape=function(str){return str?str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):str},util.argsToArray=function(args){for(var arrayOfArgs=[],i=0;i<args.length;i++)arrayOfArgs.push(args[i]);return arrayOfArgs},util.isUndefined=function(obj){return void 0===obj},util},getJasmineRequireObj().Spec=function(j$){function Spec(attrs){this.expectationFactory=attrs.expectationFactory,this.resultCallback=attrs.resultCallback||function(){},this.id=attrs.id,this.description=attrs.description||"",this.fn=attrs.fn,this.beforeFns=attrs.beforeFns||function(){return[]},this.afterFns=attrs.afterFns||function(){return[]},this.onStart=attrs.onStart||function(){},this.exceptionFormatter=attrs.exceptionFormatter||function(){},this.getSpecName=attrs.getSpecName||function(){return""},this.expectationResultFactory=attrs.expectationResultFactory||function(){},this.queueRunnerFactory=attrs.queueRunnerFactory||function(){},this.catchingExceptions=attrs.catchingExceptions||function(){return!0},this.timer=attrs.timer||{setTimeout:setTimeout,clearTimeout:clearTimeout},this.fn||this.pend(),this.result={id:this.id,description:this.description,fullName:this.getFullName(),failedExpectations:[]}}return Spec.prototype.addExpectationResult=function(passed,data){passed||this.result.failedExpectations.push(this.expectationResultFactory(data))},Spec.prototype.expect=function(actual){return this.expectationFactory(actual,this)},Spec.prototype.execute=function(onComplete){function timeoutable(fn){return function(done){timeout=Function.prototype.apply.apply(self.timer.setTimeout,[j$.getGlobal(),[function(){onException(new Error("Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL.")),done()},j$.DEFAULT_TIMEOUT_INTERVAL]]);var callDone=function(){clearTimeoutable(),done()};fn.call(this,callDone)}}function clearTimeoutable(){Function.prototype.apply.apply(self.timer.clearTimeout,[j$.getGlobal(),[timeout]]),timeout=void 0}function onException(e){return clearTimeoutable(),Spec.isPendingSpecException(e)?void self.pend():void self.addExpectationResult(!1,{matcherName:"",passed:!1,expected:"",actual:"",error:e})}function complete(){self.result.status=self.status(),self.resultCallback(self.result),onComplete&&onComplete()}var timeout,self=this;if(this.onStart(this),this.markedPending||this.disabled)return void complete();for(var allFns=this.beforeFns().concat(this.fn).concat(this.afterFns()),allTimeoutableFns=[],i=0;i<allFns.length;i++){var fn=allFns[i];allTimeoutableFns.push(fn.length>0?timeoutable(fn):fn)}this.queueRunnerFactory({fns:allTimeoutableFns,onException:onException,onComplete:complete})},Spec.prototype.disable=function(){this.disabled=!0},Spec.prototype.pend=function(){this.markedPending=!0},Spec.prototype.status=function(){return this.disabled?"disabled":this.markedPending?"pending":this.result.failedExpectations.length>0?"failed":"passed"},Spec.prototype.getFullName=function(){return this.getSpecName(this)},Spec.pendingSpecExceptionMessage="=> marked Pending",Spec.isPendingSpecException=function(e){return-1!==e.toString().indexOf(Spec.pendingSpecExceptionMessage)},Spec},void 0==typeof window&&"object"==typeof exports&&(exports.Spec=jasmineRequire.Spec),getJasmineRequireObj().Env=function(j$){function Env(options){function clearStack(fn){currentSpecCallbackDepth++,currentSpecCallbackDepth>=maximumSpecCallbackDepth?(currentSpecCallbackDepth=0,realSetTimeout(fn,0)):fn()}options=options||{};var self=this,global=options.global||j$.getGlobal(),totalSpecsDefined=0,catchExceptions=!0,realSetTimeout=j$.getGlobal().setTimeout,realClearTimeout=j$.getGlobal().clearTimeout;this.clock=new j$.Clock(global,new j$.DelayedFunctionScheduler);var runnableLookupTable={},spies=[],currentSpec=null,currentSuite=null,reporter=new j$.ReportDispatcher(["jasmineStarted","jasmineDone","suiteStarted","suiteDone","specStarted","specDone"]);this.specFilter=function(){return!0};var customEqualityTesters=[];this.addCustomEqualityTester=function(tester){customEqualityTesters.push(tester)},j$.Expectation.addCoreMatchers(j$.matchers);var nextSpecId=0,getNextSpecId=function(){return"spec"+nextSpecId++},nextSuiteId=0,getNextSuiteId=function(){return"suite"+nextSuiteId++},expectationFactory=function(actual,spec){function addExpectationResult(passed,result){return spec.addExpectationResult(passed,result)}return j$.Expectation.Factory({util:j$.matchersUtil,customEqualityTesters:customEqualityTesters,actual:actual,addExpectationResult:addExpectationResult})},specStarted=function(spec){currentSpec=spec,reporter.specStarted(spec.result)},beforeFns=function(suite){return function(){for(var befores=[];suite;)befores=befores.concat(suite.beforeFns),suite=suite.parentSuite;return befores.reverse()}},afterFns=function(suite){return function(){for(var afters=[];suite;)afters=afters.concat(suite.afterFns),suite=suite.parentSuite;return afters}},getSpecName=function(spec,suite){return suite.getFullName()+" "+spec.description},buildExpectationResult=j$.buildExpectationResult,exceptionFormatter=new j$.ExceptionFormatter,expectationResultFactory=function(attrs){return attrs.messageFormatter=exceptionFormatter.message,attrs.stackFormatter=exceptionFormatter.stack,buildExpectationResult(attrs)};this.catchExceptions=function(value){return catchExceptions=!!value},this.catchingExceptions=function(){return catchExceptions};var maximumSpecCallbackDepth=20,currentSpecCallbackDepth=0,catchException=function(e){return j$.Spec.isPendingSpecException(e)||catchExceptions},queueRunnerFactory=function(options){options.catchException=catchException,options.clearStack=options.clearStack||clearStack,new j$.QueueRunner(options).execute()},topSuite=new j$.Suite({env:this,id:getNextSuiteId(),description:"Jasmine__TopLevel__Suite",queueRunner:queueRunnerFactory,resultCallback:function(){}});runnableLookupTable[topSuite.id]=topSuite,currentSuite=topSuite,this.topSuite=function(){return topSuite},this.execute=function(runnablesToRun){runnablesToRun=runnablesToRun||[topSuite.id];for(var allFns=[],i=0;i<runnablesToRun.length;i++){var runnable=runnableLookupTable[runnablesToRun[i]];allFns.push(function(runnable){return function(done){runnable.execute(done)}}(runnable))}reporter.jasmineStarted({totalSpecsDefined:totalSpecsDefined}),queueRunnerFactory({fns:allFns,onComplete:reporter.jasmineDone})},this.addReporter=function(reporterToAdd){reporter.addReporter(reporterToAdd)},this.addMatchers=function(matchersToAdd){j$.Expectation.addMatchers(matchersToAdd)},this.spyOn=function(obj,methodName){if(j$.util.isUndefined(obj))throw new Error("spyOn could not find an object to spy upon for "+methodName+"()");if(j$.util.isUndefined(obj[methodName]))throw new Error(methodName+"() method does not exist");if(obj[methodName]&&j$.isSpy(obj[methodName]))throw new Error(methodName+" has already been spied upon");var spy=j$.createSpy(methodName,obj[methodName]);return spies.push({spy:spy,baseObj:obj,methodName:methodName,originalValue:obj[methodName]}),obj[methodName]=spy,spy};var suiteFactory=function(description){var suite=new j$.Suite({env:self,id:getNextSuiteId(),description:description,parentSuite:currentSuite,queueRunner:queueRunnerFactory,onStart:suiteStarted,resultCallback:function(attrs){reporter.suiteDone(attrs)}});return runnableLookupTable[suite.id]=suite,suite};this.describe=function(description,specDefinitions){var suite=suiteFactory(description),parentSuite=currentSuite;parentSuite.addChild(suite),currentSuite=suite;var declarationError=null;try{specDefinitions.call(suite)}catch(e){declarationError=e}return declarationError&&this.it("encountered a declaration exception",function(){throw declarationError}),currentSuite=parentSuite,suite},this.xdescribe=function(description,specDefinitions){var suite=this.describe(description,specDefinitions);return suite.disable(),suite};var specFactory=function(description,fn,suite){function removeAllSpies(){for(var i=0;i<spies.length;i++){var spyEntry=spies[i];spyEntry.baseObj[spyEntry.methodName]=spyEntry.originalValue}spies=[]}function specResultCallback(result){removeAllSpies(),j$.Expectation.resetMatchers(),customEqualityTesters=[],currentSpec=null,reporter.specDone(result)}totalSpecsDefined++;var spec=new j$.Spec({id:getNextSpecId(),beforeFns:beforeFns(suite),afterFns:afterFns(suite),expectationFactory:expectationFactory,exceptionFormatter:exceptionFormatter,resultCallback:specResultCallback,getSpecName:function(spec){return getSpecName(spec,suite)},onStart:specStarted,description:description,expectationResultFactory:expectationResultFactory,queueRunnerFactory:queueRunnerFactory,fn:fn,timer:{setTimeout:realSetTimeout,clearTimeout:realClearTimeout}});return runnableLookupTable[spec.id]=spec,self.specFilter(spec)||spec.disable(),spec},suiteStarted=function(suite){reporter.suiteStarted(suite.result)};this.it=function(description,fn){var spec=specFactory(description,fn,currentSuite);return currentSuite.addChild(spec),spec},this.xit=function(description,fn){var spec=this.it(description,fn);return spec.pend(),spec},this.expect=function(actual){return currentSpec.expect(actual)},this.beforeEach=function(beforeEachFunction){currentSuite.beforeEach(beforeEachFunction)},this.afterEach=function(afterEachFunction){currentSuite.afterEach(afterEachFunction)},this.pending=function(){throw j$.Spec.pendingSpecExceptionMessage}}return Env},getJasmineRequireObj().JsApiReporter=function(){function JsApiReporter(options){function storeSuite(result){suites[result.id]=result}var timer=options.timer||noopTimer,status="loaded";this.started=!1,this.finished=!1,this.jasmineStarted=function(){this.started=!0,status="started",timer.start()};var executionTime;this.jasmineDone=function(){this.finished=!0,executionTime=timer.elapsed(),status="done"},this.status=function(){return status};var suites={};this.suiteStarted=function(result){storeSuite(result)},this.suiteDone=function(result){storeSuite(result)},this.suites=function(){return suites};var specs=[];this.specStarted=function(){},this.specDone=function(result){specs.push(result)},this.specResults=function(index,length){return specs.slice(index,index+length)},this.specs=function(){return specs},this.executionTime=function(){return executionTime}}var noopTimer={start:function(){},elapsed:function(){return 0}};return JsApiReporter},getJasmineRequireObj().Any=function(){function Any(expectedObject){this.expectedObject=expectedObject}return Any.prototype.jasmineMatches=function(other){return this.expectedObject==String?"string"==typeof other||other instanceof String:this.expectedObject==Number?"number"==typeof other||other instanceof Number:this.expectedObject==Function?"function"==typeof other||other instanceof Function:this.expectedObject==Object?"object"==typeof other:this.expectedObject==Boolean?"boolean"==typeof other:other instanceof this.expectedObject},Any.prototype.jasmineToString=function(){return"<jasmine.any("+this.expectedClass+")>"},Any},getJasmineRequireObj().CallTracker=function(){function CallTracker(){var calls=[];this.track=function(context){calls.push(context)},this.any=function(){return!!calls.length},this.count=function(){return calls.length},this.argsFor=function(index){var call=calls[index];return call?call.args:[]},this.all=function(){return calls},this.allArgs=function(){for(var callArgs=[],i=0;i<calls.length;i++)callArgs.push(calls[i].args);return callArgs},this.first=function(){return calls[0]},this.mostRecent=function(){return calls[calls.length-1]},this.reset=function(){calls=[]}}return CallTracker},getJasmineRequireObj().Clock=function(){function Clock(global,delayedFunctionScheduler){function legacyIE(){return!(realTimingFunctions.setTimeout||realTimingFunctions.setInterval).apply}function replace(dest,source){for(var prop in source)dest[prop]=source[prop]}function setTimeout(fn,delay){return delayedFunctionScheduler.scheduleFunction(fn,delay,argSlice(arguments,2))
}function clearTimeout(id){return delayedFunctionScheduler.removeFunctionWithId(id)}function setInterval(fn,interval){return delayedFunctionScheduler.scheduleFunction(fn,interval,argSlice(arguments,2),!0)}function clearInterval(id){return delayedFunctionScheduler.removeFunctionWithId(id)}function argSlice(argsObj){return Array.prototype.slice.call(argsObj,2)}var timer,self=this,realTimingFunctions={setTimeout:global.setTimeout,clearTimeout:global.clearTimeout,setInterval:global.setInterval,clearInterval:global.clearInterval},fakeTimingFunctions={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval},installed=!1;return self.install=function(){replace(global,fakeTimingFunctions),timer=fakeTimingFunctions,installed=!0},self.uninstall=function(){delayedFunctionScheduler.reset(),replace(global,realTimingFunctions),timer=realTimingFunctions,installed=!1},self.setTimeout=function(fn,delay){if(legacyIE()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setTimeout without a polyfill");return timer.setTimeout(fn,delay)}return Function.prototype.apply.apply(timer.setTimeout,[global,arguments])},self.setInterval=function(fn,delay){if(legacyIE()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setInterval without a polyfill");return timer.setInterval(fn,delay)}return Function.prototype.apply.apply(timer.setInterval,[global,arguments])},self.clearTimeout=function(id){return Function.prototype.call.apply(timer.clearTimeout,[global,id])},self.clearInterval=function(id){return Function.prototype.call.apply(timer.clearInterval,[global,id])},self.tick=function(millis){if(!installed)throw new Error("Mock clock is not installed, use jasmine.clock().install()");delayedFunctionScheduler.tick(millis)},self}return Clock},getJasmineRequireObj().DelayedFunctionScheduler=function(){function DelayedFunctionScheduler(){function indexOfFirstToPass(array,testFn){for(var index=-1,i=0;i<array.length;++i)if(testFn(array[i])){index=i;break}return index}function deleteFromLookup(key){var value=Number(key),i=indexOfFirstToPass(scheduledLookup,function(millis){return millis===value});i>-1&&scheduledLookup.splice(i,1)}function reschedule(scheduledFn){self.scheduleFunction(scheduledFn.funcToCall,scheduledFn.millis,scheduledFn.params,!0,scheduledFn.timeoutKey,scheduledFn.runAtMillis+scheduledFn.millis)}function runScheduledFunctions(endTime){if(!(0===scheduledLookup.length||scheduledLookup[0]>endTime))do{currentTime=scheduledLookup.shift();var funcsToRun=scheduledFunctions[currentTime];delete scheduledFunctions[currentTime];for(var i=0;i<funcsToRun.length;++i){var funcToRun=funcsToRun[i];funcToRun.funcToCall.apply(null,funcToRun.params||[]),funcToRun.recurring&&reschedule(funcToRun)}}while(scheduledLookup.length>0&&currentTime!==endTime&&scheduledLookup[0]<=endTime)}var self=this,scheduledLookup=[],scheduledFunctions={},currentTime=0,delayedFnCount=0;return self.tick=function(millis){millis=millis||0;var endTime=currentTime+millis;runScheduledFunctions(endTime),currentTime=endTime},self.scheduleFunction=function(funcToCall,millis,params,recurring,timeoutKey,runAtMillis){var f;f="string"==typeof funcToCall?function(){return eval(funcToCall)}:funcToCall,millis=millis||0,timeoutKey=timeoutKey||++delayedFnCount,runAtMillis=runAtMillis||currentTime+millis;var funcToSchedule={runAtMillis:runAtMillis,funcToCall:f,recurring:recurring,params:params,timeoutKey:timeoutKey,millis:millis};return runAtMillis in scheduledFunctions?scheduledFunctions[runAtMillis].push(funcToSchedule):(scheduledFunctions[runAtMillis]=[funcToSchedule],scheduledLookup.push(runAtMillis),scheduledLookup.sort(function(a,b){return a-b})),timeoutKey},self.removeFunctionWithId=function(timeoutKey){for(var runAtMillis in scheduledFunctions){var funcs=scheduledFunctions[runAtMillis],i=indexOfFirstToPass(funcs,function(func){return func.timeoutKey===timeoutKey});if(i>-1){1===funcs.length?(delete scheduledFunctions[runAtMillis],deleteFromLookup(runAtMillis)):funcs.splice(i,1);break}}},self.reset=function(){currentTime=0,scheduledLookup=[],scheduledFunctions={},delayedFnCount=0},self}return DelayedFunctionScheduler},getJasmineRequireObj().ExceptionFormatter=function(){function ExceptionFormatter(){this.message=function(error){var message=error.name+": "+error.message;return(error.fileName||error.sourceURL)&&(message+=" in "+(error.fileName||error.sourceURL)),(error.line||error.lineNumber)&&(message+=" (line "+(error.line||error.lineNumber)+")"),message},this.stack=function(error){return error?error.stack:null}}return ExceptionFormatter},getJasmineRequireObj().Expectation=function(){function Expectation(options){this.util=options.util||{buildFailureMessage:function(){}},this.customEqualityTesters=options.customEqualityTesters||[],this.actual=options.actual,this.addExpectationResult=options.addExpectationResult||function(){},this.isNot=options.isNot;for(var matcherName in matchers)this[matcherName]=matchers[matcherName]}var matchers={};return Expectation.prototype.wrapCompare=function(name,matcherFactory){return function(){function defaultNegativeCompare(){var result=matcher.compare.apply(null,args);return result.pass=!result.pass,result}var args=Array.prototype.slice.call(arguments,0),expected=args.slice(0),message="";args.unshift(this.actual);var matcher=matcherFactory(this.util,this.customEqualityTesters),matcherCompare=matcher.compare;this.isNot&&(matcherCompare=matcher.negativeCompare||defaultNegativeCompare);var result=matcherCompare.apply(null,args);result.pass||(result.message?message=result.message:(args.unshift(this.isNot),args.unshift(name),message=this.util.buildFailureMessage.apply(null,args))),1==expected.length&&(expected=expected[0]),this.addExpectationResult(result.pass,{matcherName:name,passed:result.pass,message:message,actual:this.actual,expected:expected})}},Expectation.addCoreMatchers=function(matchers){var prototype=Expectation.prototype;for(var matcherName in matchers){var matcher=matchers[matcherName];prototype[matcherName]=prototype.wrapCompare(matcherName,matcher)}},Expectation.addMatchers=function(matchersToAdd){for(var name in matchersToAdd){var matcher=matchersToAdd[name];matchers[name]=Expectation.prototype.wrapCompare(name,matcher)}},Expectation.resetMatchers=function(){for(var name in matchers)delete matchers[name]},Expectation.Factory=function(options){options=options||{};var expect=new Expectation(options);return options.isNot=!0,expect.not=new Expectation(options),expect},Expectation},getJasmineRequireObj().buildExpectationResult=function(){function buildExpectationResult(options){function message(){return options.passed?"Passed.":options.message?options.message:options.error?messageFormatter(options.error):""}function stack(){if(options.passed)return"";var error=options.error;if(!error)try{throw new Error(message())}catch(e){error=e}return stackFormatter(error)}var messageFormatter=options.messageFormatter||function(){},stackFormatter=options.stackFormatter||function(){};return{matcherName:options.matcherName,expected:options.expected,actual:options.actual,message:message(),stack:stack(),passed:options.passed}}return buildExpectationResult},getJasmineRequireObj().ObjectContaining=function(j$){function ObjectContaining(sample){this.sample=sample}return ObjectContaining.prototype.jasmineMatches=function(other,mismatchKeys,mismatchValues){if("object"!=typeof this.sample)throw new Error("You must provide an object to objectContaining, not '"+this.sample+"'.");mismatchKeys=mismatchKeys||[],mismatchValues=mismatchValues||[];var hasKey=function(obj,keyName){return null!==obj&&!j$.util.isUndefined(obj[keyName])};for(var property in this.sample)!hasKey(other,property)&&hasKey(this.sample,property)?mismatchKeys.push("expected has key '"+property+"', but missing from actual."):j$.matchersUtil.equals(this.sample[property],other[property])||mismatchValues.push("'"+property+"' was '"+(other[property]?j$.util.htmlEscape(other[property].toString()):other[property])+"' in actual, but was '"+(this.sample[property]?j$.util.htmlEscape(this.sample[property].toString()):this.sample[property])+"' in expected.");return 0===mismatchKeys.length&&0===mismatchValues.length},ObjectContaining.prototype.jasmineToString=function(){return"<jasmine.objectContaining("+j$.pp(this.sample)+")>"},ObjectContaining},getJasmineRequireObj().pp=function(j$){function PrettyPrinter(){this.ppNestLevel_=0}function StringPrettyPrinter(){PrettyPrinter.call(this),this.string=""}return PrettyPrinter.prototype.format=function(value){this.ppNestLevel_++;try{j$.util.isUndefined(value)?this.emitScalar("undefined"):null===value?this.emitScalar("null"):value===j$.getGlobal()?this.emitScalar("<global>"):value.jasmineToString?this.emitScalar(value.jasmineToString()):"string"==typeof value?this.emitString(value):j$.isSpy(value)?this.emitScalar("spy on "+value.and.identity()):value instanceof RegExp?this.emitScalar(value.toString()):"function"==typeof value?this.emitScalar("Function"):"number"==typeof value.nodeType?this.emitScalar("HTMLNode"):value instanceof Date?this.emitScalar("Date("+value+")"):value.__Jasmine_been_here_before__?this.emitScalar("<circular reference: "+(j$.isArray_(value)?"Array":"Object")+">"):j$.isArray_(value)||j$.isA_("Object",value)?(value.__Jasmine_been_here_before__=!0,j$.isArray_(value)?this.emitArray(value):this.emitObject(value),delete value.__Jasmine_been_here_before__):this.emitScalar(value.toString())}finally{this.ppNestLevel_--}},PrettyPrinter.prototype.iterateObject=function(obj,fn){for(var property in obj)obj.hasOwnProperty(property)&&"__Jasmine_been_here_before__"!=property&&fn(property,obj.__lookupGetter__?!j$.util.isUndefined(obj.__lookupGetter__(property))&&null!==obj.__lookupGetter__(property):!1)},PrettyPrinter.prototype.emitArray=j$.unimplementedMethod_,PrettyPrinter.prototype.emitObject=j$.unimplementedMethod_,PrettyPrinter.prototype.emitScalar=j$.unimplementedMethod_,PrettyPrinter.prototype.emitString=j$.unimplementedMethod_,j$.util.inherit(StringPrettyPrinter,PrettyPrinter),StringPrettyPrinter.prototype.emitScalar=function(value){this.append(value)},StringPrettyPrinter.prototype.emitString=function(value){this.append("'"+value+"'")},StringPrettyPrinter.prototype.emitArray=function(array){if(this.ppNestLevel_>j$.MAX_PRETTY_PRINT_DEPTH)return void this.append("Array");this.append("[ ");for(var i=0;i<array.length;i++)i>0&&this.append(", "),this.format(array[i]);this.append(" ]")},StringPrettyPrinter.prototype.emitObject=function(obj){if(this.ppNestLevel_>j$.MAX_PRETTY_PRINT_DEPTH)return void this.append("Object");var self=this;this.append("{ ");var first=!0;this.iterateObject(obj,function(property,isGetter){first?first=!1:self.append(", "),self.append(property),self.append(" : "),isGetter?self.append("<getter>"):self.format(obj[property])}),this.append(" }")},StringPrettyPrinter.prototype.append=function(value){this.string+=value},function(value){var stringPrettyPrinter=new StringPrettyPrinter;return stringPrettyPrinter.format(value),stringPrettyPrinter.string}},getJasmineRequireObj().QueueRunner=function(){function QueueRunner(attrs){this.fns=attrs.fns||[],this.onComplete=attrs.onComplete||function(){},this.clearStack=attrs.clearStack||function(fn){fn()},this.onException=attrs.onException||function(){},this.catchException=attrs.catchException||function(){return!0},this.userContext={}}return QueueRunner.prototype.execute=function(){this.run(this.fns,0)},QueueRunner.prototype.run=function(fns,recursiveIndex){function attemptSync(fn){try{fn.call(self.userContext)}catch(e){handleException(e)}}function attemptAsync(fn){var next=function(){self.run(fns,iterativeIndex+1)};try{fn.call(self.userContext,next)}catch(e){handleException(e),next()}}function handleException(e){if(self.onException(e),!self.catchException(e))throw e}var iterativeIndex,length=fns.length,self=this;for(iterativeIndex=recursiveIndex;length>iterativeIndex;iterativeIndex++){var fn=fns[iterativeIndex];if(fn.length>0)return attemptAsync(fn);attemptSync(fn)}var runnerDone=iterativeIndex>=length;runnerDone&&this.clearStack(this.onComplete)},QueueRunner},getJasmineRequireObj().ReportDispatcher=function(){function ReportDispatcher(methods){function dispatch(method,args){for(var i=0;i<reporters.length;i++){var reporter=reporters[i];reporter[method]&&reporter[method].apply(reporter,args)}}for(var dispatchedMethods=methods||[],i=0;i<dispatchedMethods.length;i++){var method=dispatchedMethods[i];this[method]=function(m){return function(){dispatch(m,arguments)}}(method)}var reporters=[];return this.addReporter=function(reporter){reporters.push(reporter)},this}return ReportDispatcher},getJasmineRequireObj().SpyStrategy=function(){function SpyStrategy(options){options=options||{};var identity=options.name||"unknown",originalFn=options.fn||function(){},getSpy=options.getSpy||function(){},plan=function(){};this.identity=function(){return identity},this.exec=function(){return plan.apply(this,arguments)},this.callThrough=function(){return plan=originalFn,getSpy()},this.returnValue=function(value){return plan=function(){return value},getSpy()},this.throwError=function(something){var error=something instanceof Error?something:new Error(something);return plan=function(){throw error},getSpy()},this.callFake=function(fn){return plan=fn,getSpy()},this.stub=function(){return plan=function(){},getSpy()}}return SpyStrategy},getJasmineRequireObj().Suite=function(){function Suite(attrs){this.env=attrs.env,this.id=attrs.id,this.parentSuite=attrs.parentSuite,this.description=attrs.description,this.onStart=attrs.onStart||function(){},this.resultCallback=attrs.resultCallback||function(){},this.clearStack=attrs.clearStack||function(fn){fn()},this.beforeFns=[],this.afterFns=[],this.queueRunner=attrs.queueRunner||function(){},this.disabled=!1,this.children=[],this.result={id:this.id,status:this.disabled?"disabled":"",description:this.description,fullName:this.getFullName()}}return Suite.prototype.getFullName=function(){for(var fullName=this.description,parentSuite=this.parentSuite;parentSuite;parentSuite=parentSuite.parentSuite)parentSuite.parentSuite&&(fullName=parentSuite.description+" "+fullName);return fullName},Suite.prototype.disable=function(){this.disabled=!0},Suite.prototype.beforeEach=function(fn){this.beforeFns.unshift(fn)},Suite.prototype.afterEach=function(fn){this.afterFns.unshift(fn)},Suite.prototype.addChild=function(child){this.children.push(child)},Suite.prototype.execute=function(onComplete){function complete(){self.resultCallback(self.result),onComplete&&onComplete()}function wrapChildAsAsync(child){return function(done){child.execute(done)}}var self=this;if(this.disabled)return void complete();for(var allFns=[],i=0;i<this.children.length;i++)allFns.push(wrapChildAsAsync(this.children[i]));this.onStart(this),this.queueRunner({fns:allFns,onComplete:complete})},Suite},void 0==typeof window&&"object"==typeof exports&&(exports.Suite=jasmineRequire.Suite),getJasmineRequireObj().Timer=function(){function Timer(options){options=options||{};var startTime,now=options.now||function(){return(new Date).getTime()};this.start=function(){startTime=now()},this.elapsed=function(){return now()-startTime}}return Timer},getJasmineRequireObj().matchersUtil=function(j$){function eq(a,b,aStack,bStack,customTesters){function has(obj,key){return obj.hasOwnProperty(key)}function isFunction(obj){return"function"==typeof obj}for(var result=!0,i=0;i<customTesters.length;i++){var customTesterResult=customTesters[i](a,b);if(!j$.util.isUndefined(customTesterResult))return customTesterResult}if(a instanceof j$.Any&&(result=a.jasmineMatches(b)))return!0;if(b instanceof j$.Any&&(result=b.jasmineMatches(a)))return!0;if(b instanceof j$.ObjectContaining&&(result=b.jasmineMatches(a)))return!0;if(a instanceof Error&&b instanceof Error)return a.message==b.message;if(a===b)return 0!==a||1/a==1/b;if(null===a||null===b)return a===b;var className=Object.prototype.toString.call(a);if(className!=Object.prototype.toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0===a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;aStack.push(a),bStack.push(b);var size=0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack,customTesters)););}else{var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(isFunction(aCtor)&&aCtor instanceof aCtor&&isFunction(bCtor)&&bCtor instanceof bCtor))return!1;for(var key in a)if(has(a,key)&&(size++,!(result=has(b,key)&&eq(a[key],b[key],aStack,bStack,customTesters))))break;if(result){for(key in b)if(has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result}return{equals:function(a,b,customTesters){return customTesters=customTesters||[],eq(a,b,[],[],customTesters)},contains:function(haystack,needle,customTesters){if(customTesters=customTesters||[],"[object Array]"===Object.prototype.toString.apply(haystack)){for(var i=0;i<haystack.length;i++)if(eq(haystack[i],needle,[],[],customTesters))return!0;return!1}return haystack.indexOf(needle)>=0},buildFailureMessage:function(){var args=Array.prototype.slice.call(arguments,0),matcherName=args[0],isNot=args[1],actual=args[2],expected=args.slice(3),englishyPredicate=matcherName.replace(/[A-Z]/g,function(s){return" "+s.toLowerCase()}),message="Expected "+j$.pp(actual)+(isNot?" not ":" ")+englishyPredicate;if(expected.length>0)for(var i=0;i<expected.length;i++)i>0&&(message+=","),message+=" "+j$.pp(expected[i]);return message+"."}}},getJasmineRequireObj().toBe=function(){function toBe(){return{compare:function(actual,expected){return{pass:actual===expected}}}}return toBe},getJasmineRequireObj().toBeCloseTo=function(){function toBeCloseTo(){return{compare:function(actual,expected,precision){return 0!==precision&&(precision=precision||2),{pass:Math.abs(expected-actual)<Math.pow(10,-precision)/2}}}}return toBeCloseTo},getJasmineRequireObj().toBeDefined=function(){function toBeDefined(){return{compare:function(actual){return{pass:void 0!==actual}}}}return toBeDefined},getJasmineRequireObj().toBeFalsy=function(){function toBeFalsy(){return{compare:function(actual){return{pass:!actual}}}}return toBeFalsy},getJasmineRequireObj().toBeGreaterThan=function(){function toBeGreaterThan(){return{compare:function(actual,expected){return{pass:actual>expected}}}}return toBeGreaterThan},getJasmineRequireObj().toBeLessThan=function(){function toBeLessThan(){return{compare:function(actual,expected){return{pass:expected>actual}}}}return toBeLessThan},getJasmineRequireObj().toBeNaN=function(j$){function toBeNaN(){return{compare:function(actual){var result={pass:actual!==actual};return result.message=result.pass?"Expected actual not to be NaN.":"Expected "+j$.pp(actual)+" to be NaN.",result}}}return toBeNaN},getJasmineRequireObj().toBeNull=function(){function toBeNull(){return{compare:function(actual){return{pass:null===actual}}}}return toBeNull},getJasmineRequireObj().toBeTruthy=function(){function toBeTruthy(){return{compare:function(actual){return{pass:!!actual}}}}return toBeTruthy},getJasmineRequireObj().toBeUndefined=function(){function toBeUndefined(){return{compare:function(actual){return{pass:void 0===actual}}}}return toBeUndefined},getJasmineRequireObj().toContain=function(){function toContain(util,customEqualityTesters){return customEqualityTesters=customEqualityTesters||[],{compare:function(actual,expected){return{pass:util.contains(actual,expected,customEqualityTesters)}}}}return toContain},getJasmineRequireObj().toEqual=function(){function toEqual(util,customEqualityTesters){return customEqualityTesters=customEqualityTesters||[],{compare:function(actual,expected){var result={pass:!1};return result.pass=util.equals(actual,expected,customEqualityTesters),result}}}return toEqual},getJasmineRequireObj().toHaveBeenCalled=function(j$){function toHaveBeenCalled(){return{compare:function(actual){var result={};if(!j$.isSpy(actual))throw new Error("Expected a spy, but got "+j$.pp(actual)+".");if(arguments.length>1)throw new Error("toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith");return result.pass=actual.calls.any(),result.message=result.pass?"Expected spy "+actual.and.identity()+" not to have been called.":"Expected spy "+actual.and.identity()+" to have been called.",result}}}return toHaveBeenCalled},getJasmineRequireObj().toHaveBeenCalledWith=function(j$){function toHaveBeenCalledWith(util){return{compare:function(){var args=Array.prototype.slice.call(arguments,0),actual=args[0],expectedArgs=args.slice(1),result={pass:!1};if(!j$.isSpy(actual))throw new Error("Expected a spy, but got "+j$.pp(actual)+".");return actual.calls.any()?(util.contains(actual.calls.allArgs(),expectedArgs)?(result.pass=!0,result.message="Expected spy "+actual.and.identity()+" not to have been called with "+j$.pp(expectedArgs)+" but it was."):result.message="Expected spy "+actual.and.identity()+" to have been called with "+j$.pp(expectedArgs)+" but actual calls were "+j$.pp(actual.calls.allArgs()).replace(/^\[ | \]$/g,"")+".",result):(result.message="Expected spy "+actual.and.identity()+" to have been called with "+j$.pp(expectedArgs)+" but it was never called.",result)}}}return toHaveBeenCalledWith},getJasmineRequireObj().toMatch=function(){function toMatch(){return{compare:function(actual,expected){var regexp=new RegExp(expected);return{pass:regexp.test(actual)}}}}return toMatch},getJasmineRequireObj().toThrow=function(j$){function toThrow(util){return{compare:function(actual,expected){var thrown,result={pass:!1},threw=!1;if("function"!=typeof actual)throw new Error("Actual is not a Function");try{actual()}catch(e){threw=!0,thrown=e}return threw?1==arguments.length?(result.pass=!0,result.message="Expected function not to throw, but it threw "+j$.pp(thrown)+".",result):(util.equals(thrown,expected)?(result.pass=!0,result.message="Expected function not to throw "+j$.pp(expected)+"."):result.message="Expected function to throw "+j$.pp(expected)+", but it threw "+j$.pp(thrown)+".",result):(result.message="Expected function to throw an exception.",result)}}}return toThrow},getJasmineRequireObj().toThrowError=function(j$){function toThrowError(util){return{compare:function(actual){function fnNameFor(func){return func.name||func.toString().match(/^\s*function\s*(\w*)\s*\(/)[1]}function pass(notMessage){return{pass:!0,message:notMessage}}function fail(message){return{pass:!1,message:message}}function extractExpectedParams(){if(1!=arguments.length)if(2==arguments.length){var expected=arguments[1];if(expected instanceof RegExp?regexp=expected:"string"==typeof expected?message=expected:checkForAnErrorType(expected)&&(errorType=expected),!(errorType||message||regexp))throw new Error("Expected is not an Error, string, or RegExp.")}else{if(!checkForAnErrorType(arguments[1]))throw new Error("Expected error type is not an Error.");if(errorType=arguments[1],arguments[2]instanceof RegExp)regexp=arguments[2];else{if("string"!=typeof arguments[2])throw new Error("Expected error message is not a string or RegExp.");message=arguments[2]}}}function checkForAnErrorType(type){if("function"!=typeof type)return!1;var Surrogate=function(){};return Surrogate.prototype=type.prototype,new Surrogate instanceof Error}var thrown,errorType,message,regexp,name,constructorName,threw=!1;if("function"!=typeof actual)throw new Error("Actual is not a Function");extractExpectedParams.apply(null,arguments);try{actual()}catch(e){threw=!0,thrown=e}return threw?thrown instanceof Error?1==arguments.length?pass("Expected function not to throw an Error, but it threw "+fnNameFor(thrown)+"."):(errorType&&(name=fnNameFor(errorType),constructorName=fnNameFor(thrown.constructor)),errorType&&message?thrown.constructor==errorType&&util.equals(thrown.message,message)?pass("Expected function not to throw "+name+' with message "'+message+'".'):fail("Expected function to throw "+name+' with message "'+message+'", but it threw '+constructorName+' with message "'+thrown.message+'".'):errorType&&regexp?thrown.constructor==errorType&&regexp.test(thrown.message)?pass("Expected function not to throw "+name+" with message matching "+regexp+"."):fail("Expected function to throw "+name+" with message matching "+regexp+", but it threw "+constructorName+' with message "'+thrown.message+'".'):errorType?thrown.constructor==errorType?pass("Expected function not to throw "+name+"."):fail("Expected function to throw "+name+", but it threw "+constructorName+"."):message?thrown.message==message?pass("Expected function not to throw an exception with message "+j$.pp(message)+"."):fail("Expected function to throw an exception with message "+j$.pp(message)+", but it threw an exception with message "+j$.pp(thrown.message)+"."):regexp?regexp.test(thrown.message)?pass("Expected function not to throw an exception with a message matching "+j$.pp(regexp)+"."):fail("Expected function to throw an exception with a message matching "+j$.pp(regexp)+", but it threw an exception with message "+j$.pp(thrown.message)+"."):void 0):fail("Expected function to throw an Error, but it threw "+thrown+"."):fail("Expected function to throw an Error.")}}}return toThrowError},getJasmineRequireObj().version=function(){return"2.0.0"},initJQueryPayments=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].slice,v=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=a,b.payment={},b.payment.fn={},b.fn.payment=function(){var a,c;return c=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],b.payment.fn[c].apply(this,a)},f=/(\d{1,4})/g,e=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:f,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:f,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:f,length:[13,14,15,16],cvcLength:[3],luhn:!0}],c=function(a){var b,c,d;for(a=(a+"").replace(/\D/g,""),c=0,d=e.length;d>c;c++)if(b=e[c],b.pattern.test(a))return b},d=function(a){var b,c,d;for(c=0,d=e.length;d>c;c++)if(b=e[c],b.type===a)return b},n=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},m=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(b=document.selection)?"function"==typeof b.createRange?b.createRange().text:void 0:void 0:void 0)?!0:!1},o=function(a){return setTimeout(function(){var c,d;return c=b(a.currentTarget),d=c.val(),d=b.payment.formatCardNumber(d),c.val(d)})},i=function(a){var d,e,f,g,h,i,j;return f=String.fromCharCode(a.which),!/^\d+$/.test(f)||(d=b(a.currentTarget),j=d.val(),e=c(j+f),g=(j.replace(/\D/g,"")+f).length,i=16,e&&(i=e.length[e.length.length-1]),g>=i||null!=d.prop("selectionStart")&&d.prop("selectionStart")!==j.length)?void 0:(h=e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,h.test(j)?(a.preventDefault(),d.val(j+" "+f)):h.test(j+f)?(a.preventDefault(),d.val(j+f+" ")):void 0)},g=function(a){var c,d;return c=b(a.currentTarget),d=c.val(),a.meta||8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length?void 0:/\d\s$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d\s$/,""))):/\s\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\d?$/,""))):void 0},j=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val()+d,/^\d$/.test(e)&&"0"!==e&&"1"!==e?(a.preventDefault(),c.val("0"+e+" / ")):/^\d\d$/.test(e)?(a.preventDefault(),c.val(""+e+" / ")):void 0):void 0},k=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val(),/^\d\d$/.test(e)?c.val(""+e+" / "):void 0):void 0},l=function(a){var c,d,e;return d=String.fromCharCode(a.which),"/"===d?(c=b(a.currentTarget),e=c.val(),/^\d$/.test(e)&&"0"!==e?c.val("0"+e+" / "):void 0):void 0},h=function(a){var c,d;return a.meta||(c=b(a.currentTarget),d=c.val(),8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length)?void 0:/\d(\s|\/)+$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},s=function(a){var b;return a.metaKey||a.ctrlKey?!0:32===a.which?!1:0===a.which?!0:a.which<33?!0:(b=String.fromCharCode(a.which),!!/[\d\s]/.test(b))},q=function(a){var d,e,f,g;return d=b(a.currentTarget),f=String.fromCharCode(a.which),/^\d+$/.test(f)&&!m(d)?(g=(d.val()+f).replace(/\D/g,""),e=c(g),e?g.length<=e.length[e.length.length-1]:g.length<=16):void 0},r=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)&&!m(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},p=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)?(e=c.val()+d,e.length<=4):void 0},t=function(a){var c,d,f,g,h;return c=b(a.currentTarget),h=c.val(),g=b.payment.cardType(h)||"unknown",c.hasClass(g)?void 0:(d=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)f=e[a],c.push(f.type);return c}(),c.removeClass("unknown"),c.removeClass(d.join(" ")),c.addClass(g),c.toggleClass("identified","unknown"!==g),c.trigger("payment.cardType",g))},b.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",p),this},b.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",r),this.on("keypress",j),this.on("keypress",l),this.on("keypress",k),this.on("keydown",h),this},b.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",q),this.on("keypress",i),this.on("keydown",g),this.on("keyup",t),this.on("paste",o),this},b.payment.fn.restrictNumeric=function(){return this.on("keypress",s),this},b.payment.fn.cardExpiryVal=function(){return b.payment.cardExpiryVal(b(this).val())},b.payment.cardExpiryVal=function(a){var b,c,d,e;return a=a.replace(/\s/g,""),e=a.split("/",2),b=e[0],d=e[1],2===(null!=d?d.length:void 0)&&/^\d+$/.test(d)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),d=c+d),b=parseInt(b,10),d=parseInt(d,10),{month:b,year:d}},b.payment.validateCardNumber=function(a){var b,d;return a=(a+"").replace(/\s+|-/g,""),/^\d+$/.test(a)?(b=c(a),b?(d=a.length,v.call(b.length,d)>=0&&(b.luhn===!1||n(a))):!1):!1},b.payment.validateCardExpiry=function(a,c){var d,e,f,g;return"object"==typeof a&&"month"in a&&(g=a,a=g.month,c=g.year),a&&c?(a=b.trim(a),c=b.trim(c),/^\d+$/.test(a)?/^\d+$/.test(c)?parseInt(a,10)<=12?(2===c.length&&(f=(new Date).getFullYear(),f=f.toString().slice(0,2),c=f+c),e=new Date(c,a),d=new Date,e.setMonth(e.getMonth()-1),e.setMonth(e.getMonth()+1,1),e>d):!1:!1:!1):!1},b.payment.validateCardCVC=function(a,c){var e,f;return a=b.trim(a),/^\d+$/.test(a)?c?(e=a.length,v.call(null!=(f=d(c))?f.cvcLength:void 0,e)>=0):a.length>=3&&a.length<=4:!1},b.payment.cardType=function(a){var b;return a?(null!=(b=c(a))?b.type:void 0)||null:null
},b.payment.formatCardNumber=function(a){var b,d,e,f;return(b=c(a))?(e=b.length[b.length.length-1],a=a.replace(/\D/g,""),a=a.slice(0,+e+1||9e9),b.format.global?null!=(f=a.match(b.format))?f.join(" "):void 0:(d=b.format.exec(a),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):a}},function(a,b){"function"==typeof define&&define.amd?define(b):a.form2js=b()}(this,function(){"use strict";function a(a,d,e,f,g){("undefined"==typeof e||null==e)&&(e=!0),("undefined"==typeof d||null==d)&&(d="."),arguments.length<5&&(g=!1),a="string"==typeof a?document.getElementById(a):a;var h,i=[],j=0;if(a.constructor==Array||"undefined"!=typeof NodeList&&a.constructor==NodeList)for(;h=a[j++];)i=i.concat(c(h,f,g));else i=c(a,f,g);return b(i,e,d)}function b(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r={};for(d=0;d<a.length;d++)if(h=a[d].value,!b||""!==h&&null!==h){for(o=a[d].name,p=o.split(c),i=[],j=q,k="",e=0;e<p.length;e++)if(n=p[e].split("]["),n.length>1)for(f=0;f<n.length;f++)if(n[f]=0==f?n[f]+"]":f==n.length-1?"["+n[f]:"["+n[f]+"]",m=n[f].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(g=1;g<m.length;g++)m[g]&&i.push(m[g]);else i.push(n[f]);else i=i.concat(n);for(e=0;e<i.length;e++)n=i[e],n.indexOf("[]")>-1&&e==i.length-1?(l=n.substr(0,n.indexOf("[")),k+=l,j[l]||(j[l]=[]),j[l].push(h)):n.indexOf("[")>-1?(l=n.substr(0,n.indexOf("[")),m=n.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),k+="_"+l+"_"+m,r[k]||(r[k]={}),""==l||j[l]||(j[l]=[]),e==i.length-1?""==l?(j.push(h),r[k][m]=j[j.length-1]):(j[l].push(h),r[k][m]=j[l][j[l].length-1]):r[k][m]||(j[l].push(/^[0-9a-z_]+\[?/i.test(i[e+1])?{}:[]),r[k][m]=j[l][j[l].length-1]),j=r[k][m]):(k+=n,e<i.length-1?(j[n]||(j[n]={}),j=j[n]):j[n]=h)}return q}function c(a,b,c){var f=e(a,b,c);return f.length>0?f:d(a,b,c)}function d(a,b,c){for(var d=[],f=a.firstChild;f;)d=d.concat(e(f,b,c)),f=f.nextSibling;return d}function e(a,b,c){var e,h,i,j=f(a,c);return e=b&&b(a),e&&e.name?i=[e]:""!=j&&a.nodeName.match(/INPUT|TEXTAREA/i)?(h=g(a),i=[{name:j,value:h}]):""!=j&&a.nodeName.match(/SELECT/i)?(h=g(a),i=[{name:j.replace(/\[\]$/,""),value:h}]):i=d(a,b,c),i}function f(a,b){return a.name&&""!=a.name?a.name:b&&a.id&&""!=a.id?a.id:""}function g(a){if(a.disabled)return null;switch(a.nodeName){case"INPUT":case"TEXTAREA":switch(a.type.toLowerCase()){case"radio":if(a.checked&&"false"===a.value)return!1;case"checkbox":if(a.checked&&"true"===a.value)return!0;if(!a.checked&&"true"===a.value)return!1;if(a.checked)return a.value;break;case"button":case"reset":case"submit":case"image":return"";default:return a.value}break;case"SELECT":return h(a)}return null}function h(a){var b,c,d,e=a.multiple,f=[];if(!e)return a.value;for(b=a.getElementsByTagName("option"),c=0,d=b.length;d>c;c++)b[c].selected&&f.push(b[c].value);return f}return a});var donationsForm={},$,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};donationsForm.init=function(a,b){$=a;var c,d,e,f,g,h,i,j,k,l,m,n,o;e=$.extend({},{imgpath:"https://d3dy5gmtp8yhk7.cloudfront.net",metaviewporttag:!0},b,donationsForm.parseQueryString(document.URL.split("?")[1])),i='<meta name="viewport" content="width=device-width, initial-scale=1">',e.metaviewporttag===!1&&(i=""),$(".donations-form-anchor").append(function(){return'<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n'+i+'\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" value="'+e.org+'">\n  <input type="hidden" name="customer.charges_attributes[0].currency" value="usd">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\'>$</span><span class=\'donation-header-amt\'>0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header dph-active" id="dnt-progress-amount">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first">\n    <div class="donations-currency-select-row">\n      Currency: \n      <select class="donations-currency-select"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n    </span>\n    <div class="donation-input-row">\n      <div class="donation-btn donation-btn-sm '+("1"===e.select?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt1||15)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("2"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt2||35)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("3"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt3||50)+'</span></div>\n    </div>\n    <div class="donation-input-row">      \n      <div class="donation-btn donation-btn-sm '+("4"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt4||100)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("5"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt5||250)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("6"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt6||500)+'</span></div>\n    </div>\n    <div class="donation-input-row"> \n      <div class="donation-btn donation-btn-sm '+("7"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt7||1e3)+'</span></div>\n      <input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount">\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc">\n    </div>\n    <div class="donation-payment-errors">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>'}),d=function(a){var b,c,d,e,f,g;for(c=[],g=donationsForm.currenciesArray,e=0,f=g.length;f>e;e++)b=g[e],d=b===a?"selected":"",c.push('<option value="',b,'" ',d,">",b,"</option>");return $(".donations-currency-select").append(c.join("")),$(".donations-currency-select").change(function(){var a;return a=$("option:selected",this),k(donationsForm.getSymbolFromCurrency(a.val()),a.val())})},d(),c=function(){return $(".donation-btn-lg").payment("restrictNumeric"),$(".donation-btn-sm").click(function(){return gaDonations("send","event","amount","click",$(this).text(),1),$(".donation-header-amt").text($(this).find(".donation-amt").text()),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active")}),$(".donation-btn-lg").change(function(){var a;return a=$(this),$(this).val()?(gaDonations("send","event","amount","click",$(this).val(),1),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active"),$(".donation-header-amt").text(a.val())):void 0}),$(".donation-next-btn").click(function(){var a,b;return o($(this).parent())?(gaDonations("send","event","advance-button","click#success",$(this).attr("id"),1),a=$(this).parent(),b=$(this).parent().next(),$(".donation-progress-header").eq($(".donation-input-set").index(b)).addClass("dph-active"),b.show(),a.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$(".donation-submit").click(function(){return o($(this).parent())})},c(),l=function(){var a;return a=$(".donation-btn-active .donation-amt").text(),$(".donation-header-amt").text(a?a:"0")},k=function(a,b,f){return b=null!=b?b:e.currency,$("input[name='customer.charges_attributes[0].currency']").val(b),$(".donation-currency").html(a),$("#input-set-first").html(donationsForm.donationsButtons(e.seedamount,e.seedvalues,e.select,a,f)),l(),c(),d(b)},null!=e.currency?(j=donationsForm.getSymbolFromCurrency(e.currency),k(j,e.currency)):$.ajax({type:"get",url:"https://freegeoip.net/json/",dataType:"jsonp",success:function(a){var b,c;return b=donationsForm.getCurrencyFromCountryCode(a.country_code),j=donationsForm.getSymbolFromCurrency(b),k(j,b),e.seedcurrency!==b?(c=function(a){var c;return a=e.rates?e.rates:a,c=donationsForm.conversionRt(e.seedcurrency,b,a),k(j,b,c)},null!=e.rates||null!=$("#donations-config").attr("defaults")?c(JSON.parse($("#donations-config").attr("defaults")).rates):$("#donation-script").on("donations:defaultsloaded",function(a,b){return c(b.rates)})):k(j,b)}}),$("#donation-form").show(),f=this,g={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"};for(h in g)n=g[h],$(h).css("background-image","url('"+e.imgpath+"/"+n+"')");return o=function(a){var b,c,d,e,f,g;if(c=!0,0===$(".donation-input-set").index(a)&&0===a.find(".donation-btn-active").length)return gaDonations("send","event","error","initiated","amount",1),$(".donation-error-label").first().show(),!1;for($(".donation-error-label").first().hide(),g=a.find(".donation-text-field, .donation-select"),e=0,f=g.length;f>e;e++)b=g[e],d=donationsForm.validField($(b).val(),$(b).attr("type")),d!==!0?(gaDonations("send","event","error","initiated",$(b).attr("name"),1),c=!1,$(b).addClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").text(d),$(b).parent().find(".donation-error-label").show()):($(b).removeClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").hide());return c},$(".donation-text-field").blur(function(){var a,b;return a=$(this),b=donationsForm.validField(a.val(),a.attr("type")),b===!0?(a.removeClass("donation-text-field-error"),a.parent().find(".donation-error-label").hide(),a.addClass("donation-text-field-completed")):(a.addClass("donation-text-field-error"),a.parent().find(".donation-error-label").text(b),void a.parent().find(".donation-error-label").show())}),$(".donation-text-field[type=cc-num]").blur(function(){var a,b;return a=$(this),b=$.payment.cardType(a.val()),"amex"===b||"mastercard"===b||"visa"===b||"discover"===b||"dinersclub"===b?a.css("background-image","url("+e.imgpath+"/icon-cc-"+b+".png)"):void 0}),$(".donation-select[type='month']").html(function(){var a,b,c;for(b=["<option value='' disabled selected>Month</option>"],a=1;12>=a;)c=a>9?""+a:"0"+a,b.push("<option value='"+c+"'>"+c+"</option>"),a++;return b.join("")}),$(".donation-select[type='year']").html(function(){var a,b,c,d,e;for(b=(new Date).getFullYear(),a=["<option value='' disabled selected>Year</option>"],c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push("<option value='"+c+"'>"+c+"</option>");return a}),m=function(a){var b,c;for(b=1;a>=b;)$(".donation-progress-header").eq(b).addClass("dph-active"),b++;for(c=[];2>=b;)$(".donation-progress-header").eq(b).removeClass("dph-active"),c.push(b++);return c},$(".donation-progress-header").click(function(){var a,b,c;return a=$(".donation-progress-header").index($(this)),c=$(".donation-input-set").eq(a),b=$(".donation-input-set").filter(":visible:first"),o(b)?(gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1),m(a),c.show(),b.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),donationsForm.connectToServer(e),this},donationsForm.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},donationsForm.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAN",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},donationsForm.currenciesArray=["USD","GBP","CAN","AUD","EUR","NZD","SEK","NOK","DKK"],donationsForm.conversionRt=function(a,b,c){return 1/c[b]*c[a]},donationsForm.donationsButtons=function(a,b,c,d,e){var f,g,h,i,j,k,l;for(null==e&&(e=1),h=b.split(","),g=' <div class="donations-currency-select-row">\n  Currency: \n  <select class="donations-currency-select"></select>\n</div>\n<span class="donation-field-label">\n  <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n</span> ',g+="<div class='donation-input-row'>",f=1,j=function(){var b;return b=(e*parseFloat(i)*parseFloat(a)/100).toFixed(),g+='<div class="donation-btn donation-btn-sm '+(c===f.toString()?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>"+d+"</span><span class='donation-amt'>"+b+"</span></div>",f%3===0?g+="</div><div class='donation-input-row'>":void 0},k=0,l=h.length;l>k;k++)i=h[k],j(),f+=1;return h.length%5===0&&(g+="</div><div class='donation-input-row'>"),g+='<input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount"></div>\n<div class="donation-next-btn" id="donation-first-next-btn">\n  <div class="donation-next-btn-header">\n    NEXT\n  </div>\n</div>'},donationsForm.getCurrencyFromCountryCode=function(a){var b,c;return c=["AT","BE","BG","HR","CY","CZ","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES"],b=donationsForm.currencies[a],null!=b?b:__indexOf.call(c,a)>=0?"EUR":"USD"},donationsForm.getSymbolFromCurrency=function(a){var b;return b={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAN:"C$"},b[a]||a},donationsForm.validField=function(a,b){var c,d,e;return a?"email"===b?(d=/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,d.test(a)?!0:"Invalid email format."):"cc-num"===b?$.payment.validateCardNumber(a)?!0:"Invalid card format.":"cvc"===b?$.payment.validateCardCVC(a)?!0:"Invalid CVC.":"month"===b||"year"===b?("month"===b&&(e=$(".donation-select[type='year']").val(),c=a),"year"===b&&(c=$(".donation-select[type='month']").val(),e=a),/^\d+$/.test(c)&&/^\d+$/.test(e)?$.payment.validateCardExpiry(c,e)?!0:"Expiry must be in the future.":"Invalid expiry date."):!0:"Can't be blank"},donationsForm.hide=function(){return $("#donation-form").hide()},donationsForm.connectToServer=function(a){var b,c,d;return b=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(b.stripepublickey),$.fn.serializeObject=function(){var a,b;return b=form2js(this.attr("id"),".",!0),a=$(".donation-btn-active").text()?$(".donation-btn-active").text():$(".donation-btn-active").val(),b.customer.charges_attributes[0].amount=a.replace("$","")+"00",b},d=function(a){var c,d;return d=new Pusher(b.pusherpublickey),c=d.subscribe(a),c.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=b.redirectto&&window.location.replace(b.redirectto),donationsForm.hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},c=function(a,c){var e,f,g,h,i,j;if(e=$("#donation-form"),c.error)return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c.error.message),e.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide();i=c.id,e.append($('<input type="hidden" name="card_token" />').val(i)),f={};for(g in b)j=b[g],$.extend(f,"ak"===g.substring(0,2)?{key:j}:void 0);return h=$.ajax({url:""+b.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),f)}),h.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),d(a.pusher_channel_token)}),h.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1},$("#donation-form").submit(function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$(this),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,c),!1})},function(){var a,b,c,d,e,f;d=function(a,b,c,d){var e;return e=null,"js"===a?(e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",b)):"css"===a&&(e=document.createElement("link"),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",b)),e.readyState?e.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&c(d)}:e.onload=function(){c(d)},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)};var g={};b=function(){return a.ajax({type:"get",url:""+a("#donation-script").data("pathtoserver")+"/organizations/"+a("#donation-script").data("org")+".json",dataType:"jsonp",success:function(b){var c;return c=b,a("#donation-script").trigger("donations:defaultsloaded",b),a(".donations-form-anchor").append(a("<div>").attr("id","donations-config").attr("hidden",!0).attr("defaults",JSON.stringify(b)))}})},e=function(){var b,e,f,h,i,j,k,l;for(b=a("#donation-script").data("testmode")===!0?"jquery.donations.68b3a4ee.js":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.68b3a4ee.js",i=["https://js.stripe.com/v2/","https://d3dy5gmtp8yhk7.cloudfront.net/2.1/pusher.min.js",b],f=0,e=function(){return f++,f===i.length?(initJQueryPayments(jQuery),c(),donationsForm.init(a,a.extend({},g,a("#donation-script").data()))):void 0},l=[],j=0,k=i.length;k>j;j++)h=i[j],l.push(d("js",h,e));return l},c=function(){return function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","gaDonations"),gaDonations("create","UA-48690908-1","controlshiftlabs.com"),gaDonations("send","pageview")},f=function(){a=jQuery=window.jQuery.noConflict(!0);var c,f;f=a("#donation-script").data("testmode")===!0,c=f?"jquery.donations.b44ba55b.css":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.b44ba55b.css",d("css",c,function(){}),b(),e()},void 0===window.jQuery||window.jQuery.fn.jquery&&(1!==parseInt(window.jQuery.fn.jquery[0])||parseInt(window.jQuery.fn.jquery[1])<9)?d("js","https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",f):f()}.call(this),initJQueryPayments=function(jQuery){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlash,hasTextSelected,luhnCheck,reFormatCardNumber,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};$=jQuery,$.payment={},$.payment.fn={},$.fn.payment=function(){var args,method;return method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],$.payment.fn[method].apply(this,args)},defaultFormat=/(\d{1,4})/g,cards=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:defaultFormat,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:defaultFormat,length:[13,14,15,16],cvcLength:[3],luhn:!0}],cardFromNumber=function(num){var card,_i,_len;for(num=(num+"").replace(/\D/g,""),_i=0,_len=cards.length;_len>_i;_i++)if(card=cards[_i],card.pattern.test(num))return card},cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_len>_i;_i++)if(card=cards[_i],card.type===type)return card},luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;for(odd=!0,sum=0,digits=(num+"").split("").reverse(),_i=0,_len=digits.length;_len>_i;_i++)digit=digits[_i],digit=parseInt(digit,10),(odd=!odd)&&(digit*=2),digit>9&&(digit-=9),sum+=digit;return sum%10===0},hasTextSelected=function($target){var _ref;return null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==$target.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(_ref=document.selection)?"function"==typeof _ref.createRange?_ref.createRange().text:void 0:void 0:void 0)?!0:!1},reFormatCardNumber=function(e){return setTimeout(function(){var $target,value;return $target=$(e.currentTarget),value=$target.val(),value=$.payment.formatCardNumber(value),$target.val(value)})},formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;return digit=String.fromCharCode(e.which),!/^\d+$/.test(digit)||($target=$(e.currentTarget),value=$target.val(),card=cardFromNumber(value+digit),length=(value.replace(/\D/g,"")+digit).length,upperLength=16,card&&(upperLength=card.length[card.length.length-1]),length>=upperLength||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length)?void 0:(re=card&&"amex"===card.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,re.test(value)?(e.preventDefault(),$target.val(value+" "+digit)):re.test(value+digit)?(e.preventDefault(),$target.val(value+digit+" ")):void 0)},formatBackCardNumber=function(e){var $target,value;return $target=$(e.currentTarget),value=$target.val(),e.meta||8!==e.which||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length?void 0:/\d\s$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\d\s$/,""))):/\s\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\d?$/,""))):void 0},formatExpiry=function(e){var $target,digit,val;return digit=String.fromCharCode(e.which),/^\d+$/.test(digit)?($target=$(e.currentTarget),val=$target.val()+digit,/^\d$/.test(val)&&"0"!==val&&"1"!==val?(e.preventDefault(),$target.val("0"+val+" / ")):/^\d\d$/.test(val)?(e.preventDefault(),$target.val(""+val+" / ")):void 0):void 0},formatForwardExpiry=function(e){var $target,digit,val;return digit=String.fromCharCode(e.which),/^\d+$/.test(digit)?($target=$(e.currentTarget),val=$target.val(),/^\d\d$/.test(val)?$target.val(""+val+" / "):void 0):void 0},formatForwardSlash=function(e){var $target,slash,val;return slash=String.fromCharCode(e.which),"/"===slash?($target=$(e.currentTarget),val=$target.val(),/^\d$/.test(val)&&"0"!==val?$target.val("0"+val+" / "):void 0):void 0},formatBackExpiry=function(e){var $target,value;return e.meta||($target=$(e.currentTarget),value=$target.val(),8!==e.which||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length)?void 0:/\d(\s|\/)+$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\/\s?\d?$/,""))):void 0},restrictNumeric=function(e){var input;return e.metaKey||e.ctrlKey?!0:32===e.which?!1:0===e.which?!0:e.which<33?!0:(input=String.fromCharCode(e.which),!!/[\d\s]/.test(input))},restrictCardNumber=function(e){var $target,card,digit,value;return $target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target)?(value=($target.val()+digit).replace(/\D/g,""),card=cardFromNumber(value),card?value.length<=card.length[card.length.length-1]:value.length<=16):void 0},restrictExpiry=function(e){var $target,digit,value;return $target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target)?(value=$target.val()+digit,value=value.replace(/\D/g,""),value.length>6?!1:void 0):void 0},restrictCVC=function(e){var $target,digit,val;return $target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)?(val=$target.val()+digit,val.length<=4):void 0},setCardType=function(e){var $target,allTypes,card,cardType,val;return $target=$(e.currentTarget),val=$target.val(),cardType=$.payment.cardType(val)||"unknown",$target.hasClass(cardType)?void 0:(allTypes=function(){var _i,_len,_results;for(_results=[],_i=0,_len=cards.length;_len>_i;_i++)card=cards[_i],_results.push(card.type);return _results}(),$target.removeClass("unknown"),$target.removeClass(allTypes.join(" ")),$target.addClass(cardType),$target.toggleClass("identified","unknown"!==cardType),$target.trigger("payment.cardType",cardType))},$.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictCVC),this},$.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictExpiry),this.on("keypress",formatExpiry),this.on("keypress",formatForwardSlash),this.on("keypress",formatForwardExpiry),this.on("keydown",formatBackExpiry),this},$.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictCardNumber),this.on("keypress",formatCardNumber),this.on("keydown",formatBackCardNumber),this.on("keyup",setCardType),this.on("paste",reFormatCardNumber),this},$.payment.fn.restrictNumeric=function(){return this.on("keypress",restrictNumeric),this},$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val())},$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;return value=value.replace(/\s/g,""),_ref=value.split("/",2),month=_ref[0],year=_ref[1],2===(null!=year?year.length:void 0)&&/^\d+$/.test(year)&&(prefix=(new Date).getFullYear(),prefix=prefix.toString().slice(0,2),year=prefix+year),month=parseInt(month,10),year=parseInt(year,10),{month:month,year:year}},$.payment.validateCardNumber=function(num){var card,_ref;return num=(num+"").replace(/\s+|-/g,""),/^\d+$/.test(num)?(card=cardFromNumber(num),card?(_ref=num.length,__indexOf.call(card.length,_ref)>=0&&(card.luhn===!1||luhnCheck(num))):!1):!1},$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,prefix,_ref;return"object"==typeof month&&"month"in month&&(_ref=month,month=_ref.month,year=_ref.year),month&&year?(month=$.trim(month),year=$.trim(year),/^\d+$/.test(month)?/^\d+$/.test(year)?parseInt(month,10)<=12?(2===year.length&&(prefix=(new Date).getFullYear(),prefix=prefix.toString().slice(0,2),year=prefix+year),expiry=new Date(year,month),currentTime=new Date,expiry.setMonth(expiry.getMonth()-1),expiry.setMonth(expiry.getMonth()+1,1),expiry>currentTime):!1:!1:!1):!1},$.payment.validateCardCVC=function(cvc,type){var _ref,_ref1;return cvc=$.trim(cvc),/^\d+$/.test(cvc)?type?(_ref=cvc.length,__indexOf.call(null!=(_ref1=cardFromType(type))?_ref1.cvcLength:void 0,_ref)>=0):cvc.length>=3&&cvc.length<=4:!1},$.payment.cardType=function(num){var _ref;return num?(null!=(_ref=cardFromNumber(num))?_ref.type:void 0)||null:null},$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;return(card=cardFromNumber(num))?(upperLength=card.length[card.length.length-1],num=num.replace(/\D/g,""),num=num.slice(0,+upperLength+1||9e9),card.format.global?null!=(_ref=num.match(card.format))?_ref.join(" "):void 0:(groups=card.format.exec(num),null!=groups&&groups.shift(),null!=groups?groups.join(" "):void 0)):num}},function(root,factory){"function"==typeof define&&define.amd?define(factory):root.form2js=factory()}(this,function(){"use strict";function form2js(rootNode,delimiter,skipEmpty,nodeCallback,useIdIfEmptyName){("undefined"==typeof skipEmpty||null==skipEmpty)&&(skipEmpty=!0),("undefined"==typeof delimiter||null==delimiter)&&(delimiter="."),arguments.length<5&&(useIdIfEmptyName=!1),rootNode="string"==typeof rootNode?document.getElementById(rootNode):rootNode;var currNode,formValues=[],i=0;if(rootNode.constructor==Array||"undefined"!=typeof NodeList&&rootNode.constructor==NodeList)for(;currNode=rootNode[i++];)formValues=formValues.concat(getFormValues(currNode,nodeCallback,useIdIfEmptyName));else formValues=getFormValues(rootNode,nodeCallback,useIdIfEmptyName);return processNameValues(formValues,skipEmpty,delimiter)}function processNameValues(nameValues,skipEmpty,delimiter){var i,j,k,l,value,nameParts,currResult,arrNameFull,arrName,arrIdx,namePart,name,_nameParts,result={},arrays={};
for(i=0;i<nameValues.length;i++)if(value=nameValues[i].value,!skipEmpty||""!==value&&null!==value){for(name=nameValues[i].name,_nameParts=name.split(delimiter),nameParts=[],currResult=result,arrNameFull="",j=0;j<_nameParts.length;j++)if(namePart=_nameParts[j].split("]["),namePart.length>1)for(k=0;k<namePart.length;k++)if(namePart[k]=0==k?namePart[k]+"]":k==namePart.length-1?"["+namePart[k]:"["+namePart[k]+"]",arrIdx=namePart[k].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(l=1;l<arrIdx.length;l++)arrIdx[l]&&nameParts.push(arrIdx[l]);else nameParts.push(namePart[k]);else nameParts=nameParts.concat(namePart);for(j=0;j<nameParts.length;j++)namePart=nameParts[j],namePart.indexOf("[]")>-1&&j==nameParts.length-1?(arrName=namePart.substr(0,namePart.indexOf("[")),arrNameFull+=arrName,currResult[arrName]||(currResult[arrName]=[]),currResult[arrName].push(value)):namePart.indexOf("[")>-1?(arrName=namePart.substr(0,namePart.indexOf("[")),arrIdx=namePart.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),arrNameFull+="_"+arrName+"_"+arrIdx,arrays[arrNameFull]||(arrays[arrNameFull]={}),""==arrName||currResult[arrName]||(currResult[arrName]=[]),j==nameParts.length-1?""==arrName?(currResult.push(value),arrays[arrNameFull][arrIdx]=currResult[currResult.length-1]):(currResult[arrName].push(value),arrays[arrNameFull][arrIdx]=currResult[arrName][currResult[arrName].length-1]):arrays[arrNameFull][arrIdx]||(currResult[arrName].push(/^[0-9a-z_]+\[?/i.test(nameParts[j+1])?{}:[]),arrays[arrNameFull][arrIdx]=currResult[arrName][currResult[arrName].length-1]),currResult=arrays[arrNameFull][arrIdx]):(arrNameFull+=namePart,j<nameParts.length-1?(currResult[namePart]||(currResult[namePart]={}),currResult=currResult[namePart]):currResult[namePart]=value)}return result}function getFormValues(rootNode,nodeCallback,useIdIfEmptyName){var result=extractNodeValues(rootNode,nodeCallback,useIdIfEmptyName);return result.length>0?result:getSubFormValues(rootNode,nodeCallback,useIdIfEmptyName)}function getSubFormValues(rootNode,nodeCallback,useIdIfEmptyName){for(var result=[],currentNode=rootNode.firstChild;currentNode;)result=result.concat(extractNodeValues(currentNode,nodeCallback,useIdIfEmptyName)),currentNode=currentNode.nextSibling;return result}function extractNodeValues(node,nodeCallback,useIdIfEmptyName){var callbackResult,fieldValue,result,fieldName=getFieldName(node,useIdIfEmptyName);return callbackResult=nodeCallback&&nodeCallback(node),callbackResult&&callbackResult.name?result=[callbackResult]:""!=fieldName&&node.nodeName.match(/INPUT|TEXTAREA/i)?(fieldValue=getFieldValue(node),result=[{name:fieldName,value:fieldValue}]):""!=fieldName&&node.nodeName.match(/SELECT/i)?(fieldValue=getFieldValue(node),result=[{name:fieldName.replace(/\[\]$/,""),value:fieldValue}]):result=getSubFormValues(node,nodeCallback,useIdIfEmptyName),result}function getFieldName(node,useIdIfEmptyName){return node.name&&""!=node.name?node.name:useIdIfEmptyName&&node.id&&""!=node.id?node.id:""}function getFieldValue(fieldNode){if(fieldNode.disabled)return null;switch(fieldNode.nodeName){case"INPUT":case"TEXTAREA":switch(fieldNode.type.toLowerCase()){case"radio":if(fieldNode.checked&&"false"===fieldNode.value)return!1;case"checkbox":if(fieldNode.checked&&"true"===fieldNode.value)return!0;if(!fieldNode.checked&&"true"===fieldNode.value)return!1;if(fieldNode.checked)return fieldNode.value;break;case"button":case"reset":case"submit":case"image":return"";default:return fieldNode.value}break;case"SELECT":return getSelectedOptionValue(fieldNode)}return null}function getSelectedOptionValue(selectNode){var options,i,l,multiple=selectNode.multiple,result=[];if(!multiple)return selectNode.value;for(options=selectNode.getElementsByTagName("option"),i=0,l=options.length;l>i;i++)options[i].selected&&result.push(options[i].value);return result}return form2js});var donationsForm={},$,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};donationsForm.init=function(jQuery,opts){$=jQuery;var bindButtons,bindSelect,config,form,icons,k,metaViewport,symbol,updateCurrencyFields,updateDonationHeader,updateHeadersUntil,v,validateFieldset;config=$.extend({},{imgpath:"https://d3dy5gmtp8yhk7.cloudfront.net",metaviewporttag:!0},opts,donationsForm.parseQueryString(document.URL.split("?")[1])),metaViewport='<meta name="viewport" content="width=device-width, initial-scale=1">',config.metaviewporttag===!1&&(metaViewport=""),$(".donations-form-anchor").append(function(){return'<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n'+metaViewport+'\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" value="'+config.org+'">\n  <input type="hidden" name="customer.charges_attributes[0].currency" value="usd">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\'>$</span><span class=\'donation-header-amt\'>0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header dph-active" id="dnt-progress-amount">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first">\n    <div class="donations-currency-select-row">\n      Currency: \n      <select class="donations-currency-select"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n    </span>\n    <div class="donation-input-row">\n      <div class="donation-btn donation-btn-sm '+("1"===config.select?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt1||15)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("2"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt2||35)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("3"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt3||50)+'</span></div>\n    </div>\n    <div class="donation-input-row">      \n      <div class="donation-btn donation-btn-sm '+("4"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt4||100)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("5"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt5||250)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("6"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt6||500)+'</span></div>\n    </div>\n    <div class="donation-input-row"> \n      <div class="donation-btn donation-btn-sm '+("7"===config.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(config.amt7||1e3)+'</span></div>\n      <input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount">\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc">\n    </div>\n    <div class="donation-payment-errors">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>'}),bindSelect=function(currency){var curr,currOptions,selectThis,_i,_len,_ref;for(currOptions=[],_ref=donationsForm.currenciesArray,_i=0,_len=_ref.length;_len>_i;_i++)curr=_ref[_i],selectThis=curr===currency?"selected":"",currOptions.push('<option value="',curr,'" ',selectThis,">",curr,"</option>");return $(".donations-currency-select").append(currOptions.join("")),$(".donations-currency-select").change(function(){var selected;return selected=$("option:selected",this),updateCurrencyFields(donationsForm.getSymbolFromCurrency(selected.val()),selected.val())})},bindSelect(),bindButtons=function(){return $(".donation-btn-lg").payment("restrictNumeric"),$(".donation-btn-sm").click(function(){return gaDonations("send","event","amount","click",$(this).text(),1),$(".donation-header-amt").text($(this).find(".donation-amt").text()),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active")}),$(".donation-btn-lg").change(function(){var lgButton;return lgButton=$(this),$(this).val()?(gaDonations("send","event","amount","click",$(this).val(),1),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active"),$(".donation-header-amt").text(lgButton.val())):void 0}),$(".donation-next-btn").click(function(){var currentFS,nextFS;return validateFieldset($(this).parent())?(gaDonations("send","event","advance-button","click#success",$(this).attr("id"),1),currentFS=$(this).parent(),nextFS=$(this).parent().next(),$(".donation-progress-header").eq($(".donation-input-set").index(nextFS)).addClass("dph-active"),nextFS.show(),currentFS.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$(".donation-submit").click(function(){return validateFieldset($(this).parent())})},bindButtons(),updateDonationHeader=function(){var text;return text=$(".donation-btn-active .donation-amt").text(),$(".donation-header-amt").text(text?text:"0")},updateCurrencyFields=function(symbol,currency,conversionRate){return currency=null!=currency?currency:config.currency,$("input[name='customer.charges_attributes[0].currency']").val(currency),$(".donation-currency").html(symbol),$("#input-set-first").html(donationsForm.donationsButtons(config.seedamount,config.seedvalues,config.select,symbol,conversionRate)),updateDonationHeader(),bindButtons(),bindSelect(currency)},null!=config.currency?(symbol=donationsForm.getSymbolFromCurrency(config.currency),updateCurrencyFields(symbol,config.currency)):$.ajax({type:"get",url:"https://freegeoip.net/json/",dataType:"jsonp",success:function(data){var currency,updateWithRates;return currency=donationsForm.getCurrencyFromCountryCode(data.country_code),symbol=donationsForm.getSymbolFromCurrency(currency),updateCurrencyFields(symbol,currency),config.seedcurrency!==currency?(updateWithRates=function(rates){var rate;return rates=config.rates?config.rates:rates,rate=donationsForm.conversionRt(config.seedcurrency,currency,rates),updateCurrencyFields(symbol,currency,rate)},null!=config.rates||null!=$("#donations-config").attr("defaults")?updateWithRates(JSON.parse($("#donations-config").attr("defaults")).rates):$("#donation-script").on("donations:defaultsloaded",function(event,dat){return updateWithRates(dat.rates)})):updateCurrencyFields(symbol,currency)}}),$("#donation-form").show(),form=this,icons={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"};for(k in icons)v=icons[k],$(k).css("background-image","url('"+config.imgpath+"/"+v+"')");return validateFieldset=function(FS){var field,valid,validText,_i,_len,_ref;if(valid=!0,0===$(".donation-input-set").index(FS)&&0===FS.find(".donation-btn-active").length)return gaDonations("send","event","error","initiated","amount",1),$(".donation-error-label").first().show(),!1;for($(".donation-error-label").first().hide(),_ref=FS.find(".donation-text-field, .donation-select"),_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],validText=donationsForm.validField($(field).val(),$(field).attr("type")),validText!==!0?(gaDonations("send","event","error","initiated",$(field).attr("name"),1),valid=!1,$(field).addClass("donation-text-field-error"),$(field).parent().find(".donation-error-label").text(validText),$(field).parent().find(".donation-error-label").show()):($(field).removeClass("donation-text-field-error"),$(field).parent().find(".donation-error-label").hide());return valid},$(".donation-text-field").blur(function(){var thisField,validText;return thisField=$(this),validText=donationsForm.validField(thisField.val(),thisField.attr("type")),validText===!0?(thisField.removeClass("donation-text-field-error"),thisField.parent().find(".donation-error-label").hide(),thisField.addClass("donation-text-field-completed")):(thisField.addClass("donation-text-field-error"),thisField.parent().find(".donation-error-label").text(validText),void thisField.parent().find(".donation-error-label").show())}),$(".donation-text-field[type=cc-num]").blur(function(){var ccNumField,ccType;return ccNumField=$(this),ccType=$.payment.cardType(ccNumField.val()),"amex"===ccType||"mastercard"===ccType||"visa"===ccType||"discover"===ccType||"dinersclub"===ccType?ccNumField.css("background-image","url("+config.imgpath+"/icon-cc-"+ccType+".png)"):void 0}),$(".donation-select[type='month']").html(function(){var i,output,txt;for(output=["<option value='' disabled selected>Month</option>"],i=1;12>=i;)txt=i>9?""+i:"0"+i,output.push("<option value='"+txt+"'>"+txt+"</option>"),i++;return output.join("")}),$(".donation-select[type='year']").html(function(){var output,year,yr,_i,_ref;for(year=(new Date).getFullYear(),output=["<option value='' disabled selected>Year</option>"],yr=_i=year,_ref=year+19;_ref>=year?_ref>=_i:_i>=_ref;yr=_ref>=year?++_i:--_i)output.push("<option value='"+yr+"'>"+yr+"</option>");return output}),updateHeadersUntil=function(index){var i,_results;for(i=1;index>=i;)$(".donation-progress-header").eq(i).addClass("dph-active"),i++;for(_results=[];2>=i;)$(".donation-progress-header").eq(i).removeClass("dph-active"),_results.push(i++);return _results},$(".donation-progress-header").click(function(){var activeIndex,currentFS,nextFS;return activeIndex=$(".donation-progress-header").index($(this)),nextFS=$(".donation-input-set").eq(activeIndex),currentFS=$(".donation-input-set").filter(":visible:first"),validateFieldset(currentFS)?(gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1),updateHeadersUntil(activeIndex),nextFS.show(),currentFS.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),donationsForm.connectToServer(config),this},donationsForm.parseQueryString=function(q){var hash,i,vars;if(hash={},void 0!==q&&""!==q)for(q=q.split("&"),i=0;i<q.length;)vars=q[i].split("="),hash[vars[0]]=vars[1],i++;return hash},donationsForm.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAN",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},donationsForm.currenciesArray=["USD","GBP","CAN","AUD","EUR","NZD","SEK","NOK","DKK"],donationsForm.conversionRt=function(currencyFrom,currencyTo,table){return 1/table[currencyTo]*table[currencyFrom]},donationsForm.donationsButtons=function(seedAmount,seedValues,selectNo,symbol,conversionRate){var counter,section,seedVals,val,_fn,_i,_len;for(null==conversionRate&&(conversionRate=1),seedVals=seedValues.split(","),section=' <div class="donations-currency-select-row">\n  Currency: \n  <select class="donations-currency-select"></select>\n</div>\n<span class="donation-field-label">\n  <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n</span> ',section+="<div class='donation-input-row'>",counter=1,_fn=function(){var amount;return amount=(conversionRate*parseFloat(val)*parseFloat(seedAmount)/100).toFixed(),section+='<div class="donation-btn donation-btn-sm '+(selectNo===counter.toString()?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>"+symbol+"</span><span class='donation-amt'>"+amount+"</span></div>",counter%3===0?section+="</div><div class='donation-input-row'>":void 0},_i=0,_len=seedVals.length;_len>_i;_i++)val=seedVals[_i],_fn(),counter+=1;return seedVals.length%5===0&&(section+="</div><div class='donation-input-row'>"),section+='<input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount"></div>\n<div class="donation-next-btn" id="donation-first-next-btn">\n  <div class="donation-next-btn-header">\n    NEXT\n  </div>\n</div>'},donationsForm.getCurrencyFromCountryCode=function(code){var currency,europeanCountries;return europeanCountries=["AT","BE","BG","HR","CY","CZ","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES"],currency=donationsForm.currencies[code],null!=currency?currency:__indexOf.call(europeanCountries,code)>=0?"EUR":"USD"},donationsForm.getSymbolFromCurrency=function(currency){var symbols;return symbols={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAN:"C$"},symbols[currency]||currency},donationsForm.validField=function(value,type){var mo,re,yr;return value?"email"===type?(re=/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,re.test(value)?!0:"Invalid email format."):"cc-num"===type?$.payment.validateCardNumber(value)?!0:"Invalid card format.":"cvc"===type?$.payment.validateCardCVC(value)?!0:"Invalid CVC.":"month"===type||"year"===type?("month"===type&&(yr=$(".donation-select[type='year']").val(),mo=value),"year"===type&&(mo=$(".donation-select[type='month']").val(),yr=value),/^\d+$/.test(mo)&&/^\d+$/.test(yr)?$.payment.validateCardExpiry(mo,yr)?!0:"Expiry must be in the future.":"Invalid expiry date."):!0:"Can't be blank"},donationsForm.hide=function(){return $("#donation-form").hide()},donationsForm.connectToServer=function(opts){var config,stripeResponseHandler,subscribeToDonationChannel;return config=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},opts),Stripe.setPublishableKey(config.stripepublickey),$.fn.serializeObject=function(){var amount,serialObj;return serialObj=form2js(this.attr("id"),".",!0),amount=$(".donation-btn-active").text()?$(".donation-btn-active").text():$(".donation-btn-active").val(),serialObj.customer.charges_attributes[0].amount=amount.replace("$","")+"00",serialObj},subscribeToDonationChannel=function(channelToken){var channel,pusher;return pusher=new Pusher(config.pusherpublickey),channel=pusher.subscribe(channelToken),channel.bind("charge_completed",function(data){return $(".donation-loading-overlay").hide(),pusher.disconnect(),"success"===data.status?($("#donation-script").trigger("donations:success"),null!=config.redirectto&&window.location.replace(config.redirectto),donationsForm.hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(data.message||"Something went wrong.").show()})},stripeResponseHandler=function(status,response){var $form,addtionalParams,key,req,token,val;if($form=$("#donation-form"),response.error)return gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(response.error.message),$form.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide();token=response.id,$form.append($('<input type="hidden" name="card_token" />').val(token)),addtionalParams={};for(key in config)val=config[key],$.extend(addtionalParams,"ak"===key.substring(0,2)?{key:val}:void 0);return req=$.ajax({url:""+config.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),addtionalParams)}),req.done(function(response){return gaDonations("send","event","advance-button","click#success","submit",1),subscribeToDonationChannel(response.pusher_channel_token)}),req.fail(function(response,textStatus,errorThrown){return gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(errorThrown||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1},$("#donation-form").submit(function(){var $form;return gaDonations("send","event","advance-button","click#submit","submit",1),$form=$(this),$(".donation-loading-overlay").show(),$form.find("button").prop("disabled",!0),Stripe.createToken($form,stripeResponseHandler),!1})};