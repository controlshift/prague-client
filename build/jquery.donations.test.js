function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}var html;html='<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" data-bind="value: org">\n  <input type="hidden" name="customer.country" data-bind="value: countryCode">\n  <input type="hidden" name="customer.charges_attributes[0].currency" data-bind="value: selectedCurrency">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\' data-bind="html: currencySymbol">$</span><span class=\'donation-header-amt\' data-bind="text: displayAmount()">0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header" id="dnt-progress-amount" data-bind="css: { \'dph-active\' : visibleInputSet() >= 0}, click: function() { setInputSet(0); }">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo" data-bind="css: { \'dph-active\' : visibleInputSet() >= 1}, click: function() { setInputSet(1); }">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment" data-bind="css: { \'dph-active\' : visibleInputSet() >= 2}, click: function() { setInputSet(2); }">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first" data-bind="visible: visibleInputSet() === 0">\n    <div class="donations-currency-select-row" data-bind="visible: currenciesEnabled()">\n      Currency: \n      <select class="donations-currency-select" data-bind="options: currenciesArray, value: selectedCurrency"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first" data-bind="validationMessage: displayAmount"></span>\n    </span>\n    <div class="donation-button-set" data-bind="foreach: amounts">\n      <div class="donation-btn donation-btn-sm" data-bind="css: { \'donation-btn-active\' : $parent.selectedBtn() === $index() }, click: function() { $parent.setActiveAmount($index()); }">\n        <span class=\'donation-currency\' data-bind="html: $parent.currencySymbol">$</span><span class=\'donation-amt\' data-bind="text: $data"></span>\n      </div>\n      <!-- ko if: $index() === ($parent.amountsLength() - 1) -->\n        <input class="donation-btn donation-btn-lg" data-bind="value: $parent.inputtedAmount, event: { change: $parent.clearSelectedButton } " type="text" placeholder="Other amount">\n      <!-- /ko -->\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn" data-bind="click: function()\n        { \n          if(inputSet1.isValid()) { incrementInputSet(); } \n          else { inputSet1.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 1">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label" data-bind="validationMessage: firstName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name" data-bind="value: firstName">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label" data-bind="validationMessage: lastName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name" data-bind="value: lastName">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label" data-bind="validationMessage: email">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email" data-bind="value: email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn" data-bind="click: function()\n        { \n          if(inputSet2.isValid()) { incrementInputSet(); } \n          else { inputSet2.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 2">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label" data-bind="validationMessage: cardNumber" data-bind="validationMessage: cardDate">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number" data-bind="value: cardNumber, style: { backgroundImage: ccBackground() } ">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label" data-bind="validationMessage: cardDate">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month" data-bind="value: cardMonth, options: ccMonths">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year" data-bind="value: cardYear, options: ccYears">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label" data-bind="validationMessage: cvc">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc" data-bind="value: cvc">\n    </div>\n    <div class="donation-payment-errors" data-bind="visible: false">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit" data-bind="click: function()\n        { \n          if(inputSet3.isValid()) { submitForm(); } \n          else { inputSet3.errors.showAllMessages();}\n        }">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>';var DonationsFormModel;DonationsFormModel=function(){function DonationsFormModel(jQuery,opts){var config,initializeCurrency,self;self=this,$=jQuery,config=$.extend({},{imgpath:"https://d2yuwrm8xcn0u8.cloudfront.net",metaviewporttag:!0},opts,self.parseQueryString(document.URL.split("?")[1])),ko.validation.configure({insertMessages:!1}),ko.validation.rules.ccDate={validator:function(val){return $.payment.validateCardExpiry(val.month,val.year)},message:"Invalid date"},ko.validation.rules.ccNum={validator:function(val){return $.payment.validateCardNumber(val)},message:"Invalid credit card number"},ko.validation.rules.cvc={validator:function(val){return $.payment.validateCardCVC(val)},message:"Invalid CVC number"},ko.validation.registerExtenders(),self.org=ko.observable(config.org),self.countryCode=ko.observable("US"),self.imgPath=ko.observable(config.imgpath),self.initializeIcons(self.imgPath()),self.seedAmount=config.seedamount||100,self.seedValues=null!=config.seedvalues?config.seedvalues.split(","):[15,35,50,100,250,500,1e3],self.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAD",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},self.currenciesArray=ko.observableArray(["USD","GBP","CAD","AUD","EUR","NZD","SEK","NOK","DKK"]),self.currenciesEnabled=ko.observable("none"!==config.currencyconversion),self.seededCurrency=config.seedcurrency||"USD",self.formCurrency=config.formcurrency||self.seededCurrency,initializeCurrency=function(){var _ref;return"none"!==(_ref=config.currencyconversion)&&"choose"!==_ref?self.currencies[config.country]:self.formCurrency},self.selectedCurrency=ko.observable(initializeCurrency()),self.currencySymbol=ko.computed(function(){var symbols;return symbols={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAD:"C$"},symbols[self.selectedCurrency()]||self.selectedCurrency()},this),self.selectedBtn=ko.observable(-1),self.selectedAmount=ko.observable("0"),self.inputtedAmount=ko.observable(null),self.displayAmount=ko.computed(function(){return self.inputtedAmount()||self.selectedAmount()},this).extend({required:{message:"Please select an amount"},min:1,digit:!0}),self.setActiveAmount=function(index){return index>-1?(self.inputtedAmount(null),self.selectedAmount(self.amounts()[index]),self.selectedBtn(index)):void 0},self.clearSelectedButton=function(){return self.selectedAmount(0),self.selectedBtn(-1)},self.amounts=ko.computed(function(){var arr,baseAmount,conversionRateFromCurrency,conversionRateToCurrency,count,entry,_i,_len,_ref;for(arr=[],_ref=self.seedValues,count=_i=0,_len=_ref.length;_len>_i;count=++_i)entry=_ref[count],baseAmount=parseInt(entry)/100*parseInt(self.seedAmount),7>count&&(self.currenciesEnabled()?(conversionRateToCurrency=config[self.selectedCurrency()]||1,conversionRateFromCurrency=config[self.seededCurrency]||1,arr.push(self.round(baseAmount*conversionRateToCurrency/conversionRateFromCurrency))):arr.push(self.round(baseAmount)));return arr},this),self.amountsLength=ko.computed(function(){return self.amounts().length},this),self.visibleInputSet=ko.observable(0),self.incrementInputSet=function(){return self.visibleInputSet(self.visibleInputSet()+1)},self.setInputSet=function(index){return self.visibleInputSet(index)},self.firstName=ko.observable().extend({required:{message:"Can't be blank"}}),self.lastName=ko.observable().extend({required:{message:"Can't be blank"}}),self.email=ko.observable().extend({required:{message:"Can't be blank"},email:{message:"Invalid email"}}),self.cardNumber=ko.observable().extend({required:{message:"Can't be blank"},ccNum:!0}),self.cardMonth=ko.observable(),self.ccMonths=["01","02","03","04","05","06","07","08","09","10","11","12"],self.cardYear=ko.observable(""+((new Date).getFullYear()+1)),self.ccYears=function(){var output,year,yr,_i,_ref;for(output=[],year=(new Date).getFullYear(),yr=_i=year,_ref=year+19;_ref>=year?_ref>=_i:_i>=_ref;yr=_ref>=year?++_i:--_i)output.push(""+yr);return output}(),self.cardDate=ko.computed(function(){return{month:self.cardMonth(),year:self.cardYear()}},this).extend({ccDate:!0,observable:!0}),self.cvc=ko.observable().extend({required:{message:"Can't be blank"},digit:!0,cvc:!0}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),self.ccBackground=ko.computed(function(){var ccType;return ccType=$.payment.cardType(self.cardNumber()),"amex"===ccType||"mastercard"===ccType||"visa"===ccType||"discover"===ccType||"dinersclub"===ccType?"url("+self.imgPath()+"/icon-cc-"+ccType+".png)":"url("+self.imgPath()+"/icon-cc-none.png)"},this),self.inputSet1=ko.validatedObservable({amount:self.displayAmount}),self.inputSet2=ko.validatedObservable({firstName:self.firstName,lastName:self.lastName,email:self.email}),self.inputSet3=ko.validatedObservable({cardNumber:self.cardNumber,cardDate:self.cardDate,cvc:self.cvc}),self.connectToServer(config,self)}return DonationsFormModel.prototype.parseQueryString=function(q){var hash,i,vars;if(hash={},void 0!==q&&""!==q)for(q=q.split("&"),i=0;i<q.length;)vars=q[i].split("="),hash[vars[0]]=vars[1],i++;return hash},DonationsFormModel.prototype.initializeIcons=function(path){var icons,k,v,_results;icons={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"},_results=[];for(k in icons)v=icons[k],_results.push($(k).css("background-image","url('"+path+"/"+v+"')"));return _results},DonationsFormModel.prototype.round=function(number){var temp;return temp=Math.round(parseFloat(number.toPrecision(2))),0===temp?1:temp},DonationsFormModel.prototype.connectToServer=function(opts,self){var config,stripeResponseHandler,subscribeToDonationChannel;return config=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},opts),Stripe.setPublishableKey(config.stripepublickey),$.fn.serializeObject=function(){var amount,serialObj;return serialObj=form2js(this.attr("id"),".",!0),serialObj["cc-num"]="",serialObj.month="",serialObj.year="",serialObj.cvc="",amount=self.displayAmount(),serialObj.customer.charges_attributes[0].amount=amount.replace(self.currencySymbol(),"")+"00",serialObj},subscribeToDonationChannel=function(channelToken){var channel,pusher;return pusher=new Pusher(config.pusherpublickey),channel=pusher.subscribe(channelToken),channel.bind("charge_completed",function(data){return $(".donation-loading-overlay").hide(),pusher.disconnect(),"success"===data.status?($("#donation-script").trigger("donations:success"),null!=config.redirectto&&window.location.replace(config.redirectto),$("#donation-form").hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(data.message||"Something went wrong.").show()})},stripeResponseHandler=function(status,response){var $form,req,token;return $form=$("#donation-form"),response.error?(gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(response.error.message),$form.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide()):(token=response.id,$form.append($('<input type="hidden" name="card_token" />').val(token)),req=$.ajax({url:""+config.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),{config:config})}),req.done(function(response){return gaDonations("send","event","advance-button","click#success","submit",1),subscribeToDonationChannel(response.pusher_channel_token)}),req.fail(function(response,textStatus,errorThrown){return gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(errorThrown||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1)},self.submitForm=function(){var $form;return gaDonations("send","event","advance-button","click#submit","submit",1),$form=$("#donation-form"),$(".donation-loading-overlay").show(),$form.find("button").prop("disabled",!0),Stripe.createToken($form,stripeResponseHandler),!1}},DonationsFormModel}(),function(){function extend(destination,source){for(var property in source)destination[property]=source[property];return destination}window.jasmine=jasmineRequire.core(jasmineRequire),jasmineRequire.html(jasmine);var env=jasmine.getEnv(),jasmineInterface={describe:function(description,specDefinitions){return env.describe(description,specDefinitions)},xdescribe:function(description,specDefinitions){return env.xdescribe(description,specDefinitions)},it:function(desc,func){return env.it(desc,func)},xit:function(desc,func){return env.xit(desc,func)},beforeEach:function(beforeEachFunction){return env.beforeEach(beforeEachFunction)},afterEach:function(afterEachFunction){return env.afterEach(afterEachFunction)},expect:function(actual){return env.expect(actual)},pending:function(){return env.pending()},spyOn:function(obj,methodName){return env.spyOn(obj,methodName)},jsApiReporter:new jasmine.JsApiReporter({timer:new jasmine.Timer})};"undefined"==typeof window&&"object"==typeof exports?extend(exports,jasmineInterface):extend(window,jasmineInterface),jasmine.addCustomEqualityTester=function(tester){env.addCustomEqualityTester(tester)},jasmine.addMatchers=function(matchers){return env.addMatchers(matchers)},jasmine.clock=function(){return env.clock};var queryString=new jasmine.QueryString({getWindowLocation:function(){return window.location}}),catchingExceptions=queryString.getParam("catch");env.catchExceptions("undefined"==typeof catchingExceptions?!0:catchingExceptions);var htmlReporter=new jasmine.HtmlReporter({env:env,onRaiseExceptionsClick:function(){queryString.setParam("catch",!env.catchingExceptions())},getContainer:function(){return document.body},createElement:function(){return document.createElement.apply(document,arguments)},createTextNode:function(){return document.createTextNode.apply(document,arguments)},timer:new jasmine.Timer});env.addReporter(jasmineInterface.jsApiReporter),env.addReporter(htmlReporter);var specFilter=new jasmine.HtmlSpecFilter({filterString:function(){return queryString.getParam("spec")}});env.specFilter=function(spec){return specFilter.matches(spec.getFullName())},window.setTimeout=window.setTimeout,window.setInterval=window.setInterval,window.clearTimeout=window.clearTimeout,window.clearInterval=window.clearInterval;var currentWindowOnload=window.onload;window.onload=function(){currentWindowOnload&&currentWindowOnload(),htmlReporter.initialize(),env.execute()}}(),getJasmineRequireObj().console=function(jRequire,j$){j$.ConsoleReporter=jRequire.ConsoleReporter()},getJasmineRequireObj().ConsoleReporter=function(){function ConsoleReporter(options){function printNewline(){print("\n")}function colored(color,str){return showColors?ansi[color]+str+ansi.none:str}function plural(str,count){return 1==count?str:str+"s"}function repeat(thing,times){for(var arr=[],i=0;times>i;i++)arr.push(thing);return arr}function indent(str,spaces){for(var lines=(str||"").split("\n"),newArr=[],i=0;i<lines.length;i++)newArr.push(repeat(" ",spaces).join("")+lines[i]);return newArr.join("\n")}function specFailureDetails(result){printNewline(),print(result.fullName);for(var i=0;i<result.failedExpectations.length;i++){var failedExpectation=result.failedExpectations[i];printNewline(),print(indent(failedExpectation.stack,2))}printNewline()}var specCount,failureCount,pendingCount,print=options.print,showColors=options.showColors||!1,onComplete=options.onComplete||function(){},timer=options.timer||noopTimer,failedSpecs=[],ansi={green:"[32m",red:"[31m",yellow:"[33m",none:"[0m"};return this.jasmineStarted=function(){specCount=0,failureCount=0,pendingCount=0,print("Started"),printNewline(),timer.start()},this.jasmineDone=function(){printNewline();for(var i=0;i<failedSpecs.length;i++)specFailureDetails(failedSpecs[i]);printNewline();var specCounts=specCount+" "+plural("spec",specCount)+", "+failureCount+" "+plural("failure",failureCount);pendingCount&&(specCounts+=", "+pendingCount+" pending "+plural("spec",pendingCount)),print(specCounts),printNewline();var seconds=timer.elapsed()/1e3;print("Finished in "+seconds+" "+plural("second",seconds)),printNewline(),onComplete(0===failureCount)},this.specDone=function(result){return specCount++,"pending"==result.status?(pendingCount++,void print(colored("yellow","*"))):"passed"==result.status?void print(colored("green",".")):void("failed"==result.status&&(failureCount++,failedSpecs.push(result),print(colored("red","F"))))},this}var noopTimer={start:function(){},elapsed:function(){return 0}};return ConsoleReporter},jasmineRequire.html=function(j$){j$.ResultsNode=jasmineRequire.ResultsNode(),j$.HtmlReporter=jasmineRequire.HtmlReporter(j$),j$.QueryString=jasmineRequire.QueryString(),j$.HtmlSpecFilter=jasmineRequire.HtmlSpecFilter()},jasmineRequire.HtmlReporter=function(j$){function HtmlReporter(options){function find(selector){return getContainer().querySelector(selector)}function createDom(type,attrs){for(var el=createElement(type),i=2;i<arguments.length;i++){var child=arguments[i];"string"==typeof child?el.appendChild(createTextNode(child)):child&&el.appendChild(child)}for(var attr in attrs)"className"==attr?el[attr]=attrs[attr]:el.setAttribute(attr,attrs[attr]);return el}function pluralize(singular,count){var word=1==count?singular:singular+"s";return""+count+" "+word}function specHref(result){return"?spec="+encodeURIComponent(result.fullName)}function setMenuModeTo(mode){htmlReporterMain.setAttribute("class","html-reporter "+mode)}var htmlReporterMain,symbols,env=options.env||{},getContainer=options.getContainer,createElement=options.createElement,createTextNode=options.createTextNode,onRaiseExceptionsClick=options.onRaiseExceptionsClick||function(){},timer=options.timer||noopTimer,specsExecuted=0,failureCount=0,pendingSpecCount=0;this.initialize=function(){htmlReporterMain=createDom("div",{className:"html-reporter"},createDom("div",{className:"banner"},createDom("span",{className:"title"},"Jasmine"),createDom("span",{className:"version"},j$.version)),createDom("ul",{className:"symbol-summary"}),createDom("div",{className:"alert"}),createDom("div",{className:"results"},createDom("div",{className:"failures"}))),getContainer().appendChild(htmlReporterMain),symbols=find(".symbol-summary")};var totalSpecsDefined;this.jasmineStarted=function(options){totalSpecsDefined=options.totalSpecsDefined||0,timer.start()};var summary=createDom("div",{className:"summary"}),topResults=new j$.ResultsNode({},"",null),currentParent=topResults;this.suiteStarted=function(result){currentParent.addChild(result,"suite"),currentParent=currentParent.last()},this.suiteDone=function(){currentParent!=topResults&&(currentParent=currentParent.parent)},this.specStarted=function(result){currentParent.addChild(result,"spec")};var failures=[];return this.specDone=function(result){if("disabled"!=result.status&&specsExecuted++,symbols.appendChild(createDom("li",{className:result.status,id:"spec_"+result.id,title:result.fullName})),"failed"==result.status){failureCount++;for(var failure=createDom("div",{className:"spec-detail failed"},createDom("div",{className:"description"},createDom("a",{title:result.fullName,href:specHref(result)},result.fullName)),createDom("div",{className:"messages"})),messages=failure.childNodes[1],i=0;i<result.failedExpectations.length;i++){var expectation=result.failedExpectations[i];messages.appendChild(createDom("div",{className:"result-message"},expectation.message)),messages.appendChild(createDom("div",{className:"stack-trace"},expectation.stack))}failures.push(failure)}"pending"==result.status&&pendingSpecCount++},this.jasmineDone=function(){function summaryList(resultsTree,domParent){for(var specListNode,i=0;i<resultsTree.children.length;i++){var resultNode=resultsTree.children[i];if("suite"==resultNode.type){var suiteListNode=createDom("ul",{className:"suite",id:"suite-"+resultNode.result.id},createDom("li",{className:"suite-detail"},createDom("a",{href:specHref(resultNode.result)},resultNode.result.description)));summaryList(resultNode,suiteListNode),domParent.appendChild(suiteListNode)}"spec"==resultNode.type&&("specs"!=domParent.getAttribute("class")&&(specListNode=createDom("ul",{className:"specs"}),domParent.appendChild(specListNode)),specListNode.appendChild(createDom("li",{className:resultNode.result.status,id:"spec-"+resultNode.result.id},createDom("a",{href:specHref(resultNode.result)},resultNode.result.description))))}}var banner=find(".banner");banner.appendChild(createDom("span",{className:"duration"},"finished in "+timer.elapsed()/1e3+"s"));var alert=find(".alert");alert.appendChild(createDom("span",{className:"exceptions"},createDom("label",{className:"label","for":"raise-exceptions"},"raise exceptions"),createDom("input",{className:"raise",id:"raise-exceptions",type:"checkbox"})));var checkbox=find("input");if(checkbox.checked=!env.catchingExceptions(),checkbox.onclick=onRaiseExceptionsClick,totalSpecsDefined>specsExecuted){var skippedMessage="Ran "+specsExecuted+" of "+totalSpecsDefined+" specs - run all";alert.appendChild(createDom("span",{className:"bar skipped"},createDom("a",{href:"?",title:"Run all specs"},skippedMessage)))}var statusBarMessage=""+pluralize("spec",specsExecuted)+", "+pluralize("failure",failureCount);pendingSpecCount&&(statusBarMessage+=", "+pluralize("pending spec",pendingSpecCount));var statusBarClassName="bar "+(failureCount>0?"failed":"passed");alert.appendChild(createDom("span",{className:statusBarClassName},statusBarMessage));var results=find(".results");if(results.appendChild(summary),summaryList(topResults,summary),failures.length){alert.appendChild(createDom("span",{className:"menu bar spec-list"},createDom("span",{},"Spec List | "),createDom("a",{className:"failures-menu",href:"#"},"Failures"))),alert.appendChild(createDom("span",{className:"menu bar failure-list"},createDom("a",{className:"spec-list-menu",href:"#"},"Spec List"),createDom("span",{}," | Failures "))),find(".failures-menu").onclick=function(){setMenuModeTo("failure-list")},find(".spec-list-menu").onclick=function(){setMenuModeTo("spec-list")},setMenuModeTo("failure-list");for(var failureNode=find(".failures"),i=0;i<failures.length;i++)failureNode.appendChild(failures[i])}},this}var noopTimer={start:function(){},elapsed:function(){return 0}};return HtmlReporter},jasmineRequire.HtmlSpecFilter=function(){function HtmlSpecFilter(options){var filterString=options&&options.filterString()&&options.filterString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),filterPattern=new RegExp(filterString);this.matches=function(specName){return filterPattern.test(specName)}}return HtmlSpecFilter},jasmineRequire.ResultsNode=function(){function ResultsNode(result,type,parent){this.result=result,this.type=type,this.parent=parent,this.children=[],this.addChild=function(result,type){this.children.push(new ResultsNode(result,type,this))},this.last=function(){return this.children[this.children.length-1]}}return ResultsNode},jasmineRequire.QueryString=function(){function QueryString(options){function toQueryString(paramMap){var qStrPairs=[];for(var prop in paramMap)qStrPairs.push(encodeURIComponent(prop)+"="+encodeURIComponent(paramMap[prop]));return"?"+qStrPairs.join("&")}function queryStringToParamMap(){var paramStr=options.getWindowLocation().search.substring(1),params=[],paramMap={};if(paramStr.length>0){params=paramStr.split("&");for(var i=0;i<params.length;i++){var p=params[i].split("="),value=decodeURIComponent(p[1]);("true"===value||"false"===value)&&(value=JSON.parse(value)),paramMap[decodeURIComponent(p[0])]=value}}return paramMap}return this.setParam=function(key,value){var paramMap=queryStringToParamMap();paramMap[key]=value,options.getWindowLocation().search=toQueryString(paramMap)},this.getParam=function(key){return queryStringToParamMap()[key]},this}return QueryString},+function(window,jasmine,$){"use strict";jasmine.spiedEventsKey=function(selector,eventName){return[$(selector).selector,eventName].toString()},jasmine.getFixtures=function(){return jasmine.currentFixtures_=jasmine.currentFixtures_||new jasmine.Fixtures},jasmine.getStyleFixtures=function(){return jasmine.currentStyleFixtures_=jasmine.currentStyleFixtures_||new jasmine.StyleFixtures},jasmine.Fixtures=function(){this.containerId="jasmine-fixtures",this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures"},jasmine.Fixtures.prototype.set=function(html){return this.cleanUp(),this.createContainer_(html)},jasmine.Fixtures.prototype.appendSet=function(html){this.addToContainer_(html)},jasmine.Fixtures.prototype.preload=function(){this.read.apply(this,arguments)},jasmine.Fixtures.prototype.load=function(){this.cleanUp(),this.createContainer_(this.read.apply(this,arguments))},jasmine.Fixtures.prototype.appendLoad=function(){this.addToContainer_(this.read.apply(this,arguments))},jasmine.Fixtures.prototype.read=function(){for(var htmlChunks=[],fixtureUrls=arguments,urlCount=fixtureUrls.length,urlIndex=0;urlCount>urlIndex;urlIndex++)htmlChunks.push(this.getFixtureHtml_(fixtureUrls[urlIndex]));return htmlChunks.join("")},jasmine.Fixtures.prototype.clearCache=function(){this.fixturesCache_={}},jasmine.Fixtures.prototype.cleanUp=function(){$("#"+this.containerId).remove()},jasmine.Fixtures.prototype.sandbox=function(attributes){var attributesToSet=attributes||{};return $('<div id="sandbox" />').attr(attributesToSet)},jasmine.Fixtures.prototype.createContainer_=function(html){var container=$("<div>").attr("id",this.containerId).html(html);return $(document.body).append(container),container},jasmine.Fixtures.prototype.addToContainer_=function(html){var container=$(document.body).find("#"+this.containerId).append(html);container.length||this.createContainer_(html)},jasmine.Fixtures.prototype.getFixtureHtml_=function(url){return"undefined"==typeof this.fixturesCache_[url]&&this.loadFixtureIntoCache_(url),this.fixturesCache_[url]},jasmine.Fixtures.prototype.loadFixtureIntoCache_=function(relativeUrl){var self=this,url=this.makeFixtureUrl_(relativeUrl),htmlText="",scripts=($.ajax({async:!1,cache:!1,url:url,success:function(data,status,$xhr){htmlText=$xhr.responseText}}).fail(function(){throw new Error("Fixture could not be loaded: "+url+" (status: "+status+", message: "+errorThrown.message+")")}),$($.parseHTML(htmlText,!0)).find("script[src]")||[]);scripts.each(function(){$.ajax({async:!1,cache:!1,dataType:"script",url:$(this).attr("src"),success:function(data,status,$xhr){htmlText+="<script>"+$xhr.responseText+"</script>"},error:function(jqXHR,status,errorThrown){throw new Error("Script could not be loaded: "+scriptSrc+" (status: "+status+", message: "+errorThrown.message+")")}})}),self.fixturesCache_[relativeUrl]=htmlText},jasmine.Fixtures.prototype.makeFixtureUrl_=function(relativeUrl){return this.fixturesPath.match("/$")?this.fixturesPath+relativeUrl:this.fixturesPath+"/"+relativeUrl},jasmine.Fixtures.prototype.proxyCallTo_=function(methodName,passedArguments){return this[methodName].apply(this,passedArguments)},jasmine.StyleFixtures=function(){this.fixturesCache_={},this.fixturesNodes_=[],this.fixturesPath="spec/javascripts/fixtures"},jasmine.StyleFixtures.prototype.set=function(css){this.cleanUp(),this.createStyle_(css)},jasmine.StyleFixtures.prototype.appendSet=function(css){this.createStyle_(css)},jasmine.StyleFixtures.prototype.preload=function(){this.read_.apply(this,arguments)},jasmine.StyleFixtures.prototype.load=function(){this.cleanUp(),this.createStyle_(this.read_.apply(this,arguments))},jasmine.StyleFixtures.prototype.appendLoad=function(){this.createStyle_(this.read_.apply(this,arguments))},jasmine.StyleFixtures.prototype.cleanUp=function(){for(;this.fixturesNodes_.length;)this.fixturesNodes_.pop().remove()},jasmine.StyleFixtures.prototype.createStyle_=function(html){var styleText=$("<div></div>").html(html).text(),style=$("<style>"+styleText+"</style>");this.fixturesNodes_.push(style),$("head").append(style)},jasmine.StyleFixtures.prototype.clearCache=jasmine.Fixtures.prototype.clearCache,jasmine.StyleFixtures.prototype.read_=jasmine.Fixtures.prototype.read,jasmine.StyleFixtures.prototype.getFixtureHtml_=jasmine.Fixtures.prototype.getFixtureHtml_,jasmine.StyleFixtures.prototype.loadFixtureIntoCache_=jasmine.Fixtures.prototype.loadFixtureIntoCache_,jasmine.StyleFixtures.prototype.makeFixtureUrl_=jasmine.Fixtures.prototype.makeFixtureUrl_,jasmine.StyleFixtures.prototype.proxyCallTo_=jasmine.Fixtures.prototype.proxyCallTo_,jasmine.getJSONFixtures=function(){return jasmine.currentJSONFixtures_=jasmine.currentJSONFixtures_||new jasmine.JSONFixtures
},jasmine.JSONFixtures=function(){this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures/json"},jasmine.JSONFixtures.prototype.load=function(){return this.read.apply(this,arguments),this.fixturesCache_},jasmine.JSONFixtures.prototype.read=function(){for(var fixtureUrls=arguments,urlCount=fixtureUrls.length,urlIndex=0;urlCount>urlIndex;urlIndex++)this.getFixtureData_(fixtureUrls[urlIndex]);return this.fixturesCache_},jasmine.JSONFixtures.prototype.clearCache=function(){this.fixturesCache_={}},jasmine.JSONFixtures.prototype.getFixtureData_=function(url){return this.fixturesCache_[url]||this.loadFixtureIntoCache_(url),this.fixturesCache_[url]},jasmine.JSONFixtures.prototype.loadFixtureIntoCache_=function(relativeUrl){var self=this,url=this.fixturesPath.match("/$")?this.fixturesPath+relativeUrl:this.fixturesPath+"/"+relativeUrl;$.ajax({async:!1,cache:!1,dataType:"json",url:url,success:function(data){self.fixturesCache_[relativeUrl]=data},error:function(jqXHR,status,errorThrown){throw new Error("JSONFixture could not be loaded: "+url+" (status: "+status+", message: "+errorThrown.message+")")}})},jasmine.JSONFixtures.prototype.proxyCallTo_=function(methodName,passedArguments){return this[methodName].apply(this,passedArguments)},jasmine.jQuery=function(){},jasmine.jQuery.browserTagCaseIndependentHtml=function(html){return $("<div/>").append(html).html()},jasmine.jQuery.elementToString=function(element){return $(element).map(function(){return this.outerHTML}).toArray().join(", ")};var data={spiedEvents:{},handlers:[]};jasmine.jQuery.events={spyOn:function(selector,eventName){var handler=function(){data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)]=jasmine.util.argsToArray(arguments)};return $(selector).on(eventName,handler),data.handlers.push(handler),{selector:selector,eventName:eventName,handler:handler,reset:function(){delete data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)]}}},args:function(selector,eventName){var actualArgs=data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)];if(!actualArgs)throw"There is no spy for "+eventName+" on "+selector.toString()+". Make sure to create a spy using spyOnEvent.";return actualArgs},wasTriggered:function(selector,eventName){return!!data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)]},wasTriggeredWith:function(selector,eventName,expectedArgs,util,customEqualityTesters){var actualArgs=jasmine.jQuery.events.args(selector,eventName).slice(1);return"[object Array]"!==Object.prototype.toString.call(expectedArgs)&&(actualArgs=actualArgs[0]),util.equals(expectedArgs,actualArgs,customEqualityTesters)},wasPrevented:function(selector,eventName){var args=data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)],e=args?args[0]:void 0;return e&&e.isDefaultPrevented()},wasStopped:function(selector,eventName){var args=data.spiedEvents[jasmine.spiedEventsKey(selector,eventName)],e=args?args[0]:void 0;return e&&e.isPropagationStopped()},cleanUp:function(){data.spiedEvents={},data.handlers=[]}};var hasProperty=function(actualValue,expectedValue){return void 0===expectedValue?void 0!==actualValue:actualValue===expectedValue};beforeEach(function(){jasmine.addMatchers({toHaveClass:function(){return{compare:function(actual,className){return{pass:$(actual).hasClass(className)}}}},toHaveCss:function(){return{compare:function(actual,css){for(var prop in css){var value=css[prop];if(("auto"!==value||"auto"!==$(actual).get(0).style[prop])&&$(actual).css(prop)!==value)return{pass:!1}}return{pass:!0}}}},toBeVisible:function(){return{compare:function(actual){return{pass:$(actual).is(":visible")}}}},toBeHidden:function(){return{compare:function(actual){return{pass:$(actual).is(":hidden")}}}},toBeSelected:function(){return{compare:function(actual){return{pass:$(actual).is(":selected")}}}},toBeChecked:function(){return{compare:function(actual){return{pass:$(actual).is(":checked")}}}},toBeEmpty:function(){return{compare:function(actual){return{pass:$(actual).is(":empty")}}}},toBeInDOM:function(){return{compare:function(actual){return{pass:$.contains(document.documentElement,$(actual)[0])}}}},toExist:function(){return{compare:function(actual){return{pass:$(actual).length}}}},toHaveLength:function(){return{compare:function(actual,length){return{pass:$(actual).length===length}}}},toHaveAttr:function(){return{compare:function(actual,attributeName,expectedAttributeValue){return{pass:hasProperty($(actual).attr(attributeName),expectedAttributeValue)}}}},toHaveProp:function(){return{compare:function(actual,propertyName,expectedPropertyValue){return{pass:hasProperty($(actual).prop(propertyName),expectedPropertyValue)}}}},toHaveId:function(){return{compare:function(actual,id){return{pass:$(actual).attr("id")==id}}}},toHaveHtml:function(){return{compare:function(actual,html){return{pass:$(actual).html()==jasmine.jQuery.browserTagCaseIndependentHtml(html)}}}},toContainHtml:function(){return{compare:function(actual,html){var actualHtml=$(actual).html(),expectedHtml=jasmine.jQuery.browserTagCaseIndependentHtml(html);return{pass:actualHtml.indexOf(expectedHtml)>=0}}}},toHaveText:function(){return{compare:function(actual,text){var trimmedText=$.trim($(actual).text());return text&&$.isFunction(text.test)?{pass:text.test(trimmedText)}:{pass:trimmedText==text}}}},toContainText:function(){return{compare:function(actual,text){var trimmedText=$.trim($(actual).text());return text&&$.isFunction(text.test)?{pass:text.test(trimmedText)}:{pass:-1!=trimmedText.indexOf(text)}}}},toHaveValue:function(){return{compare:function(actual,value){return{pass:$(actual).val()===value}}}},toHaveData:function(){return{compare:function(actual,key,expectedValue){return{pass:hasProperty($(actual).data(key),expectedValue)}}}},toContainElement:function(){return{compare:function(actual,selector){return window.debug,{pass:$(actual).find(selector).length}}}},toBeMatchedBy:function(){return{compare:function(actual,selector){return{pass:$(actual).filter(selector).length}}}},toBeDisabled:function(){return{compare:function(actual){return{pass:$(actual).is(":disabled")}}}},toBeFocused:function(){return{compare:function(actual){return{pass:$(actual)[0]===$(actual)[0].ownerDocument.activeElement}}}},toHandle:function(){return{compare:function(actual,event){var events=$._data($(actual).get(0),"events");if(!events||!event||"string"!=typeof event)return{pass:!1};var namespaces=event.split("."),eventType=namespaces.shift(),sortedNamespaces=namespaces.slice(0).sort(),namespaceRegExp=new RegExp("(^|\\.)"+sortedNamespaces.join("\\.(?:.*\\.)?")+"(\\.|$)");if(!events[eventType]||!namespaces.length)return{pass:events[eventType]&&events[eventType].length>0};for(var i=0;i<events[eventType].length;i++){var namespace=events[eventType][i].namespace;if(namespaceRegExp.test(namespace))return{pass:!0}}return{pass:!1}}}},toHandleWith:function(){return{compare:function(actual,eventName,eventHandler){for(var normalizedEventName=eventName.split(".")[0],stack=$._data($(actual).get(0),"events")[normalizedEventName],i=0;i<stack.length;i++)if(stack[i].handler==eventHandler)return{pass:!0};return{pass:!1}}}},toHaveBeenTriggeredOn:function(){return{compare:function(actual,selector){var result={pass:jasmine.jQuery.events.wasTriggered(selector,actual)};return result.message=result.pass?"Expected event "+$(actual)+" not to have been triggered on "+selector:"Expected event "+$(actual)+" to have been triggered on "+selector,result}}},toHaveBeenTriggered:function(){return{compare:function(actual){var eventName=actual.eventName,selector=actual.selector,result={pass:jasmine.jQuery.events.wasTriggered(selector,eventName)};return result.message=result.pass?"Expected event "+eventName+" not to have been triggered on "+selector:"Expected event "+eventName+" to have been triggered on "+selector,result}}},toHaveBeenTriggeredOnAndWith:function(j$,customEqualityTesters){return{compare:function(actual,selector,expectedArgs){var wasTriggered=jasmine.jQuery.events.wasTriggered(selector,actual),result={pass:wasTriggered&&jasmine.jQuery.events.wasTriggeredWith(selector,actual,expectedArgs,j$,customEqualityTesters)};if(wasTriggered){var actualArgs=jasmine.jQuery.events.args(selector,actual,expectedArgs)[1];result.message=result.pass?"Expected event "+actual+" not to have been triggered with "+jasmine.pp(expectedArgs)+" but it was triggered with "+jasmine.pp(actualArgs):"Expected event "+actual+" to have been triggered with "+jasmine.pp(expectedArgs)+"  but it was triggered with "+jasmine.pp(actualArgs)}else result.message=result.pass?"Expected event "+actual+" not to have been triggered on "+selector:"Expected event "+actual+" to have been triggered on "+selector;return result}}},toHaveBeenPreventedOn:function(){return{compare:function(actual,selector){var result={pass:jasmine.jQuery.events.wasPrevented(selector,actual)};return result.message=result.pass?"Expected event "+actual+" not to have been prevented on "+selector:"Expected event "+actual+" to have been prevented on "+selector,result}}},toHaveBeenPrevented:function(){return{compare:function(actual){var eventName=actual.eventName,selector=actual.selector,result={pass:jasmine.jQuery.events.wasPrevented(selector,eventName)};return result.message=result.pass?"Expected event "+eventName+" not to have been prevented on "+selector:"Expected event "+eventName+" to have been prevented on "+selector,result}}},toHaveBeenStoppedOn:function(){return{compare:function(actual,selector){var result={pass:jasmine.jQuery.events.wasStopped(selector,actual)};return result.message=result.pass?"Expected event "+actual+" not to have been stopped on "+selector:"Expected event "+actual+" to have been stopped on "+selector,result}}},toHaveBeenStopped:function(){return{compare:function(actual){var eventName=actual.eventName,selector=actual.selector,result={pass:jasmine.jQuery.events.wasStopped(selector,eventName)};return result.message=result.pass?"Expected event "+eventName+" not to have been stopped on "+selector:"Expected event "+eventName+" to have been stopped on "+selector,result}}}}),jasmine.getEnv().addCustomEqualityTester(function(a,b){if(a&&b){if(a instanceof $||jasmine.isDomNode(a)){var $a=$(a);return b instanceof $?$a.length==b.length&&a.is(b):$a.is(b)}if(b instanceof $||jasmine.isDomNode(b)){var $b=$(b);return a instanceof jQuery?a.length==$b.length&&$b.is(a):$(b).is(a)}}}),jasmine.getEnv().addCustomEqualityTester(function(a,b){return a instanceof jQuery&&b instanceof jQuery&&a.size()==b.size()?a.is(b):void 0})}),afterEach(function(){jasmine.getFixtures().cleanUp(),jasmine.getStyleFixtures().cleanUp(),jasmine.jQuery.events.cleanUp()}),window.readFixtures=function(){return jasmine.getFixtures().proxyCallTo_("read",arguments)},window.preloadFixtures=function(){jasmine.getFixtures().proxyCallTo_("preload",arguments)},window.loadFixtures=function(){jasmine.getFixtures().proxyCallTo_("load",arguments)},window.appendLoadFixtures=function(){jasmine.getFixtures().proxyCallTo_("appendLoad",arguments)},window.setFixtures=function(){return jasmine.getFixtures().proxyCallTo_("set",arguments)},window.appendSetFixtures=function(){jasmine.getFixtures().proxyCallTo_("appendSet",arguments)},window.sandbox=function(attributes){return jasmine.getFixtures().sandbox(attributes)},window.spyOnEvent=function(selector,eventName){return jasmine.jQuery.events.spyOn(selector,eventName)},window.preloadStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("preload",arguments)},window.loadStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("load",arguments)},window.appendLoadStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("appendLoad",arguments)},window.setStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("set",arguments)},window.appendSetStyleFixtures=function(){jasmine.getStyleFixtures().proxyCallTo_("appendSet",arguments)},window.loadJSONFixtures=function(){return jasmine.getJSONFixtures().proxyCallTo_("load",arguments)},window.getJSONFixture=function(url){return jasmine.getJSONFixtures().proxyCallTo_("read",arguments)[url]}}(window,window.jasmine,window.jQuery),getJasmineRequireObj().core=function(jRequire){var j$={};return jRequire.base(j$),j$.util=jRequire.util(),j$.Any=jRequire.Any(),j$.CallTracker=jRequire.CallTracker(),j$.Clock=jRequire.Clock(),j$.DelayedFunctionScheduler=jRequire.DelayedFunctionScheduler(),j$.Env=jRequire.Env(j$),j$.ExceptionFormatter=jRequire.ExceptionFormatter(),j$.Expectation=jRequire.Expectation(),j$.buildExpectationResult=jRequire.buildExpectationResult(),j$.JsApiReporter=jRequire.JsApiReporter(),j$.matchersUtil=jRequire.matchersUtil(j$),j$.ObjectContaining=jRequire.ObjectContaining(j$),j$.pp=jRequire.pp(j$),j$.QueueRunner=jRequire.QueueRunner(),j$.ReportDispatcher=jRequire.ReportDispatcher(),j$.Spec=jRequire.Spec(j$),j$.SpyStrategy=jRequire.SpyStrategy(),j$.Suite=jRequire.Suite(),j$.Timer=jRequire.Timer(),j$.version=jRequire.version(),j$.matchers=jRequire.requireMatchers(jRequire,j$),j$},getJasmineRequireObj().requireMatchers=function(jRequire,j$){for(var availableMatchers=["toBe","toBeCloseTo","toBeDefined","toBeFalsy","toBeGreaterThan","toBeLessThan","toBeNaN","toBeNull","toBeTruthy","toBeUndefined","toContain","toEqual","toHaveBeenCalled","toHaveBeenCalledWith","toMatch","toThrow","toThrowError"],matchers={},i=0;i<availableMatchers.length;i++){var name=availableMatchers[i];matchers[name]=jRequire[name](j$)}return matchers},getJasmineRequireObj().base=function(j$){j$.unimplementedMethod_=function(){throw new Error("unimplemented method")},j$.MAX_PRETTY_PRINT_DEPTH=40,j$.DEFAULT_TIMEOUT_INTERVAL=5e3,j$.getGlobal=function(){var jasmineGlobal=eval.call(null,"this");return function(){return jasmineGlobal}}(),j$.getEnv=function(options){var env=j$.currentEnv_=j$.currentEnv_||new j$.Env(options);return env},j$.isArray_=function(value){return j$.isA_("Array",value)},j$.isString_=function(value){return j$.isA_("String",value)},j$.isNumber_=function(value){return j$.isA_("Number",value)},j$.isA_=function(typeName,value){return Object.prototype.toString.apply(value)==="[object "+typeName+"]"},j$.isDomNode=function(obj){return obj.nodeType>0},j$.any=function(clazz){return new j$.Any(clazz)},j$.objectContaining=function(sample){return new j$.ObjectContaining(sample)},j$.createSpy=function(name,originalFn){var spyStrategy=new j$.SpyStrategy({name:name,fn:originalFn,getSpy:function(){return spy}}),callTracker=new j$.CallTracker,spy=function(){return callTracker.track({object:this,args:Array.prototype.slice.apply(arguments)}),spyStrategy.exec.apply(this,arguments)};for(var prop in originalFn){if("and"===prop||"calls"===prop)throw new Error("Jasmine spies would overwrite the 'and' and 'calls' properties on the object being spied upon");spy[prop]=originalFn[prop]}return spy.and=spyStrategy,spy.calls=callTracker,spy},j$.isSpy=function(putativeSpy){return putativeSpy?putativeSpy.and instanceof j$.SpyStrategy&&putativeSpy.calls instanceof j$.CallTracker:!1},j$.createSpyObj=function(baseName,methodNames){if(!j$.isArray_(methodNames)||0===methodNames.length)throw"createSpyObj requires a non-empty array of method names to create spies for";for(var obj={},i=0;i<methodNames.length;i++)obj[methodNames[i]]=j$.createSpy(baseName+"."+methodNames[i]);return obj}},getJasmineRequireObj().util=function(){var util={};return util.inherit=function(childClass,parentClass){var Subclass=function(){};Subclass.prototype=parentClass.prototype,childClass.prototype=new Subclass},util.htmlEscape=function(str){return str?str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):str},util.argsToArray=function(args){for(var arrayOfArgs=[],i=0;i<args.length;i++)arrayOfArgs.push(args[i]);return arrayOfArgs},util.isUndefined=function(obj){return void 0===obj},util},getJasmineRequireObj().Spec=function(j$){function Spec(attrs){this.expectationFactory=attrs.expectationFactory,this.resultCallback=attrs.resultCallback||function(){},this.id=attrs.id,this.description=attrs.description||"",this.fn=attrs.fn,this.beforeFns=attrs.beforeFns||function(){return[]},this.afterFns=attrs.afterFns||function(){return[]},this.onStart=attrs.onStart||function(){},this.exceptionFormatter=attrs.exceptionFormatter||function(){},this.getSpecName=attrs.getSpecName||function(){return""},this.expectationResultFactory=attrs.expectationResultFactory||function(){},this.queueRunnerFactory=attrs.queueRunnerFactory||function(){},this.catchingExceptions=attrs.catchingExceptions||function(){return!0},this.timer=attrs.timer||{setTimeout:setTimeout,clearTimeout:clearTimeout},this.fn||this.pend(),this.result={id:this.id,description:this.description,fullName:this.getFullName(),failedExpectations:[]}}return Spec.prototype.addExpectationResult=function(passed,data){passed||this.result.failedExpectations.push(this.expectationResultFactory(data))},Spec.prototype.expect=function(actual){return this.expectationFactory(actual,this)},Spec.prototype.execute=function(onComplete){function timeoutable(fn){return function(done){timeout=Function.prototype.apply.apply(self.timer.setTimeout,[j$.getGlobal(),[function(){onException(new Error("Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL.")),done()},j$.DEFAULT_TIMEOUT_INTERVAL]]);var callDone=function(){clearTimeoutable(),done()};fn.call(this,callDone)}}function clearTimeoutable(){Function.prototype.apply.apply(self.timer.clearTimeout,[j$.getGlobal(),[timeout]]),timeout=void 0}function onException(e){return clearTimeoutable(),Spec.isPendingSpecException(e)?void self.pend():void self.addExpectationResult(!1,{matcherName:"",passed:!1,expected:"",actual:"",error:e})}function complete(){self.result.status=self.status(),self.resultCallback(self.result),onComplete&&onComplete()}var timeout,self=this;if(this.onStart(this),this.markedPending||this.disabled)return void complete();for(var allFns=this.beforeFns().concat(this.fn).concat(this.afterFns()),allTimeoutableFns=[],i=0;i<allFns.length;i++){var fn=allFns[i];allTimeoutableFns.push(fn.length>0?timeoutable(fn):fn)}this.queueRunnerFactory({fns:allTimeoutableFns,onException:onException,onComplete:complete})},Spec.prototype.disable=function(){this.disabled=!0},Spec.prototype.pend=function(){this.markedPending=!0},Spec.prototype.status=function(){return this.disabled?"disabled":this.markedPending?"pending":this.result.failedExpectations.length>0?"failed":"passed"},Spec.prototype.getFullName=function(){return this.getSpecName(this)},Spec.pendingSpecExceptionMessage="=> marked Pending",Spec.isPendingSpecException=function(e){return-1!==e.toString().indexOf(Spec.pendingSpecExceptionMessage)},Spec},void 0==typeof window&&"object"==typeof exports&&(exports.Spec=jasmineRequire.Spec),getJasmineRequireObj().Env=function(j$){function Env(options){function clearStack(fn){currentSpecCallbackDepth++,currentSpecCallbackDepth>=maximumSpecCallbackDepth?(currentSpecCallbackDepth=0,realSetTimeout(fn,0)):fn()}options=options||{};var self=this,global=options.global||j$.getGlobal(),totalSpecsDefined=0,catchExceptions=!0,realSetTimeout=j$.getGlobal().setTimeout,realClearTimeout=j$.getGlobal().clearTimeout;this.clock=new j$.Clock(global,new j$.DelayedFunctionScheduler);var runnableLookupTable={},spies=[],currentSpec=null,currentSuite=null,reporter=new j$.ReportDispatcher(["jasmineStarted","jasmineDone","suiteStarted","suiteDone","specStarted","specDone"]);this.specFilter=function(){return!0};var customEqualityTesters=[];this.addCustomEqualityTester=function(tester){customEqualityTesters.push(tester)},j$.Expectation.addCoreMatchers(j$.matchers);var nextSpecId=0,getNextSpecId=function(){return"spec"+nextSpecId++},nextSuiteId=0,getNextSuiteId=function(){return"suite"+nextSuiteId++},expectationFactory=function(actual,spec){function addExpectationResult(passed,result){return spec.addExpectationResult(passed,result)}return j$.Expectation.Factory({util:j$.matchersUtil,customEqualityTesters:customEqualityTesters,actual:actual,addExpectationResult:addExpectationResult})},specStarted=function(spec){currentSpec=spec,reporter.specStarted(spec.result)},beforeFns=function(suite){return function(){for(var befores=[];suite;)befores=befores.concat(suite.beforeFns),suite=suite.parentSuite;return befores.reverse()}},afterFns=function(suite){return function(){for(var afters=[];suite;)afters=afters.concat(suite.afterFns),suite=suite.parentSuite;return afters}},getSpecName=function(spec,suite){return suite.getFullName()+" "+spec.description},buildExpectationResult=j$.buildExpectationResult,exceptionFormatter=new j$.ExceptionFormatter,expectationResultFactory=function(attrs){return attrs.messageFormatter=exceptionFormatter.message,attrs.stackFormatter=exceptionFormatter.stack,buildExpectationResult(attrs)};this.catchExceptions=function(value){return catchExceptions=!!value},this.catchingExceptions=function(){return catchExceptions};var maximumSpecCallbackDepth=20,currentSpecCallbackDepth=0,catchException=function(e){return j$.Spec.isPendingSpecException(e)||catchExceptions},queueRunnerFactory=function(options){options.catchException=catchException,options.clearStack=options.clearStack||clearStack,new j$.QueueRunner(options).execute()},topSuite=new j$.Suite({env:this,id:getNextSuiteId(),description:"Jasmine__TopLevel__Suite",queueRunner:queueRunnerFactory,resultCallback:function(){}});runnableLookupTable[topSuite.id]=topSuite,currentSuite=topSuite,this.topSuite=function(){return topSuite},this.execute=function(runnablesToRun){runnablesToRun=runnablesToRun||[topSuite.id];for(var allFns=[],i=0;i<runnablesToRun.length;i++){var runnable=runnableLookupTable[runnablesToRun[i]];allFns.push(function(runnable){return function(done){runnable.execute(done)}}(runnable))}reporter.jasmineStarted({totalSpecsDefined:totalSpecsDefined}),queueRunnerFactory({fns:allFns,onComplete:reporter.jasmineDone})},this.addReporter=function(reporterToAdd){reporter.addReporter(reporterToAdd)},this.addMatchers=function(matchersToAdd){j$.Expectation.addMatchers(matchersToAdd)},this.spyOn=function(obj,methodName){if(j$.util.isUndefined(obj))throw new Error("spyOn could not find an object to spy upon for "+methodName+"()");if(j$.util.isUndefined(obj[methodName]))throw new Error(methodName+"() method does not exist");if(obj[methodName]&&j$.isSpy(obj[methodName]))throw new Error(methodName+" has already been spied upon");var spy=j$.createSpy(methodName,obj[methodName]);return spies.push({spy:spy,baseObj:obj,methodName:methodName,originalValue:obj[methodName]}),obj[methodName]=spy,spy};var suiteFactory=function(description){var suite=new j$.Suite({env:self,id:getNextSuiteId(),description:description,parentSuite:currentSuite,queueRunner:queueRunnerFactory,onStart:suiteStarted,resultCallback:function(attrs){reporter.suiteDone(attrs)}});return runnableLookupTable[suite.id]=suite,suite};this.describe=function(description,specDefinitions){var suite=suiteFactory(description),parentSuite=currentSuite;parentSuite.addChild(suite),currentSuite=suite;var declarationError=null;try{specDefinitions.call(suite)}catch(e){declarationError=e}return declarationError&&this.it("encountered a declaration exception",function(){throw declarationError}),currentSuite=parentSuite,suite},this.xdescribe=function(description,specDefinitions){var suite=this.describe(description,specDefinitions);return suite.disable(),suite};var specFactory=function(description,fn,suite){function removeAllSpies(){for(var i=0;i<spies.length;i++){var spyEntry=spies[i];spyEntry.baseObj[spyEntry.methodName]=spyEntry.originalValue}spies=[]}function specResultCallback(result){removeAllSpies(),j$.Expectation.resetMatchers(),customEqualityTesters=[],currentSpec=null,reporter.specDone(result)}totalSpecsDefined++;var spec=new j$.Spec({id:getNextSpecId(),beforeFns:beforeFns(suite),afterFns:afterFns(suite),expectationFactory:expectationFactory,exceptionFormatter:exceptionFormatter,resultCallback:specResultCallback,getSpecName:function(spec){return getSpecName(spec,suite)},onStart:specStarted,description:description,expectationResultFactory:expectationResultFactory,queueRunnerFactory:queueRunnerFactory,fn:fn,timer:{setTimeout:realSetTimeout,clearTimeout:realClearTimeout}});return runnableLookupTable[spec.id]=spec,self.specFilter(spec)||spec.disable(),spec},suiteStarted=function(suite){reporter.suiteStarted(suite.result)};this.it=function(description,fn){var spec=specFactory(description,fn,currentSuite);return currentSuite.addChild(spec),spec},this.xit=function(description,fn){var spec=this.it(description,fn);return spec.pend(),spec},this.expect=function(actual){return currentSpec.expect(actual)},this.beforeEach=function(beforeEachFunction){currentSuite.beforeEach(beforeEachFunction)},this.afterEach=function(afterEachFunction){currentSuite.afterEach(afterEachFunction)},this.pending=function(){throw j$.Spec.pendingSpecExceptionMessage}}return Env},getJasmineRequireObj().JsApiReporter=function(){function JsApiReporter(options){function storeSuite(result){suites[result.id]=result}var timer=options.timer||noopTimer,status="loaded";this.started=!1,this.finished=!1,this.jasmineStarted=function(){this.started=!0,status="started",timer.start()};var executionTime;this.jasmineDone=function(){this.finished=!0,executionTime=timer.elapsed(),status="done"},this.status=function(){return status};var suites={};this.suiteStarted=function(result){storeSuite(result)},this.suiteDone=function(result){storeSuite(result)},this.suites=function(){return suites};var specs=[];this.specStarted=function(){},this.specDone=function(result){specs.push(result)},this.specResults=function(index,length){return specs.slice(index,index+length)},this.specs=function(){return specs},this.executionTime=function(){return executionTime}}var noopTimer={start:function(){},elapsed:function(){return 0}};return JsApiReporter},getJasmineRequireObj().Any=function(){function Any(expectedObject){this.expectedObject=expectedObject}return Any.prototype.jasmineMatches=function(other){return this.expectedObject==String?"string"==typeof other||other instanceof String:this.expectedObject==Number?"number"==typeof other||other instanceof Number:this.expectedObject==Function?"function"==typeof other||other instanceof Function:this.expectedObject==Object?"object"==typeof other:this.expectedObject==Boolean?"boolean"==typeof other:other instanceof this.expectedObject},Any.prototype.jasmineToString=function(){return"<jasmine.any("+this.expectedClass+")>"},Any},getJasmineRequireObj().CallTracker=function(){function CallTracker(){var calls=[];this.track=function(context){calls.push(context)},this.any=function(){return!!calls.length},this.count=function(){return calls.length},this.argsFor=function(index){var call=calls[index];return call?call.args:[]},this.all=function(){return calls},this.allArgs=function(){for(var callArgs=[],i=0;i<calls.length;i++)callArgs.push(calls[i].args);return callArgs},this.first=function(){return calls[0]},this.mostRecent=function(){return calls[calls.length-1]},this.reset=function(){calls=[]}}return CallTracker},getJasmineRequireObj().Clock=function(){function Clock(global,delayedFunctionScheduler){function legacyIE(){return!(realTimingFunctions.setTimeout||realTimingFunctions.setInterval).apply}function replace(dest,source){for(var prop in source)dest[prop]=source[prop]}function setTimeout(fn,delay){return delayedFunctionScheduler.scheduleFunction(fn,delay,argSlice(arguments,2))}function clearTimeout(id){return delayedFunctionScheduler.removeFunctionWithId(id)}function setInterval(fn,interval){return delayedFunctionScheduler.scheduleFunction(fn,interval,argSlice(arguments,2),!0)}function clearInterval(id){return delayedFunctionScheduler.removeFunctionWithId(id)}function argSlice(argsObj){return Array.prototype.slice.call(argsObj,2)}var timer,self=this,realTimingFunctions={setTimeout:global.setTimeout,clearTimeout:global.clearTimeout,setInterval:global.setInterval,clearInterval:global.clearInterval},fakeTimingFunctions={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval},installed=!1;return self.install=function(){replace(global,fakeTimingFunctions),timer=fakeTimingFunctions,installed=!0},self.uninstall=function(){delayedFunctionScheduler.reset(),replace(global,realTimingFunctions),timer=realTimingFunctions,installed=!1},self.setTimeout=function(fn,delay){if(legacyIE()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setTimeout without a polyfill");return timer.setTimeout(fn,delay)}return Function.prototype.apply.apply(timer.setTimeout,[global,arguments])},self.setInterval=function(fn,delay){if(legacyIE()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setInterval without a polyfill");return timer.setInterval(fn,delay)}return Function.prototype.apply.apply(timer.setInterval,[global,arguments])},self.clearTimeout=function(id){return Function.prototype.call.apply(timer.clearTimeout,[global,id])},self.clearInterval=function(id){return Function.prototype.call.apply(timer.clearInterval,[global,id])},self.tick=function(millis){if(!installed)throw new Error("Mock clock is not installed, use jasmine.clock().install()");delayedFunctionScheduler.tick(millis)},self}return Clock},getJasmineRequireObj().DelayedFunctionScheduler=function(){function DelayedFunctionScheduler(){function indexOfFirstToPass(array,testFn){for(var index=-1,i=0;i<array.length;++i)if(testFn(array[i])){index=i;break}return index}function deleteFromLookup(key){var value=Number(key),i=indexOfFirstToPass(scheduledLookup,function(millis){return millis===value});i>-1&&scheduledLookup.splice(i,1)}function reschedule(scheduledFn){self.scheduleFunction(scheduledFn.funcToCall,scheduledFn.millis,scheduledFn.params,!0,scheduledFn.timeoutKey,scheduledFn.runAtMillis+scheduledFn.millis)}function runScheduledFunctions(endTime){if(!(0===scheduledLookup.length||scheduledLookup[0]>endTime))do{currentTime=scheduledLookup.shift();var funcsToRun=scheduledFunctions[currentTime];delete scheduledFunctions[currentTime];for(var i=0;i<funcsToRun.length;++i){var funcToRun=funcsToRun[i];funcToRun.funcToCall.apply(null,funcToRun.params||[]),funcToRun.recurring&&reschedule(funcToRun)}}while(scheduledLookup.length>0&&currentTime!==endTime&&scheduledLookup[0]<=endTime)}var self=this,scheduledLookup=[],scheduledFunctions={},currentTime=0,delayedFnCount=0;return self.tick=function(millis){millis=millis||0;var endTime=currentTime+millis;runScheduledFunctions(endTime),currentTime=endTime},self.scheduleFunction=function(funcToCall,millis,params,recurring,timeoutKey,runAtMillis){var f;f="string"==typeof funcToCall?function(){return eval(funcToCall)}:funcToCall,millis=millis||0,timeoutKey=timeoutKey||++delayedFnCount,runAtMillis=runAtMillis||currentTime+millis;var funcToSchedule={runAtMillis:runAtMillis,funcToCall:f,recurring:recurring,params:params,timeoutKey:timeoutKey,millis:millis};return runAtMillis in scheduledFunctions?scheduledFunctions[runAtMillis].push(funcToSchedule):(scheduledFunctions[runAtMillis]=[funcToSchedule],scheduledLookup.push(runAtMillis),scheduledLookup.sort(function(a,b){return a-b})),timeoutKey},self.removeFunctionWithId=function(timeoutKey){for(var runAtMillis in scheduledFunctions){var funcs=scheduledFunctions[runAtMillis],i=indexOfFirstToPass(funcs,function(func){return func.timeoutKey===timeoutKey});if(i>-1){1===funcs.length?(delete scheduledFunctions[runAtMillis],deleteFromLookup(runAtMillis)):funcs.splice(i,1);break}}},self.reset=function(){currentTime=0,scheduledLookup=[],scheduledFunctions={},delayedFnCount=0},self}return DelayedFunctionScheduler},getJasmineRequireObj().ExceptionFormatter=function(){function ExceptionFormatter(){this.message=function(error){var message=error.name+": "+error.message;return(error.fileName||error.sourceURL)&&(message+=" in "+(error.fileName||error.sourceURL)),(error.line||error.lineNumber)&&(message+=" (line "+(error.line||error.lineNumber)+")"),message},this.stack=function(error){return error?error.stack:null
}}return ExceptionFormatter},getJasmineRequireObj().Expectation=function(){function Expectation(options){this.util=options.util||{buildFailureMessage:function(){}},this.customEqualityTesters=options.customEqualityTesters||[],this.actual=options.actual,this.addExpectationResult=options.addExpectationResult||function(){},this.isNot=options.isNot;for(var matcherName in matchers)this[matcherName]=matchers[matcherName]}var matchers={};return Expectation.prototype.wrapCompare=function(name,matcherFactory){return function(){function defaultNegativeCompare(){var result=matcher.compare.apply(null,args);return result.pass=!result.pass,result}var args=Array.prototype.slice.call(arguments,0),expected=args.slice(0),message="";args.unshift(this.actual);var matcher=matcherFactory(this.util,this.customEqualityTesters),matcherCompare=matcher.compare;this.isNot&&(matcherCompare=matcher.negativeCompare||defaultNegativeCompare);var result=matcherCompare.apply(null,args);result.pass||(result.message?message=result.message:(args.unshift(this.isNot),args.unshift(name),message=this.util.buildFailureMessage.apply(null,args))),1==expected.length&&(expected=expected[0]),this.addExpectationResult(result.pass,{matcherName:name,passed:result.pass,message:message,actual:this.actual,expected:expected})}},Expectation.addCoreMatchers=function(matchers){var prototype=Expectation.prototype;for(var matcherName in matchers){var matcher=matchers[matcherName];prototype[matcherName]=prototype.wrapCompare(matcherName,matcher)}},Expectation.addMatchers=function(matchersToAdd){for(var name in matchersToAdd){var matcher=matchersToAdd[name];matchers[name]=Expectation.prototype.wrapCompare(name,matcher)}},Expectation.resetMatchers=function(){for(var name in matchers)delete matchers[name]},Expectation.Factory=function(options){options=options||{};var expect=new Expectation(options);return options.isNot=!0,expect.not=new Expectation(options),expect},Expectation},getJasmineRequireObj().buildExpectationResult=function(){function buildExpectationResult(options){function message(){return options.passed?"Passed.":options.message?options.message:options.error?messageFormatter(options.error):""}function stack(){if(options.passed)return"";var error=options.error;if(!error)try{throw new Error(message())}catch(e){error=e}return stackFormatter(error)}var messageFormatter=options.messageFormatter||function(){},stackFormatter=options.stackFormatter||function(){};return{matcherName:options.matcherName,expected:options.expected,actual:options.actual,message:message(),stack:stack(),passed:options.passed}}return buildExpectationResult},getJasmineRequireObj().ObjectContaining=function(j$){function ObjectContaining(sample){this.sample=sample}return ObjectContaining.prototype.jasmineMatches=function(other,mismatchKeys,mismatchValues){if("object"!=typeof this.sample)throw new Error("You must provide an object to objectContaining, not '"+this.sample+"'.");mismatchKeys=mismatchKeys||[],mismatchValues=mismatchValues||[];var hasKey=function(obj,keyName){return null!==obj&&!j$.util.isUndefined(obj[keyName])};for(var property in this.sample)!hasKey(other,property)&&hasKey(this.sample,property)?mismatchKeys.push("expected has key '"+property+"', but missing from actual."):j$.matchersUtil.equals(this.sample[property],other[property])||mismatchValues.push("'"+property+"' was '"+(other[property]?j$.util.htmlEscape(other[property].toString()):other[property])+"' in actual, but was '"+(this.sample[property]?j$.util.htmlEscape(this.sample[property].toString()):this.sample[property])+"' in expected.");return 0===mismatchKeys.length&&0===mismatchValues.length},ObjectContaining.prototype.jasmineToString=function(){return"<jasmine.objectContaining("+j$.pp(this.sample)+")>"},ObjectContaining},getJasmineRequireObj().pp=function(j$){function PrettyPrinter(){this.ppNestLevel_=0}function StringPrettyPrinter(){PrettyPrinter.call(this),this.string=""}return PrettyPrinter.prototype.format=function(value){this.ppNestLevel_++;try{j$.util.isUndefined(value)?this.emitScalar("undefined"):null===value?this.emitScalar("null"):value===j$.getGlobal()?this.emitScalar("<global>"):value.jasmineToString?this.emitScalar(value.jasmineToString()):"string"==typeof value?this.emitString(value):j$.isSpy(value)?this.emitScalar("spy on "+value.and.identity()):value instanceof RegExp?this.emitScalar(value.toString()):"function"==typeof value?this.emitScalar("Function"):"number"==typeof value.nodeType?this.emitScalar("HTMLNode"):value instanceof Date?this.emitScalar("Date("+value+")"):value.__Jasmine_been_here_before__?this.emitScalar("<circular reference: "+(j$.isArray_(value)?"Array":"Object")+">"):j$.isArray_(value)||j$.isA_("Object",value)?(value.__Jasmine_been_here_before__=!0,j$.isArray_(value)?this.emitArray(value):this.emitObject(value),delete value.__Jasmine_been_here_before__):this.emitScalar(value.toString())}finally{this.ppNestLevel_--}},PrettyPrinter.prototype.iterateObject=function(obj,fn){for(var property in obj)obj.hasOwnProperty(property)&&"__Jasmine_been_here_before__"!=property&&fn(property,obj.__lookupGetter__?!j$.util.isUndefined(obj.__lookupGetter__(property))&&null!==obj.__lookupGetter__(property):!1)},PrettyPrinter.prototype.emitArray=j$.unimplementedMethod_,PrettyPrinter.prototype.emitObject=j$.unimplementedMethod_,PrettyPrinter.prototype.emitScalar=j$.unimplementedMethod_,PrettyPrinter.prototype.emitString=j$.unimplementedMethod_,j$.util.inherit(StringPrettyPrinter,PrettyPrinter),StringPrettyPrinter.prototype.emitScalar=function(value){this.append(value)},StringPrettyPrinter.prototype.emitString=function(value){this.append("'"+value+"'")},StringPrettyPrinter.prototype.emitArray=function(array){if(this.ppNestLevel_>j$.MAX_PRETTY_PRINT_DEPTH)return void this.append("Array");this.append("[ ");for(var i=0;i<array.length;i++)i>0&&this.append(", "),this.format(array[i]);this.append(" ]")},StringPrettyPrinter.prototype.emitObject=function(obj){if(this.ppNestLevel_>j$.MAX_PRETTY_PRINT_DEPTH)return void this.append("Object");var self=this;this.append("{ ");var first=!0;this.iterateObject(obj,function(property,isGetter){first?first=!1:self.append(", "),self.append(property),self.append(" : "),isGetter?self.append("<getter>"):self.format(obj[property])}),this.append(" }")},StringPrettyPrinter.prototype.append=function(value){this.string+=value},function(value){var stringPrettyPrinter=new StringPrettyPrinter;return stringPrettyPrinter.format(value),stringPrettyPrinter.string}},getJasmineRequireObj().QueueRunner=function(){function QueueRunner(attrs){this.fns=attrs.fns||[],this.onComplete=attrs.onComplete||function(){},this.clearStack=attrs.clearStack||function(fn){fn()},this.onException=attrs.onException||function(){},this.catchException=attrs.catchException||function(){return!0},this.userContext={}}return QueueRunner.prototype.execute=function(){this.run(this.fns,0)},QueueRunner.prototype.run=function(fns,recursiveIndex){function attemptSync(fn){try{fn.call(self.userContext)}catch(e){handleException(e)}}function attemptAsync(fn){var next=function(){self.run(fns,iterativeIndex+1)};try{fn.call(self.userContext,next)}catch(e){handleException(e),next()}}function handleException(e){if(self.onException(e),!self.catchException(e))throw e}var iterativeIndex,length=fns.length,self=this;for(iterativeIndex=recursiveIndex;length>iterativeIndex;iterativeIndex++){var fn=fns[iterativeIndex];if(fn.length>0)return attemptAsync(fn);attemptSync(fn)}var runnerDone=iterativeIndex>=length;runnerDone&&this.clearStack(this.onComplete)},QueueRunner},getJasmineRequireObj().ReportDispatcher=function(){function ReportDispatcher(methods){function dispatch(method,args){for(var i=0;i<reporters.length;i++){var reporter=reporters[i];reporter[method]&&reporter[method].apply(reporter,args)}}for(var dispatchedMethods=methods||[],i=0;i<dispatchedMethods.length;i++){var method=dispatchedMethods[i];this[method]=function(m){return function(){dispatch(m,arguments)}}(method)}var reporters=[];return this.addReporter=function(reporter){reporters.push(reporter)},this}return ReportDispatcher},getJasmineRequireObj().SpyStrategy=function(){function SpyStrategy(options){options=options||{};var identity=options.name||"unknown",originalFn=options.fn||function(){},getSpy=options.getSpy||function(){},plan=function(){};this.identity=function(){return identity},this.exec=function(){return plan.apply(this,arguments)},this.callThrough=function(){return plan=originalFn,getSpy()},this.returnValue=function(value){return plan=function(){return value},getSpy()},this.throwError=function(something){var error=something instanceof Error?something:new Error(something);return plan=function(){throw error},getSpy()},this.callFake=function(fn){return plan=fn,getSpy()},this.stub=function(){return plan=function(){},getSpy()}}return SpyStrategy},getJasmineRequireObj().Suite=function(){function Suite(attrs){this.env=attrs.env,this.id=attrs.id,this.parentSuite=attrs.parentSuite,this.description=attrs.description,this.onStart=attrs.onStart||function(){},this.resultCallback=attrs.resultCallback||function(){},this.clearStack=attrs.clearStack||function(fn){fn()},this.beforeFns=[],this.afterFns=[],this.queueRunner=attrs.queueRunner||function(){},this.disabled=!1,this.children=[],this.result={id:this.id,status:this.disabled?"disabled":"",description:this.description,fullName:this.getFullName()}}return Suite.prototype.getFullName=function(){for(var fullName=this.description,parentSuite=this.parentSuite;parentSuite;parentSuite=parentSuite.parentSuite)parentSuite.parentSuite&&(fullName=parentSuite.description+" "+fullName);return fullName},Suite.prototype.disable=function(){this.disabled=!0},Suite.prototype.beforeEach=function(fn){this.beforeFns.unshift(fn)},Suite.prototype.afterEach=function(fn){this.afterFns.unshift(fn)},Suite.prototype.addChild=function(child){this.children.push(child)},Suite.prototype.execute=function(onComplete){function complete(){self.resultCallback(self.result),onComplete&&onComplete()}function wrapChildAsAsync(child){return function(done){child.execute(done)}}var self=this;if(this.disabled)return void complete();for(var allFns=[],i=0;i<this.children.length;i++)allFns.push(wrapChildAsAsync(this.children[i]));this.onStart(this),this.queueRunner({fns:allFns,onComplete:complete})},Suite},void 0==typeof window&&"object"==typeof exports&&(exports.Suite=jasmineRequire.Suite),getJasmineRequireObj().Timer=function(){function Timer(options){options=options||{};var startTime,now=options.now||function(){return(new Date).getTime()};this.start=function(){startTime=now()},this.elapsed=function(){return now()-startTime}}return Timer},getJasmineRequireObj().matchersUtil=function(j$){function eq(a,b,aStack,bStack,customTesters){function has(obj,key){return obj.hasOwnProperty(key)}function isFunction(obj){return"function"==typeof obj}for(var result=!0,i=0;i<customTesters.length;i++){var customTesterResult=customTesters[i](a,b);if(!j$.util.isUndefined(customTesterResult))return customTesterResult}if(a instanceof j$.Any&&(result=a.jasmineMatches(b)))return!0;if(b instanceof j$.Any&&(result=b.jasmineMatches(a)))return!0;if(b instanceof j$.ObjectContaining&&(result=b.jasmineMatches(a)))return!0;if(a instanceof Error&&b instanceof Error)return a.message==b.message;if(a===b)return 0!==a||1/a==1/b;if(null===a||null===b)return a===b;var className=Object.prototype.toString.call(a);if(className!=Object.prototype.toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0===a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;aStack.push(a),bStack.push(b);var size=0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack,customTesters)););}else{var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(isFunction(aCtor)&&aCtor instanceof aCtor&&isFunction(bCtor)&&bCtor instanceof bCtor))return!1;for(var key in a)if(has(a,key)&&(size++,!(result=has(b,key)&&eq(a[key],b[key],aStack,bStack,customTesters))))break;if(result){for(key in b)if(has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result}return{equals:function(a,b,customTesters){return customTesters=customTesters||[],eq(a,b,[],[],customTesters)},contains:function(haystack,needle,customTesters){if(customTesters=customTesters||[],"[object Array]"===Object.prototype.toString.apply(haystack)){for(var i=0;i<haystack.length;i++)if(eq(haystack[i],needle,[],[],customTesters))return!0;return!1}return haystack.indexOf(needle)>=0},buildFailureMessage:function(){var args=Array.prototype.slice.call(arguments,0),matcherName=args[0],isNot=args[1],actual=args[2],expected=args.slice(3),englishyPredicate=matcherName.replace(/[A-Z]/g,function(s){return" "+s.toLowerCase()}),message="Expected "+j$.pp(actual)+(isNot?" not ":" ")+englishyPredicate;if(expected.length>0)for(var i=0;i<expected.length;i++)i>0&&(message+=","),message+=" "+j$.pp(expected[i]);return message+"."}}},getJasmineRequireObj().toBe=function(){function toBe(){return{compare:function(actual,expected){return{pass:actual===expected}}}}return toBe},getJasmineRequireObj().toBeCloseTo=function(){function toBeCloseTo(){return{compare:function(actual,expected,precision){return 0!==precision&&(precision=precision||2),{pass:Math.abs(expected-actual)<Math.pow(10,-precision)/2}}}}return toBeCloseTo},getJasmineRequireObj().toBeDefined=function(){function toBeDefined(){return{compare:function(actual){return{pass:void 0!==actual}}}}return toBeDefined},getJasmineRequireObj().toBeFalsy=function(){function toBeFalsy(){return{compare:function(actual){return{pass:!actual}}}}return toBeFalsy},getJasmineRequireObj().toBeGreaterThan=function(){function toBeGreaterThan(){return{compare:function(actual,expected){return{pass:actual>expected}}}}return toBeGreaterThan},getJasmineRequireObj().toBeLessThan=function(){function toBeLessThan(){return{compare:function(actual,expected){return{pass:expected>actual}}}}return toBeLessThan},getJasmineRequireObj().toBeNaN=function(j$){function toBeNaN(){return{compare:function(actual){var result={pass:actual!==actual};return result.message=result.pass?"Expected actual not to be NaN.":"Expected "+j$.pp(actual)+" to be NaN.",result}}}return toBeNaN},getJasmineRequireObj().toBeNull=function(){function toBeNull(){return{compare:function(actual){return{pass:null===actual}}}}return toBeNull},getJasmineRequireObj().toBeTruthy=function(){function toBeTruthy(){return{compare:function(actual){return{pass:!!actual}}}}return toBeTruthy},getJasmineRequireObj().toBeUndefined=function(){function toBeUndefined(){return{compare:function(actual){return{pass:void 0===actual}}}}return toBeUndefined},getJasmineRequireObj().toContain=function(){function toContain(util,customEqualityTesters){return customEqualityTesters=customEqualityTesters||[],{compare:function(actual,expected){return{pass:util.contains(actual,expected,customEqualityTesters)}}}}return toContain},getJasmineRequireObj().toEqual=function(){function toEqual(util,customEqualityTesters){return customEqualityTesters=customEqualityTesters||[],{compare:function(actual,expected){var result={pass:!1};return result.pass=util.equals(actual,expected,customEqualityTesters),result}}}return toEqual},getJasmineRequireObj().toHaveBeenCalled=function(j$){function toHaveBeenCalled(){return{compare:function(actual){var result={};if(!j$.isSpy(actual))throw new Error("Expected a spy, but got "+j$.pp(actual)+".");if(arguments.length>1)throw new Error("toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith");return result.pass=actual.calls.any(),result.message=result.pass?"Expected spy "+actual.and.identity()+" not to have been called.":"Expected spy "+actual.and.identity()+" to have been called.",result}}}return toHaveBeenCalled},getJasmineRequireObj().toHaveBeenCalledWith=function(j$){function toHaveBeenCalledWith(util){return{compare:function(){var args=Array.prototype.slice.call(arguments,0),actual=args[0],expectedArgs=args.slice(1),result={pass:!1};if(!j$.isSpy(actual))throw new Error("Expected a spy, but got "+j$.pp(actual)+".");return actual.calls.any()?(util.contains(actual.calls.allArgs(),expectedArgs)?(result.pass=!0,result.message="Expected spy "+actual.and.identity()+" not to have been called with "+j$.pp(expectedArgs)+" but it was."):result.message="Expected spy "+actual.and.identity()+" to have been called with "+j$.pp(expectedArgs)+" but actual calls were "+j$.pp(actual.calls.allArgs()).replace(/^\[ | \]$/g,"")+".",result):(result.message="Expected spy "+actual.and.identity()+" to have been called with "+j$.pp(expectedArgs)+" but it was never called.",result)}}}return toHaveBeenCalledWith},getJasmineRequireObj().toMatch=function(){function toMatch(){return{compare:function(actual,expected){var regexp=new RegExp(expected);return{pass:regexp.test(actual)}}}}return toMatch},getJasmineRequireObj().toThrow=function(j$){function toThrow(util){return{compare:function(actual,expected){var thrown,result={pass:!1},threw=!1;if("function"!=typeof actual)throw new Error("Actual is not a Function");try{actual()}catch(e){threw=!0,thrown=e}return threw?1==arguments.length?(result.pass=!0,result.message="Expected function not to throw, but it threw "+j$.pp(thrown)+".",result):(util.equals(thrown,expected)?(result.pass=!0,result.message="Expected function not to throw "+j$.pp(expected)+"."):result.message="Expected function to throw "+j$.pp(expected)+", but it threw "+j$.pp(thrown)+".",result):(result.message="Expected function to throw an exception.",result)}}}return toThrow},getJasmineRequireObj().toThrowError=function(j$){function toThrowError(util){return{compare:function(actual){function fnNameFor(func){return func.name||func.toString().match(/^\s*function\s*(\w*)\s*\(/)[1]}function pass(notMessage){return{pass:!0,message:notMessage}}function fail(message){return{pass:!1,message:message}}function extractExpectedParams(){if(1!=arguments.length)if(2==arguments.length){var expected=arguments[1];if(expected instanceof RegExp?regexp=expected:"string"==typeof expected?message=expected:checkForAnErrorType(expected)&&(errorType=expected),!(errorType||message||regexp))throw new Error("Expected is not an Error, string, or RegExp.")}else{if(!checkForAnErrorType(arguments[1]))throw new Error("Expected error type is not an Error.");if(errorType=arguments[1],arguments[2]instanceof RegExp)regexp=arguments[2];else{if("string"!=typeof arguments[2])throw new Error("Expected error message is not a string or RegExp.");message=arguments[2]}}}function checkForAnErrorType(type){if("function"!=typeof type)return!1;var Surrogate=function(){};return Surrogate.prototype=type.prototype,new Surrogate instanceof Error}var thrown,errorType,message,regexp,name,constructorName,threw=!1;if("function"!=typeof actual)throw new Error("Actual is not a Function");extractExpectedParams.apply(null,arguments);try{actual()}catch(e){threw=!0,thrown=e}return threw?thrown instanceof Error?1==arguments.length?pass("Expected function not to throw an Error, but it threw "+fnNameFor(thrown)+"."):(errorType&&(name=fnNameFor(errorType),constructorName=fnNameFor(thrown.constructor)),errorType&&message?thrown.constructor==errorType&&util.equals(thrown.message,message)?pass("Expected function not to throw "+name+' with message "'+message+'".'):fail("Expected function to throw "+name+' with message "'+message+'", but it threw '+constructorName+' with message "'+thrown.message+'".'):errorType&&regexp?thrown.constructor==errorType&&regexp.test(thrown.message)?pass("Expected function not to throw "+name+" with message matching "+regexp+"."):fail("Expected function to throw "+name+" with message matching "+regexp+", but it threw "+constructorName+' with message "'+thrown.message+'".'):errorType?thrown.constructor==errorType?pass("Expected function not to throw "+name+"."):fail("Expected function to throw "+name+", but it threw "+constructorName+"."):message?thrown.message==message?pass("Expected function not to throw an exception with message "+j$.pp(message)+"."):fail("Expected function to throw an exception with message "+j$.pp(message)+", but it threw an exception with message "+j$.pp(thrown.message)+"."):regexp?regexp.test(thrown.message)?pass("Expected function not to throw an exception with a message matching "+j$.pp(regexp)+"."):fail("Expected function to throw an exception with a message matching "+j$.pp(regexp)+", but it threw an exception with message "+j$.pp(thrown.message)+"."):void 0):fail("Expected function to throw an Error, but it threw "+thrown+"."):fail("Expected function to throw an Error.")}}}return toThrowError},getJasmineRequireObj().version=function(){return"2.0.0"},initJQueryPayments=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].slice,v=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=a,b.payment={},b.payment.fn={},b.fn.payment=function(){var a,c;return c=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],b.payment.fn[c].apply(this,a)},f=/(\d{1,4})/g,e=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:f,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:f,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:f,length:[13,14,15,16],cvcLength:[3],luhn:!0}],c=function(a){var b,c,d;for(a=(a+"").replace(/\D/g,""),c=0,d=e.length;d>c;c++)if(b=e[c],b.pattern.test(a))return b},d=function(a){var b,c,d;for(c=0,d=e.length;d>c;c++)if(b=e[c],b.type===a)return b},n=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},m=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(b=document.selection)?"function"==typeof b.createRange?b.createRange().text:void 0:void 0:void 0)?!0:!1},o=function(a){return setTimeout(function(){var c,d;return c=b(a.currentTarget),d=c.val(),d=b.payment.formatCardNumber(d),c.val(d)})},i=function(a){var d,e,f,g,h,i,j;return f=String.fromCharCode(a.which),!/^\d+$/.test(f)||(d=b(a.currentTarget),j=d.val(),e=c(j+f),g=(j.replace(/\D/g,"")+f).length,i=16,e&&(i=e.length[e.length.length-1]),g>=i||null!=d.prop("selectionStart")&&d.prop("selectionStart")!==j.length)?void 0:(h=e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,h.test(j)?(a.preventDefault(),d.val(j+" "+f)):h.test(j+f)?(a.preventDefault(),d.val(j+f+" ")):void 0)},g=function(a){var c,d;return c=b(a.currentTarget),d=c.val(),a.meta||8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length?void 0:/\d\s$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d\s$/,""))):/\s\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\d?$/,""))):void 0},j=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val()+d,/^\d$/.test(e)&&"0"!==e&&"1"!==e?(a.preventDefault(),c.val("0"+e+" / ")):/^\d\d$/.test(e)?(a.preventDefault(),c.val(""+e+" / ")):void 0):void 0},k=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val(),/^\d\d$/.test(e)?c.val(""+e+" / "):void 0):void 0},l=function(a){var c,d,e;return d=String.fromCharCode(a.which),"/"===d?(c=b(a.currentTarget),e=c.val(),/^\d$/.test(e)&&"0"!==e?c.val("0"+e+" / "):void 0):void 0},h=function(a){var c,d;return a.meta||(c=b(a.currentTarget),d=c.val(),8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length)?void 0:/\d(\s|\/)+$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},s=function(a){var b;return a.metaKey||a.ctrlKey?!0:32===a.which?!1:0===a.which?!0:a.which<33?!0:(b=String.fromCharCode(a.which),!!/[\d\s]/.test(b))},q=function(a){var d,e,f,g;return d=b(a.currentTarget),f=String.fromCharCode(a.which),/^\d+$/.test(f)&&!m(d)?(g=(d.val()+f).replace(/\D/g,""),e=c(g),e?g.length<=e.length[e.length.length-1]:g.length<=16):void 0},r=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)&&!m(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},p=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)?(e=c.val()+d,e.length<=4):void 0},t=function(a){var c,d,f,g,h;return c=b(a.currentTarget),h=c.val(),g=b.payment.cardType(h)||"unknown",c.hasClass(g)?void 0:(d=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)f=e[a],c.push(f.type);return c}(),c.removeClass("unknown"),c.removeClass(d.join(" ")),c.addClass(g),c.toggleClass("identified","unknown"!==g),c.trigger("payment.cardType",g))},b.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",p),this},b.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",r),this.on("keypress",j),this.on("keypress",l),this.on("keypress",k),this.on("keydown",h),this},b.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",q),this.on("keypress",i),this.on("keydown",g),this.on("keyup",t),this.on("paste",o),this},b.payment.fn.restrictNumeric=function(){return this.on("keypress",s),this},b.payment.fn.cardExpiryVal=function(){return b.payment.cardExpiryVal(b(this).val())},b.payment.cardExpiryVal=function(a){var b,c,d,e;return a=a.replace(/\s/g,""),e=a.split("/",2),b=e[0],d=e[1],2===(null!=d?d.length:void 0)&&/^\d+$/.test(d)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),d=c+d),b=parseInt(b,10),d=parseInt(d,10),{month:b,year:d}},b.payment.validateCardNumber=function(a){var b,d;return a=(a+"").replace(/\s+|-/g,""),/^\d+$/.test(a)?(b=c(a),b?(d=a.length,v.call(b.length,d)>=0&&(b.luhn===!1||n(a))):!1):!1},b.payment.validateCardExpiry=function(a,c){var d,e,f,g;return"object"==typeof a&&"month"in a&&(g=a,a=g.month,c=g.year),a&&c?(a=b.trim(a),c=b.trim(c),/^\d+$/.test(a)?/^\d+$/.test(c)?parseInt(a,10)<=12?(2===c.length&&(f=(new Date).getFullYear(),f=f.toString().slice(0,2),c=f+c),e=new Date(c,a),d=new Date,e.setMonth(e.getMonth()-1),e.setMonth(e.getMonth()+1,1),e>d):!1:!1:!1):!1},b.payment.validateCardCVC=function(a,c){var e,f;return a=b.trim(a),/^\d+$/.test(a)?c?(e=a.length,v.call(null!=(f=d(c))?f.cvcLength:void 0,e)>=0):a.length>=3&&a.length<=4:!1},b.payment.cardType=function(a){var b;return a?(null!=(b=c(a))?b.type:void 0)||null:null},b.payment.formatCardNumber=function(a){var b,d,e,f;return(b=c(a))?(e=b.length[b.length.length-1],a=a.replace(/\D/g,""),a=a.slice(0,+e+1||9e9),b.format.global?null!=(f=a.match(b.format))?f.join(" "):void 0:(d=b.format.exec(a),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):a}},function(a,b){"function"==typeof define&&define.amd?define(b):a.form2js=b()}(this,function(){"use strict";function a(a,d,e,f,g){("undefined"==typeof e||null==e)&&(e=!0),("undefined"==typeof d||null==d)&&(d="."),arguments.length<5&&(g=!1),a="string"==typeof a?document.getElementById(a):a;var h,i=[],j=0;if(a.constructor==Array||"undefined"!=typeof NodeList&&a.constructor==NodeList)for(;h=a[j++];)i=i.concat(c(h,f,g));else i=c(a,f,g);return b(i,e,d)}function b(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r={};for(d=0;d<a.length;d++)if(h=a[d].value,!b||""!==h&&null!==h){for(o=a[d].name,p=o.split(c),i=[],j=q,k="",e=0;e<p.length;e++)if(n=p[e].split("]["),n.length>1)for(f=0;f<n.length;f++)if(n[f]=0==f?n[f]+"]":f==n.length-1?"["+n[f]:"["+n[f]+"]",m=n[f].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(g=1;g<m.length;g++)m[g]&&i.push(m[g]);else i.push(n[f]);else i=i.concat(n);for(e=0;e<i.length;e++)n=i[e],n.indexOf("[]")>-1&&e==i.length-1?(l=n.substr(0,n.indexOf("[")),k+=l,j[l]||(j[l]=[]),j[l].push(h)):n.indexOf("[")>-1?(l=n.substr(0,n.indexOf("[")),m=n.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),k+="_"+l+"_"+m,r[k]||(r[k]={}),""==l||j[l]||(j[l]=[]),e==i.length-1?""==l?(j.push(h),r[k][m]=j[j.length-1]):(j[l].push(h),r[k][m]=j[l][j[l].length-1]):r[k][m]||(j[l].push(/^[0-9a-z_]+\[?/i.test(i[e+1])?{}:[]),r[k][m]=j[l][j[l].length-1]),j=r[k][m]):(k+=n,e<i.length-1?(j[n]||(j[n]={}),j=j[n]):j[n]=h)}return q}function c(a,b,c){var f=e(a,b,c);return f.length>0?f:d(a,b,c)}function d(a,b,c){for(var d=[],f=a.firstChild;f;)d=d.concat(e(f,b,c)),f=f.nextSibling;return d}function e(a,b,c){var e,h,i,j=f(a,c);return e=b&&b(a),e&&e.name?i=[e]:""!=j&&a.nodeName.match(/INPUT|TEXTAREA/i)?(h=g(a),i=[{name:j,value:h}]):""!=j&&a.nodeName.match(/SELECT/i)?(h=g(a),i=[{name:j.replace(/\[\]$/,""),value:h}]):i=d(a,b,c),i}function f(a,b){return a.name&&""!=a.name?a.name:b&&a.id&&""!=a.id?a.id:""}function g(a){if(a.disabled)return null;switch(a.nodeName){case"INPUT":case"TEXTAREA":switch(a.type.toLowerCase()){case"radio":if(a.checked&&"false"===a.value)return!1;case"checkbox":if(a.checked&&"true"===a.value)return!0;if(!a.checked&&"true"===a.value)return!1;if(a.checked)return a.value;break;case"button":case"reset":case"submit":case"image":return"";default:return a.value}break;case"SELECT":return h(a)}return null}function h(a){var b,c,d,e=a.multiple,f=[];if(!e)return a.value;for(b=a.getElementsByTagName("option"),c=0,d=b.length;d>c;c++)b[c].selected&&f.push(b[c].value);return f}return a});var html;html='<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" data-bind="value: org">\n  <input type="hidden" name="customer.country" data-bind="value: countryCode">\n  <input type="hidden" name="customer.charges_attributes[0].currency" data-bind="value: selectedCurrency">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\' data-bind="html: currencySymbol">$</span><span class=\'donation-header-amt\' data-bind="text: displayAmount()">0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header" id="dnt-progress-amount" data-bind="css: { \'dph-active\' : visibleInputSet() >= 0}, click: function() { setInputSet(0); }">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo" data-bind="css: { \'dph-active\' : visibleInputSet() >= 1}, click: function() { setInputSet(1); }">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment" data-bind="css: { \'dph-active\' : visibleInputSet() >= 2}, click: function() { setInputSet(2); }">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first" data-bind="visible: visibleInputSet() === 0">\n    <div class="donations-currency-select-row" data-bind="visible: currenciesEnabled()">\n      Currency: \n      <select class="donations-currency-select" data-bind="options: currenciesArray, value: selectedCurrency"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first" data-bind="validationMessage: displayAmount"></span>\n    </span>\n    <div class="donation-button-set" data-bind="foreach: amounts">\n      <div class="donation-btn donation-btn-sm" data-bind="css: { \'donation-btn-active\' : $parent.selectedBtn() === $index() }, click: function() { $parent.setActiveAmount($index()); }">\n        <span class=\'donation-currency\' data-bind="html: $parent.currencySymbol">$</span><span class=\'donation-amt\' data-bind="text: $data"></span>\n      </div>\n      <!-- ko if: $index() === ($parent.amountsLength() - 1) -->\n        <input class="donation-btn donation-btn-lg" data-bind="value: $parent.inputtedAmount, event: { change: $parent.clearSelectedButton } " type="text" placeholder="Other amount">\n      <!-- /ko -->\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn" data-bind="click: function()\n        { \n          if(inputSet1.isValid()) { incrementInputSet(); } \n          else { inputSet1.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 1">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label" data-bind="validationMessage: firstName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name" data-bind="value: firstName">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label" data-bind="validationMessage: lastName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name" data-bind="value: lastName">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label" data-bind="validationMessage: email">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email" data-bind="value: email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn" data-bind="click: function()\n        { \n          if(inputSet2.isValid()) { incrementInputSet(); } \n          else { inputSet2.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 2">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label" data-bind="validationMessage: cardNumber" data-bind="validationMessage: cardDate">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number" data-bind="value: cardNumber, style: { backgroundImage: ccBackground() } ">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label" data-bind="validationMessage: cardDate">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month" data-bind="value: cardMonth, options: ccMonths">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year" data-bind="value: cardYear, options: ccYears">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label" data-bind="validationMessage: cvc">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc" data-bind="value: cvc">\n    </div>\n    <div class="donation-payment-errors" data-bind="visible: false">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit" data-bind="click: function()\n        { \n          if(inputSet3.isValid()) { submitForm(); } \n          else { inputSet3.errors.showAllMessages();}\n        }">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>';
var DonationsFormModel;DonationsFormModel=function(){function a(a,b){var c,d,e;e=this,$=a,c=$.extend({},{imgpath:"https://d2yuwrm8xcn0u8.cloudfront.net",metaviewporttag:!0},b,e.parseQueryString(document.URL.split("?")[1])),ko.validation.configure({insertMessages:!1}),ko.validation.rules.ccDate={validator:function(a){return $.payment.validateCardExpiry(a.month,a.year)},message:"Invalid date"},ko.validation.rules.ccNum={validator:function(a){return $.payment.validateCardNumber(a)},message:"Invalid credit card number"},ko.validation.rules.cvc={validator:function(a){return $.payment.validateCardCVC(a)},message:"Invalid CVC number"},ko.validation.registerExtenders(),e.org=ko.observable(c.org),e.countryCode=ko.observable("US"),e.imgPath=ko.observable(c.imgpath),e.initializeIcons(e.imgPath()),e.seedAmount=c.seedamount||100,e.seedValues=null!=c.seedvalues?c.seedvalues.split(","):[15,35,50,100,250,500,1e3],e.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAD",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},e.currenciesArray=ko.observableArray(["USD","GBP","CAD","AUD","EUR","NZD","SEK","NOK","DKK"]),e.currenciesEnabled=ko.observable("none"!==c.currencyconversion),e.seededCurrency=c.seedcurrency||"USD",e.formCurrency=c.formcurrency||e.seededCurrency,d=function(){var a;return"none"!==(a=c.currencyconversion)&&"choose"!==a?e.currencies[c.country]:e.formCurrency},e.selectedCurrency=ko.observable(d()),e.currencySymbol=ko.computed(function(){var a;return a={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAD:"C$"},a[e.selectedCurrency()]||e.selectedCurrency()},this),e.selectedBtn=ko.observable(-1),e.selectedAmount=ko.observable("0"),e.inputtedAmount=ko.observable(null),e.displayAmount=ko.computed(function(){return e.inputtedAmount()||e.selectedAmount()},this).extend({required:{message:"Please select an amount"},min:1,digit:!0}),e.setActiveAmount=function(a){return a>-1?(e.inputtedAmount(null),e.selectedAmount(e.amounts()[a]),e.selectedBtn(a)):void 0},e.clearSelectedButton=function(){return e.selectedAmount(0),e.selectedBtn(-1)},e.amounts=ko.computed(function(){var a,b,d,f,g,h,i,j,k;for(a=[],k=e.seedValues,g=i=0,j=k.length;j>i;g=++i)h=k[g],b=parseInt(h)/100*parseInt(e.seedAmount),7>g&&(e.currenciesEnabled()?(f=c[e.selectedCurrency()]||1,d=c[e.seededCurrency]||1,a.push(e.round(b*f/d))):a.push(e.round(b)));return a},this),e.amountsLength=ko.computed(function(){return e.amounts().length},this),e.visibleInputSet=ko.observable(0),e.incrementInputSet=function(){return e.visibleInputSet(e.visibleInputSet()+1)},e.setInputSet=function(a){return e.visibleInputSet(a)},e.firstName=ko.observable().extend({required:{message:"Can't be blank"}}),e.lastName=ko.observable().extend({required:{message:"Can't be blank"}}),e.email=ko.observable().extend({required:{message:"Can't be blank"},email:{message:"Invalid email"}}),e.cardNumber=ko.observable().extend({required:{message:"Can't be blank"},ccNum:!0}),e.cardMonth=ko.observable(),e.ccMonths=["01","02","03","04","05","06","07","08","09","10","11","12"],e.cardYear=ko.observable(""+((new Date).getFullYear()+1)),e.ccYears=function(){var a,b,c,d,e;for(a=[],b=(new Date).getFullYear(),c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push(""+c);return a}(),e.cardDate=ko.computed(function(){return{month:e.cardMonth(),year:e.cardYear()}},this).extend({ccDate:!0,observable:!0}),e.cvc=ko.observable().extend({required:{message:"Can't be blank"},digit:!0,cvc:!0}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),e.ccBackground=ko.computed(function(){var a;return a=$.payment.cardType(e.cardNumber()),"amex"===a||"mastercard"===a||"visa"===a||"discover"===a||"dinersclub"===a?"url("+e.imgPath()+"/icon-cc-"+a+".png)":"url("+e.imgPath()+"/icon-cc-none.png)"},this),e.inputSet1=ko.validatedObservable({amount:e.displayAmount}),e.inputSet2=ko.validatedObservable({firstName:e.firstName,lastName:e.lastName,email:e.email}),e.inputSet3=ko.validatedObservable({cardNumber:e.cardNumber,cardDate:e.cardDate,cvc:e.cvc}),e.connectToServer(c,e)}return a.prototype.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},a.prototype.initializeIcons=function(a){var b,c,d,e;b={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"},e=[];for(c in b)d=b[c],e.push($(c).css("background-image","url('"+a+"/"+d+"')"));return e},a.prototype.round=function(a){var b;return b=Math.round(parseFloat(a.toPrecision(2))),0===b?1:b},a.prototype.connectToServer=function(a,b){var c,d,e;return c=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(c.stripepublickey),$.fn.serializeObject=function(){var a,c;return c=form2js(this.attr("id"),".",!0),c["cc-num"]="",c.month="",c.year="",c.cvc="",a=b.displayAmount(),console.log(a),c.customer.charges_attributes[0].amount=a.replace(b.currencySymbol(),"")+"00",c},e=function(a){var b,d;return d=new Pusher(c.pusherpublickey),b=d.subscribe(a),b.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=c.redirectto&&window.location.replace(c.redirectto),$("#donation-form").hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},d=function(a,b){var d,f,g;return d=$("#donation-form"),b.error?(gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(b.error.message),d.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide()):(g=b.id,d.append($('<input type="hidden" name="card_token" />').val(g)),f=$.ajax({url:""+c.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),{config:c})}),f.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),e(a.pusher_channel_token)}),f.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1)},b.submitForm=function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$("#donation-form"),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,d),!1}},a}(),function(){!function(a){var b=this||(0,eval)("this"),c=b.document,d=b.navigator,e=b.jQuery,f=b.JSON;!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],a):a(b.ko={})}(function(g){function h(a,b){return null===a||typeof a in m?a===b:!1}function i(b,c){var d;return function(){d||(d=setTimeout(function(){d=a,b()},c))}}function j(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function k(a,b,c,d){l.d[a]={init:function(a,e,f,g,h){var i,j;return l.ba(function(){var f=l.a.c(e()),g=!c!=!f,k=!j;(k||b||g!==i)&&(k&&l.ca.fa()&&(j=l.a.lb(l.e.childNodes(a),!0)),g?(k||l.e.U(a,l.a.lb(j)),l.gb(d?d(h,f):h,a)):l.e.da(a),i=g)},null,{G:a}),{controlsDescendantBindings:!0}}},l.g.aa[a]=!1,l.e.Q[a]=!0}var l="undefined"!=typeof g?g:{};l.b=function(a,b){for(var c=a.split("."),d=l,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},l.s=function(a,b,c){a[b]=c},l.version="3.1.0",l.b("version",l.version),l.a=function(){function g(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}var j={__proto__:[]}instanceof Array,k={},m={};k[d&&/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],k.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),g(k,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)m[b[c]]=a});var n={propertychange:!0},o=c&&function(){for(var b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];);return b>4?b:a}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},l:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},hb:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},ma:function(a,b){var c=l.a.l(a,b);c>0?a.splice(c,1):0===c&&a.shift()},ib:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>l.a.l(b,a[c])&&b.push(a[c]);return b},ya:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},la:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},$:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},Y:function(a,b,c){var d=l.a.l(l.a.Sa(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},na:j,extend:h,ra:i,sa:j?i:h,A:g,Oa:function(a,b){if(!a)return a;var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b(a[c],c,a));return d},Fa:function(a){for(;a.firstChild;)l.removeNode(a.firstChild)},ec:function(a){a=l.a.R(a);for(var b=c.createElement("div"),d=0,e=a.length;e>d;d++)b.appendChild(l.M(a[d]));return b},lb:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?l.M(f):f)}return e},U:function(a,b){if(l.a.Fa(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},Bb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)l.removeNode(c[f])}},ea:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},Db:function(a,b){7>o?a.setAttribute("selected",b):a.selected=b},ta:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s ]+|[\s ]+$/g,"")},oc:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=l.a.ta(d[e]);""!==g&&c.push(g)}return c},kc:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},Sb:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Ea:function(a){return l.a.Sb(a,a.ownerDocument.documentElement)},eb:function(a){return!!l.a.hb(a,l.a.Ea)},B:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},q:function(a,b,c){var d=o&&n[b];if(!d&&e)e(a).bind(b,c);else if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var f=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,f),l.a.u.ja(a,function(){a.detachEvent(g,f)})}else a.addEventListener(b,c,!1)},ha:function(a,d){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===l.a.B(a)&&a.type&&"click"==d.toLowerCase()?(f=a.type,f="checkbox"==f||"radio"==f):f=!1,e&&!f)e(a).trigger(d);else if("function"==typeof c.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");f=c.createEvent(m[d]||"HTMLEvents"),f.initEvent(d,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(f)}else if(f&&a.click)a.click();else{if("undefined"==typeof a.fireEvent)throw Error("Browser doesn't support triggering events");a.fireEvent("on"+d)}},c:function(a){return l.v(a)?a():a},Sa:function(a){return l.v(a)?a.o():a},ua:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];l.a.r(b.match(d),function(a){l.a.Y(e,a,c)}),a.className=e.join(" ")}},Xa:function(b,c){var d=l.a.c(c);(null===d||d===a)&&(d="");var e=l.e.firstChild(b);!e||3!=e.nodeType||l.e.nextSibling(e)?l.e.U(b,[b.ownerDocument.createTextNode(d)]):e.data=d,l.a.Vb(b)},Cb:function(a,b){if(a.name=b,7>=o)try{a.mergeAttributes(c.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}},Vb:function(a){o>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Tb:function(a){if(o){var b=a.style.width;a.style.width=0,a.style.width=b}},ic:function(a,b){a=l.a.c(a),b=l.a.c(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},R:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},mc:6===o,nc:7===o,oa:o,ob:function(a,b){for(var c=l.a.R(a.getElementsByTagName("input")).concat(l.a.R(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},fc:function(a){return"string"==typeof a&&(a=l.a.ta(a))?f&&f.parse?f.parse(a):new Function("return "+a)():null},Ya:function(a,b,c){if(!f||!f.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(l.a.c(a),b,c)},gc:function(a,b,d){d=d||{};var e=d.params||{},f=d.includeFields||this.mb,h=a;if("object"==typeof a&&"form"===l.a.B(a))for(var h=a.action,i=f.length-1;i>=0;i--)for(var j=l.a.ob(a,f[i]),k=j.length-1;k>=0;k--)e[j[k].name]=j[k].value;b=l.a.c(b);var m=c.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in b)a=c.createElement("input"),a.name=n,a.value=l.a.Ya(l.a.c(b[n])),m.appendChild(a);g(e,function(a,b){var d=c.createElement("input");d.name=a,d.value=b,m.appendChild(d)}),c.body.appendChild(m),d.submitter?d.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}}(),l.b("utils",l.a),l.b("utils.arrayForEach",l.a.r),l.b("utils.arrayFirst",l.a.hb),l.b("utils.arrayFilter",l.a.la),l.b("utils.arrayGetDistinctValues",l.a.ib),l.b("utils.arrayIndexOf",l.a.l),l.b("utils.arrayMap",l.a.ya),l.b("utils.arrayPushAll",l.a.$),l.b("utils.arrayRemoveItem",l.a.ma),l.b("utils.extend",l.a.extend),l.b("utils.fieldsIncludedWithJsonPost",l.a.mb),l.b("utils.getFormFields",l.a.ob),l.b("utils.peekObservable",l.a.Sa),l.b("utils.postJson",l.a.gc),l.b("utils.parseJson",l.a.fc),l.b("utils.registerEventHandler",l.a.q),l.b("utils.stringifyJson",l.a.Ya),l.b("utils.range",l.a.ic),l.b("utils.toggleDomNodeCssClass",l.a.ua),l.b("utils.triggerEvent",l.a.ha),l.b("utils.unwrapObservable",l.a.c),l.b("utils.objectForEach",l.a.A),l.b("utils.addOrRemoveItem",l.a.Y),l.b("unwrap",l.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),l.a.f=new function(){function b(b,f){var g=b[d];if(!g||"null"===g||!e[g]){if(!f)return a;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=b(c,!1);return e===a?a:e[d]},set:function(c,d,e){(e!==a||b(c,!1)!==a)&&(b(c,!0)[d]=e)},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},L:function(){return c++ +d}}},l.b("utils.domData",l.a.f),l.b("utils.domData.clear",l.a.f.clear),l.a.u=new function(){function b(b,c){var e=l.a.f.get(b,d);return e===a&&c&&(e=[],l.a.f.set(b,d,e)),e}function c(a){var d=b(a,!1);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](a);if(l.a.f.clear(a),l.a.u.cleanExternalData(a),g[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var d=l.a.f.L(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{ja:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Ab:function(c,e){var f=b(c,!1);f&&(l.a.ma(f,e),0==f.length&&l.a.f.set(c,d,a))},M:function(a){if(f[a.nodeType]&&(c(a),g[a.nodeType])){var b=[];l.a.$(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;e>d;d++)c(b[d])}return a},removeNode:function(a){l.M(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(a){e&&"function"==typeof e.cleanData&&e.cleanData([a])}}},l.M=l.a.u.M,l.removeNode=l.a.u.removeNode,l.b("cleanNode",l.M),l.b("removeNode",l.removeNode),l.b("utils.domNodeDisposal",l.a.u),l.b("utils.domNodeDisposal.addDisposeCallback",l.a.u.ja),l.b("utils.domNodeDisposal.removeDisposeCallback",l.a.u.Ab),function(){l.a.Qa=function(a){var d;if(e){if(e.parseHTML)d=e.parseHTML(a)||[];else if((d=e.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var f=l.a.ta(a).toLowerCase();for(d=c.createElement("div"),f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+f[1]+a+f[2]+"</div>","function"==typeof b.innerShiv?d.appendChild(b.innerShiv(a)):d.innerHTML=a;f[0]--;)d=d.lastChild;d=l.a.R(d.lastChild.childNodes)}return d},l.a.Va=function(b,c){if(l.a.Fa(b),c=l.a.c(c),null!==c&&c!==a)if("string"!=typeof c&&(c=c.toString()),e)e(b).html(c);else for(var d=l.a.Qa(c),f=0;f<d.length;f++)b.appendChild(d[f])}}(),l.b("utils.parseHtmlFragment",l.a.Qa),l.b("utils.setHtml",l.a.Va),l.w=function(){function b(a,c){if(a)if(8==a.nodeType){var d=l.w.xb(a.nodeValue);null!=d&&c.push({Rb:a,cc:d})}else if(1==a.nodeType)for(var d=0,e=a.childNodes,f=e.length;f>d;d++)b(e[d],c)}var c={};return{Na:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"<!--[ko_memo:"+b+"]-->"},Hb:function(b,d){var e=c[b];if(e===a)throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[b]}},Ib:function(a,c){var d=[];b(a,d);for(var e=0,f=d.length;f>e;e++){var g=d[e].Rb,h=[g];c&&l.a.$(h,c),l.w.Hb(d[e].cc,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},xb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),l.b("memoization",l.w),l.b("memoization.memoize",l.w.Na),l.b("memoization.unmemoize",l.w.Hb),l.b("memoization.parseMemoText",l.w.xb),l.b("memoization.unmemoizeDomNodeAndDescendants",l.w.Ib),l.Ga={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return l.h({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b.timeout,d=b.method),e="notifyWhenChangesStop"==d?j:i,a.Ma(function(a){return e(a,c)})},notify:function(a,b){a.equalityComparer="always"==b?null:h}};var m={undefined:1,"boolean":1,number:1,string:1};l.b("extenders",l.Ga),l.Fb=function(a,b,c){this.target=a,this.za=b,this.Qb=c,this.sb=!1,l.s(this,"dispose",this.F)},l.Fb.prototype.F=function(){this.sb=!0,this.Qb()},l.N=function(){l.a.sa(this,l.N.fn),this.H={}};var n="change";g={V:function(a,b,c){var d=this;c=c||n;var e=new l.Fb(d,b?a.bind(b):a,function(){l.a.ma(d.H[c],e)});return d.o&&d.o(),d.H[c]||(d.H[c]=[]),d.H[c].push(e),e},notifySubscribers:function(a,b){if(b=b||n,this.qb(b))try{l.k.jb();for(var c,d=this.H[b].slice(0),e=0;c=d[e];++e)c.sb||c.za(a)}finally{l.k.end()}},Ma:function(a){var b,c,d,e=this,f=l.v(e);e.ia||(e.ia=e.notifySubscribers,e.notifySubscribers=function(a,b){b&&b!==n?"beforeChange"===b?e.bb(a):e.ia(a,b):e.cb(a)});var g=a(function(){f&&d===e&&(d=e()),b=!1,e.Ka(c,d)&&e.ia(c=d)});e.cb=function(a){b=!0,d=a,g()},e.bb=function(a){b||(c=a,e.ia(a,"beforeChange"))}},qb:function(a){return this.H[a]&&this.H[a].length},Wb:function(){var a=0;return l.a.A(this.H,function(b,c){a+=c.length}),a},Ka:function(a,b){return!this.equalityComparer||!this.equalityComparer(a,b)},extend:function(a){var b=this;return a&&l.a.A(a,function(a,c){var d=l.Ga[a];"function"==typeof d&&(b=d(b,c)||b)}),b}},l.s(g,"subscribe",g.V),l.s(g,"extend",g.extend),l.s(g,"getSubscriptionsCount",g.Wb),l.a.na&&l.a.ra(g,Function.prototype),l.N.fn=g,l.tb=function(a){return null!=a&&"function"==typeof a.V&&"function"==typeof a.notifySubscribers},l.b("subscribable",l.N),l.b("isSubscribable",l.tb),l.ca=l.k=function(){function a(a){d.push(c),c=a}function b(){c=d.pop()}var c,d=[],e=0;return{jb:a,end:b,zb:function(a){if(c){if(!l.tb(a))throw Error("Only subscribable things can act as dependencies");c.za(a,a.Kb||(a.Kb=++e))}},t:function(c,d,e){try{return a(),c.apply(d,e||[])}finally{b()}},fa:function(){return c?c.ba.fa():void 0},pa:function(){return c?c.pa:void 0}}}(),l.b("computedContext",l.ca),l.b("computedContext.getDependenciesCount",l.ca.fa),l.b("computedContext.isInitial",l.ca.pa),l.m=function(a){function b(){return 0<arguments.length?(b.Ka(c,arguments[0])&&(b.P(),c=arguments[0],b.O()),this):(l.k.zb(b),c)}var c=a;return l.N.call(b),l.a.sa(b,l.m.fn),b.o=function(){return c},b.O=function(){b.notifySubscribers(c)},b.P=function(){b.notifySubscribers(c,"beforeChange")},l.s(b,"peek",b.o),l.s(b,"valueHasMutated",b.O),l.s(b,"valueWillMutate",b.P),b},l.m.fn={equalityComparer:h};var o=l.m.hc="__ko_proto__";l.m.fn[o]=l.m,l.a.na&&l.a.ra(l.m.fn,l.N.fn),l.Ha=function(b,c){return null===b||b===a||b[o]===a?!1:b[o]===c?!0:l.Ha(b[o],c)},l.v=function(a){return l.Ha(a,l.m)},l.ub=function(a){return"function"==typeof a&&a[o]===l.m||"function"==typeof a&&a[o]===l.h&&a.Yb?!0:!1},l.b("observable",l.m),l.b("isObservable",l.v),l.b("isWriteableObservable",l.ub),l.T=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=l.m(a),l.a.sa(a,l.T.fn),a.extend({trackArrayChanges:!0})},l.T.fn={remove:function(a){for(var b=this.o(),c=[],d="function"!=typeof a||l.v(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.P(),c.push(f),b.splice(e,1),e--)}return c.length&&this.O(),c},removeAll:function(b){if(b===a){var c=this.o(),d=c.slice(0);return this.P(),c.splice(0,c.length),this.O(),d}return b?this.remove(function(a){return 0<=l.a.l(b,a)}):[]},destroy:function(a){var b=this.o(),c="function"!=typeof a||l.v(a)?function(b){return b===a}:a;this.P();for(var d=b.length-1;d>=0;d--)c(b[d])&&(b[d]._destroy=!0);this.O()},destroyAll:function(b){return b===a?this.destroy(function(){return!0}):b?this.destroy(function(a){return 0<=l.a.l(b,a)}):[]},indexOf:function(a){var b=this();return l.a.l(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.P(),this.o()[c]=b,this.O())}},l.a.r("pop push reverse shift sort splice unshift".split(" "),function(a){l.T.fn[a]=function(){var b=this.o();return this.P(),this.kb(b,a,arguments),b=b[a].apply(b,arguments),this.O(),b}}),l.a.r(["slice"],function(a){l.T.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),l.a.na&&l.a.ra(l.T.fn,l.m.fn),l.b("observableArray",l.T);var p="arrayChange";l.Ga.trackArrayChanges=function(a){function b(){if(!c){c=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&c!==n||++e,b.apply(this,arguments)};var f=[].concat(a.o()||[]);d=null,a.V(function(b){if(b=[].concat(b||[]),a.qb(p)){var c;(!d||e>1)&&(d=l.a.Aa(f,b,{sparse:!0})),c=d,c.length&&a.notifySubscribers(c,p)}f=b,d=null,e=0})}}if(!a.kb){var c=!1,d=null,e=0,f=a.V;a.V=a.subscribe=function(a,c,d){return d===p&&b(),f.apply(this,arguments)},a.kb=function(a,b,f){function g(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(c&&!e){var h=[],i=a.length,j=f.length,k=0;switch(b){case"push":k=i;case"unshift":for(b=0;j>b;b++)g("added",f[b],k+b);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":b=Math.min(Math.max(0,0>f[0]?i+f[0]:f[0]),i);for(var i=1===j?i:Math.min(b+(f[1]||0),i),j=b+j-2,k=Math.max(i,j),m=[],n=[],o=2;k>b;++b,++o)i>b&&n.push(g("deleted",a[b],b)),j>b&&m.push(g("added",f[o],b));l.a.nb(n,m);break;default:return}d=h}}}},l.ba=l.h=function(a,b,c){function d(){n=!0,l.a.A(u,function(a,b){b.F()}),u={},v=0,j=!1}function e(){var a=g.throttleEvaluation;a&&a>=0?(clearTimeout(w),w=setTimeout(f,a)):g.wa?g.wa():f()}function f(){if(!k&&!n){if(s&&s()){if(!m)return void t()}else m=!1;k=!0;try{var a=u,c=v;l.k.jb({za:function(b,d){n||(c&&a[d]?(u[d]=a[d],++v,delete a[d],--c):u[d]||(u[d]=b.V(e),++v))},ba:g,pa:!v}),u={},v=0;try{var d=b?o.call(b):o()}finally{l.k.end(),c&&l.a.A(a,function(a,b){b.F()}),j=!1}g.Ka(i,d)&&(g.notifySubscribers(i,"beforeChange"),i=d,g.wa&&!g.throttleEvaluation||g.notifySubscribers(i))}finally{k=!1}v||t()}}function g(){if(0<arguments.length){if("function"!=typeof p)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return p.apply(b,arguments),this}return j&&f(),l.k.zb(g),i}function h(){return j||v>0}var i,j=!0,k=!1,m=!1,n=!1,o=a;if(o&&"object"==typeof o?(c=o,o=c.read):(c=c||{},o||(o=c.read)),"function"!=typeof o)throw Error("Pass a function that returns the value of the ko.computed");var p=c.write,q=c.disposeWhenNodeIsRemoved||c.G||null,r=c.disposeWhen||c.Da,s=r,t=d,u={},v=0,w=null;b||(b=c.owner),l.N.call(g),l.a.sa(g,l.h.fn),g.o=function(){return j&&!v&&f(),i},g.fa=function(){return v},g.Yb="function"==typeof c.write,g.F=function(){t()},g.ga=h;var x=g.Ma;return g.Ma=function(a){x.call(g,a),g.wa=function(){g.bb(i),j=!0,g.cb(g)}},l.s(g,"peek",g.o),l.s(g,"dispose",g.F),l.s(g,"isActive",g.ga),l.s(g,"getDependenciesCount",g.fa),q&&(m=!0,q.nodeType&&(s=function(){return!l.a.Ea(q)||r&&r()})),!0!==c.deferEvaluation&&f(),q&&h()&&q.nodeType&&(t=function(){l.a.u.Ab(q,t),d()},l.a.u.ja(q,t)),g},l.$b=function(a){return l.Ha(a,l.h)},g=l.m.hc,l.h[g]=l.m,l.h.fn={equalityComparer:h},l.h.fn[g]=l.h,l.a.na&&l.a.ra(l.h.fn,l.N.fn),l.b("dependentObservable",l.h),l.b("computed",l.h),l.b("isComputed",l.$b),function(){function b(e,f,g){if(g=g||new d,e=f(e),"object"!=typeof e||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==a?i:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.ab=[]}l.Gb=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(a,function(a){for(var b=0;l.v(a)&&10>b;b++)a=a();return a})},l.toJSON=function(a,b,c){return a=l.Gb(a),l.a.Ya(a,b,c)},d.prototype={save:function(a,b){var c=l.a.l(this.keys,a);c>=0?this.ab[c]=b:(this.keys.push(a),this.ab.push(b))},get:function(b){return b=l.a.l(this.keys,b),b>=0?this.ab[b]:a}}}(),l.b("toJS",l.Gb),l.b("toJSON",l.toJSON),function(){l.i={p:function(b){switch(l.a.B(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?l.a.f.get(b,l.d.options.Pa):7>=l.a.oa?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex]):a;default:return b.value}},X:function(b,c,d){switch(l.a.B(b)){case"option":switch(typeof c){case"string":l.a.f.set(b,l.d.options.Pa,a),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:l.a.f.set(b,l.d.options.Pa,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":(""===c||null===c)&&(c=a);for(var e,f=-1,g=0,h=b.options.length;h>g;++g)if(e=l.i.p(b.options[g]),e==c||""==e&&c===a){f=g;break}(d||f>=0||c===a&&1<b.size)&&(b.selectedIndex=f);break;default:(null===c||c===a)&&(c=""),b.value=c}}}}(),l.b("selectExtensions",l.i),l.b("selectExtensions.readValue",l.i.p),l.b("selectExtensions.writeValue",l.i.X),l.g=function(){function a(a){a=l.a.ta(a),123===a.charCodeAt(0)&&(a=a.slice(1,-1));var b,c,g=[],h=a.match(d),i=0;if(h){h.push(",");for(var j,k=0;j=h[k];++k){var m=j.charCodeAt(0);if(44===m){if(0>=i){b&&g.push(c?{key:b,value:c.join("")}:{unknown:b}),b=c=i=0;continue}}else if(58===m){if(!c)continue}else if(47===m&&k&&1<j.length)(m=h[k-1].match(e))&&!f[m[0]]&&(a=a.substr(a.indexOf(j)+1),h=a.match(d),h.push(","),k=-1,j="/");else if(40===m||123===m||91===m)++i;else if(41===m||125===m||93===m)--i;else if(!b&&!c){b=34===m||39===m?j.slice(1,-1):j;continue}c?c.push(j):c=[j]}}return g}var b=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,f={"in":1,"return":1,"typeof":1},g={};return{aa:[],W:g,Ra:a,qa:function(d,e){function f(a,d){var e,k=l.getBindingHandler(a);(k&&k.preprocess?d=k.preprocess(d,a,f):1)&&((k=g[a])&&(e=d,0<=l.a.l(b,e)?e=!1:(k=e.match(c),e=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:e),k=e),k&&i.push("'"+a+"':function(_z){"+e+"=_z}"),j&&(d="function(){return "+d+" }"),h.push("'"+a+"':"+d))}e=e||{};var h=[],i=[],j=e.valueAccessors,k="string"==typeof d?a(d):d;return l.a.r(k,function(a){f(a.key||a.unknown,a.value)}),i.length&&f("_ko_property_writers","{"+i.join(",")+" }"),h.join(",")},bc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},va:function(a,b,c,d,e){a&&l.v(a)?!l.ub(a)||e&&a.o()===d||a(d):(a=b.get("_ko_property_writers"))&&a[c]&&a[c](d)}}}(),l.b("expressionRewriting",l.g),l.b("expressionRewriting.bindingRewriteValidators",l.g.aa),l.b("expressionRewriting.parseObjectLiteral",l.g.Ra),l.b("expressionRewriting.preProcessBindings",l.g.qa),l.b("expressionRewriting._twoWayBindings",l.g.W),l.b("jsonExpressionRewriting",l.g),l.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",l.g.qa),function(){function a(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=c&&"<!--test-->"===c.createComment("test").text,g=f?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};l.e={Q:{},childNodes:function(b){return a(b)?d(b):b.childNodes},da:function(b){if(a(b)){b=l.e.childNodes(b);for(var c=0,d=b.length;d>c;c++)l.removeNode(b[c])}else l.a.Fa(b)},U:function(b,c){if(a(b)){l.e.da(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else l.a.U(b,c)},yb:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},rb:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):l.e.yb(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},Xb:a,lc:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},wb:function(c){if(i[l.a.B(c)]){var d=c.firstChild;if(d)do if(1===d.nodeType){var f;f=d.firstChild;var g=null;if(f)do if(g)g.push(f);else if(a(f)){var h=e(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f]);while(f=f.nextSibling);if(f=g)for(g=d.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])
}while(d=d.nextSibling)}}}}(),l.b("virtualElements",l.e),l.b("virtualElements.allowedBindings",l.e.Q),l.b("virtualElements.emptyNode",l.e.da),l.b("virtualElements.insertAfter",l.e.rb),l.b("virtualElements.prepend",l.e.yb),l.b("virtualElements.setDomNodeChildren",l.e.U),function(){l.J=function(){this.Nb={}},l.a.extend(l.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return l.e.Xb(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return l.e.lc(a);default:return null}},parseBindingsString:function(a,b,c,d){try{var e,f=this.Nb,g=a+(d&&d.valueAccessors||"");if(!(e=f[g])){var h,i="with($context){with($data||{}){return{"+l.g.qa(a,d)+"}}}";h=new Function("$context","$element",i),e=f[g]=h}return e(b,c)}catch(j){throw j.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+j.message,j}}}),l.J.instance=new l.J}(),l.b("bindingProvider",l.J),function(){function c(a){return function(){return a}}function d(a){return a()}function f(a){return l.a.Oa(l.k.t(a),function(b,c){return function(){return a()[c]}})}function g(a,b){return f(this.getBindings.bind(this,a,b))}function h(a,b,c){var d,e=l.e.firstChild(b),f=l.J.instance,g=f.preprocessNode;if(g){for(;d=e;)e=l.e.nextSibling(d),g.call(f,d);e=l.e.firstChild(b)}for(;d=e;)e=l.e.nextSibling(d),i(a,d,c)}function i(a,b,c){var d=!0,e=1===b.nodeType;e&&l.e.wb(b),(e&&c||l.J.instance.nodeHasBindings(b))&&(d=k(b,null,a,c).shouldBindDescendants),d&&!n[l.a.B(b)]&&h(a,b,!e)}function j(a){var b=[],c={},d=[];return l.a.A(a,function e(f){if(!c[f]){var g=l.getBindingHandler(f);g&&(g.after&&(d.push(f),l.a.r(g.after,function(b){if(a[b]){if(-1!==l.a.l(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,pb:g})),c[f]=!0}}),b}function k(b,c,e,f){var h=l.a.f.get(b,o);if(!c){if(h)throw Error("You cannot apply bindings multiple times to the same element.");l.a.f.set(b,o,!0)}!h&&f&&l.Eb(b,e);var i;if(c&&"function"!=typeof c)i=c;else{var k=l.J.instance,m=k.getBindingAccessors||g,n=l.h(function(){return(i=c?c(e,b):m.call(k,b,e))&&e.D&&e.D(),i},null,{G:b});i&&n.ga()||(n=null)}var p;if(i){var q=n?function(a){return function(){return d(n()[a])}}:function(a){return i[a]},r=function(){return l.a.Oa(n?n():i,d)};r.get=function(a){return i[a]&&d(q(a))},r.has=function(a){return a in i},f=j(i),l.a.r(f,function(c){var d=c.pb.init,f=c.pb.update,g=c.key;if(8===b.nodeType&&!l.e.Q[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&l.k.t(function(){var c=d(b,q(g),r,e.$data,e);if(c&&c.controlsDescendantBindings){if(p!==a)throw Error("Multiple bindings ("+p+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=g}}),"function"==typeof f&&l.h(function(){f(b,q(g),r,e.$data,e)},null,{G:b})}catch(h){throw h.message='Unable to process binding "'+g+": "+i[g]+'"\nMessage: '+h.message,h}})}return{shouldBindDescendants:p===a}}function m(a){return a&&a instanceof l.I?a:new l.I(a)}l.d={};var n={script:!0};l.getBindingHandler=function(a){return l.d[a]},l.I=function(b,c,d,e){var f,g=this,h="function"==typeof b&&!l.v(b),i=l.h(function(){var a=h?b():b,f=l.a.c(a);return c?(c.D&&c.D(),l.a.extend(g,c),i&&(g.D=i)):(g.$parents=[],g.$root=f,g.ko=l),g.$rawData=a,g.$data=f,d&&(g[d]=f),e&&e(g,c,f),g.$data},null,{Da:function(){return f&&!l.a.eb(f)},G:!0});i.ga()&&(g.D=i,i.equalityComparer=null,f=[],i.Jb=function(b){f.push(b),l.a.u.ja(b,function(b){l.a.ma(f,b),f.length||(i.F(),g.D=i=a)})})},l.I.prototype.createChildContext=function(a,b,c){return new l.I(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},l.I.prototype.extend=function(a){return new l.I(this.D||this.$data,this,null,function(b,c){b.$rawData=c.$rawData,l.a.extend(b,"function"==typeof a?a():a)})};var o=l.a.f.L(),p=l.a.f.L();l.Eb=function(a,b){return 2!=arguments.length?l.a.f.get(a,p):(l.a.f.set(a,p,b),void(b.D&&b.D.Jb(a)))},l.xa=function(a,b,c){return 1===a.nodeType&&l.e.wb(a),k(a,b,m(c),!0)},l.Lb=function(a,b,d){return d=m(d),l.xa(a,"function"==typeof b?f(b.bind(null,d,a)):l.a.Oa(b,c),d)},l.gb=function(a,b){1!==b.nodeType&&8!==b.nodeType||h(m(a),b,!0)},l.fb=function(a,c){if(!e&&b.jQuery&&(e=b.jQuery),c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");c=c||b.document.body,i(m(a),c,!0)},l.Ca=function(b){switch(b.nodeType){case 1:case 8:var c=l.Eb(b);if(c)return c;if(b.parentNode)return l.Ca(b.parentNode)}return a},l.Pb=function(b){return(b=l.Ca(b))?b.$data:a},l.b("bindingHandlers",l.d),l.b("applyBindings",l.fb),l.b("applyBindingsToDescendants",l.gb),l.b("applyBindingAccessorsToNode",l.xa),l.b("applyBindingsToNode",l.Lb),l.b("contextFor",l.Ca),l.b("dataFor",l.Pb)}();var q={"class":"className","for":"htmlFor"};l.d.attr={update:function(b,c){var d=l.a.c(c())||{};l.a.A(d,function(c,d){d=l.a.c(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c),8>=l.a.oa&&c in q?(c=q[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString()),"name"===c&&l.a.Cb(b,e?"":d.toString())})}},function(){l.d.checked={after:["value","attr"],init:function(b,c,d){function e(){return d.has("checkedValue")?l.a.c(d.get("checkedValue")):b.value}function f(){var a=b.checked,f=m?e():a;if(!l.ca.pa()&&(!i||a)){var g=l.k.t(c);j?k!==f?(a&&(l.a.Y(g,f,!0),l.a.Y(g,k,!1)),k=f):l.a.Y(g,f,a):l.g.va(g,d,"checked",f,!0)}}function g(){var a=l.a.c(c());b.checked=j?0<=l.a.l(a,e()):h?a:e()===a}var h="checkbox"==b.type,i="radio"==b.type;if(h||i){var j=h&&l.a.c(c())instanceof Array,k=j?e():a,m=i||j;i&&!b.name&&l.d.uniqueName.init(b,function(){return!0}),l.ba(f,null,{G:b}),l.a.q(b,"click",f),l.ba(g,null,{G:b})}}},l.g.W.checked=!0,l.d.checkedValue={update:function(a,b){a.value=l.a.c(b())}}}(),l.d.css={update:function(a,b){var c=l.a.c(b());"object"==typeof c?l.a.A(c,function(b,c){c=l.a.c(c),l.a.ua(a,b,c)}):(c=String(c||""),l.a.ua(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,l.a.ua(a,c,!0))}},l.d.enable={update:function(a,b){var c=l.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},l.d.disable={update:function(a,b){l.d.enable.update(a,function(){return!l.a.c(b())})}},l.d.event={init:function(a,b,c,d,e){var f=b()||{};l.a.A(f,function(f){"string"==typeof f&&l.a.q(a,f,function(a){var g,h=b()[f];if(h){try{var i=l.a.R(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===c.get(f+"Bubble")&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},l.d.foreach={vb:function(a){return function(){var b=a(),c=l.a.Sa(b);return c&&"number"!=typeof c.length?(l.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:l.K.Ja}):{foreach:b,templateEngine:l.K.Ja}}},init:function(a,b){return l.d.template.init(a,l.d.foreach.vb(b))},update:function(a,b,c,d,e){return l.d.template.update(a,l.d.foreach.vb(b),c,d,e)}},l.g.aa.foreach=!1,l.e.Q.foreach=!0,l.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(g){f=e.body}d=f===a}e=b(),l.g.va(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);l.a.q(a,"focus",e),l.a.q(a,"focusin",e),l.a.q(a,"blur",f),l.a.q(a,"focusout",f)},update:function(a,b){var c=!!l.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),l.k.t(l.a.ha,null,[a,c?"focusin":"focusout"]))}},l.g.W.hasfocus=!0,l.d.hasFocus=l.d.hasfocus,l.g.W.hasFocus=!0,l.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Va(a,b())}},k("if"),k("ifnot",!1,!0),k("with",!0,!1,function(a,b){return a.createChildContext(b)});var r={};l.d.options={init:function(a){if("select"!==l.a.B(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return l.a.la(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(a,c){if(m.length){var d=0<=l.a.l(m,l.i.p(c[0]));l.a.Db(c[0],d),n&&!d&&l.k.t(l.a.ha,null,[b,"change"])}}var h=0!=b.length&&b.multiple?b.scrollTop:null,i=l.a.c(c()),j=d.get("optionsIncludeDestroyed");c={};var k,m;m=b.multiple?l.a.ya(e(),l.i.p):0<=b.selectedIndex?[l.i.p(b.options[b.selectedIndex])]:[],i&&("undefined"==typeof i.length&&(i=[i]),k=l.a.la(i,function(b){return j||b===a||null===b||!l.a.c(b._destroy)}),d.has("optionsCaption")&&(i=l.a.c(d.get("optionsCaption")),null!==i&&i!==a&&k.unshift(r)));var n=!1;c.beforeRemove=function(a){b.removeChild(a)},i=g,d.has("optionsAfterRender")&&(i=function(b,c){g(0,c),l.k.t(d.get("optionsAfterRender"),null,[c[0],b!==r?b:a])}),l.a.Ua(b,k,function(c,e,g){return g.length&&(m=g[0].selected?[l.i.p(g[0])]:[],n=!0),e=b.ownerDocument.createElement("option"),c===r?(l.a.Xa(e,d.get("optionsCaption")),l.i.X(e,a)):(g=f(c,d.get("optionsValue"),c),l.i.X(e,l.a.c(g)),c=f(c,d.get("optionsText"),g),l.a.Xa(e,c)),[e]},c,i),l.k.t(function(){d.get("valueAllowUnset")&&d.has("value")?l.i.X(b,l.a.c(d.get("value")),!0):(b.multiple?m.length&&e().length<m.length:m.length&&0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex])!==m[0]:m.length||0<=b.selectedIndex)&&l.a.ha(b,"change")}),l.a.Tb(b),h&&20<Math.abs(h-b.scrollTop)&&(b.scrollTop=h)}},l.d.options.Pa=l.a.f.L(),l.d.selectedOptions={after:["options","foreach"],init:function(a,b,c){l.a.q(a,"change",function(){var d=b(),e=[];l.a.r(a.getElementsByTagName("option"),function(a){a.selected&&e.push(l.i.p(a))}),l.g.va(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=l.a.B(a))throw Error("values binding applies only to SELECT elements");var c=l.a.c(b());c&&"number"==typeof c.length&&l.a.r(a.getElementsByTagName("option"),function(a){var b=0<=l.a.l(c,l.i.p(a));l.a.Db(a,b)})}},l.g.W.selectedOptions=!0,l.d.style={update:function(a,b){var c=l.a.c(b()||{});l.a.A(c,function(b,c){c=l.a.c(c),a.style[b]=c||""})}},l.d.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");l.a.q(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{!0!==d&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},l.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Xa(a,b())}},l.e.Q.text=!0,l.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++l.d.uniqueName.Ob;l.a.Cb(a,c)}}},l.d.uniqueName.Ob=0,l.d.value={after:["options","foreach"],init:function(a,b,c){function d(){g=!1;var d=b(),e=l.i.p(a);l.g.va(d,c,"value",e)}var e=["change"],f=c.get("valueUpdate"),g=!1;f&&("string"==typeof f&&(f=[f]),l.a.$(e,f),e=l.a.ib(e)),!l.a.oa||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=l.a.l(e,"propertychange")||(l.a.q(a,"propertychange",function(){g=!0}),l.a.q(a,"focus",function(){g=!1}),l.a.q(a,"blur",function(){g&&d()})),l.a.r(e,function(b){var c=d;l.a.kc(b,"after")&&(c=function(){setTimeout(d,0)},b=b.substring(5)),l.a.q(a,b,c)})},update:function(a,b,c){var d=l.a.c(b());if(b=l.i.p(a),d!==b)if("select"===l.a.B(a)){var e=c.get("valueAllowUnset");c=function(){l.i.X(a,d,e)},c(),e||d===l.i.p(a)?setTimeout(c,0):l.k.t(l.a.ha,null,[a,"change"])}else l.i.X(a,d)}},l.g.W.value=!0,l.d.visible={update:function(a,b){var c=l.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){l.d[a]={init:function(b,c,d,e,f){return l.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e,f)}}}("click"),l.C=function(){},l.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},l.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},l.C.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||c;var d=b.getElementById(a);if(!d)throw Error("Cannot find template with ID "+a);return new l.n.j(d)}if(1==a.nodeType||8==a.nodeType)return new l.n.Z(a);throw Error("Unknown template type: "+a)},l.C.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},l.C.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")},l.C.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},l.b("templateEngine",l.C),l.Za=function(){function a(a,b,c,d){a=l.g.Ra(a);for(var e=l.g.aa,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+l.g.qa(a,{valueAccessors:!0})+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{Ub:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return l.Za.dc(a,b)},c)},dc:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"<!-- ko -->","#comment",e)})},Mb:function(a,b){return l.w.Na(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&l.xa(e,a,d)})}}}(),l.b("__tr_ambtns",l.Za.Mb),function(){l.n={},l.n.j=function(a){this.j=a},l.n.j.prototype.text=function(){var a=l.a.B(this.j),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.j[a];var b=arguments[0];"innerHTML"===a?l.a.Va(this.j,b):this.j[a]=b};var b=l.a.f.L()+"_";l.n.j.prototype.data=function(a){return 1===arguments.length?l.a.f.get(this.j,b+a):void l.a.f.set(this.j,b+a,arguments[1])};var c=l.a.f.L();l.n.Z=function(a){this.j=a},l.n.Z.prototype=new l.n.j,l.n.Z.prototype.text=function(){if(0==arguments.length){var b=l.a.f.get(this.j,c)||{};return b.$a===a&&b.Ba&&(b.$a=b.Ba.innerHTML),b.$a}l.a.f.set(this.j,c,{$a:arguments[0]})},l.n.j.prototype.nodes=function(){return 0==arguments.length?(l.a.f.get(this.j,c)||{}).Ba:void l.a.f.set(this.j,c,{Ba:arguments[0]})},l.b("templateSources",l.n),l.b("templateSources.domElement",l.n.j),l.b("templateSources.anonymousTemplate",l.n.Z)}(),function(){function b(a,b,c){var d;for(b=l.e.nextSibling(b);a&&(d=a)!==b;)a=l.e.nextSibling(d),c(d,a)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=l.J.instance,h=g.preprocessNode;if(h){if(b(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),l.a.ea(a,f))}b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.fb(c,a)}),b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.w.Ib(a,[c])}),l.a.ea(a,f)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,g,h){h=h||{};var i=a&&d(a),i=i&&i.ownerDocument,j=h.templateEngine||f;if(l.Za.Ub(e,j,i),e=j.renderTemplate(e,g,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":l.e.U(a,e),i=!0;break;case"replaceNode":l.a.Bb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,g),h.afterRender&&l.k.t(h.afterRender,null,[e,g.$data])),e}var f;l.Wa=function(b){if(b!=a&&!(b instanceof l.C))throw Error("templateEngine must inherit from ko.templateEngine");f=b},l.Ta=function(b,c,g,h,i){if(g=g||{},(g.templateEngine||f)==a)throw Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var j=d(h);return l.h(function(){var a=c&&c instanceof l.I?c:new l.I(l.a.c(c)),f=l.v(b)?b():"function"==typeof b?b(a.$data,a):b,a=e(h,i,f,a,g);"replaceNode"==i&&(h=a,j=d(h))},null,{Da:function(){return!j||!l.a.Ea(j)},G:j&&"replaceNode"==i?j.parentNode:j})}return l.w.Na(function(a){l.Ta(b,c,g,a,"replaceNode")})},l.jc=function(b,d,f,g,h){function i(a,b){c(b,k),f.afterRender&&f.afterRender(b,a)}function j(a,c){k=h.createChildContext(a,f.as,function(a){a.$index=c});var d="function"==typeof b?b(a,k):b;return e(null,"ignoreTargetNode",d,k,f)}var k;return l.h(function(){var b=l.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]),b=l.a.la(b,function(b){return f.includeDestroyed||b===a||null===b||!l.a.c(b._destroy)}),l.k.t(l.a.Ua,null,[g,b,j,f,i])},null,{G:g})};var g=l.a.f.L();l.d.template={init:function(a,b){var c=l.a.c(b());return"string"==typeof c||c.name?l.e.da(a):(c=l.e.childNodes(a),c=l.a.ec(c),new l.n.Z(a).nodes(c)),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var h,i=c();c=l.a.c(i),d=!0,e=null,"string"==typeof c?c={}:(i=c.name,"if"in c&&(d=l.a.c(c["if"])),d&&"ifnot"in c&&(d=!l.a.c(c.ifnot)),h=l.a.c(c.data)),"foreach"in c?e=l.jc(i||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(h,c.as):f,e=l.Ta(i||b,f,c,b)):l.e.da(b),f=e,(h=l.a.f.get(b,g))&&"function"==typeof h.F&&h.F(),l.a.f.set(b,g,f&&f.ga()?f:a)}},l.g.aa.template=function(a){return a=l.g.Ra(a),1==a.length&&a[0].unknown||l.g.bc(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},l.e.Q.template=!0}(),l.b("setTemplateEngine",l.Wa),l.b("renderTemplate",l.Ta),l.a.nb=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||c>d)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g.value===h.value){g.moved=h.index,h.moved=g.index,b.splice(f,1),d=f=0;break}d+=f}}},l.a.Aa=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,m=Math.max,n=[],o=a.length,p=b.length,q=p-o||1,r=o+p+1;for(f=0;o>=f;f++)for(i=h,n.push(h=[]),j=k(p,f+q),g=m(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||r,h[g-1]||r)+1:g+1:f+1;for(k=[],m=[],q=[],f=o,g=p;f||g;)p=n[f][g]-1,g&&p===n[f][g-1]?m.push(k[k.length]={status:c,value:b[--g],index:g}):f&&p===n[f-1][g]?q.push(k[k.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||k.push({status:"retained",value:b[g]}));return l.a.nb(m,q,10*o),k.reverse()}return function(b,c,d){return d="boolean"==typeof d?{dontLimitMoves:d}:d||{},b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),l.b("utils.compareArrays",l.a.Aa),function(){function b(b,c,d,e,f){var g=[],h=l.h(function(){var a=c(d,f,l.a.ea(g,b))||[];0<g.length&&(l.a.Bb(g,a),e&&l.k.t(e,null,[d,a,f])),g.length=0,l.a.$(g,a)},null,{G:b,Da:function(){return!l.a.eb(g)}});return{S:g,h:h.ga()?h:a}}var c=l.a.f.L();l.a.Ua=function(d,e,f,g,h){function i(a,b){u=m[b],r!==b&&(x[a]=u),u.Ia(r++),l.a.ea(u.S,d),p.push(u),t.push(u)}function j(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&l.a.r(b[c].S,function(d){a(d,c,b[c].ka)})}e=e||[],g=g||{};var k=l.a.f.get(d,c)===a,m=l.a.f.get(d,c)||[],n=l.a.ya(m,function(a){return a.ka}),o=l.a.Aa(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===a&&(u=m[q],u.h&&u.h.F(),s.push.apply(s,l.a.ea(u.S,d)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==a?i(y,w):(u={ka:v.value,Ia:l.m(r++)},p.push(u),t.push(u),k||(n[y]=u))}j(g.beforeMove,x),l.a.r(s,g.beforeRemove?l.M:l.removeNode);for(var z,y=0,k=l.e.firstChild(d);u=t[y];y++){for(u.S||l.a.extend(u,b(d,f,u.ka,h,u.Ia)),q=0;o=u.S[q];k=o.nextSibling,z=o,q++)o!==k&&l.e.rb(d,o,z);!u.Zb&&h&&(h(u.ka,u.S,u.Ia),u.Zb=!0)}j(g.beforeRemove,e),j(g.afterMove,x),j(g.afterAdd,n),l.a.f.set(d,c,p)}}(),l.b("utils.setDomNodeChildrenFromArrayMapping",l.a.Ua),l.K=function(){this.allowTemplateRewriting=!1},l.K.prototype=new l.C,l.K.prototype.renderTemplateSource=function(a){var b=(9>l.a.oa?0:a.nodes)?a.nodes():null;return b?l.a.R(b.cloneNode(!0).childNodes):(a=a.text(),l.a.Qa(a))},l.K.Ja=new l.K,l.Wa(l.K.Ja),l.b("nativeTemplateEngine",l.K),function(){l.La=function(){var a=this.ac=function(){if(!e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,d,f){if(f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var g=b.data("precompiled");return g||(g=b.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),b.data("precompiled",g)),b=[d.$data],d=e.extend({koBindingContext:d},f.templateOptions),d=e.tmpl(g,b,d),d.appendTo(c.createElement("div")),e.fragments={},d},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){c.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},a>0&&(e.tmpl.tag.ko_code={open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},l.La.prototype=new l.C;var a=new l.La;0<a.ac&&l.Wa(a),l.b("jqueryTmplTemplateEngine",l.La)}()})}()}(),!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko.validation={})}(function(a,b){function c(a){var b="max"===a;return function(c,d){if(f.utils.isEmptyVal(c))return!0;var e,g;void 0===d.typeAttr?(g="text",e=d):(g=d.typeAttr,e=d.value),isNaN(e)||(g="number");var h,i,j;switch(g.toLowerCase()){case"week":if(h=/^(\d{4})-W(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"month":if(h=/^(\d{4})-(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"number":case"range":return b?!isNaN(c)&&parseFloat(c)<=parseFloat(e):!isNaN(c)&&parseFloat(c)>=parseFloat(e);default:return b?e>=c:c>=e}}}function d(a,b,c){return b.validator(a(),void 0===c.params?!0:h(c.params))?!0:(a.setError(f.formatMessage(c.message||b.message,h(c.params),a)),!1)}function e(a,b,c){a.isValidating(!0);var d=function(d){var e=!1,g="";return a.__valid__()?(d.message?(e=d.isValid,g=d.message):e=d,e||(a.error(f.formatMessage(g||c.message||b.message,h(c.params),a)),a.__valid__(e)),void a.isValidating(!1)):void a.isValidating(!1)};b.validator(a(),h(c.params||!0),d)}if(void 0===typeof a)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";a.validation=b;var f=a.validation,g=a.utils,h=g.unwrapObservable,i=g.arrayForEach,j=g.extend,k={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},l=j({},k);l.html5Attributes=["required","pattern","min","max","step"],l.html5InputTypes=["email","number","date"],l.reset=function(){j(l,k)},f.configuration=l,f.utils=function(){var a=(new Date).getTime(),b={},c="__ko_validation__";return{isArray:function(a){return a.isArray||"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return null!==a&&"object"==typeof a},isObservableArray:function(a){return!!a&&"function"==typeof a.remove&&"function"==typeof a.removeAll&&"function"==typeof a.destroy&&"function"==typeof a.destroyAll&&"function"==typeof a.indexOf&&"function"==typeof a.replace},values:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},getValue:function(a){return"function"==typeof a?a():a},hasAttribute:function(a,b){return null!==a.getAttribute(b)},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){return a.setAttribute(b,c)},isValidatable:function(a){return!!(a&&a.rules&&a.isValid&&a.isModified)},insertAfter:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},newId:function(){return a+=1},getConfigOptions:function(a){var b=f.utils.contextFor(a);return b||f.configuration},setDomData:function(a,d){var e=a[c];e||(a[c]=e=f.utils.newId()),b[e]=d},getDomData:function(a){var d=a[c];return d?b[d]:void 0},contextFor:function(a){switch(a.nodeType){case 1:case 8:var b=f.utils.getDomData(a);if(b)return b;if(a.parentNode)return f.utils.contextFor(a.parentNode)}return void 0},isEmptyVal:function(a){return void 0===a?!0:null===a?!0:""===a?!0:void 0},getOriginalElementTitle:function(a){var b=f.utils.getAttribute(a,"data-orig-title"),c=a.title,d=f.utils.hasAttribute(a,"data-orig-title");return d?b:c},async:function(a){window.setImmediate?window.setImmediate(a):window.setTimeout(a,0)},forEach:function(a,b){if(f.utils.isArray(a))return i(a,b);for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}}}();var m=function(){function b(a){i(a.subscriptions,function(a){a.dispose()}),a.subscriptions=[]}function c(a){a.options.deep&&(i(a.flagged,function(a){delete a.__kv_traversed}),a.flagged.length=0),a.options.live||b(a)}function d(a,d){d.validatables=[],b(d),e(a,d),c(d)}function e(b,c,d){var f=[],g=b.peek?b.peek():b;b.__kv_traversed!==!0&&(c.options.deep&&(b.__kv_traversed=!0,c.flagged.push(b)),d=void 0!==d?d:c.options.deep?1:-1,a.isObservable(b)&&(b.isValid||b.extend({validatable:!0}),c.validatables.push(b),c.options.live&&n.isObservableArray(b)&&c.subscriptions.push(b.subscribe(function(){c.graphMonitor.valueHasMutated()}))),g&&!g._destroy&&(n.isArray(g)?f=g:n.isObject(g)&&(f=n.values(g))),0!==d&&n.forEach(f,function(a){a&&!a.nodeType&&e(a,c,d+1)}))}function k(a){var b=[];return i(a,function(a){a.isValid()||b.push(a.error())}),b}var l=0,m=f.configuration,n=f.utils;return{init:function(a,b){l>0&&!b||(a=a||{},a.errorElementClass=a.errorElementClass||a.errorClass||m.errorElementClass,a.errorMessageClass=a.errorMessageClass||a.errorClass||m.errorMessageClass,j(m,a),m.registerExtenders&&f.registerExtenders(),l=1)},configure:function(a){f.init(a)},reset:f.configuration.reset,group:function(b,c){c=j(j({},m.grouping),c);var e={options:c,graphMonitor:a.observable(),flagged:[],subscriptions:[],validatables:[]},f=null;return c.observable?(d(b,e),f=a.computed(function(){return e.graphMonitor(),d(b,e),k(e.validatables)})):f=function(){return d(b,e),k(e.validatables)},f.showAllMessages=function(a){void 0===a&&(a=!0),f(),i(e.validatables,function(b){b.isModified(a)})},b.errors=f,b.isValid=function(){return 0===b.errors().length},b.isAnyMessageShown=function(){var a=!1;return f(),a=!!g.arrayFirst(e.validatables,function(a){return!a.isValid()&&a.isModified()})},f},formatMessage:function(a,b,c){return"function"==typeof a?a(b,c):a.replace(/\{0\}/gi,h(b))},addRule:function(a,b){return a.extend({validatable:!0}),a.rules.push(b),a},addAnonymousRule:function(a,b){void 0===b.message&&(b.message="Error"),b.onlyIf&&(b.condition=b.onlyIf),f.addRule(a,b)},addExtender:function(b){a.extenders[b]=function(a,c){return c&&(c.message||c.onlyIf)?f.addRule(a,{rule:b,message:c.message,params:n.isEmptyVal(c.params)?!0:c.params,condition:c.onlyIf}):f.addRule(a,{rule:b,params:c})}},registerExtenders:function(){if(m.registerExtenders)for(var b in f.rules)f.rules.hasOwnProperty(b)&&(a.extenders[b]||f.addExtender(b))},insertValidationMessage:function(a){var b=document.createElement("SPAN");return b.className=n.getConfigOptions(a).errorMessageClass,n.insertAfter(a,b),b},parseInputValidationAttributes:function(a,b){i(f.configuration.html5Attributes,function(c){if(n.hasAttribute(a,c)){var d=a.getAttribute(c)||!0;if("min"===c||"max"===c){var e=a.getAttribute("type");"undefined"!=typeof e&&e||(e="text"),d={typeAttr:e,value:d}}f.addRule(b(),{rule:c,params:d})}});var c=a.getAttribute("type");i(f.configuration.html5InputTypes,function(a){a===c&&f.addRule(b(),{rule:"date"===a?"dateISO":a,params:!0})})},writeInputValidationAttributes:function(a,b){var c=b();if(c&&c.rules){var d=c.rules();i(f.configuration.html5Attributes,function(b){var c,e=g.arrayFirst(d,function(a){return a.rule.toLowerCase()===b.toLowerCase()});e&&(c=e.params,"pattern"===e.rule&&e.params instanceof RegExp&&(c=e.params.source),a.setAttribute(b,c))}),d=null}},makeBindingHandlerValidatable:function(b){var c=a.bindingHandlers[b].init;a.bindingHandlers[b].init=function(b,d,e,f,g){return c(b,d,e,f,g),a.bindingHandlers.validationCore.init(b,d,e,f,g)}},setRules:function(b,c){var d=function(b,c){if(b&&c)for(var e in c)if(c.hasOwnProperty(e)){var g=c[e];if(b[e]){var i=b[e],j=h(i),k={},l={};for(var m in g)g.hasOwnProperty(m)&&(f.rules[m]?k[m]=g[m]:l[m]=g[m]);if(a.isObservable(i)&&i.extend(k),j&&n.isArray(j))for(var o=0;o<j.length;o++)d(j[o],l);else d(j,l)}}};d(b,c)}}}();j(a.validation,m),f.rules={},f.rules.required={validator:function(a,b){var c,d=/^\s+|\s+$/g;return void 0===a||null===a?!b:(c=a,"string"==typeof a&&(c=a.replace(d,"")),b?(c+"").length>0:!0)},message:"This field is required."},f.rules.min={validator:c("min"),message:"Please enter a value greater than or equal to {0}."},f.rules.max={validator:c("max"),message:"Please enter a value less than or equal to {0}."},f.rules.minLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length>=b},message:"Please enter at least {0} characters."},f.rules.maxLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length<=b},message:"Please enter no more than {0} characters."},f.rules.pattern={validator:function(a,b){return f.utils.isEmptyVal(a)||null!==a.toString().match(b)},message:"Please check this value."},f.rules.step={validator:function(a,b){if(f.utils.isEmptyVal(a)||"any"===b)return!0;var c=100*a%(100*b);return Math.abs(c)<1e-5||Math.abs(1-c)<1e-5},message:"The value must increment by {0}"},f.rules.email={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+)*)|((")(((( |	)*(\x0d\x0a))?( |	)+)?(([--]|\x21|[#-\x5b]|[\x5d-~]|[ -퟿豈-﷏ﷰ-￯])|(\\([-	\x0d-]|[ -퟿豈-﷏ﷰ-￯]))))*((( |	)*(\x0d\x0a))?( |	)+)?(")))@((([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])))\.)+(([a-z]|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|[ -퟿豈-﷏ﷰ-￯])))$/i.test(a):!0},message:"Please enter a proper email address"},f.rules.date={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&!/Invalid|NaN/.test(new Date(a)):!0},message:"Please enter a proper date"},f.rules.dateISO={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a):!0},message:"Please enter a proper date"},f.rules.number={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a):!0},message:"Please enter a number"},f.rules.digit={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d+$/.test(a):!0},message:"Please enter a digit"},f.rules.phoneUS={validator:function(a,b){return b?f.utils.isEmptyVal(a)?!0:"string"!=typeof a?!1:(a=a.replace(/\s+/g,""),b&&a.length>9&&a.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0
},message:"Please specify a valid phone number"},f.rules.equal={validator:function(a,b){var c=b;return a===f.utils.getValue(c)},message:"Values must equal"},f.rules.notEqual={validator:function(a,b){var c=b;return a!==f.utils.getValue(c)},message:"Please choose another value."},f.rules.unique={validator:function(a,b){var c=f.utils.getValue(b.collection),d=f.utils.getValue(b.externalValue),e=0;return a&&c?(g.arrayFilter(c,function(c){a===(b.valueAccessor?b.valueAccessor(c):c)&&e++}),(d?1:2)>e):!0},message:"Please make sure the value is unique."},function(){f.registerExtenders()}(),a.bindingHandlers.validationCore=function(){return{init:function(b,c){var d=f.utils.getConfigOptions(b),e=c();if(d.parseInputAttributes&&f.utils.async(function(){f.parseInputValidationAttributes(b,c)}),d.insertMessages&&f.utils.isValidatable(e)){var g=f.insertValidationMessage(b);d.messageTemplate?a.renderTemplate(d.messageTemplate,{field:e},null,g,"replaceNode"):a.applyBindingsToNode(g,{validationMessage:e})}d.writeInputAttributes&&f.utils.isValidatable(e)&&f.writeInputValidationAttributes(b,c),d.decorateInputElement&&f.utils.isValidatable(e)&&a.applyBindingsToNode(b,{validationElement:e})}}}(),f.makeBindingHandlerValidatable("value"),f.makeBindingHandlerValidatable("checked"),a.bindingHandlers.validationMessage={update:function(b,c){var d=c(),e=f.utils.getConfigOptions(b),i=(h(d),!1),j=!1;if(!d.isValid||!d.isModified)throw new Error("Observable is not validatable");i=d.isModified(),j=d.isValid();var k=null;(!e.messagesOnModified||i)&&(k=j?null:d.error);var l=!e.messagesOnModified||i?!j:!1,m="none"!==b.style.display;e.allowHtmlMessages?g.setHtml(b,k):a.bindingHandlers.text.update(b,function(){return k}),m&&!l?b.style.display="none":!m&&l&&(b.style.display="")}},a.bindingHandlers.validationElement={update:function(b,c,d){var e=c(),g=f.utils.getConfigOptions(b),i=(h(e),!1),j=!1;if(!e.isValid||!e.isModified)throw new Error("Observable is not validatable");i=e.isModified(),j=e.isValid();var k=function(){var a={},b=!g.decorateElementOnModified||i?!j:!1;return a[g.errorElementClass]=b,a};a.bindingHandlers.css.update(b,k,d),g.errorsAsTitle&&a.bindingHandlers.attr.update(b,function(){var a=!g.errorsAsTitleOnModified||i,c=f.utils.getOriginalElementTitle(b);return a&&!j?{title:e.error,"data-orig-title":c}:!a||j?{title:c,"data-orig-title":null}:void 0})}},a.bindingHandlers.validationOptions=function(){return{init:function(a,b){var c=h(b());if(c){var d=j({},f.configuration);j(d,c),f.utils.setDomData(a,d)}}}}(),a.extenders.validation=function(a,b){return i(f.utils.isArray(b)?b:[b],function(b){f.addAnonymousRule(a,b)}),a},a.extenders.validatable=function(b,c){if(f.utils.isObject(c)||(c={enable:c}),"enable"in c||(c.enable=!0),c.enable&&!f.utils.isValidatable(b)){var d=f.configuration.validate||{},e={throttleEvaluation:c.throttle||d.throttle};b.error=a.observable(null),b.rules=a.observableArray(),b.isValidating=a.observable(!1),b.__valid__=a.observable(!0),b.isModified=a.observable(!1),b.isValid=a.computed(b.__valid__),b.setError=function(a){b.error(a),b.__valid__(!1)},b.clearError=function(){return b.error(null),b.__valid__(!0),b};var g=b.subscribe(function(){b.isModified(!0)}),h=a.computed(j({read:function(){return b(),b.rules(),f.validateObservable(b),!0}},e));j(h,e),b._disposeValidation=function(){b.isValid.dispose(),b.rules.removeAll(),b.isModified.getSubscriptionsCount()>0&&(b.isModified._subscriptions.change=[]),b.isValidating.getSubscriptionsCount()>0&&(b.isValidating._subscriptions.change=[]),b.__valid__.getSubscriptionsCount()>0&&(b.__valid__._subscriptions.change=[]),g.dispose(),h.dispose(),delete b.rules,delete b.error,delete b.isValid,delete b.isValidating,delete b.__valid__,delete b.isModified}}else c.enable===!1&&b._disposeValidation&&b._disposeValidation();return b},f.validateObservable=function(a){for(var b,c,g=0,h=a.rules(),i=h.length;i>g;g++)if(c=h[g],!c.condition||c.condition())if(b=c.rule?f.rules[c.rule]:c,b.async||c.async)e(a,b,c);else if(!d(a,b,c))return!1;return a.clearError(),!0},f.localize=function(a){var b;for(b in a)f.rules.hasOwnProperty(b)&&(f.rules[b].message=a[b])},a.applyBindingsWithValidation=function(b,c,d){var e,g,h=arguments.length;h>2?(e=c,g=d):2>h?e=document.body:arguments[1].nodeType?e=c:g=arguments[1],f.init(),g&&f.utils.setDomData(e,g),a.applyBindings(b,c)};var n=a.applyBindings;a.applyBindings=function(a,b){f.init(),n(a,b)},a.validatedObservable=function(b){if(!f.utils.isObject(b))return a.observable(b).extend({validatable:!0});var c=a.observable(b);return c.errors=f.group(b),c.isValid=a.observable(b.isValid()),c.errors.subscribe(function(a){c.isValid(0===a.length)}),c}}),function(){var a,b,c,d,e,f;d=function(a,b,c,d){var e;return e=null,"js"===a?(e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",b)):"css"===a&&(e=document.createElement("link"),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",b)),e.readyState?e.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&c(d)}:e.onload=function(){c(d)},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)},b=function(b){return a.ajax({type:"get",url:""+a("#donation-script").data("pathtoserver")+"/config/"+a("#donation-script").data("org")+".json",dataType:"jsonp",complete:function(c){return b(c,a.extend(a("#donation-script").data()))}})},e=function(){var e,f,g,h,i,j,k,l,m;for(j=a("#donation-script").data("testmode")===!0,e=j?"jquery.donations.a479bbd4.js":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.a479bbd4.js",i=["https://js.stripe.com/v2/","https://d3dy5gmtp8yhk7.cloudfront.net/2.1/pusher.min.js",e],g=0,f=function(){var d,e;return g++,g===i.length?(initJQueryPayments(jQuery),c(),d=function(b){return a(".donations-form-anchor").append(html),ko.applyBindings(new DonationsFormModel(a,b))},e=function(){var b;return b=null,a.ajax({async:!1,dataType:"json",url:"config.json",success:function(a){return b=a}}),b},j?d(a.extend(e(),a("#donation-script").data())):b(d)):void 0},m=[],k=0,l=i.length;l>k;k++)h=i[k],m.push(d("js",h,f));return m},c=function(){return function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","gaDonations"),gaDonations("create","UA-48690908-1","controlshiftlabs.com"),gaDonations("send","pageview")},f=function(){a=jQuery=window.jQuery.noConflict(!0);var b,c;c=a("#donation-script").data("testmode")===!0,b=c?"jquery.donations.3516e2b1.css":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.3516e2b1.css",d("css",b,function(){}),e()},void 0===window.jQuery||window.jQuery.fn.jquery&&(1!==parseInt(window.jQuery.fn.jquery[0])||parseInt(window.jQuery.fn.jquery[1])<9)?d("js","https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",f):f()}.call(this),initJQueryPayments=function(jQuery){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlash,hasTextSelected,luhnCheck,reFormatCardNumber,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};$=jQuery,$.payment={},$.payment.fn={},$.fn.payment=function(){var args,method;return method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],$.payment.fn[method].apply(this,args)},defaultFormat=/(\d{1,4})/g,cards=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:defaultFormat,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:defaultFormat,length:[13,14,15,16],cvcLength:[3],luhn:!0}],cardFromNumber=function(num){var card,_i,_len;for(num=(num+"").replace(/\D/g,""),_i=0,_len=cards.length;_len>_i;_i++)if(card=cards[_i],card.pattern.test(num))return card},cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_len>_i;_i++)if(card=cards[_i],card.type===type)return card},luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;for(odd=!0,sum=0,digits=(num+"").split("").reverse(),_i=0,_len=digits.length;_len>_i;_i++)digit=digits[_i],digit=parseInt(digit,10),(odd=!odd)&&(digit*=2),digit>9&&(digit-=9),sum+=digit;return sum%10===0},hasTextSelected=function($target){var _ref;return null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==$target.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(_ref=document.selection)?"function"==typeof _ref.createRange?_ref.createRange().text:void 0:void 0:void 0)?!0:!1},reFormatCardNumber=function(e){return setTimeout(function(){var $target,value;return $target=$(e.currentTarget),value=$target.val(),value=$.payment.formatCardNumber(value),$target.val(value)})},formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;return digit=String.fromCharCode(e.which),!/^\d+$/.test(digit)||($target=$(e.currentTarget),value=$target.val(),card=cardFromNumber(value+digit),length=(value.replace(/\D/g,"")+digit).length,upperLength=16,card&&(upperLength=card.length[card.length.length-1]),length>=upperLength||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length)?void 0:(re=card&&"amex"===card.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,re.test(value)?(e.preventDefault(),$target.val(value+" "+digit)):re.test(value+digit)?(e.preventDefault(),$target.val(value+digit+" ")):void 0)},formatBackCardNumber=function(e){var $target,value;return $target=$(e.currentTarget),value=$target.val(),e.meta||8!==e.which||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length?void 0:/\d\s$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\d\s$/,""))):/\s\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\d?$/,""))):void 0},formatExpiry=function(e){var $target,digit,val;return digit=String.fromCharCode(e.which),/^\d+$/.test(digit)?($target=$(e.currentTarget),val=$target.val()+digit,/^\d$/.test(val)&&"0"!==val&&"1"!==val?(e.preventDefault(),$target.val("0"+val+" / ")):/^\d\d$/.test(val)?(e.preventDefault(),$target.val(""+val+" / ")):void 0):void 0},formatForwardExpiry=function(e){var $target,digit,val;return digit=String.fromCharCode(e.which),/^\d+$/.test(digit)?($target=$(e.currentTarget),val=$target.val(),/^\d\d$/.test(val)?$target.val(""+val+" / "):void 0):void 0},formatForwardSlash=function(e){var $target,slash,val;return slash=String.fromCharCode(e.which),"/"===slash?($target=$(e.currentTarget),val=$target.val(),/^\d$/.test(val)&&"0"!==val?$target.val("0"+val+" / "):void 0):void 0},formatBackExpiry=function(e){var $target,value;return e.meta||($target=$(e.currentTarget),value=$target.val(),8!==e.which||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length)?void 0:/\d(\s|\/)+$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\/\s?\d?$/,""))):void 0},restrictNumeric=function(e){var input;return e.metaKey||e.ctrlKey?!0:32===e.which?!1:0===e.which?!0:e.which<33?!0:(input=String.fromCharCode(e.which),!!/[\d\s]/.test(input))},restrictCardNumber=function(e){var $target,card,digit,value;return $target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target)?(value=($target.val()+digit).replace(/\D/g,""),card=cardFromNumber(value),card?value.length<=card.length[card.length.length-1]:value.length<=16):void 0},restrictExpiry=function(e){var $target,digit,value;return $target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target)?(value=$target.val()+digit,value=value.replace(/\D/g,""),value.length>6?!1:void 0):void 0},restrictCVC=function(e){var $target,digit,val;return $target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)?(val=$target.val()+digit,val.length<=4):void 0},setCardType=function(e){var $target,allTypes,card,cardType,val;return $target=$(e.currentTarget),val=$target.val(),cardType=$.payment.cardType(val)||"unknown",$target.hasClass(cardType)?void 0:(allTypes=function(){var _i,_len,_results;for(_results=[],_i=0,_len=cards.length;_len>_i;_i++)card=cards[_i],_results.push(card.type);return _results}(),$target.removeClass("unknown"),$target.removeClass(allTypes.join(" ")),$target.addClass(cardType),$target.toggleClass("identified","unknown"!==cardType),$target.trigger("payment.cardType",cardType))},$.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictCVC),this},$.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictExpiry),this.on("keypress",formatExpiry),this.on("keypress",formatForwardSlash),this.on("keypress",formatForwardExpiry),this.on("keydown",formatBackExpiry),this},$.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",restrictCardNumber),this.on("keypress",formatCardNumber),this.on("keydown",formatBackCardNumber),this.on("keyup",setCardType),this.on("paste",reFormatCardNumber),this},$.payment.fn.restrictNumeric=function(){return this.on("keypress",restrictNumeric),this},$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val())},$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;return value=value.replace(/\s/g,""),_ref=value.split("/",2),month=_ref[0],year=_ref[1],2===(null!=year?year.length:void 0)&&/^\d+$/.test(year)&&(prefix=(new Date).getFullYear(),prefix=prefix.toString().slice(0,2),year=prefix+year),month=parseInt(month,10),year=parseInt(year,10),{month:month,year:year}},$.payment.validateCardNumber=function(num){var card,_ref;return num=(num+"").replace(/\s+|-/g,""),/^\d+$/.test(num)?(card=cardFromNumber(num),card?(_ref=num.length,__indexOf.call(card.length,_ref)>=0&&(card.luhn===!1||luhnCheck(num))):!1):!1},$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,prefix,_ref;return"object"==typeof month&&"month"in month&&(_ref=month,month=_ref.month,year=_ref.year),month&&year?(month=$.trim(month),year=$.trim(year),/^\d+$/.test(month)?/^\d+$/.test(year)?parseInt(month,10)<=12?(2===year.length&&(prefix=(new Date).getFullYear(),prefix=prefix.toString().slice(0,2),year=prefix+year),expiry=new Date(year,month),currentTime=new Date,expiry.setMonth(expiry.getMonth()-1),expiry.setMonth(expiry.getMonth()+1,1),expiry>currentTime):!1:!1:!1):!1},$.payment.validateCardCVC=function(cvc,type){var _ref,_ref1;return cvc=$.trim(cvc),/^\d+$/.test(cvc)?type?(_ref=cvc.length,__indexOf.call(null!=(_ref1=cardFromType(type))?_ref1.cvcLength:void 0,_ref)>=0):cvc.length>=3&&cvc.length<=4:!1},$.payment.cardType=function(num){var _ref;return num?(null!=(_ref=cardFromNumber(num))?_ref.type:void 0)||null:null},$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;return(card=cardFromNumber(num))?(upperLength=card.length[card.length.length-1],num=num.replace(/\D/g,""),num=num.slice(0,+upperLength+1||9e9),card.format.global?null!=(_ref=num.match(card.format))?_ref.join(" "):void 0:(groups=card.format.exec(num),null!=groups&&groups.shift(),null!=groups?groups.join(" "):void 0)):num}},function(root,factory){"function"==typeof define&&define.amd?define(factory):root.form2js=factory()}(this,function(){"use strict";function form2js(rootNode,delimiter,skipEmpty,nodeCallback,useIdIfEmptyName){("undefined"==typeof skipEmpty||null==skipEmpty)&&(skipEmpty=!0),("undefined"==typeof delimiter||null==delimiter)&&(delimiter="."),arguments.length<5&&(useIdIfEmptyName=!1),rootNode="string"==typeof rootNode?document.getElementById(rootNode):rootNode;var currNode,formValues=[],i=0;if(rootNode.constructor==Array||"undefined"!=typeof NodeList&&rootNode.constructor==NodeList)for(;currNode=rootNode[i++];)formValues=formValues.concat(getFormValues(currNode,nodeCallback,useIdIfEmptyName));else formValues=getFormValues(rootNode,nodeCallback,useIdIfEmptyName);return processNameValues(formValues,skipEmpty,delimiter)}function processNameValues(nameValues,skipEmpty,delimiter){var i,j,k,l,value,nameParts,currResult,arrNameFull,arrName,arrIdx,namePart,name,_nameParts,result={},arrays={};for(i=0;i<nameValues.length;i++)if(value=nameValues[i].value,!skipEmpty||""!==value&&null!==value){for(name=nameValues[i].name,_nameParts=name.split(delimiter),nameParts=[],currResult=result,arrNameFull="",j=0;j<_nameParts.length;j++)if(namePart=_nameParts[j].split("]["),namePart.length>1)for(k=0;k<namePart.length;k++)if(namePart[k]=0==k?namePart[k]+"]":k==namePart.length-1?"["+namePart[k]:"["+namePart[k]+"]",arrIdx=namePart[k].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(l=1;l<arrIdx.length;l++)arrIdx[l]&&nameParts.push(arrIdx[l]);else nameParts.push(namePart[k]);else nameParts=nameParts.concat(namePart);for(j=0;j<nameParts.length;j++)namePart=nameParts[j],namePart.indexOf("[]")>-1&&j==nameParts.length-1?(arrName=namePart.substr(0,namePart.indexOf("[")),arrNameFull+=arrName,currResult[arrName]||(currResult[arrName]=[]),currResult[arrName].push(value)):namePart.indexOf("[")>-1?(arrName=namePart.substr(0,namePart.indexOf("[")),arrIdx=namePart.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),arrNameFull+="_"+arrName+"_"+arrIdx,arrays[arrNameFull]||(arrays[arrNameFull]={}),""==arrName||currResult[arrName]||(currResult[arrName]=[]),j==nameParts.length-1?""==arrName?(currResult.push(value),arrays[arrNameFull][arrIdx]=currResult[currResult.length-1]):(currResult[arrName].push(value),arrays[arrNameFull][arrIdx]=currResult[arrName][currResult[arrName].length-1]):arrays[arrNameFull][arrIdx]||(currResult[arrName].push(/^[0-9a-z_]+\[?/i.test(nameParts[j+1])?{}:[]),arrays[arrNameFull][arrIdx]=currResult[arrName][currResult[arrName].length-1]),currResult=arrays[arrNameFull][arrIdx]):(arrNameFull+=namePart,j<nameParts.length-1?(currResult[namePart]||(currResult[namePart]={}),currResult=currResult[namePart]):currResult[namePart]=value)}return result}function getFormValues(rootNode,nodeCallback,useIdIfEmptyName){var result=extractNodeValues(rootNode,nodeCallback,useIdIfEmptyName);return result.length>0?result:getSubFormValues(rootNode,nodeCallback,useIdIfEmptyName)}function getSubFormValues(rootNode,nodeCallback,useIdIfEmptyName){for(var result=[],currentNode=rootNode.firstChild;currentNode;)result=result.concat(extractNodeValues(currentNode,nodeCallback,useIdIfEmptyName)),currentNode=currentNode.nextSibling;return result}function extractNodeValues(node,nodeCallback,useIdIfEmptyName){var callbackResult,fieldValue,result,fieldName=getFieldName(node,useIdIfEmptyName);return callbackResult=nodeCallback&&nodeCallback(node),callbackResult&&callbackResult.name?result=[callbackResult]:""!=fieldName&&node.nodeName.match(/INPUT|TEXTAREA/i)?(fieldValue=getFieldValue(node),result=[{name:fieldName,value:fieldValue}]):""!=fieldName&&node.nodeName.match(/SELECT/i)?(fieldValue=getFieldValue(node),result=[{name:fieldName.replace(/\[\]$/,""),value:fieldValue}]):result=getSubFormValues(node,nodeCallback,useIdIfEmptyName),result}function getFieldName(node,useIdIfEmptyName){return node.name&&""!=node.name?node.name:useIdIfEmptyName&&node.id&&""!=node.id?node.id:""}function getFieldValue(fieldNode){if(fieldNode.disabled)return null;switch(fieldNode.nodeName){case"INPUT":case"TEXTAREA":switch(fieldNode.type.toLowerCase()){case"radio":if(fieldNode.checked&&"false"===fieldNode.value)return!1;case"checkbox":if(fieldNode.checked&&"true"===fieldNode.value)return!0;if(!fieldNode.checked&&"true"===fieldNode.value)return!1;if(fieldNode.checked)return fieldNode.value;break;case"button":case"reset":case"submit":case"image":return"";default:return fieldNode.value}break;case"SELECT":return getSelectedOptionValue(fieldNode)}return null}function getSelectedOptionValue(selectNode){var options,i,l,multiple=selectNode.multiple,result=[];if(!multiple)return selectNode.value;for(options=selectNode.getElementsByTagName("option"),i=0,l=options.length;l>i;i++)options[i].selected&&result.push(options[i].value);return result}return form2js});var html;html='<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" data-bind="value: org">\n  <input type="hidden" name="customer.country" data-bind="value: countryCode">\n  <input type="hidden" name="customer.charges_attributes[0].currency" data-bind="value: selectedCurrency">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\' data-bind="html: currencySymbol">$</span><span class=\'donation-header-amt\' data-bind="text: displayAmount()">0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header" id="dnt-progress-amount" data-bind="css: { \'dph-active\' : visibleInputSet() >= 0}, click: function() { setInputSet(0); }">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo" data-bind="css: { \'dph-active\' : visibleInputSet() >= 1}, click: function() { setInputSet(1); }">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment" data-bind="css: { \'dph-active\' : visibleInputSet() >= 2}, click: function() { setInputSet(2); }">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first" data-bind="visible: visibleInputSet() === 0">\n    <div class="donations-currency-select-row" data-bind="visible: currenciesEnabled()">\n      Currency: \n      <select class="donations-currency-select" data-bind="options: currenciesArray, value: selectedCurrency"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first" data-bind="validationMessage: displayAmount"></span>\n    </span>\n    <div class="donation-button-set" data-bind="foreach: amounts">\n      <div class="donation-btn donation-btn-sm" data-bind="css: { \'donation-btn-active\' : $parent.selectedBtn() === $index() }, click: function() { $parent.setActiveAmount($index()); }">\n        <span class=\'donation-currency\' data-bind="html: $parent.currencySymbol">$</span><span class=\'donation-amt\' data-bind="text: $data"></span>\n      </div>\n      <!-- ko if: $index() === ($parent.amountsLength() - 1) -->\n        <input class="donation-btn donation-btn-lg" data-bind="value: $parent.inputtedAmount, event: { change: $parent.clearSelectedButton } " type="text" placeholder="Other amount">\n      <!-- /ko -->\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn" data-bind="click: function()\n        { \n          if(inputSet1.isValid()) { incrementInputSet(); } \n          else { inputSet1.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 1">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label" data-bind="validationMessage: firstName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name" data-bind="value: firstName">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label" data-bind="validationMessage: lastName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name" data-bind="value: lastName">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label" data-bind="validationMessage: email">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email" data-bind="value: email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn" data-bind="click: function()\n        { \n          if(inputSet2.isValid()) { incrementInputSet(); } \n          else { inputSet2.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 2">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label" data-bind="validationMessage: cardNumber" data-bind="validationMessage: cardDate">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number" data-bind="value: cardNumber, style: { backgroundImage: ccBackground() } ">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label" data-bind="validationMessage: cardDate">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month" data-bind="value: cardMonth, options: ccMonths">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year" data-bind="value: cardYear, options: ccYears">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label" data-bind="validationMessage: cvc">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc" data-bind="value: cvc">\n    </div>\n    <div class="donation-payment-errors" data-bind="visible: false">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit" data-bind="click: function()\n        { \n          if(inputSet3.isValid()) { submitForm(); } \n          else { inputSet3.errors.showAllMessages();}\n        }">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>';var DonationsFormModel;DonationsFormModel=function(){function DonationsFormModel(jQuery,opts){var config,initializeCurrency,self;self=this,$=jQuery,config=$.extend({},{imgpath:"https://d2yuwrm8xcn0u8.cloudfront.net",metaviewporttag:!0},opts,self.parseQueryString(document.URL.split("?")[1])),ko.validation.configure({insertMessages:!1}),ko.validation.rules.ccDate={validator:function(val){return $.payment.validateCardExpiry(val.month,val.year)},message:"Invalid date"},ko.validation.rules.ccNum={validator:function(val){return $.payment.validateCardNumber(val)},message:"Invalid credit card number"},ko.validation.rules.cvc={validator:function(val){return $.payment.validateCardCVC(val)},message:"Invalid CVC number"},ko.validation.registerExtenders(),self.org=ko.observable(config.org),self.countryCode=ko.observable("US"),self.imgPath=ko.observable(config.imgpath),self.initializeIcons(self.imgPath()),self.seedAmount=config.seedamount||100,self.seedValues=null!=config.seedvalues?config.seedvalues.split(","):[15,35,50,100,250,500,1e3],self.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAD",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},self.currenciesArray=ko.observableArray(["USD","GBP","CAD","AUD","EUR","NZD","SEK","NOK","DKK"]),self.currenciesEnabled=ko.observable("none"!==config.currencyconversion),self.seededCurrency=config.seedcurrency||"USD",self.formCurrency=config.formcurrency||self.seededCurrency,initializeCurrency=function(){var _ref;return"none"!==(_ref=config.currencyconversion)&&"choose"!==_ref?self.currencies[config.country]:self.formCurrency},self.selectedCurrency=ko.observable(initializeCurrency()),self.currencySymbol=ko.computed(function(){var symbols;return symbols={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAD:"C$"},symbols[self.selectedCurrency()]||self.selectedCurrency()},this),self.selectedBtn=ko.observable(-1),self.selectedAmount=ko.observable("0"),self.inputtedAmount=ko.observable(null),self.displayAmount=ko.computed(function(){return self.inputtedAmount()||self.selectedAmount()},this).extend({required:{message:"Please select an amount"},min:1,digit:!0}),self.setActiveAmount=function(index){return index>-1?(self.inputtedAmount(null),self.selectedAmount(self.amounts()[index]),self.selectedBtn(index)):void 0},self.clearSelectedButton=function(){return self.selectedAmount(0),self.selectedBtn(-1)},self.amounts=ko.computed(function(){var arr,baseAmount,conversionRateFromCurrency,conversionRateToCurrency,count,entry,_i,_len,_ref;for(arr=[],_ref=self.seedValues,count=_i=0,_len=_ref.length;_len>_i;count=++_i)entry=_ref[count],baseAmount=parseInt(entry)/100*parseInt(self.seedAmount),7>count&&(self.currenciesEnabled()?(conversionRateToCurrency=config[self.selectedCurrency()]||1,conversionRateFromCurrency=config[self.seededCurrency]||1,arr.push(self.round(baseAmount*conversionRateToCurrency/conversionRateFromCurrency))):arr.push(self.round(baseAmount)));return arr},this),self.amountsLength=ko.computed(function(){return self.amounts().length},this),self.visibleInputSet=ko.observable(0),self.incrementInputSet=function(){return self.visibleInputSet(self.visibleInputSet()+1)},self.setInputSet=function(index){return self.visibleInputSet(index)},self.firstName=ko.observable().extend({required:{message:"Can't be blank"}}),self.lastName=ko.observable().extend({required:{message:"Can't be blank"}}),self.email=ko.observable().extend({required:{message:"Can't be blank"},email:{message:"Invalid email"}}),self.cardNumber=ko.observable().extend({required:{message:"Can't be blank"},ccNum:!0}),self.cardMonth=ko.observable(),self.ccMonths=["01","02","03","04","05","06","07","08","09","10","11","12"],self.cardYear=ko.observable(""+((new Date).getFullYear()+1)),self.ccYears=function(){var output,year,yr,_i,_ref;for(output=[],year=(new Date).getFullYear(),yr=_i=year,_ref=year+19;_ref>=year?_ref>=_i:_i>=_ref;yr=_ref>=year?++_i:--_i)output.push(""+yr);return output}(),self.cardDate=ko.computed(function(){return{month:self.cardMonth(),year:self.cardYear()}
},this).extend({ccDate:!0,observable:!0}),self.cvc=ko.observable().extend({required:{message:"Can't be blank"},digit:!0,cvc:!0}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),self.ccBackground=ko.computed(function(){var ccType;return ccType=$.payment.cardType(self.cardNumber()),"amex"===ccType||"mastercard"===ccType||"visa"===ccType||"discover"===ccType||"dinersclub"===ccType?"url("+self.imgPath()+"/icon-cc-"+ccType+".png)":"url("+self.imgPath()+"/icon-cc-none.png)"},this),self.inputSet1=ko.validatedObservable({amount:self.displayAmount}),self.inputSet2=ko.validatedObservable({firstName:self.firstName,lastName:self.lastName,email:self.email}),self.inputSet3=ko.validatedObservable({cardNumber:self.cardNumber,cardDate:self.cardDate,cvc:self.cvc}),self.connectToServer(config,self)}return DonationsFormModel.prototype.parseQueryString=function(q){var hash,i,vars;if(hash={},void 0!==q&&""!==q)for(q=q.split("&"),i=0;i<q.length;)vars=q[i].split("="),hash[vars[0]]=vars[1],i++;return hash},DonationsFormModel.prototype.initializeIcons=function(path){var icons,k,v,_results;icons={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"},_results=[];for(k in icons)v=icons[k],_results.push($(k).css("background-image","url('"+path+"/"+v+"')"));return _results},DonationsFormModel.prototype.round=function(number){var temp;return temp=Math.round(parseFloat(number.toPrecision(2))),0===temp?1:temp},DonationsFormModel.prototype.connectToServer=function(opts,self){var config,stripeResponseHandler,subscribeToDonationChannel;return config=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},opts),Stripe.setPublishableKey(config.stripepublickey),$.fn.serializeObject=function(){var amount,serialObj;return serialObj=form2js(this.attr("id"),".",!0),serialObj["cc-num"]="",serialObj.month="",serialObj.year="",serialObj.cvc="",amount=self.displayAmount(),console.log(amount),serialObj.customer.charges_attributes[0].amount=amount.replace(self.currencySymbol(),"")+"00",serialObj},subscribeToDonationChannel=function(channelToken){var channel,pusher;return pusher=new Pusher(config.pusherpublickey),channel=pusher.subscribe(channelToken),channel.bind("charge_completed",function(data){return $(".donation-loading-overlay").hide(),pusher.disconnect(),"success"===data.status?($("#donation-script").trigger("donations:success"),null!=config.redirectto&&window.location.replace(config.redirectto),$("#donation-form").hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(data.message||"Something went wrong.").show()})},stripeResponseHandler=function(status,response){var $form,req,token;return $form=$("#donation-form"),response.error?(gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(response.error.message),$form.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide()):(token=response.id,$form.append($('<input type="hidden" name="card_token" />').val(token)),req=$.ajax({url:""+config.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),{config:config})}),req.done(function(response){return gaDonations("send","event","advance-button","click#success","submit",1),subscribeToDonationChannel(response.pusher_channel_token)}),req.fail(function(response,textStatus,errorThrown){return gaDonations("send","event","advance-button","click#with-errors","submit",1),$form.find(".donation-payment-errors").text(errorThrown||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1)},self.submitForm=function(){var $form;return gaDonations("send","event","advance-button","click#submit","submit",1),$form=$("#donation-form"),$(".donation-loading-overlay").show(),$form.find("button").prop("disabled",!0),Stripe.createToken($form,stripeResponseHandler),!1}},DonationsFormModel}(),function(){!function(p){var A=this||(0,eval)("this"),w=A.document,K=A.navigator,t=A.jQuery,C=A.JSON;!function(p){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?p(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],p):p(A.ko={})}(function(z){function G(a,c){return null===a||typeof a in M?a===c:!1}function N(a,c){var d;return function(){d||(d=setTimeout(function(){d=p,a()},c))}}function O(a,c){var d;return function(){clearTimeout(d),d=setTimeout(a,c)}}function H(b,c,d,e){a.d[b]={init:function(b,h,g,k,l){var n,r;return a.ba(function(){var g=a.a.c(h()),k=!d!=!g,s=!r;(s||c||k!==n)&&(s&&a.ca.fa()&&(r=a.a.lb(a.e.childNodes(b),!0)),k?(s||a.e.U(b,a.a.lb(r)),a.gb(e?e(l,g):l,b)):a.e.da(b),n=k)},null,{G:b}),{controlsDescendantBindings:!0}}},a.g.aa[b]=!1,a.e.Q[b]=!0}var a="undefined"!=typeof z?z:{};a.b=function(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c},a.s=function(a,c,d){a[c]=d},a.version="3.1.0",a.b("version",a.version),a.a=function(){function b(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b){return a.__proto__=b,a}var e={__proto__:[]}instanceof Array,f={},h={};f[K&&/Firefox\/2/i.test(K.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],f.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),b(f,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)h[b[c]]=a});var g={propertychange:!0},k=w&&function(){for(var a=3,b=w.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c[0];);return a>4?a:p}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},l:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},hb:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},ma:function(b,c){var d=a.a.l(b,c);d>0?b.splice(d,1):0===d&&b.shift()},ib:function(b){b=b||[];for(var c=[],d=0,e=b.length;e>d;d++)0>a.a.l(c,b[d])&&c.push(b[d]);return c},ya:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},la:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},$:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},Y:function(b,c,d){var e=a.a.l(a.a.Sa(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},na:e,extend:c,ra:d,sa:e?d:c,A:b,Oa:function(a,b){if(!a)return a;var d,c={};for(d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a));return c},Fa:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},ec:function(b){b=a.a.R(b);for(var c=w.createElement("div"),d=0,e=b.length;e>d;d++)c.appendChild(a.M(b[d]));return c},lb:function(b,c){for(var d=0,e=b.length,g=[];e>d;d++){var k=b[d].cloneNode(!0);g.push(c?a.M(k):k)}return g},U:function(b,c){if(a.a.Fa(b),c)for(var d=0,e=c.length;e>d;d++)b.appendChild(c[d])},Bb:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],g=e.parentNode,k=0,h=c.length;h>k;k++)g.insertBefore(c[k],e);for(k=0,h=d.length;h>k;k++)a.removeNode(d[k])}},ea:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},Db:function(a,b){7>k?a.setAttribute("selected",b):a.selected=b},ta:function(a){return null===a||a===p?"":a.trim?a.trim():a.toString().replace(/^[\s ]+|[\s ]+$/g,"")},oc:function(b,c){for(var d=[],e=(b||"").split(c),g=0,k=e.length;k>g;g++){var h=a.a.ta(e[g]);""!==h&&d.push(h)}return d},kc:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},Sb:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Ea:function(b){return a.a.Sb(b,b.ownerDocument.documentElement)},eb:function(b){return!!a.a.hb(b,a.a.Ea)},B:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},q:function(b,c,d){var e=k&&g[c];if(!e&&t)t(b).bind(c,d);else if(e||"function"!=typeof b.addEventListener){if("undefined"==typeof b.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var h=function(a){d.call(b,a)},f="on"+c;b.attachEvent(f,h),a.a.u.ja(b,function(){b.detachEvent(f,h)})}else b.addEventListener(c,d,!1)},ha:function(b,c){if(!b||!b.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var d;if("input"===a.a.B(b)&&b.type&&"click"==c.toLowerCase()?(d=b.type,d="checkbox"==d||"radio"==d):d=!1,t&&!d)t(b).trigger(c);else if("function"==typeof w.createEvent){if("function"!=typeof b.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");d=w.createEvent(h[c]||"HTMLEvents"),d.initEvent(c,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d)}else if(d&&b.click)b.click();else{if("undefined"==typeof b.fireEvent)throw Error("Browser doesn't support triggering events");b.fireEvent("on"+c)}},c:function(b){return a.v(b)?b():b},Sa:function(b){return a.v(b)?b.o():b},ua:function(b,c,d){if(c){var e=/\S+/g,g=b.className.match(e)||[];a.a.r(c.match(e),function(b){a.a.Y(g,b,d)}),b.className=g.join(" ")}},Xa:function(b,c){var d=a.a.c(c);(null===d||d===p)&&(d="");var e=a.e.firstChild(b);!e||3!=e.nodeType||a.e.nextSibling(e)?a.e.U(b,[b.ownerDocument.createTextNode(d)]):e.data=d,a.a.Vb(b)},Cb:function(a,b){if(a.name=b,7>=k)try{a.mergeAttributes(w.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}},Vb:function(a){k>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Tb:function(a){if(k){var b=a.style.width;a.style.width=0,a.style.width=b}},ic:function(b,c){b=a.a.c(b),c=a.a.c(c);for(var d=[],e=b;c>=e;e++)d.push(e);return d},R:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},mc:6===k,nc:7===k,oa:k,ob:function(b,c){for(var d=a.a.R(b.getElementsByTagName("input")).concat(a.a.R(b.getElementsByTagName("textarea"))),e="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},g=[],k=d.length-1;k>=0;k--)e(d[k])&&g.push(d[k]);return g},fc:function(b){return"string"==typeof b&&(b=a.a.ta(b))?C&&C.parse?C.parse(b):new Function("return "+b)():null},Ya:function(b,c,d){if(!C||!C.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return C.stringify(a.a.c(b),c,d)},gc:function(c,d,e){e=e||{};var g=e.params||{},k=e.includeFields||this.mb,h=c;if("object"==typeof c&&"form"===a.a.B(c))for(var h=c.action,f=k.length-1;f>=0;f--)for(var u=a.a.ob(c,k[f]),D=u.length-1;D>=0;D--)g[u[D].name]=u[D].value;d=a.a.c(d);var y=w.createElement("form");y.style.display="none",y.action=h,y.method="post";for(var p in d)c=w.createElement("input"),c.name=p,c.value=a.a.Ya(a.a.c(d[p])),y.appendChild(c);b(g,function(a,b){var c=w.createElement("input");c.name=a,c.value=b,y.appendChild(c)}),w.body.appendChild(y),e.submitter?e.submitter(y):y.submit(),setTimeout(function(){y.parentNode.removeChild(y)},0)}}}(),a.b("utils",a.a),a.b("utils.arrayForEach",a.a.r),a.b("utils.arrayFirst",a.a.hb),a.b("utils.arrayFilter",a.a.la),a.b("utils.arrayGetDistinctValues",a.a.ib),a.b("utils.arrayIndexOf",a.a.l),a.b("utils.arrayMap",a.a.ya),a.b("utils.arrayPushAll",a.a.$),a.b("utils.arrayRemoveItem",a.a.ma),a.b("utils.extend",a.a.extend),a.b("utils.fieldsIncludedWithJsonPost",a.a.mb),a.b("utils.getFormFields",a.a.ob),a.b("utils.peekObservable",a.a.Sa),a.b("utils.postJson",a.a.gc),a.b("utils.parseJson",a.a.fc),a.b("utils.registerEventHandler",a.a.q),a.b("utils.stringifyJson",a.a.Ya),a.b("utils.range",a.a.ic),a.b("utils.toggleDomNodeCssClass",a.a.ua),a.b("utils.triggerEvent",a.a.ha),a.b("utils.unwrapObservable",a.a.c),a.b("utils.objectForEach",a.a.A),a.b("utils.addOrRemoveItem",a.a.Y),a.b("unwrap",a.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var c=this,d=Array.prototype.slice.call(arguments);return a=d.shift(),function(){return c.apply(a,d.concat(Array.prototype.slice.call(arguments)))}}),a.a.f=new function(){function a(b,h){var g=b[d];if(!g||"null"===g||!e[g]){if(!h)return p;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=a(c,!1);return e===p?p:e[d]},set:function(c,d,e){(e!==p||a(c,!1)!==p)&&(a(c,!0)[d]=e)},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},L:function(){return c++ +d}}},a.b("utils.domData",a.a.f),a.b("utils.domData.clear",a.a.f.clear),a.a.u=new function(){function b(b,c){var e=a.a.f.get(b,d);return e===p&&c&&(e=[],a.a.f.set(b,d,e)),e}function c(d){var e=b(d,!1);if(e)for(var e=e.slice(0),k=0;k<e.length;k++)e[k](d);if(a.a.f.clear(d),a.a.u.cleanExternalData(d),f[d.nodeType])for(e=d.firstChild;d=e;)e=d.nextSibling,8===d.nodeType&&c(d)}var d=a.a.f.L(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{ja:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Ab:function(c,e){var k=b(c,!1);k&&(a.a.ma(k,e),0==k.length&&a.a.f.set(c,d,p))},M:function(b){if(e[b.nodeType]&&(c(b),f[b.nodeType])){var d=[];a.a.$(d,b.getElementsByTagName("*"));for(var k=0,l=d.length;l>k;k++)c(d[k])}return b},removeNode:function(b){a.M(b),b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){t&&"function"==typeof t.cleanData&&t.cleanData([a])}}},a.M=a.a.u.M,a.removeNode=a.a.u.removeNode,a.b("cleanNode",a.M),a.b("removeNode",a.removeNode),a.b("utils.domNodeDisposal",a.a.u),a.b("utils.domNodeDisposal.addDisposeCallback",a.a.u.ja),a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.u.Ab),function(){a.a.Qa=function(b){var c;if(t){if(t.parseHTML)c=t.parseHTML(b)||[];else if((c=t.clean([b]))&&c[0]){for(b=c[0];b.parentNode&&11!==b.parentNode.nodeType;)b=b.parentNode;b.parentNode&&b.parentNode.removeChild(b)}}else{var d=a.a.ta(b).toLowerCase();for(c=w.createElement("div"),d=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],b="ignored<div>"+d[1]+b+d[2]+"</div>","function"==typeof A.innerShiv?c.appendChild(A.innerShiv(b)):c.innerHTML=b;d[0]--;)c=c.lastChild;c=a.a.R(c.lastChild.childNodes)}return c},a.a.Va=function(b,c){if(a.a.Fa(b),c=a.a.c(c),null!==c&&c!==p)if("string"!=typeof c&&(c=c.toString()),t)t(b).html(c);else for(var d=a.a.Qa(c),e=0;e<d.length;e++)b.appendChild(d[e])}}(),a.b("utils.parseHtmlFragment",a.a.Qa),a.b("utils.setHtml",a.a.Va),a.w=function(){function b(c,e){if(c)if(8==c.nodeType){var f=a.w.xb(c.nodeValue);null!=f&&e.push({Rb:c,cc:f})}else if(1==c.nodeType)for(var f=0,h=c.childNodes,g=h.length;g>f;f++)b(h[f],e)}var c={};return{Na:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"<!--[ko_memo:"+b+"]-->"},Hb:function(a,b){var f=c[a];if(f===p)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return f.apply(null,b||[]),!0}finally{delete c[a]}},Ib:function(c,e){var f=[];b(c,f);for(var h=0,g=f.length;g>h;h++){var k=f[h].Rb,l=[k];e&&a.a.$(l,e),a.w.Hb(f[h].cc,l),k.nodeValue="",k.parentNode&&k.parentNode.removeChild(k)}},xb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),a.b("memoization",a.w),a.b("memoization.memoize",a.w.Na),a.b("memoization.unmemoize",a.w.Hb),a.b("memoization.parseMemoText",a.w.xb),a.b("memoization.unmemoizeDomNodeAndDescendants",a.w.Ib),a.Ga={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.h({read:b,write:function(a){clearTimeout(d),d=setTimeout(function(){b(a)},c)}})},rateLimit:function(a,c){var d,e,f;"number"==typeof c?d=c:(d=c.timeout,e=c.method),f="notifyWhenChangesStop"==e?O:N,a.Ma(function(a){return f(a,d)})},notify:function(a,c){a.equalityComparer="always"==c?null:G}};var M={undefined:1,"boolean":1,number:1,string:1};a.b("extenders",a.Ga),a.Fb=function(b,c,d){this.target=b,this.za=c,this.Qb=d,this.sb=!1,a.s(this,"dispose",this.F)},a.Fb.prototype.F=function(){this.sb=!0,this.Qb()},a.N=function(){a.a.sa(this,a.N.fn),this.H={}};var F="change";z={V:function(b,c,d){var e=this;d=d||F;var f=new a.Fb(e,c?b.bind(c):b,function(){a.a.ma(e.H[d],f)});return e.o&&e.o(),e.H[d]||(e.H[d]=[]),e.H[d].push(f),f},notifySubscribers:function(b,c){if(c=c||F,this.qb(c))try{a.k.jb();for(var f,d=this.H[c].slice(0),e=0;f=d[e];++e)f.sb||f.za(b)}finally{a.k.end()}},Ma:function(b){var e,f,h,c=this,d=a.v(c);c.ia||(c.ia=c.notifySubscribers,c.notifySubscribers=function(a,b){b&&b!==F?"beforeChange"===b?c.bb(a):c.ia(a,b):c.cb(a)});var g=b(function(){d&&h===c&&(h=c()),e=!1,c.Ka(f,h)&&c.ia(f=h)});c.cb=function(a){e=!0,h=a,g()},c.bb=function(a){e||(f=a,c.ia(a,"beforeChange"))}},qb:function(a){return this.H[a]&&this.H[a].length},Wb:function(){var b=0;return a.a.A(this.H,function(a,d){b+=d.length}),b},Ka:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},extend:function(b){var c=this;return b&&a.a.A(b,function(b,e){var f=a.Ga[b];"function"==typeof f&&(c=f(c,e)||c)}),c}},a.s(z,"subscribe",z.V),a.s(z,"extend",z.extend),a.s(z,"getSubscriptionsCount",z.Wb),a.a.na&&a.a.ra(z,Function.prototype),a.N.fn=z,a.tb=function(a){return null!=a&&"function"==typeof a.V&&"function"==typeof a.notifySubscribers},a.b("subscribable",a.N),a.b("isSubscribable",a.tb),a.ca=a.k=function(){function b(a){d.push(e),e=a}function c(){e=d.pop()}var e,d=[],f=0;return{jb:b,end:c,zb:function(b){if(e){if(!a.tb(b))throw Error("Only subscribable things can act as dependencies");e.za(b,b.Kb||(b.Kb=++f))}},t:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},fa:function(){return e?e.ba.fa():void 0},pa:function(){return e?e.pa:void 0}}}(),a.b("computedContext",a.ca),a.b("computedContext.getDependenciesCount",a.ca.fa),a.b("computedContext.isInitial",a.ca.pa),a.m=function(b){function c(){return 0<arguments.length?(c.Ka(d,arguments[0])&&(c.P(),d=arguments[0],c.O()),this):(a.k.zb(c),d)}var d=b;return a.N.call(c),a.a.sa(c,a.m.fn),c.o=function(){return d},c.O=function(){c.notifySubscribers(d)},c.P=function(){c.notifySubscribers(d,"beforeChange")},a.s(c,"peek",c.o),a.s(c,"valueHasMutated",c.O),a.s(c,"valueWillMutate",c.P),c},a.m.fn={equalityComparer:G};var E=a.m.hc="__ko_proto__";a.m.fn[E]=a.m,a.a.na&&a.a.ra(a.m.fn,a.N.fn),a.Ha=function(b,c){return null===b||b===p||b[E]===p?!1:b[E]===c?!0:a.Ha(b[E],c)},a.v=function(b){return a.Ha(b,a.m)},a.ub=function(b){return"function"==typeof b&&b[E]===a.m||"function"==typeof b&&b[E]===a.h&&b.Yb?!0:!1},a.b("observable",a.m),a.b("isObservable",a.v),a.b("isWriteableObservable",a.ub),a.T=function(b){if(b=b||[],"object"!=typeof b||!("length"in b))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return b=a.m(b),a.a.sa(b,a.T.fn),b.extend({trackArrayChanges:!0})},a.T.fn={remove:function(b){for(var c=this.o(),d=[],e="function"!=typeof b||a.v(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var h=c[f];e(h)&&(0===d.length&&this.P(),d.push(h),c.splice(f,1),f--)}return d.length&&this.O(),d},removeAll:function(b){if(b===p){var c=this.o(),d=c.slice(0);return this.P(),c.splice(0,c.length),this.O(),d}return b?this.remove(function(c){return 0<=a.a.l(b,c)}):[]},destroy:function(b){var c=this.o(),d="function"!=typeof b||a.v(b)?function(a){return a===b}:b;this.P();for(var e=c.length-1;e>=0;e--)d(c[e])&&(c[e]._destroy=!0);this.O()},destroyAll:function(b){return b===p?this.destroy(function(){return!0}):b?this.destroy(function(c){return 0<=a.a.l(b,c)}):[]},indexOf:function(b){var c=this();return a.a.l(c,b)},replace:function(a,c){var d=this.indexOf(a);d>=0&&(this.P(),this.o()[d]=c,this.O())}},a.a.r("pop push reverse shift sort splice unshift".split(" "),function(b){a.T.fn[b]=function(){var a=this.o();return this.P(),this.kb(a,b,arguments),a=a[b].apply(a,arguments),this.O(),a}}),a.a.r(["slice"],function(b){a.T.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}}),a.a.na&&a.a.ra(a.T.fn,a.m.fn),a.b("observableArray",a.T);var I="arrayChange";a.Ga.trackArrayChanges=function(b){function c(){if(!d){d=!0;var c=b.notifySubscribers;b.notifySubscribers=function(a,b){return b&&b!==F||++f,c.apply(this,arguments)};var k=[].concat(b.o()||[]);e=null,b.V(function(c){if(c=[].concat(c||[]),b.qb(I)){var d;(!e||f>1)&&(e=a.a.Aa(k,c,{sparse:!0})),d=e,d.length&&b.notifySubscribers(d,I)}k=c,e=null,f=0})}}if(!b.kb){var d=!1,e=null,f=0,h=b.V;b.V=b.subscribe=function(a,b,d){return d===I&&c(),h.apply(this,arguments)},b.kb=function(b,c,l){function h(a,b,c){return r[r.length]={status:a,value:b,index:c}}if(d&&!f){var r=[],m=b.length,q=l.length,s=0;switch(c){case"push":s=m;case"unshift":for(c=0;q>c;c++)h("added",l[c],s+c);break;case"pop":s=m-1;case"shift":m&&h("deleted",b[s],s);break;case"splice":c=Math.min(Math.max(0,0>l[0]?m+l[0]:l[0]),m);for(var m=1===q?m:Math.min(c+(l[1]||0),m),q=c+q-2,s=Math.max(m,q),B=[],u=[],D=2;s>c;++c,++D)m>c&&u.push(h("deleted",b[c],c)),q>c&&B.push(h("added",l[D],c));a.a.nb(u,B);break;default:return}e=r}}}},a.ba=a.h=function(b,c,d){function e(){q=!0,a.a.A(v,function(a,b){b.F()}),v={},x=0,n=!1}function f(){var a=g.throttleEvaluation;a&&a>=0?(clearTimeout(t),t=setTimeout(h,a)):g.wa?g.wa():h()}function h(){if(!r&&!q){if(y&&y()){if(!m)return void p()}else m=!1;r=!0;try{var b=v,d=x;a.k.jb({za:function(a,c){q||(d&&b[c]?(v[c]=b[c],++x,delete b[c],--d):v[c]||(v[c]=a.V(f),++x))},ba:g,pa:!x}),v={},x=0;try{var e=c?s.call(c):s()}finally{a.k.end(),d&&a.a.A(b,function(a,b){b.F()}),n=!1}g.Ka(l,e)&&(g.notifySubscribers(l,"beforeChange"),l=e,g.wa&&!g.throttleEvaluation||g.notifySubscribers(l))}finally{r=!1}x||p()}}function g(){if(0<arguments.length){if("function"!=typeof B)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return B.apply(c,arguments),this}return n&&h(),a.k.zb(g),l}function k(){return n||x>0}var l,n=!0,r=!1,m=!1,q=!1,s=b;if(s&&"object"==typeof s?(d=s,s=d.read):(d=d||{},s||(s=d.read)),"function"!=typeof s)throw Error("Pass a function that returns the value of the ko.computed");var B=d.write,u=d.disposeWhenNodeIsRemoved||d.G||null,D=d.disposeWhen||d.Da,y=D,p=e,v={},x=0,t=null;c||(c=d.owner),a.N.call(g),a.a.sa(g,a.h.fn),g.o=function(){return n&&!x&&h(),l},g.fa=function(){return x},g.Yb="function"==typeof d.write,g.F=function(){p()},g.ga=k;var w=g.Ma;return g.Ma=function(a){w.call(g,a),g.wa=function(){g.bb(l),n=!0,g.cb(g)}},a.s(g,"peek",g.o),a.s(g,"dispose",g.F),a.s(g,"isActive",g.ga),a.s(g,"getDependenciesCount",g.fa),u&&(m=!0,u.nodeType&&(y=function(){return!a.a.Ea(u)||D&&D()})),!0!==d.deferEvaluation&&h(),u&&k()&&u.nodeType&&(p=function(){a.a.u.Ab(u,p),e()},a.a.u.ja(u,p)),g},a.$b=function(b){return a.Ha(b,a.h)},z=a.m.hc,a.h[z]=a.m,a.h.fn={equalityComparer:G},a.h.fn[z]=a.h,a.a.na&&a.a.ra(a.h.fn,a.N.fn),a.b("dependentObservable",a.h),a.b("computed",a.h),a.b("isComputed",a.$b),function(){function b(a,f,h){if(h=h||new d,a=f(a),"object"!=typeof a||null===a||a===p||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var g=a instanceof Array?[]:{};return h.save(a,g),c(a,function(c){var d=f(a[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":g[c]=d;break;case"object":case"undefined":var n=h.get(d);g[c]=n!==p?n:b(d,f,h)}}),g}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.ab=[]}a.Gb=function(c){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(c,function(b){for(var c=0;a.v(b)&&10>c;c++)b=b();return b})},a.toJSON=function(b,c,d){return b=a.Gb(b),a.a.Ya(b,c,d)},d.prototype={save:function(b,c){var d=a.a.l(this.keys,b);d>=0?this.ab[d]=c:(this.keys.push(b),this.ab.push(c))},get:function(b){return b=a.a.l(this.keys,b),b>=0?this.ab[b]:p}}}(),a.b("toJS",a.Gb),a.b("toJSON",a.toJSON),function(){a.i={p:function(b){switch(a.a.B(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?a.a.f.get(b,a.d.options.Pa):7>=a.a.oa?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?a.i.p(b.options[b.selectedIndex]):p;default:return b.value}},X:function(b,c,d){switch(a.a.B(b)){case"option":switch(typeof c){case"string":a.a.f.set(b,a.d.options.Pa,p),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:a.a.f.set(b,a.d.options.Pa,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":(""===c||null===c)&&(c=p);for(var g,e=-1,f=0,h=b.options.length;h>f;++f)if(g=a.i.p(b.options[f]),g==c||""==g&&c===p){e=f;break}(d||e>=0||c===p&&1<b.size)&&(b.selectedIndex=e);break;default:(null===c||c===p)&&(c=""),b.value=c}}}}(),a.b("selectExtensions",a.i),a.b("selectExtensions.readValue",a.i.p),a.b("selectExtensions.writeValue",a.i.X),a.g=function(){function b(b){b=a.a.ta(b),123===b.charCodeAt(0)&&(b=b.slice(1,-1));var g,m,c=[],d=b.match(e),q=0;if(d){d.push(",");for(var B,s=0;B=d[s];++s){var u=B.charCodeAt(0);if(44===u){if(0>=q){g&&c.push(m?{key:g,value:m.join("")}:{unknown:g}),g=m=q=0;continue}}else if(58===u){if(!m)continue}else if(47===u&&s&&1<B.length)(u=d[s-1].match(f))&&!h[u[0]]&&(b=b.substr(b.indexOf(B)+1),d=b.match(e),d.push(","),s=-1,B="/");else if(40===u||123===u||91===u)++q;else if(41===u||125===u||93===u)--q;else if(!g&&!m){g=34===u||39===u?B.slice(1,-1):B;continue}m?m.push(B):m=[B]}}return c}var c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,h={"in":1,"return":1,"typeof":1},g={};return{aa:[],W:g,Ra:b,qa:function(e,l){function f(b,e){var l,k=a.getBindingHandler(b);(k&&k.preprocess?e=k.preprocess(e,b,f):1)&&((k=g[b])&&(l=e,0<=a.a.l(c,l)?l=!1:(k=l.match(d),l=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:l),k=l),k&&m.push("'"+b+"':function(_z){"+l+"=_z}"),q&&(e="function(){return "+e+" }"),h.push("'"+b+"':"+e))}l=l||{};var h=[],m=[],q=l.valueAccessors,s="string"==typeof e?b(e):e;return a.a.r(s,function(a){f(a.key||a.unknown,a.value)}),m.length&&f("_ko_property_writers","{"+m.join(",")+" }"),h.join(",")},bc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},va:function(b,c,d,e,g){b&&a.v(b)?!a.ub(b)||g&&b.o()===e||b(e):(b=c.get("_ko_property_writers"))&&b[d]&&b[d](e)}}}(),a.b("expressionRewriting",a.g),a.b("expressionRewriting.bindingRewriteValidators",a.g.aa),a.b("expressionRewriting.parseObjectLiteral",a.g.Ra),a.b("expressionRewriting.preProcessBindings",a.g.qa),a.b("expressionRewriting._twoWayBindings",a.g.W),a.b("jsonExpressionRewriting",a.g),a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.g.qa),function(){function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function d(a,d){for(var e=a,g=1,k=[];e=e.nextSibling;){if(c(e)&&(g--,0===g))return k;k.push(e),b(e)&&g++}if(!d)throw Error("Cannot find closing comment tag to match: "+a.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&"<!--test-->"===w.createComment("test").text,h=f?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,g=f?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,k={ul:!0,ol:!0};a.e={Q:{},childNodes:function(a){return b(a)?d(a):a.childNodes},da:function(c){if(b(c)){c=a.e.childNodes(c);for(var d=0,e=c.length;e>d;d++)a.removeNode(c[d])}else a.a.Fa(c)},U:function(c,d){if(b(c)){a.e.da(c);for(var e=c.nextSibling,g=0,k=d.length;k>g;g++)e.parentNode.insertBefore(d[g],e)}else a.a.U(c,d)},yb:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},rb:function(c,d,e){e?b(c)?c.parentNode.insertBefore(d,e.nextSibling):e.nextSibling?c.insertBefore(d,e.nextSibling):c.appendChild(d):a.e.yb(c,d)},firstChild:function(a){return b(a)?!a.nextSibling||c(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){return b(a)&&(a=e(a)),a.nextSibling&&c(a.nextSibling)?null:a.nextSibling},Xb:b,lc:function(a){return(a=(f?a.text:a.nodeValue).match(h))?a[1]:null},wb:function(d){if(k[a.a.B(d)]){var g=d.firstChild;if(g)do if(1===g.nodeType){var f;f=g.firstChild;var h=null;if(f)do if(h)h.push(f);else if(b(f)){var q=e(f,!0);q?f=q:h=[f]}else c(f)&&(h=[f]);while(f=f.nextSibling);if(f=h)for(h=g.nextSibling,q=0;q<f.length;q++)h?d.insertBefore(f[q],h):d.appendChild(f[q])}while(g=g.nextSibling)}}}}(),a.b("virtualElements",a.e),a.b("virtualElements.allowedBindings",a.e.Q),a.b("virtualElements.emptyNode",a.e.da),a.b("virtualElements.insertAfter",a.e.rb),a.b("virtualElements.prepend",a.e.yb),a.b("virtualElements.setDomNodeChildren",a.e.U),function(){a.J=function(){this.Nb={}},a.a.extend(a.J.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=b.getAttribute("data-bind");case 8:return a.e.Xb(b);default:return!1}},getBindings:function(a,c){var d=this.getBindingsString(a,c);return d?this.parseBindingsString(d,c,a):null},getBindingAccessors:function(a,c){var d=this.getBindingsString(a,c);return d?this.parseBindingsString(d,c,a,{valueAccessors:!0}):null},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.e.lc(b);default:return null}},parseBindingsString:function(b,c,d,e){try{var g,f=this.Nb,h=b+(e&&e.valueAccessors||"");if(!(g=f[h])){var k,l="with($context){with($data||{}){return{"+a.g.qa(b,e)+"}}}";k=new Function("$context","$element",l),g=f[h]=k}return g(c,d)}catch(n){throw n.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+n.message,n}}}),a.J.instance=new a.J}(),a.b("bindingProvider",a.J),function(){function b(a){return function(){return a}}function c(a){return a()}function d(b){return a.a.Oa(a.k.t(b),function(a,c){return function(){return b()[c]}})}function e(a,b){return d(this.getBindings.bind(this,a,b))}function f(b,c,d){var e,g=a.e.firstChild(c),k=a.J.instance,f=k.preprocessNode;if(f){for(;e=g;)g=a.e.nextSibling(e),f.call(k,e);g=a.e.firstChild(c)}for(;e=g;)g=a.e.nextSibling(e),h(b,e,d)}function h(b,c,d){var e=!0,g=1===c.nodeType;g&&a.e.wb(c),(g&&d||a.J.instance.nodeHasBindings(c))&&(e=k(c,null,b,d).shouldBindDescendants),e&&!n[a.a.B(c)]&&f(b,c,!g)}function g(b){var c=[],d={},e=[];return a.a.A(b,function y(g){if(!d[g]){var k=a.getBindingHandler(g);k&&(k.after&&(e.push(g),a.a.r(k.after,function(c){if(b[c]){if(-1!==a.a.l(e,c))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+e.join(", "));y(c)}}),e.length--),c.push({key:g,pb:k})),d[g]=!0}}),c}function k(b,d,k,f){var h=a.a.f.get(b,r);if(!d){if(h)throw Error("You cannot apply bindings multiple times to the same element.");a.a.f.set(b,r,!0)}!h&&f&&a.Eb(b,k);var l;if(d&&"function"!=typeof d)l=d;else{var n=a.J.instance,m=n.getBindingAccessors||e,x=a.h(function(){return(l=d?d(k,b):m.call(n,b,k))&&k.D&&k.D(),l
},null,{G:b});l&&x.ga()||(x=null)}var t;if(l){var w=x?function(a){return function(){return c(x()[a])}}:function(a){return l[a]},z=function(){return a.a.Oa(x?x():l,c)};z.get=function(a){return l[a]&&c(w(a))},z.has=function(a){return a in l},f=g(l),a.a.r(f,function(c){var d=c.pb.init,e=c.pb.update,g=c.key;if(8===b.nodeType&&!a.e.Q[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&a.k.t(function(){var a=d(b,w(g),z,k.$data,k);if(a&&a.controlsDescendantBindings){if(t!==p)throw Error("Multiple bindings ("+t+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");t=g}}),"function"==typeof e&&a.h(function(){e(b,w(g),z,k.$data,k)},null,{G:b})}catch(f){throw f.message='Unable to process binding "'+g+": "+l[g]+'"\nMessage: '+f.message,f}})}return{shouldBindDescendants:t===p}}function l(b){return b&&b instanceof a.I?b:new a.I(b)}a.d={};var n={script:!0};a.getBindingHandler=function(b){return a.d[b]},a.I=function(b,c,d,e){var f,g=this,k="function"==typeof b&&!a.v(b),h=a.h(function(){var f=k?b():b,l=a.a.c(f);return c?(c.D&&c.D(),a.a.extend(g,c),h&&(g.D=h)):(g.$parents=[],g.$root=l,g.ko=a),g.$rawData=f,g.$data=l,d&&(g[d]=l),e&&e(g,c,l),g.$data},null,{Da:function(){return f&&!a.a.eb(f)},G:!0});h.ga()&&(g.D=h,h.equalityComparer=null,f=[],h.Jb=function(b){f.push(b),a.a.u.ja(b,function(b){a.a.ma(f,b),f.length||(h.F(),g.D=h=p)})})},a.I.prototype.createChildContext=function(b,c,d){return new a.I(b,this,c,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),d&&d(a)})},a.I.prototype.extend=function(b){return new a.I(this.D||this.$data,this,null,function(c,d){c.$rawData=d.$rawData,a.a.extend(c,"function"==typeof b?b():b)})};var r=a.a.f.L(),m=a.a.f.L();a.Eb=function(b,c){return 2!=arguments.length?a.a.f.get(b,m):(a.a.f.set(b,m,c),void(c.D&&c.D.Jb(b)))},a.xa=function(b,c,d){return 1===b.nodeType&&a.e.wb(b),k(b,c,l(d),!0)},a.Lb=function(c,e,g){return g=l(g),a.xa(c,"function"==typeof e?d(e.bind(null,g,c)):a.a.Oa(e,b),g)},a.gb=function(a,b){1!==b.nodeType&&8!==b.nodeType||f(l(a),b,!0)},a.fb=function(a,b){if(!t&&A.jQuery&&(t=A.jQuery),b&&1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");b=b||A.document.body,h(l(a),b,!0)},a.Ca=function(b){switch(b.nodeType){case 1:case 8:var c=a.Eb(b);if(c)return c;if(b.parentNode)return a.Ca(b.parentNode)}return p},a.Pb=function(b){return(b=a.Ca(b))?b.$data:p},a.b("bindingHandlers",a.d),a.b("applyBindings",a.fb),a.b("applyBindingsToDescendants",a.gb),a.b("applyBindingAccessorsToNode",a.xa),a.b("applyBindingsToNode",a.Lb),a.b("contextFor",a.Ca),a.b("dataFor",a.Pb)}();var L={"class":"className","for":"htmlFor"};a.d.attr={update:function(b,c){var d=a.a.c(c())||{};a.a.A(d,function(c,d){d=a.a.c(d);var h=!1===d||null===d||d===p;h&&b.removeAttribute(c),8>=a.a.oa&&c in L?(c=L[c],h?b.removeAttribute(c):b[c]=d):h||b.setAttribute(c,d.toString()),"name"===c&&a.a.Cb(b,h?"":d.toString())})}},function(){a.d.checked={after:["value","attr"],init:function(b,c,d){function e(){return d.has("checkedValue")?a.a.c(d.get("checkedValue")):b.value}function f(){var g=b.checked,f=r?e():g;if(!a.ca.pa()&&(!k||g)){var h=a.k.t(c);l?n!==f?(g&&(a.a.Y(h,f,!0),a.a.Y(h,n,!1)),n=f):a.a.Y(h,f,g):a.g.va(h,d,"checked",f,!0)}}function h(){var d=a.a.c(c());b.checked=l?0<=a.a.l(d,e()):g?d:e()===d}var g="checkbox"==b.type,k="radio"==b.type;if(g||k){var l=g&&a.a.c(c())instanceof Array,n=l?e():p,r=k||l;k&&!b.name&&a.d.uniqueName.init(b,function(){return!0}),a.ba(f,null,{G:b}),a.a.q(b,"click",f),a.ba(h,null,{G:b})}}},a.g.W.checked=!0,a.d.checkedValue={update:function(b,c){b.value=a.a.c(c())}}}(),a.d.css={update:function(b,c){var d=a.a.c(c());"object"==typeof d?a.a.A(d,function(c,d){d=a.a.c(d),a.a.ua(b,c,d)}):(d=String(d||""),a.a.ua(b,b.__ko__cssValue,!1),b.__ko__cssValue=d,a.a.ua(b,d,!0))}},a.d.enable={update:function(b,c){var d=a.a.c(c());d&&b.disabled?b.removeAttribute("disabled"):d||b.disabled||(b.disabled=!0)}},a.d.disable={update:function(b,c){a.d.enable.update(b,function(){return!a.a.c(c())})}},a.d.event={init:function(b,c,d,e,f){var h=c()||{};a.a.A(h,function(g){"string"==typeof g&&a.a.q(b,g,function(b){var h,n=c()[g];if(n){try{var r=a.a.R(arguments);e=f.$data,r.unshift(e),h=n.apply(e,r)}finally{!0!==h&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}},a.d.foreach={vb:function(b){return function(){var c=b(),d=a.a.Sa(c);return d&&"number"!=typeof d.length?(a.a.c(c),{foreach:d.data,as:d.as,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.K.Ja}):{foreach:c,templateEngine:a.K.Ja}}},init:function(b,c){return a.d.template.init(b,a.d.foreach.vb(c))},update:function(b,c,d,e,f){return a.d.template.update(b,a.d.foreach.vb(c),d,e,f)}},a.g.aa.foreach=!1,a.e.Q.foreach=!0,a.d.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var k=b.ownerDocument;if("activeElement"in k){var f;try{f=k.activeElement}catch(h){f=k.body}e=f===b}k=c(),a.g.va(k,d,"hasfocus",e,!0),b.__ko_hasfocusLastValue=e,b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),h=e.bind(null,!1);a.a.q(b,"focus",f),a.a.q(b,"focusin",f),a.a.q(b,"blur",h),a.a.q(b,"focusout",h)},update:function(b,c){var d=!!a.a.c(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===d||(d?b.focus():b.blur(),a.k.t(a.a.ha,null,[b,d?"focusin":"focusout"]))}},a.g.W.hasfocus=!0,a.d.hasFocus=a.d.hasfocus,a.g.W.hasFocus=!0,a.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Va(b,c())}},H("if"),H("ifnot",!1,!0),H("with",!0,!1,function(a,c){return a.createChildContext(c)});var J={};a.d.options={init:function(b){if("select"!==a.a.B(b))throw Error("options binding applies only to SELECT elements");for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.la(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function h(c,d){if(r.length){var e=0<=a.a.l(r,a.i.p(d[0]));a.a.Db(d[0],e),m&&!e&&a.k.t(a.a.ha,null,[b,"change"])}}var g=0!=b.length&&b.multiple?b.scrollTop:null,k=a.a.c(c()),l=d.get("optionsIncludeDestroyed");c={};var n,r;r=b.multiple?a.a.ya(e(),a.i.p):0<=b.selectedIndex?[a.i.p(b.options[b.selectedIndex])]:[],k&&("undefined"==typeof k.length&&(k=[k]),n=a.a.la(k,function(b){return l||b===p||null===b||!a.a.c(b._destroy)}),d.has("optionsCaption")&&(k=a.a.c(d.get("optionsCaption")),null!==k&&k!==p&&n.unshift(J)));var m=!1;c.beforeRemove=function(a){b.removeChild(a)},k=h,d.has("optionsAfterRender")&&(k=function(b,c){h(0,c),a.k.t(d.get("optionsAfterRender"),null,[c[0],b!==J?b:p])}),a.a.Ua(b,n,function(c,e,g){return g.length&&(r=g[0].selected?[a.i.p(g[0])]:[],m=!0),e=b.ownerDocument.createElement("option"),c===J?(a.a.Xa(e,d.get("optionsCaption")),a.i.X(e,p)):(g=f(c,d.get("optionsValue"),c),a.i.X(e,a.a.c(g)),c=f(c,d.get("optionsText"),g),a.a.Xa(e,c)),[e]},c,k),a.k.t(function(){d.get("valueAllowUnset")&&d.has("value")?a.i.X(b,a.a.c(d.get("value")),!0):(b.multiple?r.length&&e().length<r.length:r.length&&0<=b.selectedIndex?a.i.p(b.options[b.selectedIndex])!==r[0]:r.length||0<=b.selectedIndex)&&a.a.ha(b,"change")}),a.a.Tb(b),g&&20<Math.abs(g-b.scrollTop)&&(b.scrollTop=g)}},a.d.options.Pa=a.a.f.L(),a.d.selectedOptions={after:["options","foreach"],init:function(b,c,d){a.a.q(b,"change",function(){var e=c(),f=[];a.a.r(b.getElementsByTagName("option"),function(b){b.selected&&f.push(a.i.p(b))}),a.g.va(e,d,"selectedOptions",f)})},update:function(b,c){if("select"!=a.a.B(b))throw Error("values binding applies only to SELECT elements");var d=a.a.c(c());d&&"number"==typeof d.length&&a.a.r(b.getElementsByTagName("option"),function(b){var c=0<=a.a.l(d,a.i.p(b));a.a.Db(b,c)})}},a.g.W.selectedOptions=!0,a.d.style={update:function(b,c){var d=a.a.c(c()||{});a.a.A(d,function(c,d){d=a.a.c(d),b.style[c]=d||""})}},a.d.submit={init:function(b,c,d,e,f){if("function"!=typeof c())throw Error("The value for a submit binding must be a function");a.a.q(b,"submit",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}},a.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Xa(b,c())}},a.e.Q.text=!0,a.d.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.d.uniqueName.Ob;a.a.Cb(b,d)}}},a.d.uniqueName.Ob=0,a.d.value={after:["options","foreach"],init:function(b,c,d){function e(){g=!1;var e=c(),f=a.i.p(b);a.g.va(e,d,"value",f)}var f=["change"],h=d.get("valueUpdate"),g=!1;h&&("string"==typeof h&&(h=[h]),a.a.$(f,h),f=a.a.ib(f)),!a.a.oa||"input"!=b.tagName.toLowerCase()||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.l(f,"propertychange")||(a.a.q(b,"propertychange",function(){g=!0}),a.a.q(b,"focus",function(){g=!1}),a.a.q(b,"blur",function(){g&&e()})),a.a.r(f,function(c){var d=e;a.a.kc(c,"after")&&(d=function(){setTimeout(e,0)},c=c.substring(5)),a.a.q(b,c,d)})},update:function(b,c,d){var e=a.a.c(c());if(c=a.i.p(b),e!==c)if("select"===a.a.B(b)){var f=d.get("valueAllowUnset");d=function(){a.i.X(b,e,f)},d(),f||e===a.i.p(b)?setTimeout(d,0):a.k.t(a.a.ha,null,[b,"change"])}else a.i.X(b,e)}},a.g.W.value=!0,a.d.visible={update:function(b,c){var d=a.a.c(c()),e="none"!=b.style.display;d&&!e?b.style.display="":!d&&e&&(b.style.display="none")}},function(b){a.d[b]={init:function(c,d,e,f,h){return a.d.event.init.call(this,c,function(){var a={};return a[b]=d(),a},e,f,h)}}}("click"),a.C=function(){},a.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},a.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},a.C.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||w;var d=c.getElementById(b);if(!d)throw Error("Cannot find template with ID "+b);return new a.n.j(d)}if(1==b.nodeType||8==b.nodeType)return new a.n.Z(b);throw Error("Unknown template type: "+b)},a.C.prototype.renderTemplate=function(a,c,d,e){return a=this.makeTemplateSource(a,e),this.renderTemplateSource(a,c,d)},a.C.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data("isRewritten")},a.C.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d),c=c(a.text()),a.text(c),a.data("isRewritten",!0)},a.b("templateEngine",a.C),a.Za=function(){function b(b,c,d,g){b=a.g.Ra(b);for(var k=a.g.aa,l=0;l<b.length;l++){var n=b[l].key;if(k.hasOwnProperty(n)){var r=k[n];if("function"==typeof r){if(n=r(b[l].value))throw Error(n)}else if(!r)throw Error("This template engine does not support the '"+n+"' binding within its templates")}}return d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.g.qa(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')",g.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,d=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{Ub:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.Za.dc(b,c)},d)},dc:function(a,f){return a.replace(c,function(a,c,d,e,n){return b(n,c,d,f)}).replace(d,function(a,c){return b(c,"<!-- ko -->","#comment",f)})},Mb:function(b,c){return a.w.Na(function(d,g){var k=d.nextSibling;k&&k.nodeName.toLowerCase()===c&&a.xa(k,b,g)})}}}(),a.b("__tr_ambtns",a.Za.Mb),function(){a.n={},a.n.j=function(a){this.j=a},a.n.j.prototype.text=function(){var b=a.a.B(this.j),b="script"===b?"text":"textarea"===b?"value":"innerHTML";if(0==arguments.length)return this.j[b];var c=arguments[0];"innerHTML"===b?a.a.Va(this.j,c):this.j[b]=c};var b=a.a.f.L()+"_";a.n.j.prototype.data=function(c){return 1===arguments.length?a.a.f.get(this.j,b+c):void a.a.f.set(this.j,b+c,arguments[1])};var c=a.a.f.L();a.n.Z=function(a){this.j=a},a.n.Z.prototype=new a.n.j,a.n.Z.prototype.text=function(){if(0==arguments.length){var b=a.a.f.get(this.j,c)||{};return b.$a===p&&b.Ba&&(b.$a=b.Ba.innerHTML),b.$a}a.a.f.set(this.j,c,{$a:arguments[0]})},a.n.j.prototype.nodes=function(){return 0==arguments.length?(a.a.f.get(this.j,c)||{}).Ba:void a.a.f.set(this.j,c,{Ba:arguments[0]})},a.b("templateSources",a.n),a.b("templateSources.domElement",a.n.j),a.b("templateSources.anonymousTemplate",a.n.Z)}(),function(){function b(b,c,d){var e;for(c=a.e.nextSibling(c);b&&(e=b)!==c;)b=a.e.nextSibling(e),d(e,b)}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],h=e.parentNode,m=a.J.instance,q=m.preprocessNode;if(q){if(b(e,f,function(a,b){var c=a.previousSibling,d=q.call(m,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))}),c.length=0,!e)return;e===f?c.push(e):(c.push(e,f),a.a.ea(c,h))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.fb(d,b)}),b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.w.Ib(b,[d])}),a.a.ea(c,h)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,h,n,r){r=r||{};var m=b&&d(b),m=m&&m.ownerDocument,q=r.templateEngine||f;if(a.Za.Ub(h,q,m),h=q.renderTemplate(h,n,r,m),"number"!=typeof h.length||0<h.length&&"number"!=typeof h[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(m=!1,e){case"replaceChildren":a.e.U(b,h),m=!0;break;case"replaceNode":a.a.Bb(b,h),m=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return m&&(c(h,n),r.afterRender&&a.k.t(r.afterRender,null,[h,n.$data])),h}var f;a.Wa=function(b){if(b!=p&&!(b instanceof a.C))throw Error("templateEngine must inherit from ko.templateEngine");f=b},a.Ta=function(b,c,h,n,r){if(h=h||{},(h.templateEngine||f)==p)throw Error("Set a template engine before calling renderTemplate");if(r=r||"replaceChildren",n){var m=d(n);return a.h(function(){var f=c&&c instanceof a.I?c:new a.I(a.a.c(c)),p=a.v(b)?b():"function"==typeof b?b(f.$data,f):b,f=e(n,r,p,f,h);"replaceNode"==r&&(n=f,m=d(n))},null,{Da:function(){return!m||!a.a.Ea(m)},G:m&&"replaceNode"==r?m.parentNode:m})}return a.w.Na(function(d){a.Ta(b,c,h,d,"replaceNode")})},a.jc=function(b,d,f,h,r){function m(a,b){c(b,s),f.afterRender&&f.afterRender(b,a)}function q(a,c){s=r.createChildContext(a,f.as,function(a){a.$index=c});var d="function"==typeof b?b(a,s):b;return e(null,"ignoreTargetNode",d,s,f)}var s;return a.h(function(){var b=a.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]),b=a.a.la(b,function(b){return f.includeDestroyed||b===p||null===b||!a.a.c(b._destroy)}),a.k.t(a.a.Ua,null,[h,b,q,f,m])},null,{G:h})};var h=a.a.f.L();a.d.template={init:function(b,c){var d=a.a.c(c());return"string"==typeof d||d.name?a.e.da(b):(d=a.e.childNodes(b),d=a.a.ec(d),new a.n.Z(b).nodes(d)),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var q,m=c();c=a.a.c(m),d=!0,e=null,"string"==typeof c?c={}:(m=c.name,"if"in c&&(d=a.a.c(c["if"])),d&&"ifnot"in c&&(d=!a.a.c(c.ifnot)),q=a.a.c(c.data)),"foreach"in c?e=a.jc(m||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(q,c.as):f,e=a.Ta(m||b,f,c,b)):a.e.da(b),f=e,(q=a.a.f.get(b,h))&&"function"==typeof q.F&&q.F(),a.a.f.set(b,h,f&&f.ga()?f:p)}},a.g.aa.template=function(b){return b=a.g.Ra(b),1==b.length&&b[0].unknown||a.g.bc(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"},a.e.Q.template=!0}(),a.b("setTemplateEngine",a.Wa),a.b("renderTemplate",a.Ta),a.a.nb=function(a,c,d){if(a.length&&c.length){var e,f,h,g,k;for(e=f=0;(!d||d>e)&&(g=a[f]);++f){for(h=0;k=c[h];++h)if(g.value===k.value){g.moved=k.index,k.moved=g.index,c.splice(h,1),e=h=0;break}e+=h}}},a.a.Aa=function(){function b(b,d,e,f,h){var n,m,u,w,y,g=Math.min,k=Math.max,l=[],p=b.length,q=d.length,s=q-p||1,t=p+q+1;for(n=0;p>=n;n++)for(w=u,l.push(u=[]),y=g(q,n+s),m=k(0,n-1);y>=m;m++)u[m]=m?n?b[n-1]===d[m-1]?w[m-1]:g(w[m]||t,u[m-1]||t)+1:m+1:n+1;for(g=[],k=[],s=[],n=p,m=q;n||m;)q=l[n][m]-1,m&&q===l[n][m-1]?k.push(g[g.length]={status:e,value:d[--m],index:m}):n&&q===l[n-1][m]?s.push(g[g.length]={status:f,value:b[--n],index:n}):(--m,--n,h.sparse||g.push({status:"retained",value:d[m]}));return a.a.nb(k,s,10*p),g.reverse()}return function(a,d,e){return e="boolean"==typeof e?{dontLimitMoves:e}:e||{},a=a||[],d=d||[],a.length<=d.length?b(a,d,"added","deleted",e):b(d,a,"deleted","added",e)}}(),a.b("utils.compareArrays",a.a.Aa),function(){function b(b,c,f,h,g){var k=[],l=a.h(function(){var l=c(f,g,a.a.ea(k,b))||[];0<k.length&&(a.a.Bb(k,l),h&&a.k.t(h,null,[f,l,g])),k.length=0,a.a.$(k,l)},null,{G:b,Da:function(){return!a.a.eb(k)}});return{S:k,h:l.ga()?l:p}}var c=a.a.f.L();a.a.Ua=function(d,e,f,h,g){function k(b,c){v=r[c],u!==c&&(z[b]=v),v.Ia(u++),a.a.ea(v.S,d),s.push(v),y.push(v)}function l(b,c){if(b)for(var d=0,e=c.length;e>d;d++)c[d]&&a.a.r(c[d].S,function(a){b(a,d,c[d].ka)})}e=e||[],h=h||{};var n=a.a.f.get(d,c)===p,r=a.a.f.get(d,c)||[],m=a.a.ya(r,function(a){return a.ka}),q=a.a.Aa(m,e,h.dontLimitMoves),s=[],t=0,u=0,w=[],y=[];e=[];for(var v,A,C,z=[],m=[],x=0;A=q[x];x++)switch(C=A.moved,A.status){case"deleted":C===p&&(v=r[t],v.h&&v.h.F(),w.push.apply(w,a.a.ea(v.S,d)),h.beforeRemove&&(e[x]=v,y.push(v))),t++;break;case"retained":k(x,t++);break;case"added":C!==p?k(x,C):(v={ka:A.value,Ia:a.m(u++)},s.push(v),y.push(v),n||(m[x]=v))}l(h.beforeMove,z),a.a.r(w,h.beforeRemove?a.M:a.removeNode);for(var E,x=0,n=a.e.firstChild(d);v=y[x];x++){for(v.S||a.a.extend(v,b(d,f,v.ka,g,v.Ia)),t=0;q=v.S[t];n=q.nextSibling,E=q,t++)q!==n&&a.e.rb(d,q,E);!v.Zb&&g&&(g(v.ka,v.S,v.Ia),v.Zb=!0)}l(h.beforeRemove,e),l(h.afterMove,z),l(h.afterAdd,m),a.a.f.set(d,c,s)}}(),a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.Ua),a.K=function(){this.allowTemplateRewriting=!1},a.K.prototype=new a.C,a.K.prototype.renderTemplateSource=function(b){var c=(9>a.a.oa?0:b.nodes)?b.nodes():null;return c?a.a.R(c.cloneNode(!0).childNodes):(b=b.text(),a.a.Qa(b))},a.K.Ja=new a.K,a.Wa(a.K.Ja),a.b("nativeTemplateEngine",a.K),function(){a.La=function(){var a=this.ac=function(){if(!t||!t.tmpl)return 0;try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,e,f){if(f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var h=b.data("precompiled");return h||(h=b.text()||"",h=t.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h)),b=[e.$data],e=t.extend({koBindingContext:e},f.templateOptions),e=t.tmpl(h,b,e),e.appendTo(w.createElement("div")),t.fragments={},e},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){w.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},a>0&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},a.La.prototype=new a.C;var b=new a.La;0<b.ac&&a.Wa(b),a.b("jqueryTmplTemplateEngine",a.La)}()})}()}(),!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko.validation={})}(function(a,b){function c(a){var b="max"===a;return function(c,d){if(f.utils.isEmptyVal(c))return!0;var e,g;void 0===d.typeAttr?(g="text",e=d):(g=d.typeAttr,e=d.value),isNaN(e)||(g="number");var h,i,j;switch(g.toLowerCase()){case"week":if(h=/^(\d{4})-W(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"month":if(h=/^(\d{4})-(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"number":case"range":return b?!isNaN(c)&&parseFloat(c)<=parseFloat(e):!isNaN(c)&&parseFloat(c)>=parseFloat(e);default:return b?e>=c:c>=e}}}function d(a,b,c){return b.validator(a(),void 0===c.params?!0:h(c.params))?!0:(a.setError(f.formatMessage(c.message||b.message,h(c.params),a)),!1)}function e(a,b,c){a.isValidating(!0);var d=function(d){var e=!1,g="";return a.__valid__()?(d.message?(e=d.isValid,g=d.message):e=d,e||(a.error(f.formatMessage(g||c.message||b.message,h(c.params),a)),a.__valid__(e)),void a.isValidating(!1)):void a.isValidating(!1)};b.validator(a(),h(c.params||!0),d)}if(void 0===typeof a)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";a.validation=b;var f=a.validation,g=a.utils,h=g.unwrapObservable,i=g.arrayForEach,j=g.extend,k={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},l=j({},k);l.html5Attributes=["required","pattern","min","max","step"],l.html5InputTypes=["email","number","date"],l.reset=function(){j(l,k)},f.configuration=l,f.utils=function(){var a=(new Date).getTime(),b={},c="__ko_validation__";return{isArray:function(a){return a.isArray||"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return null!==a&&"object"==typeof a},isObservableArray:function(a){return!!a&&"function"==typeof a.remove&&"function"==typeof a.removeAll&&"function"==typeof a.destroy&&"function"==typeof a.destroyAll&&"function"==typeof a.indexOf&&"function"==typeof a.replace},values:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},getValue:function(a){return"function"==typeof a?a():a},hasAttribute:function(a,b){return null!==a.getAttribute(b)},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){return a.setAttribute(b,c)},isValidatable:function(a){return!!(a&&a.rules&&a.isValid&&a.isModified)},insertAfter:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},newId:function(){return a+=1},getConfigOptions:function(a){var b=f.utils.contextFor(a);return b||f.configuration},setDomData:function(a,d){var e=a[c];e||(a[c]=e=f.utils.newId()),b[e]=d},getDomData:function(a){var d=a[c];return d?b[d]:void 0},contextFor:function(a){switch(a.nodeType){case 1:case 8:var b=f.utils.getDomData(a);if(b)return b;if(a.parentNode)return f.utils.contextFor(a.parentNode)}return void 0},isEmptyVal:function(a){return void 0===a?!0:null===a?!0:""===a?!0:void 0},getOriginalElementTitle:function(a){var b=f.utils.getAttribute(a,"data-orig-title"),c=a.title,d=f.utils.hasAttribute(a,"data-orig-title");return d?b:c},async:function(a){window.setImmediate?window.setImmediate(a):window.setTimeout(a,0)},forEach:function(a,b){if(f.utils.isArray(a))return i(a,b);for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}}}();var m=function(){function b(a){i(a.subscriptions,function(a){a.dispose()}),a.subscriptions=[]}function c(a){a.options.deep&&(i(a.flagged,function(a){delete a.__kv_traversed}),a.flagged.length=0),a.options.live||b(a)}function d(a,d){d.validatables=[],b(d),e(a,d),c(d)}function e(b,c,d){var f=[],g=b.peek?b.peek():b;b.__kv_traversed!==!0&&(c.options.deep&&(b.__kv_traversed=!0,c.flagged.push(b)),d=void 0!==d?d:c.options.deep?1:-1,a.isObservable(b)&&(b.isValid||b.extend({validatable:!0}),c.validatables.push(b),c.options.live&&n.isObservableArray(b)&&c.subscriptions.push(b.subscribe(function(){c.graphMonitor.valueHasMutated()}))),g&&!g._destroy&&(n.isArray(g)?f=g:n.isObject(g)&&(f=n.values(g))),0!==d&&n.forEach(f,function(a){a&&!a.nodeType&&e(a,c,d+1)}))}function k(a){var b=[];return i(a,function(a){a.isValid()||b.push(a.error())}),b}var l=0,m=f.configuration,n=f.utils;return{init:function(a,b){l>0&&!b||(a=a||{},a.errorElementClass=a.errorElementClass||a.errorClass||m.errorElementClass,a.errorMessageClass=a.errorMessageClass||a.errorClass||m.errorMessageClass,j(m,a),m.registerExtenders&&f.registerExtenders(),l=1)},configure:function(a){f.init(a)},reset:f.configuration.reset,group:function(b,c){c=j(j({},m.grouping),c);var e={options:c,graphMonitor:a.observable(),flagged:[],subscriptions:[],validatables:[]},f=null;return c.observable?(d(b,e),f=a.computed(function(){return e.graphMonitor(),d(b,e),k(e.validatables)})):f=function(){return d(b,e),k(e.validatables)},f.showAllMessages=function(a){void 0===a&&(a=!0),f(),i(e.validatables,function(b){b.isModified(a)})},b.errors=f,b.isValid=function(){return 0===b.errors().length},b.isAnyMessageShown=function(){var a=!1;return f(),a=!!g.arrayFirst(e.validatables,function(a){return!a.isValid()&&a.isModified()})},f},formatMessage:function(a,b,c){return"function"==typeof a?a(b,c):a.replace(/\{0\}/gi,h(b))},addRule:function(a,b){return a.extend({validatable:!0}),a.rules.push(b),a},addAnonymousRule:function(a,b){void 0===b.message&&(b.message="Error"),b.onlyIf&&(b.condition=b.onlyIf),f.addRule(a,b)},addExtender:function(b){a.extenders[b]=function(a,c){return c&&(c.message||c.onlyIf)?f.addRule(a,{rule:b,message:c.message,params:n.isEmptyVal(c.params)?!0:c.params,condition:c.onlyIf}):f.addRule(a,{rule:b,params:c})}},registerExtenders:function(){if(m.registerExtenders)for(var b in f.rules)f.rules.hasOwnProperty(b)&&(a.extenders[b]||f.addExtender(b))},insertValidationMessage:function(a){var b=document.createElement("SPAN");return b.className=n.getConfigOptions(a).errorMessageClass,n.insertAfter(a,b),b},parseInputValidationAttributes:function(a,b){i(f.configuration.html5Attributes,function(c){if(n.hasAttribute(a,c)){var d=a.getAttribute(c)||!0;if("min"===c||"max"===c){var e=a.getAttribute("type");"undefined"!=typeof e&&e||(e="text"),d={typeAttr:e,value:d}}f.addRule(b(),{rule:c,params:d})}});var c=a.getAttribute("type");i(f.configuration.html5InputTypes,function(a){a===c&&f.addRule(b(),{rule:"date"===a?"dateISO":a,params:!0})})},writeInputValidationAttributes:function(a,b){var c=b();if(c&&c.rules){var d=c.rules();i(f.configuration.html5Attributes,function(b){var c,e=g.arrayFirst(d,function(a){return a.rule.toLowerCase()===b.toLowerCase()});e&&(c=e.params,"pattern"===e.rule&&e.params instanceof RegExp&&(c=e.params.source),a.setAttribute(b,c))}),d=null}},makeBindingHandlerValidatable:function(b){var c=a.bindingHandlers[b].init;a.bindingHandlers[b].init=function(b,d,e,f,g){return c(b,d,e,f,g),a.bindingHandlers.validationCore.init(b,d,e,f,g)}},setRules:function(b,c){var d=function(b,c){if(b&&c)for(var e in c)if(c.hasOwnProperty(e)){var g=c[e];if(b[e]){var i=b[e],j=h(i),k={},l={};for(var m in g)g.hasOwnProperty(m)&&(f.rules[m]?k[m]=g[m]:l[m]=g[m]);if(a.isObservable(i)&&i.extend(k),j&&n.isArray(j))for(var o=0;o<j.length;o++)d(j[o],l);else d(j,l)}}};d(b,c)}}}();j(a.validation,m),f.rules={},f.rules.required={validator:function(a,b){var c,d=/^\s+|\s+$/g;return void 0===a||null===a?!b:(c=a,"string"==typeof a&&(c=a.replace(d,"")),b?(c+"").length>0:!0)},message:"This field is required."},f.rules.min={validator:c("min"),message:"Please enter a value greater than or equal to {0}."},f.rules.max={validator:c("max"),message:"Please enter a value less than or equal to {0}."},f.rules.minLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length>=b},message:"Please enter at least {0} characters."},f.rules.maxLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length<=b},message:"Please enter no more than {0} characters."},f.rules.pattern={validator:function(a,b){return f.utils.isEmptyVal(a)||null!==a.toString().match(b)},message:"Please check this value."},f.rules.step={validator:function(a,b){if(f.utils.isEmptyVal(a)||"any"===b)return!0;var c=100*a%(100*b);return Math.abs(c)<1e-5||Math.abs(1-c)<1e-5},message:"The value must increment by {0}"},f.rules.email={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+)*)|((")(((( |	)*(\x0d\x0a))?( |	)+)?(([--]|\x21|[#-\x5b]|[\x5d-~]|[ -퟿豈-﷏ﷰ-￯])|(\\([-	\x0d-]|[ -퟿豈-﷏ﷰ-￯]))))*((( |	)*(\x0d\x0a))?( |	)+)?(")))@((([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])))\.)+(([a-z]|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|[ -퟿豈-﷏ﷰ-￯])))$/i.test(a):!0},message:"Please enter a proper email address"},f.rules.date={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&!/Invalid|NaN/.test(new Date(a)):!0},message:"Please enter a proper date"},f.rules.dateISO={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a):!0},message:"Please enter a proper date"},f.rules.number={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a):!0},message:"Please enter a number"},f.rules.digit={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d+$/.test(a):!0},message:"Please enter a digit"},f.rules.phoneUS={validator:function(a,b){return b?f.utils.isEmptyVal(a)?!0:"string"!=typeof a?!1:(a=a.replace(/\s+/g,""),b&&a.length>9&&a.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Please specify a valid phone number"},f.rules.equal={validator:function(a,b){var c=b;return a===f.utils.getValue(c)},message:"Values must equal"},f.rules.notEqual={validator:function(a,b){var c=b;return a!==f.utils.getValue(c)},message:"Please choose another value."},f.rules.unique={validator:function(a,b){var c=f.utils.getValue(b.collection),d=f.utils.getValue(b.externalValue),e=0;return a&&c?(g.arrayFilter(c,function(c){a===(b.valueAccessor?b.valueAccessor(c):c)&&e++}),(d?1:2)>e):!0},message:"Please make sure the value is unique."},function(){f.registerExtenders()}(),a.bindingHandlers.validationCore=function(){return{init:function(b,c){var d=f.utils.getConfigOptions(b),e=c();if(d.parseInputAttributes&&f.utils.async(function(){f.parseInputValidationAttributes(b,c)}),d.insertMessages&&f.utils.isValidatable(e)){var g=f.insertValidationMessage(b);d.messageTemplate?a.renderTemplate(d.messageTemplate,{field:e},null,g,"replaceNode"):a.applyBindingsToNode(g,{validationMessage:e})}d.writeInputAttributes&&f.utils.isValidatable(e)&&f.writeInputValidationAttributes(b,c),d.decorateInputElement&&f.utils.isValidatable(e)&&a.applyBindingsToNode(b,{validationElement:e})}}}(),f.makeBindingHandlerValidatable("value"),f.makeBindingHandlerValidatable("checked"),a.bindingHandlers.validationMessage={update:function(b,c){var d=c(),e=f.utils.getConfigOptions(b),i=(h(d),!1),j=!1;if(!d.isValid||!d.isModified)throw new Error("Observable is not validatable");i=d.isModified(),j=d.isValid();var k=null;(!e.messagesOnModified||i)&&(k=j?null:d.error);var l=!e.messagesOnModified||i?!j:!1,m="none"!==b.style.display;e.allowHtmlMessages?g.setHtml(b,k):a.bindingHandlers.text.update(b,function(){return k}),m&&!l?b.style.display="none":!m&&l&&(b.style.display="")}},a.bindingHandlers.validationElement={update:function(b,c,d){var e=c(),g=f.utils.getConfigOptions(b),i=(h(e),!1),j=!1;if(!e.isValid||!e.isModified)throw new Error("Observable is not validatable");i=e.isModified(),j=e.isValid();var k=function(){var a={},b=!g.decorateElementOnModified||i?!j:!1;return a[g.errorElementClass]=b,a};a.bindingHandlers.css.update(b,k,d),g.errorsAsTitle&&a.bindingHandlers.attr.update(b,function(){var a=!g.errorsAsTitleOnModified||i,c=f.utils.getOriginalElementTitle(b);return a&&!j?{title:e.error,"data-orig-title":c}:!a||j?{title:c,"data-orig-title":null}:void 0})}},a.bindingHandlers.validationOptions=function(){return{init:function(a,b){var c=h(b());
if(c){var d=j({},f.configuration);j(d,c),f.utils.setDomData(a,d)}}}}(),a.extenders.validation=function(a,b){return i(f.utils.isArray(b)?b:[b],function(b){f.addAnonymousRule(a,b)}),a},a.extenders.validatable=function(b,c){if(f.utils.isObject(c)||(c={enable:c}),"enable"in c||(c.enable=!0),c.enable&&!f.utils.isValidatable(b)){var d=f.configuration.validate||{},e={throttleEvaluation:c.throttle||d.throttle};b.error=a.observable(null),b.rules=a.observableArray(),b.isValidating=a.observable(!1),b.__valid__=a.observable(!0),b.isModified=a.observable(!1),b.isValid=a.computed(b.__valid__),b.setError=function(a){b.error(a),b.__valid__(!1)},b.clearError=function(){return b.error(null),b.__valid__(!0),b};var g=b.subscribe(function(){b.isModified(!0)}),h=a.computed(j({read:function(){return b(),b.rules(),f.validateObservable(b),!0}},e));j(h,e),b._disposeValidation=function(){b.isValid.dispose(),b.rules.removeAll(),b.isModified.getSubscriptionsCount()>0&&(b.isModified._subscriptions.change=[]),b.isValidating.getSubscriptionsCount()>0&&(b.isValidating._subscriptions.change=[]),b.__valid__.getSubscriptionsCount()>0&&(b.__valid__._subscriptions.change=[]),g.dispose(),h.dispose(),delete b.rules,delete b.error,delete b.isValid,delete b.isValidating,delete b.__valid__,delete b.isModified}}else c.enable===!1&&b._disposeValidation&&b._disposeValidation();return b},f.validateObservable=function(a){for(var b,c,g=0,h=a.rules(),i=h.length;i>g;g++)if(c=h[g],!c.condition||c.condition())if(b=c.rule?f.rules[c.rule]:c,b.async||c.async)e(a,b,c);else if(!d(a,b,c))return!1;return a.clearError(),!0},f.localize=function(a){var b;for(b in a)f.rules.hasOwnProperty(b)&&(f.rules[b].message=a[b])},a.applyBindingsWithValidation=function(b,c,d){var e,g,h=arguments.length;h>2?(e=c,g=d):2>h?e=document.body:arguments[1].nodeType?e=c:g=arguments[1],f.init(),g&&f.utils.setDomData(e,g),a.applyBindings(b,c)};var n=a.applyBindings;a.applyBindings=function(a,b){f.init(),n(a,b)},a.validatedObservable=function(b){if(!f.utils.isObject(b))return a.observable(b).extend({validatable:!0});var c=a.observable(b);return c.errors=f.group(b),c.isValid=a.observable(b.isValid()),c.errors.subscribe(function(a){c.isValid(0===a.length)}),c}});