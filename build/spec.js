(function(){describe("Form validations",function(){return beforeEach(function(){return donationsForm.hide()}),it("should return true for any basic input",function(){return expect(donationsForm.validField("fds")).toBeTruthy()}),it("should return true for a valid email",function(){return expect(donationsForm.validField("a@b.com","email")).toEqual(!0)}),it("should return false for a valid email",function(){return expect(donationsForm.validField("ab.com","email")).toEqual("Invalid email format.")}),it("should accept a valid cvc",function(){return expect(donationsForm.validField("432","cvc")).toEqual(!0)}),it("should reject an invalid cvc",function(){return expect(donationsForm.validField("432a","cvc")).toEqual("Invalid CVC.")}),it("should accept a valid credit card #",function(){return expect(donationsForm.validField("4242 4242 4242 4242","cc-num")).toEqual(!0)}),it("should reject an invalid credit card #",function(){return expect(donationsForm.validField("blahblah","cc-num")).toEqual("Invalid card format.")}),it("should accept a valid credit card #",function(){return expect(donationsForm.validField("4242 4242 4242 4242","cc-num")).toEqual(!0)}),it("should accept a valid date if given a year",function(){return spyOn($.fn,"val").and.returnValue("02"),expect(donationsForm.validField(""+((new Date).getFullYear()+1),"year")).toEqual(!0)}),it("should accept a valid date if given a month",function(){return spyOn($.fn,"val").and.returnValue(""+((new Date).getFullYear()+1)),expect(donationsForm.validField("02","month")).toEqual(!0)}),it("should reject a date from a previous year",function(){return spyOn($.fn,"val").and.returnValue("02"),expect(donationsForm.validField(""+((new Date).getFullYear()-1),"year")).toEqual("Expiry must be in the future.")}),it("should return a message if something else goes wrong for the expiry date",function(){return spyOn($.fn,"val").and.returnValue("02a"),expect(donationsForm.validField(""+((new Date).getFullYear()+1),"year")).toEqual("Invalid expiry date.")})})}).call(this),function(){describe("Parameter passing",function(){return beforeEach(function(){return donationsForm.hide()}),it("should fetch organization form script tag",function(){return expect($("#donation-script").data("org")).toEqual($("input[name=organization_slug]").val())})})}.call(this);