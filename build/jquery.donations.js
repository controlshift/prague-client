function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}var html;html='<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" data-bind="value: org">\n  <input type="hidden" name="customer.country" data-bind="value: countryCode">\n  <input type="hidden" name="customer.charges_attributes[0].currency" data-bind="value: selectedCurrency">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\' data-bind="html: currencySymbol">$</span><span class=\'donation-header-amt\' data-bind="text: displayAmount()">0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header" id="dnt-progress-amount" data-bind="css: { \'dph-active\' : visibleInputSet() >= 0}, click: function() { setInputSet(0); }">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo" data-bind="css: { \'dph-active\' : visibleInputSet() >= 1}, click: function() { setInputSet(1); }">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment" data-bind="css: { \'dph-active\' : visibleInputSet() >= 2}, click: function() { setInputSet(2); }">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first" data-bind="visible: visibleInputSet() === 0">\n    <div class="donations-currency-select-row" data-bind="visible: currenciesEnabled()">\n      Currency: \n      <select class="donations-currency-select" data-bind="options: currenciesArray, value: selectedCurrency"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first" data-bind="validationMessage: displayAmount"></span>\n    </span>\n    <div class="donation-button-set" data-bind="foreach: amounts">\n      <div class="donation-btn donation-btn-sm" data-bind="css: { \'donation-btn-active\' : $parent.selectedBtn() === $index() }, click: function() { $parent.setActiveAmount($index()); }">\n        <span class=\'donation-currency\' data-bind="html: $parent.currencySymbol">$</span><span class=\'donation-amt\' data-bind="text: $data"></span>\n      </div>\n      <!-- ko if: $index() === ($parent.amountsLength() - 1) -->\n        <input class="donation-btn donation-btn-lg" data-bind="value: $parent.inputtedAmount, event: { change: $parent.clearSelectedButton } " type="text" placeholder="Other amount">\n      <!-- /ko -->\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn" data-bind="click: function()\n        { \n          if(inputSet1.isValid()) { incrementInputSet(); } \n          else { inputSet1.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 1">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label" data-bind="validationMessage: firstName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name" data-bind="value: firstName">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label" data-bind="validationMessage: lastName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name" data-bind="value: lastName">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label" data-bind="validationMessage: email">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email" data-bind="value: email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn" data-bind="click: function()\n        { \n          if(inputSet2.isValid()) { incrementInputSet(); } \n          else { inputSet2.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 2">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label" data-bind="validationMessage: cardNumber" data-bind="validationMessage: cardDate">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number" data-bind="value: cardNumber, style: { backgroundImage: ccBackground() } ">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label" data-bind="validationMessage: cardDate">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month" data-bind="value: cardMonth, options: ccMonths">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year" data-bind="value: cardYear, options: ccYears">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label" data-bind="validationMessage: cvc">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc" data-bind="value: cvc">\n    </div>\n    <div class="donation-payment-errors" data-bind="visible: false">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit" data-bind="click: function()\n        { \n          if(inputSet3.isValid()) { submitForm(); } \n          else { inputSet3.errors.showAllMessages();}\n        }">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>';var DonationsFormModel;DonationsFormModel=function(){function a(a,b){var c,d,e;e=this,$=a,c=$.extend({},{imgpath:"https://d2yuwrm8xcn0u8.cloudfront.net",metaviewporttag:!0},b,e.parseQueryString(document.URL.split("?")[1])),ko.validation.configure({insertMessages:!1}),ko.validation.rules.ccDate={validator:function(a){return $.payment.validateCardExpiry(a.month,a.year)},message:"Invalid date"},ko.validation.rules.ccNum={validator:function(a){return $.payment.validateCardNumber(a)},message:"Invalid credit card number"},ko.validation.rules.cvc={validator:function(a){return $.payment.validateCardCVC(a)},message:"Invalid CVC number"},ko.validation.registerExtenders(),e.org=ko.observable(c.org),e.countryCode=ko.observable("US"),e.imgPath=ko.observable(c.imgpath),e.initializeIcons(e.imgPath()),e.seedAmount=c.seedamount||100,e.seedValues=null!=c.seedvalues?c.seedvalues.split(","):[15,35,50,100,250,500,1e3],e.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAD",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},e.currenciesArray=ko.observableArray(["USD","GBP","CAD","AUD","EUR","NZD","SEK","NOK","DKK"]),e.currenciesEnabled=ko.observable("none"!==c.currencyconversion),e.seededCurrency=c.seedcurrency||"USD",e.formCurrency=c.formcurrency||e.seededCurrency,d=function(){var a;return"none"!==(a=c.currencyconversion)&&"choose"!==a?e.currencies[c.country]:e.formCurrency},e.selectedCurrency=ko.observable(d()),e.currencySymbol=ko.computed(function(){var a;return a={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAD:"C$"},a[e.selectedCurrency()]||e.selectedCurrency()},this),e.selectedBtn=ko.observable(-1),e.selectedAmount=ko.observable("0"),e.inputtedAmount=ko.observable(null),e.displayAmount=ko.computed(function(){return e.inputtedAmount()||e.selectedAmount()},this).extend({required:{message:"Please select an amount"},min:1,digit:!0}),e.setActiveAmount=function(a){return a>-1?(e.inputtedAmount(null),e.selectedAmount(e.amounts()[a]),e.selectedBtn(a)):void 0},e.clearSelectedButton=function(){return e.selectedAmount(0),e.selectedBtn(-1)},e.amounts=ko.computed(function(){var a,b,d,f,g,h,i,j,k;for(a=[],k=e.seedValues,g=i=0,j=k.length;j>i;g=++i)h=k[g],b=parseInt(h)/100*parseInt(e.seedAmount),7>g&&(e.currenciesEnabled()?(f=c[e.selectedCurrency()]||1,d=c[e.seededCurrency]||1,a.push(e.round(b*f/d))):a.push(e.round(b)));return a},this),e.amountsLength=ko.computed(function(){return e.amounts().length},this),e.visibleInputSet=ko.observable(0),e.incrementInputSet=function(){return e.visibleInputSet(e.visibleInputSet()+1)},e.setInputSet=function(a){return e.visibleInputSet(a)},e.firstName=ko.observable().extend({required:{message:"Can't be blank"}}),e.lastName=ko.observable().extend({required:{message:"Can't be blank"}}),e.email=ko.observable().extend({required:{message:"Can't be blank"},email:{message:"Invalid email"}}),e.cardNumber=ko.observable().extend({required:{message:"Can't be blank"},ccNum:!0}),e.cardMonth=ko.observable(),e.ccMonths=["01","02","03","04","05","06","07","08","09","10","11","12"],e.cardYear=ko.observable(""+((new Date).getFullYear()+1)),e.ccYears=function(){var a,b,c,d,e;for(a=[],b=(new Date).getFullYear(),c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push(""+c);return a}(),e.cardDate=ko.computed(function(){return{month:e.cardMonth(),year:e.cardYear()}},this).extend({ccDate:!0,observable:!0}),e.cvc=ko.observable().extend({required:{message:"Can't be blank"},digit:!0,cvc:!0}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),e.ccBackground=ko.computed(function(){var a;return a=$.payment.cardType(e.cardNumber()),"amex"===a||"mastercard"===a||"visa"===a||"discover"===a||"dinersclub"===a?"url("+e.imgPath()+"/icon-cc-"+a+".png)":"url("+e.imgPath()+"/icon-cc-none.png)"},this),e.inputSet1=ko.validatedObservable({amount:e.displayAmount}),e.inputSet2=ko.validatedObservable({firstName:e.firstName,lastName:e.lastName,email:e.email}),e.inputSet3=ko.validatedObservable({cardNumber:e.cardNumber,cardDate:e.cardDate,cvc:e.cvc}),e.connectToServer(c,e)}return a.prototype.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},a.prototype.initializeIcons=function(a){var b,c,d,e;b={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"},e=[];for(c in b)d=b[c],e.push($(c).css("background-image","url('"+a+"/"+d+"')"));return e},a.prototype.round=function(a){var b;return b=Math.round(parseFloat(a.toPrecision(2))),0===b?1:b},a.prototype.connectToServer=function(a,b){var c,d,e;return c=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(c.stripepublickey),$.fn.serializeObject=function(){var a,c;return c=form2js(this.attr("id"),".",!0),c["cc-num"]="",c.month="",c.year="",c.cvc="",a=b.displayAmount(),c.customer.charges_attributes[0].amount=a.replace(b.currencySymbol(),"")+"00",c},e=function(a){var b,d;return d=new Pusher(c.pusherpublickey),b=d.subscribe(a),b.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=c.redirectto&&window.location.replace(c.redirectto),$("#donation-form").hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},d=function(a,b){var d,f,g;return d=$("#donation-form"),b.error?(gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(b.error.message),d.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide()):(g=b.id,d.append($('<input type="hidden" name="card_token" />').val(g)),f=$.ajax({url:""+c.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),{config:c})}),f.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),e(a.pusher_channel_token)}),f.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1)},b.submitForm=function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$("#donation-form"),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,d),!1}},a}(),function(){function a(a,b){for(var c in b)a[c]=b[c];return a}window.jasmine=jasmineRequire.core(jasmineRequire),jasmineRequire.html(jasmine);var b=jasmine.getEnv(),c={describe:function(a,c){return b.describe(a,c)},xdescribe:function(a,c){return b.xdescribe(a,c)},it:function(a,c){return b.it(a,c)},xit:function(a,c){return b.xit(a,c)},beforeEach:function(a){return b.beforeEach(a)},afterEach:function(a){return b.afterEach(a)},expect:function(a){return b.expect(a)},pending:function(){return b.pending()},spyOn:function(a,c){return b.spyOn(a,c)},jsApiReporter:new jasmine.JsApiReporter({timer:new jasmine.Timer})};"undefined"==typeof window&&"object"==typeof exports?a(exports,c):a(window,c),jasmine.addCustomEqualityTester=function(a){b.addCustomEqualityTester(a)},jasmine.addMatchers=function(a){return b.addMatchers(a)},jasmine.clock=function(){return b.clock};var d=new jasmine.QueryString({getWindowLocation:function(){return window.location}}),e=d.getParam("catch");b.catchExceptions("undefined"==typeof e?!0:e);var f=new jasmine.HtmlReporter({env:b,onRaiseExceptionsClick:function(){d.setParam("catch",!b.catchingExceptions())},getContainer:function(){return document.body},createElement:function(){return document.createElement.apply(document,arguments)},createTextNode:function(){return document.createTextNode.apply(document,arguments)},timer:new jasmine.Timer});b.addReporter(c.jsApiReporter),b.addReporter(f);var g=new jasmine.HtmlSpecFilter({filterString:function(){return d.getParam("spec")}});b.specFilter=function(a){return g.matches(a.getFullName())},window.setTimeout=window.setTimeout,window.setInterval=window.setInterval,window.clearTimeout=window.clearTimeout,window.clearInterval=window.clearInterval;var h=window.onload;window.onload=function(){h&&h(),f.initialize(),b.execute()}}(),getJasmineRequireObj().console=function(a,b){b.ConsoleReporter=a.ConsoleReporter()},getJasmineRequireObj().ConsoleReporter=function(){function a(a){function c(){l("\n")}function d(a,b){return m?q[a]+b+q.none:b}function e(a,b){return 1==b?a:a+"s"}function f(a,b){for(var c=[],d=0;b>d;d++)c.push(a);return c}function g(a,b){for(var c=(a||"").split("\n"),d=[],e=0;e<c.length;e++)d.push(f(" ",b).join("")+c[e]);return d.join("\n")}function h(a){c(),l(a.fullName);for(var b=0;b<a.failedExpectations.length;b++){var d=a.failedExpectations[b];c(),l(g(d.stack,2))}c()}var i,j,k,l=a.print,m=a.showColors||!1,n=a.onComplete||function(){},o=a.timer||b,p=[],q={green:"[32m",red:"[31m",yellow:"[33m",none:"[0m"};return this.jasmineStarted=function(){i=0,j=0,k=0,l("Started"),c(),o.start()},this.jasmineDone=function(){c();for(var a=0;a<p.length;a++)h(p[a]);c();var b=i+" "+e("spec",i)+", "+j+" "+e("failure",j);k&&(b+=", "+k+" pending "+e("spec",k)),l(b),c();var d=o.elapsed()/1e3;l("Finished in "+d+" "+e("second",d)),c(),n(0===j)},this.specDone=function(a){return i++,"pending"==a.status?(k++,void l(d("yellow","*"))):"passed"==a.status?void l(d("green",".")):void("failed"==a.status&&(j++,p.push(a),l(d("red","F"))))},this}var b={start:function(){},elapsed:function(){return 0}};return a},jasmineRequire.html=function(a){a.ResultsNode=jasmineRequire.ResultsNode(),a.HtmlReporter=jasmineRequire.HtmlReporter(a),a.QueryString=jasmineRequire.QueryString(),a.HtmlSpecFilter=jasmineRequire.HtmlSpecFilter()},jasmineRequire.HtmlReporter=function(a){function b(b){function d(a){return l().querySelector(a)}function e(a,b){for(var c=m(a),d=2;d<arguments.length;d++){var e=arguments[d];"string"==typeof e?c.appendChild(n(e)):e&&c.appendChild(e)}for(var f in b)"className"==f?c[f]=b[f]:c.setAttribute(f,b[f]);return c}function f(a,b){var c=1==b?a:a+"s";return""+b+" "+c}function g(a){return"?spec="+encodeURIComponent(a.fullName)}function h(a){i.setAttribute("class","html-reporter "+a)}var i,j,k=b.env||{},l=b.getContainer,m=b.createElement,n=b.createTextNode,o=b.onRaiseExceptionsClick||function(){},p=b.timer||c,q=0,r=0,s=0;this.initialize=function(){i=e("div",{className:"html-reporter"},e("div",{className:"banner"},e("span",{className:"title"},"Jasmine"),e("span",{className:"version"},a.version)),e("ul",{className:"symbol-summary"}),e("div",{className:"alert"}),e("div",{className:"results"},e("div",{className:"failures"}))),l().appendChild(i),j=d(".symbol-summary")};var t;this.jasmineStarted=function(a){t=a.totalSpecsDefined||0,p.start()};var u=e("div",{className:"summary"}),v=new a.ResultsNode({},"",null),w=v;this.suiteStarted=function(a){w.addChild(a,"suite"),w=w.last()},this.suiteDone=function(){w!=v&&(w=w.parent)},this.specStarted=function(a){w.addChild(a,"spec")};var x=[];return this.specDone=function(a){if("disabled"!=a.status&&q++,j.appendChild(e("li",{className:a.status,id:"spec_"+a.id,title:a.fullName})),"failed"==a.status){r++;for(var b=e("div",{className:"spec-detail failed"},e("div",{className:"description"},e("a",{title:a.fullName,href:g(a)},a.fullName)),e("div",{className:"messages"})),c=b.childNodes[1],d=0;d<a.failedExpectations.length;d++){var f=a.failedExpectations[d];c.appendChild(e("div",{className:"result-message"},f.message)),c.appendChild(e("div",{className:"stack-trace"},f.stack))}x.push(b)}"pending"==a.status&&s++},this.jasmineDone=function(){function a(b,c){for(var d,f=0;f<b.children.length;f++){var h=b.children[f];if("suite"==h.type){var i=e("ul",{className:"suite",id:"suite-"+h.result.id},e("li",{className:"suite-detail"},e("a",{href:g(h.result)},h.result.description)));a(h,i),c.appendChild(i)}"spec"==h.type&&("specs"!=c.getAttribute("class")&&(d=e("ul",{className:"specs"}),c.appendChild(d)),d.appendChild(e("li",{className:h.result.status,id:"spec-"+h.result.id},e("a",{href:g(h.result)},h.result.description))))}}var b=d(".banner");b.appendChild(e("span",{className:"duration"},"finished in "+p.elapsed()/1e3+"s"));var c=d(".alert");c.appendChild(e("span",{className:"exceptions"},e("label",{className:"label","for":"raise-exceptions"},"raise exceptions"),e("input",{className:"raise",id:"raise-exceptions",type:"checkbox"})));var i=d("input");if(i.checked=!k.catchingExceptions(),i.onclick=o,t>q){var j="Ran "+q+" of "+t+" specs - run all";c.appendChild(e("span",{className:"bar skipped"},e("a",{href:"?",title:"Run all specs"},j)))}var l=""+f("spec",q)+", "+f("failure",r);s&&(l+=", "+f("pending spec",s));var m="bar "+(r>0?"failed":"passed");c.appendChild(e("span",{className:m},l));var n=d(".results");if(n.appendChild(u),a(v,u),x.length){c.appendChild(e("span",{className:"menu bar spec-list"},e("span",{},"Spec List | "),e("a",{className:"failures-menu",href:"#"},"Failures"))),c.appendChild(e("span",{className:"menu bar failure-list"},e("a",{className:"spec-list-menu",href:"#"},"Spec List"),e("span",{}," | Failures "))),d(".failures-menu").onclick=function(){h("failure-list")},d(".spec-list-menu").onclick=function(){h("spec-list")},h("failure-list");for(var w=d(".failures"),y=0;y<x.length;y++)w.appendChild(x[y])}},this}var c={start:function(){},elapsed:function(){return 0}};return b},jasmineRequire.HtmlSpecFilter=function(){function a(a){var b=a&&a.filterString()&&a.filterString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=new RegExp(b);this.matches=function(a){return c.test(a)}}return a},jasmineRequire.ResultsNode=function(){function a(b,c,d){this.result=b,this.type=c,this.parent=d,this.children=[],this.addChild=function(b,c){this.children.push(new a(b,c,this))},this.last=function(){return this.children[this.children.length-1]}}return a},jasmineRequire.QueryString=function(){function a(a){function b(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return"?"+b.join("&")}function c(){var b=a.getWindowLocation().search.substring(1),c=[],d={};if(b.length>0){c=b.split("&");for(var e=0;e<c.length;e++){var f=c[e].split("="),g=decodeURIComponent(f[1]);("true"===g||"false"===g)&&(g=JSON.parse(g)),d[decodeURIComponent(f[0])]=g}}return d}return this.setParam=function(d,e){var f=c();f[d]=e,a.getWindowLocation().search=b(f)},this.getParam=function(a){return c()[a]},this}return a},+function(a,b,c){"use strict";b.spiedEventsKey=function(a,b){return[c(a).selector,b].toString()},b.getFixtures=function(){return b.currentFixtures_=b.currentFixtures_||new b.Fixtures},b.getStyleFixtures=function(){return b.currentStyleFixtures_=b.currentStyleFixtures_||new b.StyleFixtures},b.Fixtures=function(){this.containerId="jasmine-fixtures",this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures"},b.Fixtures.prototype.set=function(a){return this.cleanUp(),this.createContainer_(a)},b.Fixtures.prototype.appendSet=function(a){this.addToContainer_(a)},b.Fixtures.prototype.preload=function(){this.read.apply(this,arguments)},b.Fixtures.prototype.load=function(){this.cleanUp(),this.createContainer_(this.read.apply(this,arguments))},b.Fixtures.prototype.appendLoad=function(){this.addToContainer_(this.read.apply(this,arguments))},b.Fixtures.prototype.read=function(){for(var a=[],b=arguments,c=b.length,d=0;c>d;d++)a.push(this.getFixtureHtml_(b[d]));return a.join("")},b.Fixtures.prototype.clearCache=function(){this.fixturesCache_={}},b.Fixtures.prototype.cleanUp=function(){c("#"+this.containerId).remove()},b.Fixtures.prototype.sandbox=function(a){var b=a||{};return c('<div id="sandbox" />').attr(b)},b.Fixtures.prototype.createContainer_=function(a){var b=c("<div>").attr("id",this.containerId).html(a);return c(document.body).append(b),b},b.Fixtures.prototype.addToContainer_=function(a){var b=c(document.body).find("#"+this.containerId).append(a);b.length||this.createContainer_(a)},b.Fixtures.prototype.getFixtureHtml_=function(a){return"undefined"==typeof this.fixturesCache_[a]&&this.loadFixtureIntoCache_(a),this.fixturesCache_[a]},b.Fixtures.prototype.loadFixtureIntoCache_=function(a){var b=this,d=this.makeFixtureUrl_(a),e="",f=(c.ajax({async:!1,cache:!1,url:d,success:function(a,b,c){e=c.responseText}}).fail(function(){throw new Error("Fixture could not be loaded: "+d+" (status: "+status+", message: "+errorThrown.message+")")}),c(c.parseHTML(e,!0)).find("script[src]")||[]);f.each(function(){c.ajax({async:!1,cache:!1,dataType:"script",url:c(this).attr("src"),success:function(a,b,c){e+="<script>"+c.responseText+"</script>"},error:function(a,b,c){throw new Error("Script could not be loaded: "+scriptSrc+" (status: "+b+", message: "+c.message+")")}})}),b.fixturesCache_[a]=e},b.Fixtures.prototype.makeFixtureUrl_=function(a){return this.fixturesPath.match("/$")?this.fixturesPath+a:this.fixturesPath+"/"+a},b.Fixtures.prototype.proxyCallTo_=function(a,b){return this[a].apply(this,b)},b.StyleFixtures=function(){this.fixturesCache_={},this.fixturesNodes_=[],this.fixturesPath="spec/javascripts/fixtures"},b.StyleFixtures.prototype.set=function(a){this.cleanUp(),this.createStyle_(a)},b.StyleFixtures.prototype.appendSet=function(a){this.createStyle_(a)},b.StyleFixtures.prototype.preload=function(){this.read_.apply(this,arguments)},b.StyleFixtures.prototype.load=function(){this.cleanUp(),this.createStyle_(this.read_.apply(this,arguments))},b.StyleFixtures.prototype.appendLoad=function(){this.createStyle_(this.read_.apply(this,arguments))},b.StyleFixtures.prototype.cleanUp=function(){for(;this.fixturesNodes_.length;)this.fixturesNodes_.pop().remove()},b.StyleFixtures.prototype.createStyle_=function(a){var b=c("<div></div>").html(a).text(),d=c("<style>"+b+"</style>");this.fixturesNodes_.push(d),c("head").append(d)},b.StyleFixtures.prototype.clearCache=b.Fixtures.prototype.clearCache,b.StyleFixtures.prototype.read_=b.Fixtures.prototype.read,b.StyleFixtures.prototype.getFixtureHtml_=b.Fixtures.prototype.getFixtureHtml_,b.StyleFixtures.prototype.loadFixtureIntoCache_=b.Fixtures.prototype.loadFixtureIntoCache_,b.StyleFixtures.prototype.makeFixtureUrl_=b.Fixtures.prototype.makeFixtureUrl_,b.StyleFixtures.prototype.proxyCallTo_=b.Fixtures.prototype.proxyCallTo_,b.getJSONFixtures=function(){return b.currentJSONFixtures_=b.currentJSONFixtures_||new b.JSONFixtures},b.JSONFixtures=function(){this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures/json"},b.JSONFixtures.prototype.load=function(){return this.read.apply(this,arguments),this.fixturesCache_},b.JSONFixtures.prototype.read=function(){for(var a=arguments,b=a.length,c=0;b>c;c++)this.getFixtureData_(a[c]);return this.fixturesCache_},b.JSONFixtures.prototype.clearCache=function(){this.fixturesCache_={}},b.JSONFixtures.prototype.getFixtureData_=function(a){return this.fixturesCache_[a]||this.loadFixtureIntoCache_(a),this.fixturesCache_[a]},b.JSONFixtures.prototype.loadFixtureIntoCache_=function(a){var b=this,d=this.fixturesPath.match("/$")?this.fixturesPath+a:this.fixturesPath+"/"+a;c.ajax({async:!1,cache:!1,dataType:"json",url:d,success:function(c){b.fixturesCache_[a]=c},error:function(a,b,c){throw new Error("JSONFixture could not be loaded: "+d+" (status: "+b+", message: "+c.message+")")}})},b.JSONFixtures.prototype.proxyCallTo_=function(a,b){return this[a].apply(this,b)},b.jQuery=function(){},b.jQuery.browserTagCaseIndependentHtml=function(a){return c("<div/>").append(a).html()},b.jQuery.elementToString=function(a){return c(a).map(function(){return this.outerHTML}).toArray().join(", ")};var d={spiedEvents:{},handlers:[]};b.jQuery.events={spyOn:function(a,e){var f=function(){d.spiedEvents[b.spiedEventsKey(a,e)]=b.util.argsToArray(arguments)};return c(a).on(e,f),d.handlers.push(f),{selector:a,eventName:e,handler:f,reset:function(){delete d.spiedEvents[b.spiedEventsKey(a,e)]}}},args:function(a,c){var e=d.spiedEvents[b.spiedEventsKey(a,c)];if(!e)throw"There is no spy for "+c+" on "+a.toString()+". Make sure to create a spy using spyOnEvent.";return e},wasTriggered:function(a,c){return!!d.spiedEvents[b.spiedEventsKey(a,c)]},wasTriggeredWith:function(a,c,d,e,f){var g=b.jQuery.events.args(a,c).slice(1);return"[object Array]"!==Object.prototype.toString.call(d)&&(g=g[0]),e.equals(d,g,f)},wasPrevented:function(a,c){var e=d.spiedEvents[b.spiedEventsKey(a,c)],f=e?e[0]:void 0;return f&&f.isDefaultPrevented()},wasStopped:function(a,c){var e=d.spiedEvents[b.spiedEventsKey(a,c)],f=e?e[0]:void 0;return f&&f.isPropagationStopped()},cleanUp:function(){d.spiedEvents={},d.handlers=[]}};var e=function(a,b){return void 0===b?void 0!==a:a===b};beforeEach(function(){b.addMatchers({toHaveClass:function(){return{compare:function(a,b){return{pass:c(a).hasClass(b)}}}},toHaveCss:function(){return{compare:function(a,b){for(var d in b){var e=b[d];if(("auto"!==e||"auto"!==c(a).get(0).style[d])&&c(a).css(d)!==e)return{pass:!1}}return{pass:!0}}}},toBeVisible:function(){return{compare:function(a){return{pass:c(a).is(":visible")}}}},toBeHidden:function(){return{compare:function(a){return{pass:c(a).is(":hidden")}}}},toBeSelected:function(){return{compare:function(a){return{pass:c(a).is(":selected")}}}},toBeChecked:function(){return{compare:function(a){return{pass:c(a).is(":checked")}}}},toBeEmpty:function(){return{compare:function(a){return{pass:c(a).is(":empty")}}}},toBeInDOM:function(){return{compare:function(a){return{pass:c.contains(document.documentElement,c(a)[0])}}}},toExist:function(){return{compare:function(a){return{pass:c(a).length}}}},toHaveLength:function(){return{compare:function(a,b){return{pass:c(a).length===b}}}},toHaveAttr:function(){return{compare:function(a,b,d){return{pass:e(c(a).attr(b),d)}}}},toHaveProp:function(){return{compare:function(a,b,d){return{pass:e(c(a).prop(b),d)}}}},toHaveId:function(){return{compare:function(a,b){return{pass:c(a).attr("id")==b}}}},toHaveHtml:function(){return{compare:function(a,d){return{pass:c(a).html()==b.jQuery.browserTagCaseIndependentHtml(d)}}}},toContainHtml:function(){return{compare:function(a,d){var e=c(a).html(),f=b.jQuery.browserTagCaseIndependentHtml(d);return{pass:e.indexOf(f)>=0}}}},toHaveText:function(){return{compare:function(a,b){var d=c.trim(c(a).text());return b&&c.isFunction(b.test)?{pass:b.test(d)}:{pass:d==b}}}},toContainText:function(){return{compare:function(a,b){var d=c.trim(c(a).text());return b&&c.isFunction(b.test)?{pass:b.test(d)}:{pass:-1!=d.indexOf(b)}}}},toHaveValue:function(){return{compare:function(a,b){return{pass:c(a).val()===b}}}},toHaveData:function(){return{compare:function(a,b,d){return{pass:e(c(a).data(b),d)}}}},toContainElement:function(){return{compare:function(b,d){return a.debug,{pass:c(b).find(d).length}}}},toBeMatchedBy:function(){return{compare:function(a,b){return{pass:c(a).filter(b).length}}}},toBeDisabled:function(){return{compare:function(a){return{pass:c(a).is(":disabled")}}}},toBeFocused:function(){return{compare:function(a){return{pass:c(a)[0]===c(a)[0].ownerDocument.activeElement}}}},toHandle:function(){return{compare:function(a,b){var d=c._data(c(a).get(0),"events");if(!d||!b||"string"!=typeof b)return{pass:!1};var e=b.split("."),f=e.shift(),g=e.slice(0).sort(),h=new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+"(\\.|$)");if(!d[f]||!e.length)return{pass:d[f]&&d[f].length>0};for(var i=0;i<d[f].length;i++){var j=d[f][i].namespace;if(h.test(j))return{pass:!0}}return{pass:!1}}}},toHandleWith:function(){return{compare:function(a,b,d){for(var e=b.split(".")[0],f=c._data(c(a).get(0),"events")[e],g=0;g<f.length;g++)if(f[g].handler==d)return{pass:!0};return{pass:!1}}}},toHaveBeenTriggeredOn:function(){return{compare:function(a,d){var e={pass:b.jQuery.events.wasTriggered(d,a)};return e.message=e.pass?"Expected event "+c(a)+" not to have been triggered on "+d:"Expected event "+c(a)+" to have been triggered on "+d,e}}},toHaveBeenTriggered:function(){return{compare:function(a){var c=a.eventName,d=a.selector,e={pass:b.jQuery.events.wasTriggered(d,c)};return e.message=e.pass?"Expected event "+c+" not to have been triggered on "+d:"Expected event "+c+" to have been triggered on "+d,e}}},toHaveBeenTriggeredOnAndWith:function(a,c){return{compare:function(d,e,f){var g=b.jQuery.events.wasTriggered(e,d),h={pass:g&&b.jQuery.events.wasTriggeredWith(e,d,f,a,c)};if(g){var i=b.jQuery.events.args(e,d,f)[1];
h.message=h.pass?"Expected event "+d+" not to have been triggered with "+b.pp(f)+" but it was triggered with "+b.pp(i):"Expected event "+d+" to have been triggered with "+b.pp(f)+"  but it was triggered with "+b.pp(i)}else h.message=h.pass?"Expected event "+d+" not to have been triggered on "+e:"Expected event "+d+" to have been triggered on "+e;return h}}},toHaveBeenPreventedOn:function(){return{compare:function(a,c){var d={pass:b.jQuery.events.wasPrevented(c,a)};return d.message=d.pass?"Expected event "+a+" not to have been prevented on "+c:"Expected event "+a+" to have been prevented on "+c,d}}},toHaveBeenPrevented:function(){return{compare:function(a){var c=a.eventName,d=a.selector,e={pass:b.jQuery.events.wasPrevented(d,c)};return e.message=e.pass?"Expected event "+c+" not to have been prevented on "+d:"Expected event "+c+" to have been prevented on "+d,e}}},toHaveBeenStoppedOn:function(){return{compare:function(a,c){var d={pass:b.jQuery.events.wasStopped(c,a)};return d.message=d.pass?"Expected event "+a+" not to have been stopped on "+c:"Expected event "+a+" to have been stopped on "+c,d}}},toHaveBeenStopped:function(){return{compare:function(a){var c=a.eventName,d=a.selector,e={pass:b.jQuery.events.wasStopped(d,c)};return e.message=e.pass?"Expected event "+c+" not to have been stopped on "+d:"Expected event "+c+" to have been stopped on "+d,e}}}}),b.getEnv().addCustomEqualityTester(function(a,d){if(a&&d){if(a instanceof c||b.isDomNode(a)){var e=c(a);return d instanceof c?e.length==d.length&&a.is(d):e.is(d)}if(d instanceof c||b.isDomNode(d)){var f=c(d);return a instanceof jQuery?a.length==f.length&&f.is(a):c(d).is(a)}}}),b.getEnv().addCustomEqualityTester(function(a,b){return a instanceof jQuery&&b instanceof jQuery&&a.size()==b.size()?a.is(b):void 0})}),afterEach(function(){b.getFixtures().cleanUp(),b.getStyleFixtures().cleanUp(),b.jQuery.events.cleanUp()}),a.readFixtures=function(){return b.getFixtures().proxyCallTo_("read",arguments)},a.preloadFixtures=function(){b.getFixtures().proxyCallTo_("preload",arguments)},a.loadFixtures=function(){b.getFixtures().proxyCallTo_("load",arguments)},a.appendLoadFixtures=function(){b.getFixtures().proxyCallTo_("appendLoad",arguments)},a.setFixtures=function(){return b.getFixtures().proxyCallTo_("set",arguments)},a.appendSetFixtures=function(){b.getFixtures().proxyCallTo_("appendSet",arguments)},a.sandbox=function(a){return b.getFixtures().sandbox(a)},a.spyOnEvent=function(a,c){return b.jQuery.events.spyOn(a,c)},a.preloadStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("preload",arguments)},a.loadStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("load",arguments)},a.appendLoadStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("appendLoad",arguments)},a.setStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("set",arguments)},a.appendSetStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("appendSet",arguments)},a.loadJSONFixtures=function(){return b.getJSONFixtures().proxyCallTo_("load",arguments)},a.getJSONFixture=function(a){return b.getJSONFixtures().proxyCallTo_("read",arguments)[a]}}(window,window.jasmine,window.jQuery),getJasmineRequireObj().core=function(a){var b={};return a.base(b),b.util=a.util(),b.Any=a.Any(),b.CallTracker=a.CallTracker(),b.Clock=a.Clock(),b.DelayedFunctionScheduler=a.DelayedFunctionScheduler(),b.Env=a.Env(b),b.ExceptionFormatter=a.ExceptionFormatter(),b.Expectation=a.Expectation(),b.buildExpectationResult=a.buildExpectationResult(),b.JsApiReporter=a.JsApiReporter(),b.matchersUtil=a.matchersUtil(b),b.ObjectContaining=a.ObjectContaining(b),b.pp=a.pp(b),b.QueueRunner=a.QueueRunner(),b.ReportDispatcher=a.ReportDispatcher(),b.Spec=a.Spec(b),b.SpyStrategy=a.SpyStrategy(),b.Suite=a.Suite(),b.Timer=a.Timer(),b.version=a.version(),b.matchers=a.requireMatchers(a,b),b},getJasmineRequireObj().requireMatchers=function(a,b){for(var c=["toBe","toBeCloseTo","toBeDefined","toBeFalsy","toBeGreaterThan","toBeLessThan","toBeNaN","toBeNull","toBeTruthy","toBeUndefined","toContain","toEqual","toHaveBeenCalled","toHaveBeenCalledWith","toMatch","toThrow","toThrowError"],d={},e=0;e<c.length;e++){var f=c[e];d[f]=a[f](b)}return d},getJasmineRequireObj().base=function(a){a.unimplementedMethod_=function(){throw new Error("unimplemented method")},a.MAX_PRETTY_PRINT_DEPTH=40,a.DEFAULT_TIMEOUT_INTERVAL=5e3,a.getGlobal=function(){var a=eval.call(null,"this");return function(){return a}}(),a.getEnv=function(b){var c=a.currentEnv_=a.currentEnv_||new a.Env(b);return c},a.isArray_=function(b){return a.isA_("Array",b)},a.isString_=function(b){return a.isA_("String",b)},a.isNumber_=function(b){return a.isA_("Number",b)},a.isA_=function(a,b){return Object.prototype.toString.apply(b)==="[object "+a+"]"},a.isDomNode=function(a){return a.nodeType>0},a.any=function(b){return new a.Any(b)},a.objectContaining=function(b){return new a.ObjectContaining(b)},a.createSpy=function(b,c){var d=new a.SpyStrategy({name:b,fn:c,getSpy:function(){return f}}),e=new a.CallTracker,f=function(){return e.track({object:this,args:Array.prototype.slice.apply(arguments)}),d.exec.apply(this,arguments)};for(var g in c){if("and"===g||"calls"===g)throw new Error("Jasmine spies would overwrite the 'and' and 'calls' properties on the object being spied upon");f[g]=c[g]}return f.and=d,f.calls=e,f},a.isSpy=function(b){return b?b.and instanceof a.SpyStrategy&&b.calls instanceof a.CallTracker:!1},a.createSpyObj=function(b,c){if(!a.isArray_(c)||0===c.length)throw"createSpyObj requires a non-empty array of method names to create spies for";for(var d={},e=0;e<c.length;e++)d[c[e]]=a.createSpy(b+"."+c[e]);return d}},getJasmineRequireObj().util=function(){var a={};return a.inherit=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},a.htmlEscape=function(a){return a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},a.argsToArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},a.isUndefined=function(a){return void 0===a},a},getJasmineRequireObj().Spec=function(a){function b(a){this.expectationFactory=a.expectationFactory,this.resultCallback=a.resultCallback||function(){},this.id=a.id,this.description=a.description||"",this.fn=a.fn,this.beforeFns=a.beforeFns||function(){return[]},this.afterFns=a.afterFns||function(){return[]},this.onStart=a.onStart||function(){},this.exceptionFormatter=a.exceptionFormatter||function(){},this.getSpecName=a.getSpecName||function(){return""},this.expectationResultFactory=a.expectationResultFactory||function(){},this.queueRunnerFactory=a.queueRunnerFactory||function(){},this.catchingExceptions=a.catchingExceptions||function(){return!0},this.timer=a.timer||{setTimeout:setTimeout,clearTimeout:clearTimeout},this.fn||this.pend(),this.result={id:this.id,description:this.description,fullName:this.getFullName(),failedExpectations:[]}}return b.prototype.addExpectationResult=function(a,b){a||this.result.failedExpectations.push(this.expectationResultFactory(b))},b.prototype.expect=function(a){return this.expectationFactory(a,this)},b.prototype.execute=function(c){function d(b){return function(c){h=Function.prototype.apply.apply(i.timer.setTimeout,[a.getGlobal(),[function(){f(new Error("Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL.")),c()},a.DEFAULT_TIMEOUT_INTERVAL]]);var d=function(){e(),c()};b.call(this,d)}}function e(){Function.prototype.apply.apply(i.timer.clearTimeout,[a.getGlobal(),[h]]),h=void 0}function f(a){return e(),b.isPendingSpecException(a)?void i.pend():void i.addExpectationResult(!1,{matcherName:"",passed:!1,expected:"",actual:"",error:a})}function g(){i.result.status=i.status(),i.resultCallback(i.result),c&&c()}var h,i=this;if(this.onStart(this),this.markedPending||this.disabled)return void g();for(var j=this.beforeFns().concat(this.fn).concat(this.afterFns()),k=[],l=0;l<j.length;l++){var m=j[l];k.push(m.length>0?d(m):m)}this.queueRunnerFactory({fns:k,onException:f,onComplete:g})},b.prototype.disable=function(){this.disabled=!0},b.prototype.pend=function(){this.markedPending=!0},b.prototype.status=function(){return this.disabled?"disabled":this.markedPending?"pending":this.result.failedExpectations.length>0?"failed":"passed"},b.prototype.getFullName=function(){return this.getSpecName(this)},b.pendingSpecExceptionMessage="=> marked Pending",b.isPendingSpecException=function(a){return-1!==a.toString().indexOf(b.pendingSpecExceptionMessage)},b},void 0==typeof window&&"object"==typeof exports&&(exports.Spec=jasmineRequire.Spec),getJasmineRequireObj().Env=function(a){function b(b){function c(a){C++,C>=B?(C=0,h(a,0)):a()}b=b||{};var d=this,e=b.global||a.getGlobal(),f=0,g=!0,h=a.getGlobal().setTimeout,i=a.getGlobal().clearTimeout;this.clock=new a.Clock(e,new a.DelayedFunctionScheduler);var j={},k=[],l=null,m=null,n=new a.ReportDispatcher(["jasmineStarted","jasmineDone","suiteStarted","suiteDone","specStarted","specDone"]);this.specFilter=function(){return!0};var o=[];this.addCustomEqualityTester=function(a){o.push(a)},a.Expectation.addCoreMatchers(a.matchers);var p=0,q=function(){return"spec"+p++},r=0,s=function(){return"suite"+r++},t=function(b,c){function d(a,b){return c.addExpectationResult(a,b)}return a.Expectation.Factory({util:a.matchersUtil,customEqualityTesters:o,actual:b,addExpectationResult:d})},u=function(a){l=a,n.specStarted(a.result)},v=function(a){return function(){for(var b=[];a;)b=b.concat(a.beforeFns),a=a.parentSuite;return b.reverse()}},w=function(a){return function(){for(var b=[];a;)b=b.concat(a.afterFns),a=a.parentSuite;return b}},x=function(a,b){return b.getFullName()+" "+a.description},y=a.buildExpectationResult,z=new a.ExceptionFormatter,A=function(a){return a.messageFormatter=z.message,a.stackFormatter=z.stack,y(a)};this.catchExceptions=function(a){return g=!!a},this.catchingExceptions=function(){return g};var B=20,C=0,D=function(b){return a.Spec.isPendingSpecException(b)||g},E=function(b){b.catchException=D,b.clearStack=b.clearStack||c,new a.QueueRunner(b).execute()},F=new a.Suite({env:this,id:s(),description:"Jasmine__TopLevel__Suite",queueRunner:E,resultCallback:function(){}});j[F.id]=F,m=F,this.topSuite=function(){return F},this.execute=function(a){a=a||[F.id];for(var b=[],c=0;c<a.length;c++){var d=j[a[c]];b.push(function(a){return function(b){a.execute(b)}}(d))}n.jasmineStarted({totalSpecsDefined:f}),E({fns:b,onComplete:n.jasmineDone})},this.addReporter=function(a){n.addReporter(a)},this.addMatchers=function(b){a.Expectation.addMatchers(b)},this.spyOn=function(b,c){if(a.util.isUndefined(b))throw new Error("spyOn could not find an object to spy upon for "+c+"()");if(a.util.isUndefined(b[c]))throw new Error(c+"() method does not exist");if(b[c]&&a.isSpy(b[c]))throw new Error(c+" has already been spied upon");var d=a.createSpy(c,b[c]);return k.push({spy:d,baseObj:b,methodName:c,originalValue:b[c]}),b[c]=d,d};var G=function(b){var c=new a.Suite({env:d,id:s(),description:b,parentSuite:m,queueRunner:E,onStart:I,resultCallback:function(a){n.suiteDone(a)}});return j[c.id]=c,c};this.describe=function(a,b){var c=G(a),d=m;d.addChild(c),m=c;var e=null;try{b.call(c)}catch(f){e=f}return e&&this.it("encountered a declaration exception",function(){throw e}),m=d,c},this.xdescribe=function(a,b){var c=this.describe(a,b);return c.disable(),c};var H=function(b,c,e){function g(){for(var a=0;a<k.length;a++){var b=k[a];b.baseObj[b.methodName]=b.originalValue}k=[]}function m(b){g(),a.Expectation.resetMatchers(),o=[],l=null,n.specDone(b)}f++;var p=new a.Spec({id:q(),beforeFns:v(e),afterFns:w(e),expectationFactory:t,exceptionFormatter:z,resultCallback:m,getSpecName:function(a){return x(a,e)},onStart:u,description:b,expectationResultFactory:A,queueRunnerFactory:E,fn:c,timer:{setTimeout:h,clearTimeout:i}});return j[p.id]=p,d.specFilter(p)||p.disable(),p},I=function(a){n.suiteStarted(a.result)};this.it=function(a,b){var c=H(a,b,m);return m.addChild(c),c},this.xit=function(a,b){var c=this.it(a,b);return c.pend(),c},this.expect=function(a){return l.expect(a)},this.beforeEach=function(a){m.beforeEach(a)},this.afterEach=function(a){m.afterEach(a)},this.pending=function(){throw a.Spec.pendingSpecExceptionMessage}}return b},getJasmineRequireObj().JsApiReporter=function(){function a(a){function c(a){g[a.id]=a}var d=a.timer||b,e="loaded";this.started=!1,this.finished=!1,this.jasmineStarted=function(){this.started=!0,e="started",d.start()};var f;this.jasmineDone=function(){this.finished=!0,f=d.elapsed(),e="done"},this.status=function(){return e};var g={};this.suiteStarted=function(a){c(a)},this.suiteDone=function(a){c(a)},this.suites=function(){return g};var h=[];this.specStarted=function(){},this.specDone=function(a){h.push(a)},this.specResults=function(a,b){return h.slice(a,a+b)},this.specs=function(){return h},this.executionTime=function(){return f}}var b={start:function(){},elapsed:function(){return 0}};return a},getJasmineRequireObj().Any=function(){function a(a){this.expectedObject=a}return a.prototype.jasmineMatches=function(a){return this.expectedObject==String?"string"==typeof a||a instanceof String:this.expectedObject==Number?"number"==typeof a||a instanceof Number:this.expectedObject==Function?"function"==typeof a||a instanceof Function:this.expectedObject==Object?"object"==typeof a:this.expectedObject==Boolean?"boolean"==typeof a:a instanceof this.expectedObject},a.prototype.jasmineToString=function(){return"<jasmine.any("+this.expectedClass+")>"},a},getJasmineRequireObj().CallTracker=function(){function a(){var a=[];this.track=function(b){a.push(b)},this.any=function(){return!!a.length},this.count=function(){return a.length},this.argsFor=function(b){var c=a[b];return c?c.args:[]},this.all=function(){return a},this.allArgs=function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].args);return b},this.first=function(){return a[0]},this.mostRecent=function(){return a[a.length-1]},this.reset=function(){a=[]}}return a},getJasmineRequireObj().Clock=function(){function a(a,b){function c(){return!(l.setTimeout||l.setInterval).apply}function d(a,b){for(var c in b)a[c]=b[c]}function e(a,c){return b.scheduleFunction(a,c,i(arguments,2))}function f(a){return b.removeFunctionWithId(a)}function g(a,c){return b.scheduleFunction(a,c,i(arguments,2),!0)}function h(a){return b.removeFunctionWithId(a)}function i(a){return Array.prototype.slice.call(a,2)}var j,k=this,l={setTimeout:a.setTimeout,clearTimeout:a.clearTimeout,setInterval:a.setInterval,clearInterval:a.clearInterval},m={setTimeout:e,clearTimeout:f,setInterval:g,clearInterval:h},n=!1;return k.install=function(){d(a,m),j=m,n=!0},k.uninstall=function(){b.reset(),d(a,l),j=l,n=!1},k.setTimeout=function(b,d){if(c()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setTimeout without a polyfill");return j.setTimeout(b,d)}return Function.prototype.apply.apply(j.setTimeout,[a,arguments])},k.setInterval=function(b,d){if(c()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setInterval without a polyfill");return j.setInterval(b,d)}return Function.prototype.apply.apply(j.setInterval,[a,arguments])},k.clearTimeout=function(b){return Function.prototype.call.apply(j.clearTimeout,[a,b])},k.clearInterval=function(b){return Function.prototype.call.apply(j.clearInterval,[a,b])},k.tick=function(a){if(!n)throw new Error("Mock clock is not installed, use jasmine.clock().install()");b.tick(a)},k}return a},getJasmineRequireObj().DelayedFunctionScheduler=function(){function DelayedFunctionScheduler(){function indexOfFirstToPass(a,b){for(var c=-1,d=0;d<a.length;++d)if(b(a[d])){c=d;break}return c}function deleteFromLookup(a){var b=Number(a),c=indexOfFirstToPass(scheduledLookup,function(a){return a===b});c>-1&&scheduledLookup.splice(c,1)}function reschedule(a){self.scheduleFunction(a.funcToCall,a.millis,a.params,!0,a.timeoutKey,a.runAtMillis+a.millis)}function runScheduledFunctions(a){if(!(0===scheduledLookup.length||scheduledLookup[0]>a))do{currentTime=scheduledLookup.shift();var b=scheduledFunctions[currentTime];delete scheduledFunctions[currentTime];for(var c=0;c<b.length;++c){var d=b[c];d.funcToCall.apply(null,d.params||[]),d.recurring&&reschedule(d)}}while(scheduledLookup.length>0&&currentTime!==a&&scheduledLookup[0]<=a)}var self=this,scheduledLookup=[],scheduledFunctions={},currentTime=0,delayedFnCount=0;return self.tick=function(a){a=a||0;var b=currentTime+a;runScheduledFunctions(b),currentTime=b},self.scheduleFunction=function(funcToCall,millis,params,recurring,timeoutKey,runAtMillis){var f;f="string"==typeof funcToCall?function(){return eval(funcToCall)}:funcToCall,millis=millis||0,timeoutKey=timeoutKey||++delayedFnCount,runAtMillis=runAtMillis||currentTime+millis;var funcToSchedule={runAtMillis:runAtMillis,funcToCall:f,recurring:recurring,params:params,timeoutKey:timeoutKey,millis:millis};return runAtMillis in scheduledFunctions?scheduledFunctions[runAtMillis].push(funcToSchedule):(scheduledFunctions[runAtMillis]=[funcToSchedule],scheduledLookup.push(runAtMillis),scheduledLookup.sort(function(a,b){return a-b})),timeoutKey},self.removeFunctionWithId=function(a){for(var b in scheduledFunctions){var c=scheduledFunctions[b],d=indexOfFirstToPass(c,function(b){return b.timeoutKey===a});if(d>-1){1===c.length?(delete scheduledFunctions[b],deleteFromLookup(b)):c.splice(d,1);break}}},self.reset=function(){currentTime=0,scheduledLookup=[],scheduledFunctions={},delayedFnCount=0},self}return DelayedFunctionScheduler},getJasmineRequireObj().ExceptionFormatter=function(){function a(){this.message=function(a){var b=a.name+": "+a.message;return(a.fileName||a.sourceURL)&&(b+=" in "+(a.fileName||a.sourceURL)),(a.line||a.lineNumber)&&(b+=" (line "+(a.line||a.lineNumber)+")"),b},this.stack=function(a){return a?a.stack:null}}return a},getJasmineRequireObj().Expectation=function(){function a(a){this.util=a.util||{buildFailureMessage:function(){}},this.customEqualityTesters=a.customEqualityTesters||[],this.actual=a.actual,this.addExpectationResult=a.addExpectationResult||function(){},this.isNot=a.isNot;for(var c in b)this[c]=b[c]}var b={};return a.prototype.wrapCompare=function(a,b){return function(){function c(){var a=g.compare.apply(null,d);return a.pass=!a.pass,a}var d=Array.prototype.slice.call(arguments,0),e=d.slice(0),f="";d.unshift(this.actual);var g=b(this.util,this.customEqualityTesters),h=g.compare;this.isNot&&(h=g.negativeCompare||c);var i=h.apply(null,d);i.pass||(i.message?f=i.message:(d.unshift(this.isNot),d.unshift(a),f=this.util.buildFailureMessage.apply(null,d))),1==e.length&&(e=e[0]),this.addExpectationResult(i.pass,{matcherName:a,passed:i.pass,message:f,actual:this.actual,expected:e})}},a.addCoreMatchers=function(b){var c=a.prototype;for(var d in b){var e=b[d];c[d]=c.wrapCompare(d,e)}},a.addMatchers=function(c){for(var d in c){var e=c[d];b[d]=a.prototype.wrapCompare(d,e)}},a.resetMatchers=function(){for(var a in b)delete b[a]},a.Factory=function(b){b=b||{};var c=new a(b);return b.isNot=!0,c.not=new a(b),c},a},getJasmineRequireObj().buildExpectationResult=function(){function a(a){function b(){return a.passed?"Passed.":a.message?a.message:a.error?d(a.error):""}function c(){if(a.passed)return"";var c=a.error;if(!c)try{throw new Error(b())}catch(d){c=d}return e(c)}var d=a.messageFormatter||function(){},e=a.stackFormatter||function(){};return{matcherName:a.matcherName,expected:a.expected,actual:a.actual,message:b(),stack:c(),passed:a.passed}}return a},getJasmineRequireObj().ObjectContaining=function(a){function b(a){this.sample=a}return b.prototype.jasmineMatches=function(b,c,d){if("object"!=typeof this.sample)throw new Error("You must provide an object to objectContaining, not '"+this.sample+"'.");c=c||[],d=d||[];var e=function(b,c){return null!==b&&!a.util.isUndefined(b[c])};for(var f in this.sample)!e(b,f)&&e(this.sample,f)?c.push("expected has key '"+f+"', but missing from actual."):a.matchersUtil.equals(this.sample[f],b[f])||d.push("'"+f+"' was '"+(b[f]?a.util.htmlEscape(b[f].toString()):b[f])+"' in actual, but was '"+(this.sample[f]?a.util.htmlEscape(this.sample[f].toString()):this.sample[f])+"' in expected.");return 0===c.length&&0===d.length},b.prototype.jasmineToString=function(){return"<jasmine.objectContaining("+a.pp(this.sample)+")>"},b},getJasmineRequireObj().pp=function(a){function b(){this.ppNestLevel_=0}function c(){b.call(this),this.string=""}return b.prototype.format=function(b){this.ppNestLevel_++;try{a.util.isUndefined(b)?this.emitScalar("undefined"):null===b?this.emitScalar("null"):b===a.getGlobal()?this.emitScalar("<global>"):b.jasmineToString?this.emitScalar(b.jasmineToString()):"string"==typeof b?this.emitString(b):a.isSpy(b)?this.emitScalar("spy on "+b.and.identity()):b instanceof RegExp?this.emitScalar(b.toString()):"function"==typeof b?this.emitScalar("Function"):"number"==typeof b.nodeType?this.emitScalar("HTMLNode"):b instanceof Date?this.emitScalar("Date("+b+")"):b.__Jasmine_been_here_before__?this.emitScalar("<circular reference: "+(a.isArray_(b)?"Array":"Object")+">"):a.isArray_(b)||a.isA_("Object",b)?(b.__Jasmine_been_here_before__=!0,a.isArray_(b)?this.emitArray(b):this.emitObject(b),delete b.__Jasmine_been_here_before__):this.emitScalar(b.toString())}finally{this.ppNestLevel_--}},b.prototype.iterateObject=function(b,c){for(var d in b)b.hasOwnProperty(d)&&"__Jasmine_been_here_before__"!=d&&c(d,b.__lookupGetter__?!a.util.isUndefined(b.__lookupGetter__(d))&&null!==b.__lookupGetter__(d):!1)},b.prototype.emitArray=a.unimplementedMethod_,b.prototype.emitObject=a.unimplementedMethod_,b.prototype.emitScalar=a.unimplementedMethod_,b.prototype.emitString=a.unimplementedMethod_,a.util.inherit(c,b),c.prototype.emitScalar=function(a){this.append(a)},c.prototype.emitString=function(a){this.append("'"+a+"'")},c.prototype.emitArray=function(b){if(this.ppNestLevel_>a.MAX_PRETTY_PRINT_DEPTH)return void this.append("Array");this.append("[ ");for(var c=0;c<b.length;c++)c>0&&this.append(", "),this.format(b[c]);this.append(" ]")},c.prototype.emitObject=function(b){if(this.ppNestLevel_>a.MAX_PRETTY_PRINT_DEPTH)return void this.append("Object");var c=this;this.append("{ ");var d=!0;this.iterateObject(b,function(a,e){d?d=!1:c.append(", "),c.append(a),c.append(" : "),e?c.append("<getter>"):c.format(b[a])}),this.append(" }")},c.prototype.append=function(a){this.string+=a},function(a){var b=new c;return b.format(a),b.string}},getJasmineRequireObj().QueueRunner=function(){function a(a){this.fns=a.fns||[],this.onComplete=a.onComplete||function(){},this.clearStack=a.clearStack||function(a){a()},this.onException=a.onException||function(){},this.catchException=a.catchException||function(){return!0},this.userContext={}}return a.prototype.execute=function(){this.run(this.fns,0)},a.prototype.run=function(a,b){function c(a){try{a.call(h.userContext)}catch(b){e(b)}}function d(b){var c=function(){h.run(a,f+1)};try{b.call(h.userContext,c)}catch(d){e(d),c()}}function e(a){if(h.onException(a),!h.catchException(a))throw a}var f,g=a.length,h=this;for(f=b;g>f;f++){var i=a[f];if(i.length>0)return d(i);c(i)}var j=f>=g;j&&this.clearStack(this.onComplete)},a},getJasmineRequireObj().ReportDispatcher=function(){function a(a){function b(a,b){for(var c=0;c<f.length;c++){var d=f[c];d[a]&&d[a].apply(d,b)}}for(var c=a||[],d=0;d<c.length;d++){var e=c[d];this[e]=function(a){return function(){b(a,arguments)}}(e)}var f=[];return this.addReporter=function(a){f.push(a)},this}return a},getJasmineRequireObj().SpyStrategy=function(){function a(a){a=a||{};var b=a.name||"unknown",c=a.fn||function(){},d=a.getSpy||function(){},e=function(){};this.identity=function(){return b},this.exec=function(){return e.apply(this,arguments)},this.callThrough=function(){return e=c,d()},this.returnValue=function(a){return e=function(){return a},d()},this.throwError=function(a){var b=a instanceof Error?a:new Error(a);return e=function(){throw b},d()},this.callFake=function(a){return e=a,d()},this.stub=function(){return e=function(){},d()}}return a},getJasmineRequireObj().Suite=function(){function a(a){this.env=a.env,this.id=a.id,this.parentSuite=a.parentSuite,this.description=a.description,this.onStart=a.onStart||function(){},this.resultCallback=a.resultCallback||function(){},this.clearStack=a.clearStack||function(a){a()},this.beforeFns=[],this.afterFns=[],this.queueRunner=a.queueRunner||function(){},this.disabled=!1,this.children=[],this.result={id:this.id,status:this.disabled?"disabled":"",description:this.description,fullName:this.getFullName()}}return a.prototype.getFullName=function(){for(var a=this.description,b=this.parentSuite;b;b=b.parentSuite)b.parentSuite&&(a=b.description+" "+a);return a},a.prototype.disable=function(){this.disabled=!0},a.prototype.beforeEach=function(a){this.beforeFns.unshift(a)},a.prototype.afterEach=function(a){this.afterFns.unshift(a)},a.prototype.addChild=function(a){this.children.push(a)},a.prototype.execute=function(a){function b(){d.resultCallback(d.result),a&&a()}function c(a){return function(b){a.execute(b)}}var d=this;if(this.disabled)return void b();for(var e=[],f=0;f<this.children.length;f++)e.push(c(this.children[f]));this.onStart(this),this.queueRunner({fns:e,onComplete:b})},a},void 0==typeof window&&"object"==typeof exports&&(exports.Suite=jasmineRequire.Suite),getJasmineRequireObj().Timer=function(){function a(a){a=a||{};var b,c=a.now||function(){return(new Date).getTime()};this.start=function(){b=c()},this.elapsed=function(){return c()-b}}return a},getJasmineRequireObj().matchersUtil=function(a){function b(c,d,e,f,g){function h(a,b){return a.hasOwnProperty(b)}function i(a){return"function"==typeof a}for(var j=!0,k=0;k<g.length;k++){var l=g[k](c,d);if(!a.util.isUndefined(l))return l}if(c instanceof a.Any&&(j=c.jasmineMatches(d)))return!0;if(d instanceof a.Any&&(j=d.jasmineMatches(c)))return!0;if(d instanceof a.ObjectContaining&&(j=d.jasmineMatches(c)))return!0;if(c instanceof Error&&d instanceof Error)return c.message==d.message;if(c===d)return 0!==c||1/c==1/d;if(null===c||null===d)return c===d;var m=Object.prototype.toString.call(c);if(m!=Object.prototype.toString.call(d))return!1;switch(m){case"[object String]":return c==String(d);case"[object Number]":return c!=+c?d!=+d:0===c?1/c==1/d:c==+d;case"[object Date]":case"[object Boolean]":return+c==+d;case"[object RegExp]":return c.source==d.source&&c.global==d.global&&c.multiline==d.multiline&&c.ignoreCase==d.ignoreCase}if("object"!=typeof c||"object"!=typeof d)return!1;for(var n=e.length;n--;)if(e[n]==c)return f[n]==d;e.push(c),f.push(d);var o=0;if("[object Array]"==m){if(o=c.length,j=o==d.length)for(;o--&&(j=b(c[o],d[o],e,f,g)););}else{var p=c.constructor,q=d.constructor;if(p!==q&&!(i(p)&&p instanceof p&&i(q)&&q instanceof q))return!1;for(var r in c)if(h(c,r)&&(o++,!(j=h(d,r)&&b(c[r],d[r],e,f,g))))break;if(j){for(r in d)if(h(d,r)&&!o--)break;j=!o}}return e.pop(),f.pop(),j}return{equals:function(a,c,d){return d=d||[],b(a,c,[],[],d)},contains:function(a,c,d){if(d=d||[],"[object Array]"===Object.prototype.toString.apply(a)){for(var e=0;e<a.length;e++)if(b(a[e],c,[],[],d))return!0;return!1}return a.indexOf(c)>=0},buildFailureMessage:function(){var b=Array.prototype.slice.call(arguments,0),c=b[0],d=b[1],e=b[2],f=b.slice(3),g=c.replace(/[A-Z]/g,function(a){return" "+a.toLowerCase()}),h="Expected "+a.pp(e)+(d?" not ":" ")+g;if(f.length>0)for(var i=0;i<f.length;i++)i>0&&(h+=","),h+=" "+a.pp(f[i]);return h+"."}}},getJasmineRequireObj().toBe=function(){function a(){return{compare:function(a,b){return{pass:a===b}}}}return a},getJasmineRequireObj().toBeCloseTo=function(){function a(){return{compare:function(a,b,c){return 0!==c&&(c=c||2),{pass:Math.abs(b-a)<Math.pow(10,-c)/2}}}}return a},getJasmineRequireObj().toBeDefined=function(){function a(){return{compare:function(a){return{pass:void 0!==a}}}}return a},getJasmineRequireObj().toBeFalsy=function(){function a(){return{compare:function(a){return{pass:!a}}}}return a},getJasmineRequireObj().toBeGreaterThan=function(){function a(){return{compare:function(a,b){return{pass:a>b}}}}return a},getJasmineRequireObj().toBeLessThan=function(){function a(){return{compare:function(a,b){return{pass:b>a}}}}return a},getJasmineRequireObj().toBeNaN=function(a){function b(){return{compare:function(b){var c={pass:b!==b};return c.message=c.pass?"Expected actual not to be NaN.":"Expected "+a.pp(b)+" to be NaN.",c}}}return b},getJasmineRequireObj().toBeNull=function(){function a(){return{compare:function(a){return{pass:null===a}}}}return a},getJasmineRequireObj().toBeTruthy=function(){function a(){return{compare:function(a){return{pass:!!a}}}}return a},getJasmineRequireObj().toBeUndefined=function(){function a(){return{compare:function(a){return{pass:void 0===a}}}}return a},getJasmineRequireObj().toContain=function(){function a(a,b){return b=b||[],{compare:function(c,d){return{pass:a.contains(c,d,b)}}}}return a},getJasmineRequireObj().toEqual=function(){function a(a,b){return b=b||[],{compare:function(c,d){var e={pass:!1};return e.pass=a.equals(c,d,b),e}}}return a},getJasmineRequireObj().toHaveBeenCalled=function(a){function b(){return{compare:function(b){var c={};if(!a.isSpy(b))throw new Error("Expected a spy, but got "+a.pp(b)+".");if(arguments.length>1)throw new Error("toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith");return c.pass=b.calls.any(),c.message=c.pass?"Expected spy "+b.and.identity()+" not to have been called.":"Expected spy "+b.and.identity()+" to have been called.",c}}}return b},getJasmineRequireObj().toHaveBeenCalledWith=function(a){function b(b){return{compare:function(){var c=Array.prototype.slice.call(arguments,0),d=c[0],e=c.slice(1),f={pass:!1};if(!a.isSpy(d))throw new Error("Expected a spy, but got "+a.pp(d)+".");return d.calls.any()?(b.contains(d.calls.allArgs(),e)?(f.pass=!0,f.message="Expected spy "+d.and.identity()+" not to have been called with "+a.pp(e)+" but it was."):f.message="Expected spy "+d.and.identity()+" to have been called with "+a.pp(e)+" but actual calls were "+a.pp(d.calls.allArgs()).replace(/^\[ | \]$/g,"")+".",f):(f.message="Expected spy "+d.and.identity()+" to have been called with "+a.pp(e)+" but it was never called.",f)}}}return b},getJasmineRequireObj().toMatch=function(){function a(){return{compare:function(a,b){var c=new RegExp(b);return{pass:c.test(a)}}}}return a},getJasmineRequireObj().toThrow=function(a){function b(b){return{compare:function(c,d){var e,f={pass:!1},g=!1;if("function"!=typeof c)throw new Error("Actual is not a Function");try{c()}catch(h){g=!0,e=h}return g?1==arguments.length?(f.pass=!0,f.message="Expected function not to throw, but it threw "+a.pp(e)+".",f):(b.equals(e,d)?(f.pass=!0,f.message="Expected function not to throw "+a.pp(d)+"."):f.message="Expected function to throw "+a.pp(d)+", but it threw "+a.pp(e)+".",f):(f.message="Expected function to throw an exception.",f)}}}return b},getJasmineRequireObj().toThrowError=function(a){function b(b){return{compare:function(c){function d(a){return a.name||a.toString().match(/^\s*function\s*(\w*)\s*\(/)[1]}function e(a){return{pass:!0,message:a}}function f(a){return{pass:!1,message:a}}function g(){if(1!=arguments.length)if(2==arguments.length){var a=arguments[1];if(a instanceof RegExp?l=a:"string"==typeof a?k=a:h(a)&&(j=a),!(j||k||l))throw new Error("Expected is not an Error, string, or RegExp.")}else{if(!h(arguments[1]))throw new Error("Expected error type is not an Error.");if(j=arguments[1],arguments[2]instanceof RegExp)l=arguments[2];else{if("string"!=typeof arguments[2])throw new Error("Expected error message is not a string or RegExp.");k=arguments[2]}}}function h(a){if("function"!=typeof a)return!1;var b=function(){};return b.prototype=a.prototype,new b instanceof Error}var i,j,k,l,m,n,o=!1;if("function"!=typeof c)throw new Error("Actual is not a Function");g.apply(null,arguments);try{c()}catch(p){o=!0,i=p}return o?i instanceof Error?1==arguments.length?e("Expected function not to throw an Error, but it threw "+d(i)+"."):(j&&(m=d(j),n=d(i.constructor)),j&&k?i.constructor==j&&b.equals(i.message,k)?e("Expected function not to throw "+m+' with message "'+k+'".'):f("Expected function to throw "+m+' with message "'+k+'", but it threw '+n+' with message "'+i.message+'".'):j&&l?i.constructor==j&&l.test(i.message)?e("Expected function not to throw "+m+" with message matching "+l+"."):f("Expected function to throw "+m+" with message matching "+l+", but it threw "+n+' with message "'+i.message+'".'):j?i.constructor==j?e("Expected function not to throw "+m+"."):f("Expected function to throw "+m+", but it threw "+n+"."):k?i.message==k?e("Expected function not to throw an exception with message "+a.pp(k)+"."):f("Expected function to throw an exception with message "+a.pp(k)+", but it threw an exception with message "+a.pp(i.message)+"."):l?l.test(i.message)?e("Expected function not to throw an exception with a message matching "+a.pp(l)+"."):f("Expected function to throw an exception with a message matching "+a.pp(l)+", but it threw an exception with message "+a.pp(i.message)+"."):void 0):f("Expected function to throw an Error, but it threw "+i+"."):f("Expected function to throw an Error.")
}}}return b},getJasmineRequireObj().version=function(){return"2.0.0"},initJQueryPayments=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].slice,v=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=a,b.payment={},b.payment.fn={},b.fn.payment=function(){var a,c;return c=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],b.payment.fn[c].apply(this,a)},f=/(\d{1,4})/g,e=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:f,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:f,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:f,length:[13,14,15,16],cvcLength:[3],luhn:!0}],c=function(a){var b,c,d;for(a=(a+"").replace(/\D/g,""),c=0,d=e.length;d>c;c++)if(b=e[c],b.pattern.test(a))return b},d=function(a){var b,c,d;for(c=0,d=e.length;d>c;c++)if(b=e[c],b.type===a)return b},n=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},m=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(b=document.selection)?"function"==typeof b.createRange?b.createRange().text:void 0:void 0:void 0)?!0:!1},o=function(a){return setTimeout(function(){var c,d;return c=b(a.currentTarget),d=c.val(),d=b.payment.formatCardNumber(d),c.val(d)})},i=function(a){var d,e,f,g,h,i,j;return f=String.fromCharCode(a.which),!/^\d+$/.test(f)||(d=b(a.currentTarget),j=d.val(),e=c(j+f),g=(j.replace(/\D/g,"")+f).length,i=16,e&&(i=e.length[e.length.length-1]),g>=i||null!=d.prop("selectionStart")&&d.prop("selectionStart")!==j.length)?void 0:(h=e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,h.test(j)?(a.preventDefault(),d.val(j+" "+f)):h.test(j+f)?(a.preventDefault(),d.val(j+f+" ")):void 0)},g=function(a){var c,d;return c=b(a.currentTarget),d=c.val(),a.meta||8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length?void 0:/\d\s$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d\s$/,""))):/\s\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\d?$/,""))):void 0},j=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val()+d,/^\d$/.test(e)&&"0"!==e&&"1"!==e?(a.preventDefault(),c.val("0"+e+" / ")):/^\d\d$/.test(e)?(a.preventDefault(),c.val(""+e+" / ")):void 0):void 0},k=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val(),/^\d\d$/.test(e)?c.val(""+e+" / "):void 0):void 0},l=function(a){var c,d,e;return d=String.fromCharCode(a.which),"/"===d?(c=b(a.currentTarget),e=c.val(),/^\d$/.test(e)&&"0"!==e?c.val("0"+e+" / "):void 0):void 0},h=function(a){var c,d;return a.meta||(c=b(a.currentTarget),d=c.val(),8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length)?void 0:/\d(\s|\/)+$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},s=function(a){var b;return a.metaKey||a.ctrlKey?!0:32===a.which?!1:0===a.which?!0:a.which<33?!0:(b=String.fromCharCode(a.which),!!/[\d\s]/.test(b))},q=function(a){var d,e,f,g;return d=b(a.currentTarget),f=String.fromCharCode(a.which),/^\d+$/.test(f)&&!m(d)?(g=(d.val()+f).replace(/\D/g,""),e=c(g),e?g.length<=e.length[e.length.length-1]:g.length<=16):void 0},r=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)&&!m(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},p=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)?(e=c.val()+d,e.length<=4):void 0},t=function(a){var c,d,f,g,h;return c=b(a.currentTarget),h=c.val(),g=b.payment.cardType(h)||"unknown",c.hasClass(g)?void 0:(d=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)f=e[a],c.push(f.type);return c}(),c.removeClass("unknown"),c.removeClass(d.join(" ")),c.addClass(g),c.toggleClass("identified","unknown"!==g),c.trigger("payment.cardType",g))},b.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",p),this},b.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",r),this.on("keypress",j),this.on("keypress",l),this.on("keypress",k),this.on("keydown",h),this},b.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",q),this.on("keypress",i),this.on("keydown",g),this.on("keyup",t),this.on("paste",o),this},b.payment.fn.restrictNumeric=function(){return this.on("keypress",s),this},b.payment.fn.cardExpiryVal=function(){return b.payment.cardExpiryVal(b(this).val())},b.payment.cardExpiryVal=function(a){var b,c,d,e;return a=a.replace(/\s/g,""),e=a.split("/",2),b=e[0],d=e[1],2===(null!=d?d.length:void 0)&&/^\d+$/.test(d)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),d=c+d),b=parseInt(b,10),d=parseInt(d,10),{month:b,year:d}},b.payment.validateCardNumber=function(a){var b,d;return a=(a+"").replace(/\s+|-/g,""),/^\d+$/.test(a)?(b=c(a),b?(d=a.length,v.call(b.length,d)>=0&&(b.luhn===!1||n(a))):!1):!1},b.payment.validateCardExpiry=function(a,c){var d,e,f,g;return"object"==typeof a&&"month"in a&&(g=a,a=g.month,c=g.year),a&&c?(a=b.trim(a),c=b.trim(c),/^\d+$/.test(a)?/^\d+$/.test(c)?parseInt(a,10)<=12?(2===c.length&&(f=(new Date).getFullYear(),f=f.toString().slice(0,2),c=f+c),e=new Date(c,a),d=new Date,e.setMonth(e.getMonth()-1),e.setMonth(e.getMonth()+1,1),e>d):!1:!1:!1):!1},b.payment.validateCardCVC=function(a,c){var e,f;return a=b.trim(a),/^\d+$/.test(a)?c?(e=a.length,v.call(null!=(f=d(c))?f.cvcLength:void 0,e)>=0):a.length>=3&&a.length<=4:!1},b.payment.cardType=function(a){var b;return a?(null!=(b=c(a))?b.type:void 0)||null:null},b.payment.formatCardNumber=function(a){var b,d,e,f;return(b=c(a))?(e=b.length[b.length.length-1],a=a.replace(/\D/g,""),a=a.slice(0,+e+1||9e9),b.format.global?null!=(f=a.match(b.format))?f.join(" "):void 0:(d=b.format.exec(a),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):a}},function(a,b){"function"==typeof define&&define.amd?define(b):a.form2js=b()}(this,function(){"use strict";function a(a,d,e,f,g){("undefined"==typeof e||null==e)&&(e=!0),("undefined"==typeof d||null==d)&&(d="."),arguments.length<5&&(g=!1),a="string"==typeof a?document.getElementById(a):a;var h,i=[],j=0;if(a.constructor==Array||"undefined"!=typeof NodeList&&a.constructor==NodeList)for(;h=a[j++];)i=i.concat(c(h,f,g));else i=c(a,f,g);return b(i,e,d)}function b(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r={};for(d=0;d<a.length;d++)if(h=a[d].value,!b||""!==h&&null!==h){for(o=a[d].name,p=o.split(c),i=[],j=q,k="",e=0;e<p.length;e++)if(n=p[e].split("]["),n.length>1)for(f=0;f<n.length;f++)if(n[f]=0==f?n[f]+"]":f==n.length-1?"["+n[f]:"["+n[f]+"]",m=n[f].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(g=1;g<m.length;g++)m[g]&&i.push(m[g]);else i.push(n[f]);else i=i.concat(n);for(e=0;e<i.length;e++)n=i[e],n.indexOf("[]")>-1&&e==i.length-1?(l=n.substr(0,n.indexOf("[")),k+=l,j[l]||(j[l]=[]),j[l].push(h)):n.indexOf("[")>-1?(l=n.substr(0,n.indexOf("[")),m=n.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),k+="_"+l+"_"+m,r[k]||(r[k]={}),""==l||j[l]||(j[l]=[]),e==i.length-1?""==l?(j.push(h),r[k][m]=j[j.length-1]):(j[l].push(h),r[k][m]=j[l][j[l].length-1]):r[k][m]||(j[l].push(/^[0-9a-z_]+\[?/i.test(i[e+1])?{}:[]),r[k][m]=j[l][j[l].length-1]),j=r[k][m]):(k+=n,e<i.length-1?(j[n]||(j[n]={}),j=j[n]):j[n]=h)}return q}function c(a,b,c){var f=e(a,b,c);return f.length>0?f:d(a,b,c)}function d(a,b,c){for(var d=[],f=a.firstChild;f;)d=d.concat(e(f,b,c)),f=f.nextSibling;return d}function e(a,b,c){var e,h,i,j=f(a,c);return e=b&&b(a),e&&e.name?i=[e]:""!=j&&a.nodeName.match(/INPUT|TEXTAREA/i)?(h=g(a),i=[{name:j,value:h}]):""!=j&&a.nodeName.match(/SELECT/i)?(h=g(a),i=[{name:j.replace(/\[\]$/,""),value:h}]):i=d(a,b,c),i}function f(a,b){return a.name&&""!=a.name?a.name:b&&a.id&&""!=a.id?a.id:""}function g(a){if(a.disabled)return null;switch(a.nodeName){case"INPUT":case"TEXTAREA":switch(a.type.toLowerCase()){case"radio":if(a.checked&&"false"===a.value)return!1;case"checkbox":if(a.checked&&"true"===a.value)return!0;if(!a.checked&&"true"===a.value)return!1;if(a.checked)return a.value;break;case"button":case"reset":case"submit":case"image":return"";default:return a.value}break;case"SELECT":return h(a)}return null}function h(a){var b,c,d,e=a.multiple,f=[];if(!e)return a.value;for(b=a.getElementsByTagName("option"),c=0,d=b.length;d>c;c++)b[c].selected&&f.push(b[c].value);return f}return a});var html;html='<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" data-bind="value: org">\n  <input type="hidden" name="customer.country" data-bind="value: countryCode">\n  <input type="hidden" name="customer.charges_attributes[0].currency" data-bind="value: selectedCurrency">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\' data-bind="html: currencySymbol">$</span><span class=\'donation-header-amt\' data-bind="text: displayAmount()">0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header" id="dnt-progress-amount" data-bind="css: { \'dph-active\' : visibleInputSet() >= 0}, click: function() { setInputSet(0); }">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo" data-bind="css: { \'dph-active\' : visibleInputSet() >= 1}, click: function() { setInputSet(1); }">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment" data-bind="css: { \'dph-active\' : visibleInputSet() >= 2}, click: function() { setInputSet(2); }">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first" data-bind="visible: visibleInputSet() === 0">\n    <div class="donations-currency-select-row" data-bind="visible: currenciesEnabled()">\n      Currency: \n      <select class="donations-currency-select" data-bind="options: currenciesArray, value: selectedCurrency"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first" data-bind="validationMessage: displayAmount"></span>\n    </span>\n    <div class="donation-button-set" data-bind="foreach: amounts">\n      <div class="donation-btn donation-btn-sm" data-bind="css: { \'donation-btn-active\' : $parent.selectedBtn() === $index() }, click: function() { $parent.setActiveAmount($index()); }">\n        <span class=\'donation-currency\' data-bind="html: $parent.currencySymbol">$</span><span class=\'donation-amt\' data-bind="text: $data"></span>\n      </div>\n      <!-- ko if: $index() === ($parent.amountsLength() - 1) -->\n        <input class="donation-btn donation-btn-lg" data-bind="value: $parent.inputtedAmount, event: { change: $parent.clearSelectedButton } " type="text" placeholder="Other amount">\n      <!-- /ko -->\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn" data-bind="click: function()\n        { \n          if(inputSet1.isValid()) { incrementInputSet(); } \n          else { inputSet1.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 1">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label" data-bind="validationMessage: firstName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name" data-bind="value: firstName">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label" data-bind="validationMessage: lastName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name" data-bind="value: lastName">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label" data-bind="validationMessage: email">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email" data-bind="value: email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn" data-bind="click: function()\n        { \n          if(inputSet2.isValid()) { incrementInputSet(); } \n          else { inputSet2.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 2">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label" data-bind="validationMessage: cardNumber" data-bind="validationMessage: cardDate">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number" data-bind="value: cardNumber, style: { backgroundImage: ccBackground() } ">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label" data-bind="validationMessage: cardDate">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month" data-bind="value: cardMonth, options: ccMonths">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year" data-bind="value: cardYear, options: ccYears">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label" data-bind="validationMessage: cvc">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc" data-bind="value: cvc">\n    </div>\n    <div class="donation-payment-errors" data-bind="visible: false">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit" data-bind="click: function()\n        { \n          if(inputSet3.isValid()) { submitForm(); } \n          else { inputSet3.errors.showAllMessages();}\n        }">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>';var DonationsFormModel;DonationsFormModel=function(){function a(a,b){var c,d,e;e=this,$=a,c=$.extend({},{imgpath:"https://d2yuwrm8xcn0u8.cloudfront.net",metaviewporttag:!0},b,e.parseQueryString(document.URL.split("?")[1])),ko.validation.configure({insertMessages:!1}),ko.validation.rules.ccDate={validator:function(a){return $.payment.validateCardExpiry(a.month,a.year)},message:"Invalid date"},ko.validation.rules.ccNum={validator:function(a){return $.payment.validateCardNumber(a)},message:"Invalid credit card number"},ko.validation.rules.cvc={validator:function(a){return $.payment.validateCardCVC(a)},message:"Invalid CVC number"},ko.validation.registerExtenders(),e.org=ko.observable(c.org),e.countryCode=ko.observable("US"),e.imgPath=ko.observable(c.imgpath),e.initializeIcons(e.imgPath()),e.seedAmount=c.seedamount||100,e.seedValues=null!=c.seedvalues?c.seedvalues.split(","):[15,35,50,100,250,500,1e3],e.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAD",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},e.currenciesArray=ko.observableArray(["USD","GBP","CAD","AUD","EUR","NZD","SEK","NOK","DKK"]),e.currenciesEnabled=ko.observable("none"!==c.currencyconversion),e.seededCurrency=c.seedcurrency||"USD",e.formCurrency=c.formcurrency||e.seededCurrency,d=function(){var a;return"none"!==(a=c.currencyconversion)&&"choose"!==a?e.currencies[c.country]:e.formCurrency},e.selectedCurrency=ko.observable(d()),e.currencySymbol=ko.computed(function(){var a;return a={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAD:"C$"},a[e.selectedCurrency()]||e.selectedCurrency()},this),e.selectedBtn=ko.observable(-1),e.selectedAmount=ko.observable("0"),e.inputtedAmount=ko.observable(null),e.displayAmount=ko.computed(function(){return e.inputtedAmount()||e.selectedAmount()},this).extend({required:{message:"Please select an amount"},min:1,digit:!0}),e.setActiveAmount=function(a){return a>-1?(e.inputtedAmount(null),e.selectedAmount(e.amounts()[a]),e.selectedBtn(a)):void 0},e.clearSelectedButton=function(){return e.selectedAmount(0),e.selectedBtn(-1)},e.amounts=ko.computed(function(){var a,b,d,f,g,h,i,j,k;for(a=[],k=e.seedValues,g=i=0,j=k.length;j>i;g=++i)h=k[g],b=parseInt(h)/100*parseInt(e.seedAmount),7>g&&(e.currenciesEnabled()?(f=c[e.selectedCurrency()]||1,d=c[e.seededCurrency]||1,a.push(e.round(b*f/d))):a.push(e.round(b)));return a},this),e.amountsLength=ko.computed(function(){return e.amounts().length},this),e.visibleInputSet=ko.observable(0),e.incrementInputSet=function(){return e.visibleInputSet(e.visibleInputSet()+1)},e.setInputSet=function(a){return e.visibleInputSet(a)},e.firstName=ko.observable().extend({required:{message:"Can't be blank"}}),e.lastName=ko.observable().extend({required:{message:"Can't be blank"}}),e.email=ko.observable().extend({required:{message:"Can't be blank"},email:{message:"Invalid email"}}),e.cardNumber=ko.observable().extend({required:{message:"Can't be blank"},ccNum:!0}),e.cardMonth=ko.observable(),e.ccMonths=["01","02","03","04","05","06","07","08","09","10","11","12"],e.cardYear=ko.observable(""+((new Date).getFullYear()+1)),e.ccYears=function(){var a,b,c,d,e;for(a=[],b=(new Date).getFullYear(),c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push(""+c);return a}(),e.cardDate=ko.computed(function(){return{month:e.cardMonth(),year:e.cardYear()}},this).extend({ccDate:!0,observable:!0}),e.cvc=ko.observable().extend({required:{message:"Can't be blank"},digit:!0,cvc:!0}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),e.ccBackground=ko.computed(function(){var a;return a=$.payment.cardType(e.cardNumber()),"amex"===a||"mastercard"===a||"visa"===a||"discover"===a||"dinersclub"===a?"url("+e.imgPath()+"/icon-cc-"+a+".png)":"url("+e.imgPath()+"/icon-cc-none.png)"},this),e.inputSet1=ko.validatedObservable({amount:e.displayAmount}),e.inputSet2=ko.validatedObservable({firstName:e.firstName,lastName:e.lastName,email:e.email}),e.inputSet3=ko.validatedObservable({cardNumber:e.cardNumber,cardDate:e.cardDate,cvc:e.cvc}),e.connectToServer(c,e)}return a.prototype.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},a.prototype.initializeIcons=function(a){var b,c,d,e;b={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"},e=[];for(c in b)d=b[c],e.push($(c).css("background-image","url('"+a+"/"+d+"')"));return e},a.prototype.round=function(a){var b;return b=Math.round(parseFloat(a.toPrecision(2))),0===b?1:b},a.prototype.connectToServer=function(a,b){var c,d,e;return c=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(c.stripepublickey),$.fn.serializeObject=function(){var a,c;return c=form2js(this.attr("id"),".",!0),c["cc-num"]="",c.month="",c.year="",c.cvc="",a=b.displayAmount(),console.log(a),c.customer.charges_attributes[0].amount=a.replace(b.currencySymbol(),"")+"00",c},e=function(a){var b,d;return d=new Pusher(c.pusherpublickey),b=d.subscribe(a),b.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=c.redirectto&&window.location.replace(c.redirectto),$("#donation-form").hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},d=function(a,b){var d,f,g;return d=$("#donation-form"),b.error?(gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(b.error.message),d.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide()):(g=b.id,d.append($('<input type="hidden" name="card_token" />').val(g)),f=$.ajax({url:""+c.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),{config:c})}),f.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),e(a.pusher_channel_token)}),f.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1)},b.submitForm=function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$("#donation-form"),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,d),!1}},a}(),function(){!function(a){var b=this||(0,eval)("this"),c=b.document,d=b.navigator,e=b.jQuery,f=b.JSON;!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],a):a(b.ko={})}(function(g){function h(a,b){return null===a||typeof a in m?a===b:!1}function i(b,c){var d;return function(){d||(d=setTimeout(function(){d=a,b()},c))}}function j(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function k(a,b,c,d){l.d[a]={init:function(a,e,f,g,h){var i,j;return l.ba(function(){var f=l.a.c(e()),g=!c!=!f,k=!j;(k||b||g!==i)&&(k&&l.ca.fa()&&(j=l.a.lb(l.e.childNodes(a),!0)),g?(k||l.e.U(a,l.a.lb(j)),l.gb(d?d(h,f):h,a)):l.e.da(a),i=g)},null,{G:a}),{controlsDescendantBindings:!0}}},l.g.aa[a]=!1,l.e.Q[a]=!0}var l="undefined"!=typeof g?g:{};l.b=function(a,b){for(var c=a.split("."),d=l,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},l.s=function(a,b,c){a[b]=c},l.version="3.1.0",l.b("version",l.version),l.a=function(){function g(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}var j={__proto__:[]}instanceof Array,k={},m={};k[d&&/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],k.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),g(k,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)m[b[c]]=a});var n={propertychange:!0},o=c&&function(){for(var b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];);return b>4?b:a}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},l:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},hb:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},ma:function(a,b){var c=l.a.l(a,b);c>0?a.splice(c,1):0===c&&a.shift()},ib:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>l.a.l(b,a[c])&&b.push(a[c]);return b},ya:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},la:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},$:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},Y:function(a,b,c){var d=l.a.l(l.a.Sa(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},na:j,extend:h,ra:i,sa:j?i:h,A:g,Oa:function(a,b){if(!a)return a;var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b(a[c],c,a));return d},Fa:function(a){for(;a.firstChild;)l.removeNode(a.firstChild)},ec:function(a){a=l.a.R(a);for(var b=c.createElement("div"),d=0,e=a.length;e>d;d++)b.appendChild(l.M(a[d]));return b},lb:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?l.M(f):f)}return e},U:function(a,b){if(l.a.Fa(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},Bb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)l.removeNode(c[f])}},ea:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},Db:function(a,b){7>o?a.setAttribute("selected",b):a.selected=b},ta:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s ]+|[\s ]+$/g,"")},oc:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=l.a.ta(d[e]);""!==g&&c.push(g)}return c},kc:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},Sb:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Ea:function(a){return l.a.Sb(a,a.ownerDocument.documentElement)},eb:function(a){return!!l.a.hb(a,l.a.Ea)},B:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},q:function(a,b,c){var d=o&&n[b];if(!d&&e)e(a).bind(b,c);else if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var f=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,f),l.a.u.ja(a,function(){a.detachEvent(g,f)})}else a.addEventListener(b,c,!1)},ha:function(a,d){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===l.a.B(a)&&a.type&&"click"==d.toLowerCase()?(f=a.type,f="checkbox"==f||"radio"==f):f=!1,e&&!f)e(a).trigger(d);else if("function"==typeof c.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");f=c.createEvent(m[d]||"HTMLEvents"),f.initEvent(d,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(f)}else if(f&&a.click)a.click();else{if("undefined"==typeof a.fireEvent)throw Error("Browser doesn't support triggering events");a.fireEvent("on"+d)}},c:function(a){return l.v(a)?a():a},Sa:function(a){return l.v(a)?a.o():a},ua:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];l.a.r(b.match(d),function(a){l.a.Y(e,a,c)}),a.className=e.join(" ")}},Xa:function(b,c){var d=l.a.c(c);(null===d||d===a)&&(d="");var e=l.e.firstChild(b);!e||3!=e.nodeType||l.e.nextSibling(e)?l.e.U(b,[b.ownerDocument.createTextNode(d)]):e.data=d,l.a.Vb(b)},Cb:function(a,b){if(a.name=b,7>=o)try{a.mergeAttributes(c.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}},Vb:function(a){o>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Tb:function(a){if(o){var b=a.style.width;a.style.width=0,a.style.width=b}},ic:function(a,b){a=l.a.c(a),b=l.a.c(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},R:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},mc:6===o,nc:7===o,oa:o,ob:function(a,b){for(var c=l.a.R(a.getElementsByTagName("input")).concat(l.a.R(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},fc:function(a){return"string"==typeof a&&(a=l.a.ta(a))?f&&f.parse?f.parse(a):new Function("return "+a)():null},Ya:function(a,b,c){if(!f||!f.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(l.a.c(a),b,c)},gc:function(a,b,d){d=d||{};var e=d.params||{},f=d.includeFields||this.mb,h=a;if("object"==typeof a&&"form"===l.a.B(a))for(var h=a.action,i=f.length-1;i>=0;i--)for(var j=l.a.ob(a,f[i]),k=j.length-1;k>=0;k--)e[j[k].name]=j[k].value;b=l.a.c(b);var m=c.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in b)a=c.createElement("input"),a.name=n,a.value=l.a.Ya(l.a.c(b[n])),m.appendChild(a);g(e,function(a,b){var d=c.createElement("input");d.name=a,d.value=b,m.appendChild(d)}),c.body.appendChild(m),d.submitter?d.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}}(),l.b("utils",l.a),l.b("utils.arrayForEach",l.a.r),l.b("utils.arrayFirst",l.a.hb),l.b("utils.arrayFilter",l.a.la),l.b("utils.arrayGetDistinctValues",l.a.ib),l.b("utils.arrayIndexOf",l.a.l),l.b("utils.arrayMap",l.a.ya),l.b("utils.arrayPushAll",l.a.$),l.b("utils.arrayRemoveItem",l.a.ma),l.b("utils.extend",l.a.extend),l.b("utils.fieldsIncludedWithJsonPost",l.a.mb),l.b("utils.getFormFields",l.a.ob),l.b("utils.peekObservable",l.a.Sa),l.b("utils.postJson",l.a.gc),l.b("utils.parseJson",l.a.fc),l.b("utils.registerEventHandler",l.a.q),l.b("utils.stringifyJson",l.a.Ya),l.b("utils.range",l.a.ic),l.b("utils.toggleDomNodeCssClass",l.a.ua),l.b("utils.triggerEvent",l.a.ha),l.b("utils.unwrapObservable",l.a.c),l.b("utils.objectForEach",l.a.A),l.b("utils.addOrRemoveItem",l.a.Y),l.b("unwrap",l.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),l.a.f=new function(){function b(b,f){var g=b[d];if(!g||"null"===g||!e[g]){if(!f)return a;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=b(c,!1);return e===a?a:e[d]},set:function(c,d,e){(e!==a||b(c,!1)!==a)&&(b(c,!0)[d]=e)},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},L:function(){return c++ +d}}},l.b("utils.domData",l.a.f),l.b("utils.domData.clear",l.a.f.clear),l.a.u=new function(){function b(b,c){var e=l.a.f.get(b,d);
return e===a&&c&&(e=[],l.a.f.set(b,d,e)),e}function c(a){var d=b(a,!1);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](a);if(l.a.f.clear(a),l.a.u.cleanExternalData(a),g[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var d=l.a.f.L(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{ja:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Ab:function(c,e){var f=b(c,!1);f&&(l.a.ma(f,e),0==f.length&&l.a.f.set(c,d,a))},M:function(a){if(f[a.nodeType]&&(c(a),g[a.nodeType])){var b=[];l.a.$(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;e>d;d++)c(b[d])}return a},removeNode:function(a){l.M(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(a){e&&"function"==typeof e.cleanData&&e.cleanData([a])}}},l.M=l.a.u.M,l.removeNode=l.a.u.removeNode,l.b("cleanNode",l.M),l.b("removeNode",l.removeNode),l.b("utils.domNodeDisposal",l.a.u),l.b("utils.domNodeDisposal.addDisposeCallback",l.a.u.ja),l.b("utils.domNodeDisposal.removeDisposeCallback",l.a.u.Ab),function(){l.a.Qa=function(a){var d;if(e){if(e.parseHTML)d=e.parseHTML(a)||[];else if((d=e.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var f=l.a.ta(a).toLowerCase();for(d=c.createElement("div"),f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+f[1]+a+f[2]+"</div>","function"==typeof b.innerShiv?d.appendChild(b.innerShiv(a)):d.innerHTML=a;f[0]--;)d=d.lastChild;d=l.a.R(d.lastChild.childNodes)}return d},l.a.Va=function(b,c){if(l.a.Fa(b),c=l.a.c(c),null!==c&&c!==a)if("string"!=typeof c&&(c=c.toString()),e)e(b).html(c);else for(var d=l.a.Qa(c),f=0;f<d.length;f++)b.appendChild(d[f])}}(),l.b("utils.parseHtmlFragment",l.a.Qa),l.b("utils.setHtml",l.a.Va),l.w=function(){function b(a,c){if(a)if(8==a.nodeType){var d=l.w.xb(a.nodeValue);null!=d&&c.push({Rb:a,cc:d})}else if(1==a.nodeType)for(var d=0,e=a.childNodes,f=e.length;f>d;d++)b(e[d],c)}var c={};return{Na:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"<!--[ko_memo:"+b+"]-->"},Hb:function(b,d){var e=c[b];if(e===a)throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[b]}},Ib:function(a,c){var d=[];b(a,d);for(var e=0,f=d.length;f>e;e++){var g=d[e].Rb,h=[g];c&&l.a.$(h,c),l.w.Hb(d[e].cc,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},xb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),l.b("memoization",l.w),l.b("memoization.memoize",l.w.Na),l.b("memoization.unmemoize",l.w.Hb),l.b("memoization.parseMemoText",l.w.xb),l.b("memoization.unmemoizeDomNodeAndDescendants",l.w.Ib),l.Ga={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return l.h({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b.timeout,d=b.method),e="notifyWhenChangesStop"==d?j:i,a.Ma(function(a){return e(a,c)})},notify:function(a,b){a.equalityComparer="always"==b?null:h}};var m={undefined:1,"boolean":1,number:1,string:1};l.b("extenders",l.Ga),l.Fb=function(a,b,c){this.target=a,this.za=b,this.Qb=c,this.sb=!1,l.s(this,"dispose",this.F)},l.Fb.prototype.F=function(){this.sb=!0,this.Qb()},l.N=function(){l.a.sa(this,l.N.fn),this.H={}};var n="change";g={V:function(a,b,c){var d=this;c=c||n;var e=new l.Fb(d,b?a.bind(b):a,function(){l.a.ma(d.H[c],e)});return d.o&&d.o(),d.H[c]||(d.H[c]=[]),d.H[c].push(e),e},notifySubscribers:function(a,b){if(b=b||n,this.qb(b))try{l.k.jb();for(var c,d=this.H[b].slice(0),e=0;c=d[e];++e)c.sb||c.za(a)}finally{l.k.end()}},Ma:function(a){var b,c,d,e=this,f=l.v(e);e.ia||(e.ia=e.notifySubscribers,e.notifySubscribers=function(a,b){b&&b!==n?"beforeChange"===b?e.bb(a):e.ia(a,b):e.cb(a)});var g=a(function(){f&&d===e&&(d=e()),b=!1,e.Ka(c,d)&&e.ia(c=d)});e.cb=function(a){b=!0,d=a,g()},e.bb=function(a){b||(c=a,e.ia(a,"beforeChange"))}},qb:function(a){return this.H[a]&&this.H[a].length},Wb:function(){var a=0;return l.a.A(this.H,function(b,c){a+=c.length}),a},Ka:function(a,b){return!this.equalityComparer||!this.equalityComparer(a,b)},extend:function(a){var b=this;return a&&l.a.A(a,function(a,c){var d=l.Ga[a];"function"==typeof d&&(b=d(b,c)||b)}),b}},l.s(g,"subscribe",g.V),l.s(g,"extend",g.extend),l.s(g,"getSubscriptionsCount",g.Wb),l.a.na&&l.a.ra(g,Function.prototype),l.N.fn=g,l.tb=function(a){return null!=a&&"function"==typeof a.V&&"function"==typeof a.notifySubscribers},l.b("subscribable",l.N),l.b("isSubscribable",l.tb),l.ca=l.k=function(){function a(a){d.push(c),c=a}function b(){c=d.pop()}var c,d=[],e=0;return{jb:a,end:b,zb:function(a){if(c){if(!l.tb(a))throw Error("Only subscribable things can act as dependencies");c.za(a,a.Kb||(a.Kb=++e))}},t:function(c,d,e){try{return a(),c.apply(d,e||[])}finally{b()}},fa:function(){return c?c.ba.fa():void 0},pa:function(){return c?c.pa:void 0}}}(),l.b("computedContext",l.ca),l.b("computedContext.getDependenciesCount",l.ca.fa),l.b("computedContext.isInitial",l.ca.pa),l.m=function(a){function b(){return 0<arguments.length?(b.Ka(c,arguments[0])&&(b.P(),c=arguments[0],b.O()),this):(l.k.zb(b),c)}var c=a;return l.N.call(b),l.a.sa(b,l.m.fn),b.o=function(){return c},b.O=function(){b.notifySubscribers(c)},b.P=function(){b.notifySubscribers(c,"beforeChange")},l.s(b,"peek",b.o),l.s(b,"valueHasMutated",b.O),l.s(b,"valueWillMutate",b.P),b},l.m.fn={equalityComparer:h};var o=l.m.hc="__ko_proto__";l.m.fn[o]=l.m,l.a.na&&l.a.ra(l.m.fn,l.N.fn),l.Ha=function(b,c){return null===b||b===a||b[o]===a?!1:b[o]===c?!0:l.Ha(b[o],c)},l.v=function(a){return l.Ha(a,l.m)},l.ub=function(a){return"function"==typeof a&&a[o]===l.m||"function"==typeof a&&a[o]===l.h&&a.Yb?!0:!1},l.b("observable",l.m),l.b("isObservable",l.v),l.b("isWriteableObservable",l.ub),l.T=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=l.m(a),l.a.sa(a,l.T.fn),a.extend({trackArrayChanges:!0})},l.T.fn={remove:function(a){for(var b=this.o(),c=[],d="function"!=typeof a||l.v(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.P(),c.push(f),b.splice(e,1),e--)}return c.length&&this.O(),c},removeAll:function(b){if(b===a){var c=this.o(),d=c.slice(0);return this.P(),c.splice(0,c.length),this.O(),d}return b?this.remove(function(a){return 0<=l.a.l(b,a)}):[]},destroy:function(a){var b=this.o(),c="function"!=typeof a||l.v(a)?function(b){return b===a}:a;this.P();for(var d=b.length-1;d>=0;d--)c(b[d])&&(b[d]._destroy=!0);this.O()},destroyAll:function(b){return b===a?this.destroy(function(){return!0}):b?this.destroy(function(a){return 0<=l.a.l(b,a)}):[]},indexOf:function(a){var b=this();return l.a.l(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.P(),this.o()[c]=b,this.O())}},l.a.r("pop push reverse shift sort splice unshift".split(" "),function(a){l.T.fn[a]=function(){var b=this.o();return this.P(),this.kb(b,a,arguments),b=b[a].apply(b,arguments),this.O(),b}}),l.a.r(["slice"],function(a){l.T.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),l.a.na&&l.a.ra(l.T.fn,l.m.fn),l.b("observableArray",l.T);var p="arrayChange";l.Ga.trackArrayChanges=function(a){function b(){if(!c){c=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&c!==n||++e,b.apply(this,arguments)};var f=[].concat(a.o()||[]);d=null,a.V(function(b){if(b=[].concat(b||[]),a.qb(p)){var c;(!d||e>1)&&(d=l.a.Aa(f,b,{sparse:!0})),c=d,c.length&&a.notifySubscribers(c,p)}f=b,d=null,e=0})}}if(!a.kb){var c=!1,d=null,e=0,f=a.V;a.V=a.subscribe=function(a,c,d){return d===p&&b(),f.apply(this,arguments)},a.kb=function(a,b,f){function g(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(c&&!e){var h=[],i=a.length,j=f.length,k=0;switch(b){case"push":k=i;case"unshift":for(b=0;j>b;b++)g("added",f[b],k+b);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":b=Math.min(Math.max(0,0>f[0]?i+f[0]:f[0]),i);for(var i=1===j?i:Math.min(b+(f[1]||0),i),j=b+j-2,k=Math.max(i,j),m=[],n=[],o=2;k>b;++b,++o)i>b&&n.push(g("deleted",a[b],b)),j>b&&m.push(g("added",f[o],b));l.a.nb(n,m);break;default:return}d=h}}}},l.ba=l.h=function(a,b,c){function d(){n=!0,l.a.A(u,function(a,b){b.F()}),u={},v=0,j=!1}function e(){var a=g.throttleEvaluation;a&&a>=0?(clearTimeout(w),w=setTimeout(f,a)):g.wa?g.wa():f()}function f(){if(!k&&!n){if(s&&s()){if(!m)return void t()}else m=!1;k=!0;try{var a=u,c=v;l.k.jb({za:function(b,d){n||(c&&a[d]?(u[d]=a[d],++v,delete a[d],--c):u[d]||(u[d]=b.V(e),++v))},ba:g,pa:!v}),u={},v=0;try{var d=b?o.call(b):o()}finally{l.k.end(),c&&l.a.A(a,function(a,b){b.F()}),j=!1}g.Ka(i,d)&&(g.notifySubscribers(i,"beforeChange"),i=d,g.wa&&!g.throttleEvaluation||g.notifySubscribers(i))}finally{k=!1}v||t()}}function g(){if(0<arguments.length){if("function"!=typeof p)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return p.apply(b,arguments),this}return j&&f(),l.k.zb(g),i}function h(){return j||v>0}var i,j=!0,k=!1,m=!1,n=!1,o=a;if(o&&"object"==typeof o?(c=o,o=c.read):(c=c||{},o||(o=c.read)),"function"!=typeof o)throw Error("Pass a function that returns the value of the ko.computed");var p=c.write,q=c.disposeWhenNodeIsRemoved||c.G||null,r=c.disposeWhen||c.Da,s=r,t=d,u={},v=0,w=null;b||(b=c.owner),l.N.call(g),l.a.sa(g,l.h.fn),g.o=function(){return j&&!v&&f(),i},g.fa=function(){return v},g.Yb="function"==typeof c.write,g.F=function(){t()},g.ga=h;var x=g.Ma;return g.Ma=function(a){x.call(g,a),g.wa=function(){g.bb(i),j=!0,g.cb(g)}},l.s(g,"peek",g.o),l.s(g,"dispose",g.F),l.s(g,"isActive",g.ga),l.s(g,"getDependenciesCount",g.fa),q&&(m=!0,q.nodeType&&(s=function(){return!l.a.Ea(q)||r&&r()})),!0!==c.deferEvaluation&&f(),q&&h()&&q.nodeType&&(t=function(){l.a.u.Ab(q,t),d()},l.a.u.ja(q,t)),g},l.$b=function(a){return l.Ha(a,l.h)},g=l.m.hc,l.h[g]=l.m,l.h.fn={equalityComparer:h},l.h.fn[g]=l.h,l.a.na&&l.a.ra(l.h.fn,l.N.fn),l.b("dependentObservable",l.h),l.b("computed",l.h),l.b("isComputed",l.$b),function(){function b(e,f,g){if(g=g||new d,e=f(e),"object"!=typeof e||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==a?i:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.ab=[]}l.Gb=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(a,function(a){for(var b=0;l.v(a)&&10>b;b++)a=a();return a})},l.toJSON=function(a,b,c){return a=l.Gb(a),l.a.Ya(a,b,c)},d.prototype={save:function(a,b){var c=l.a.l(this.keys,a);c>=0?this.ab[c]=b:(this.keys.push(a),this.ab.push(b))},get:function(b){return b=l.a.l(this.keys,b),b>=0?this.ab[b]:a}}}(),l.b("toJS",l.Gb),l.b("toJSON",l.toJSON),function(){l.i={p:function(b){switch(l.a.B(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?l.a.f.get(b,l.d.options.Pa):7>=l.a.oa?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex]):a;default:return b.value}},X:function(b,c,d){switch(l.a.B(b)){case"option":switch(typeof c){case"string":l.a.f.set(b,l.d.options.Pa,a),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:l.a.f.set(b,l.d.options.Pa,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":(""===c||null===c)&&(c=a);for(var e,f=-1,g=0,h=b.options.length;h>g;++g)if(e=l.i.p(b.options[g]),e==c||""==e&&c===a){f=g;break}(d||f>=0||c===a&&1<b.size)&&(b.selectedIndex=f);break;default:(null===c||c===a)&&(c=""),b.value=c}}}}(),l.b("selectExtensions",l.i),l.b("selectExtensions.readValue",l.i.p),l.b("selectExtensions.writeValue",l.i.X),l.g=function(){function a(a){a=l.a.ta(a),123===a.charCodeAt(0)&&(a=a.slice(1,-1));var b,c,g=[],h=a.match(d),i=0;if(h){h.push(",");for(var j,k=0;j=h[k];++k){var m=j.charCodeAt(0);if(44===m){if(0>=i){b&&g.push(c?{key:b,value:c.join("")}:{unknown:b}),b=c=i=0;continue}}else if(58===m){if(!c)continue}else if(47===m&&k&&1<j.length)(m=h[k-1].match(e))&&!f[m[0]]&&(a=a.substr(a.indexOf(j)+1),h=a.match(d),h.push(","),k=-1,j="/");else if(40===m||123===m||91===m)++i;else if(41===m||125===m||93===m)--i;else if(!b&&!c){b=34===m||39===m?j.slice(1,-1):j;continue}c?c.push(j):c=[j]}}return g}var b=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,f={"in":1,"return":1,"typeof":1},g={};return{aa:[],W:g,Ra:a,qa:function(d,e){function f(a,d){var e,k=l.getBindingHandler(a);(k&&k.preprocess?d=k.preprocess(d,a,f):1)&&((k=g[a])&&(e=d,0<=l.a.l(b,e)?e=!1:(k=e.match(c),e=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:e),k=e),k&&i.push("'"+a+"':function(_z){"+e+"=_z}"),j&&(d="function(){return "+d+" }"),h.push("'"+a+"':"+d))}e=e||{};var h=[],i=[],j=e.valueAccessors,k="string"==typeof d?a(d):d;return l.a.r(k,function(a){f(a.key||a.unknown,a.value)}),i.length&&f("_ko_property_writers","{"+i.join(",")+" }"),h.join(",")},bc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},va:function(a,b,c,d,e){a&&l.v(a)?!l.ub(a)||e&&a.o()===d||a(d):(a=b.get("_ko_property_writers"))&&a[c]&&a[c](d)}}}(),l.b("expressionRewriting",l.g),l.b("expressionRewriting.bindingRewriteValidators",l.g.aa),l.b("expressionRewriting.parseObjectLiteral",l.g.Ra),l.b("expressionRewriting.preProcessBindings",l.g.qa),l.b("expressionRewriting._twoWayBindings",l.g.W),l.b("jsonExpressionRewriting",l.g),l.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",l.g.qa),function(){function a(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=c&&"<!--test-->"===c.createComment("test").text,g=f?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};l.e={Q:{},childNodes:function(b){return a(b)?d(b):b.childNodes},da:function(b){if(a(b)){b=l.e.childNodes(b);for(var c=0,d=b.length;d>c;c++)l.removeNode(b[c])}else l.a.Fa(b)},U:function(b,c){if(a(b)){l.e.da(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else l.a.U(b,c)},yb:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},rb:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):l.e.yb(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},Xb:a,lc:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},wb:function(c){if(i[l.a.B(c)]){var d=c.firstChild;if(d)do if(1===d.nodeType){var f;f=d.firstChild;var g=null;if(f)do if(g)g.push(f);else if(a(f)){var h=e(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f]);while(f=f.nextSibling);if(f=g)for(g=d.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])}while(d=d.nextSibling)}}}}(),l.b("virtualElements",l.e),l.b("virtualElements.allowedBindings",l.e.Q),l.b("virtualElements.emptyNode",l.e.da),l.b("virtualElements.insertAfter",l.e.rb),l.b("virtualElements.prepend",l.e.yb),l.b("virtualElements.setDomNodeChildren",l.e.U),function(){l.J=function(){this.Nb={}},l.a.extend(l.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return l.e.Xb(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return l.e.lc(a);default:return null}},parseBindingsString:function(a,b,c,d){try{var e,f=this.Nb,g=a+(d&&d.valueAccessors||"");if(!(e=f[g])){var h,i="with($context){with($data||{}){return{"+l.g.qa(a,d)+"}}}";h=new Function("$context","$element",i),e=f[g]=h}return e(b,c)}catch(j){throw j.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+j.message,j}}}),l.J.instance=new l.J}(),l.b("bindingProvider",l.J),function(){function c(a){return function(){return a}}function d(a){return a()}function f(a){return l.a.Oa(l.k.t(a),function(b,c){return function(){return a()[c]}})}function g(a,b){return f(this.getBindings.bind(this,a,b))}function h(a,b,c){var d,e=l.e.firstChild(b),f=l.J.instance,g=f.preprocessNode;if(g){for(;d=e;)e=l.e.nextSibling(d),g.call(f,d);e=l.e.firstChild(b)}for(;d=e;)e=l.e.nextSibling(d),i(a,d,c)}function i(a,b,c){var d=!0,e=1===b.nodeType;e&&l.e.wb(b),(e&&c||l.J.instance.nodeHasBindings(b))&&(d=k(b,null,a,c).shouldBindDescendants),d&&!n[l.a.B(b)]&&h(a,b,!e)}function j(a){var b=[],c={},d=[];return l.a.A(a,function e(f){if(!c[f]){var g=l.getBindingHandler(f);g&&(g.after&&(d.push(f),l.a.r(g.after,function(b){if(a[b]){if(-1!==l.a.l(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,pb:g})),c[f]=!0}}),b}function k(b,c,e,f){var h=l.a.f.get(b,o);if(!c){if(h)throw Error("You cannot apply bindings multiple times to the same element.");l.a.f.set(b,o,!0)}!h&&f&&l.Eb(b,e);var i;if(c&&"function"!=typeof c)i=c;else{var k=l.J.instance,m=k.getBindingAccessors||g,n=l.h(function(){return(i=c?c(e,b):m.call(k,b,e))&&e.D&&e.D(),i},null,{G:b});i&&n.ga()||(n=null)}var p;if(i){var q=n?function(a){return function(){return d(n()[a])}}:function(a){return i[a]},r=function(){return l.a.Oa(n?n():i,d)};r.get=function(a){return i[a]&&d(q(a))},r.has=function(a){return a in i},f=j(i),l.a.r(f,function(c){var d=c.pb.init,f=c.pb.update,g=c.key;if(8===b.nodeType&&!l.e.Q[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&l.k.t(function(){var c=d(b,q(g),r,e.$data,e);if(c&&c.controlsDescendantBindings){if(p!==a)throw Error("Multiple bindings ("+p+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=g}}),"function"==typeof f&&l.h(function(){f(b,q(g),r,e.$data,e)},null,{G:b})}catch(h){throw h.message='Unable to process binding "'+g+": "+i[g]+'"\nMessage: '+h.message,h}})}return{shouldBindDescendants:p===a}}function m(a){return a&&a instanceof l.I?a:new l.I(a)}l.d={};var n={script:!0};l.getBindingHandler=function(a){return l.d[a]},l.I=function(b,c,d,e){var f,g=this,h="function"==typeof b&&!l.v(b),i=l.h(function(){var a=h?b():b,f=l.a.c(a);return c?(c.D&&c.D(),l.a.extend(g,c),i&&(g.D=i)):(g.$parents=[],g.$root=f,g.ko=l),g.$rawData=a,g.$data=f,d&&(g[d]=f),e&&e(g,c,f),g.$data},null,{Da:function(){return f&&!l.a.eb(f)},G:!0});i.ga()&&(g.D=i,i.equalityComparer=null,f=[],i.Jb=function(b){f.push(b),l.a.u.ja(b,function(b){l.a.ma(f,b),f.length||(i.F(),g.D=i=a)})})},l.I.prototype.createChildContext=function(a,b,c){return new l.I(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},l.I.prototype.extend=function(a){return new l.I(this.D||this.$data,this,null,function(b,c){b.$rawData=c.$rawData,l.a.extend(b,"function"==typeof a?a():a)})};var o=l.a.f.L(),p=l.a.f.L();l.Eb=function(a,b){return 2!=arguments.length?l.a.f.get(a,p):(l.a.f.set(a,p,b),void(b.D&&b.D.Jb(a)))},l.xa=function(a,b,c){return 1===a.nodeType&&l.e.wb(a),k(a,b,m(c),!0)},l.Lb=function(a,b,d){return d=m(d),l.xa(a,"function"==typeof b?f(b.bind(null,d,a)):l.a.Oa(b,c),d)},l.gb=function(a,b){1!==b.nodeType&&8!==b.nodeType||h(m(a),b,!0)},l.fb=function(a,c){if(!e&&b.jQuery&&(e=b.jQuery),c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");c=c||b.document.body,i(m(a),c,!0)},l.Ca=function(b){switch(b.nodeType){case 1:case 8:var c=l.Eb(b);if(c)return c;if(b.parentNode)return l.Ca(b.parentNode)}return a},l.Pb=function(b){return(b=l.Ca(b))?b.$data:a},l.b("bindingHandlers",l.d),l.b("applyBindings",l.fb),l.b("applyBindingsToDescendants",l.gb),l.b("applyBindingAccessorsToNode",l.xa),l.b("applyBindingsToNode",l.Lb),l.b("contextFor",l.Ca),l.b("dataFor",l.Pb)}();var q={"class":"className","for":"htmlFor"};l.d.attr={update:function(b,c){var d=l.a.c(c())||{};l.a.A(d,function(c,d){d=l.a.c(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c),8>=l.a.oa&&c in q?(c=q[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString()),"name"===c&&l.a.Cb(b,e?"":d.toString())})}},function(){l.d.checked={after:["value","attr"],init:function(b,c,d){function e(){return d.has("checkedValue")?l.a.c(d.get("checkedValue")):b.value}function f(){var a=b.checked,f=m?e():a;if(!l.ca.pa()&&(!i||a)){var g=l.k.t(c);j?k!==f?(a&&(l.a.Y(g,f,!0),l.a.Y(g,k,!1)),k=f):l.a.Y(g,f,a):l.g.va(g,d,"checked",f,!0)}}function g(){var a=l.a.c(c());b.checked=j?0<=l.a.l(a,e()):h?a:e()===a}var h="checkbox"==b.type,i="radio"==b.type;if(h||i){var j=h&&l.a.c(c())instanceof Array,k=j?e():a,m=i||j;i&&!b.name&&l.d.uniqueName.init(b,function(){return!0}),l.ba(f,null,{G:b}),l.a.q(b,"click",f),l.ba(g,null,{G:b})}}},l.g.W.checked=!0,l.d.checkedValue={update:function(a,b){a.value=l.a.c(b())}}}(),l.d.css={update:function(a,b){var c=l.a.c(b());"object"==typeof c?l.a.A(c,function(b,c){c=l.a.c(c),l.a.ua(a,b,c)}):(c=String(c||""),l.a.ua(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,l.a.ua(a,c,!0))}},l.d.enable={update:function(a,b){var c=l.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},l.d.disable={update:function(a,b){l.d.enable.update(a,function(){return!l.a.c(b())})}},l.d.event={init:function(a,b,c,d,e){var f=b()||{};l.a.A(f,function(f){"string"==typeof f&&l.a.q(a,f,function(a){var g,h=b()[f];if(h){try{var i=l.a.R(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===c.get(f+"Bubble")&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},l.d.foreach={vb:function(a){return function(){var b=a(),c=l.a.Sa(b);return c&&"number"!=typeof c.length?(l.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:l.K.Ja}):{foreach:b,templateEngine:l.K.Ja}}},init:function(a,b){return l.d.template.init(a,l.d.foreach.vb(b))},update:function(a,b,c,d,e){return l.d.template.update(a,l.d.foreach.vb(b),c,d,e)}},l.g.aa.foreach=!1,l.e.Q.foreach=!0,l.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(g){f=e.body}d=f===a}e=b(),l.g.va(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);l.a.q(a,"focus",e),l.a.q(a,"focusin",e),l.a.q(a,"blur",f),l.a.q(a,"focusout",f)},update:function(a,b){var c=!!l.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),l.k.t(l.a.ha,null,[a,c?"focusin":"focusout"]))}},l.g.W.hasfocus=!0,l.d.hasFocus=l.d.hasfocus,l.g.W.hasFocus=!0,l.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Va(a,b())}},k("if"),k("ifnot",!1,!0),k("with",!0,!1,function(a,b){return a.createChildContext(b)});var r={};l.d.options={init:function(a){if("select"!==l.a.B(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return l.a.la(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(a,c){if(m.length){var d=0<=l.a.l(m,l.i.p(c[0]));l.a.Db(c[0],d),n&&!d&&l.k.t(l.a.ha,null,[b,"change"])}}var h=0!=b.length&&b.multiple?b.scrollTop:null,i=l.a.c(c()),j=d.get("optionsIncludeDestroyed");c={};var k,m;m=b.multiple?l.a.ya(e(),l.i.p):0<=b.selectedIndex?[l.i.p(b.options[b.selectedIndex])]:[],i&&("undefined"==typeof i.length&&(i=[i]),k=l.a.la(i,function(b){return j||b===a||null===b||!l.a.c(b._destroy)}),d.has("optionsCaption")&&(i=l.a.c(d.get("optionsCaption")),null!==i&&i!==a&&k.unshift(r)));var n=!1;c.beforeRemove=function(a){b.removeChild(a)},i=g,d.has("optionsAfterRender")&&(i=function(b,c){g(0,c),l.k.t(d.get("optionsAfterRender"),null,[c[0],b!==r?b:a])}),l.a.Ua(b,k,function(c,e,g){return g.length&&(m=g[0].selected?[l.i.p(g[0])]:[],n=!0),e=b.ownerDocument.createElement("option"),c===r?(l.a.Xa(e,d.get("optionsCaption")),l.i.X(e,a)):(g=f(c,d.get("optionsValue"),c),l.i.X(e,l.a.c(g)),c=f(c,d.get("optionsText"),g),l.a.Xa(e,c)),[e]},c,i),l.k.t(function(){d.get("valueAllowUnset")&&d.has("value")?l.i.X(b,l.a.c(d.get("value")),!0):(b.multiple?m.length&&e().length<m.length:m.length&&0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex])!==m[0]:m.length||0<=b.selectedIndex)&&l.a.ha(b,"change")}),l.a.Tb(b),h&&20<Math.abs(h-b.scrollTop)&&(b.scrollTop=h)}},l.d.options.Pa=l.a.f.L(),l.d.selectedOptions={after:["options","foreach"],init:function(a,b,c){l.a.q(a,"change",function(){var d=b(),e=[];l.a.r(a.getElementsByTagName("option"),function(a){a.selected&&e.push(l.i.p(a))}),l.g.va(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=l.a.B(a))throw Error("values binding applies only to SELECT elements");var c=l.a.c(b());c&&"number"==typeof c.length&&l.a.r(a.getElementsByTagName("option"),function(a){var b=0<=l.a.l(c,l.i.p(a));l.a.Db(a,b)})}},l.g.W.selectedOptions=!0,l.d.style={update:function(a,b){var c=l.a.c(b()||{});l.a.A(c,function(b,c){c=l.a.c(c),a.style[b]=c||""})}},l.d.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");l.a.q(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{!0!==d&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},l.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Xa(a,b())}},l.e.Q.text=!0,l.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++l.d.uniqueName.Ob;l.a.Cb(a,c)}}},l.d.uniqueName.Ob=0,l.d.value={after:["options","foreach"],init:function(a,b,c){function d(){g=!1;var d=b(),e=l.i.p(a);l.g.va(d,c,"value",e)}var e=["change"],f=c.get("valueUpdate"),g=!1;f&&("string"==typeof f&&(f=[f]),l.a.$(e,f),e=l.a.ib(e)),!l.a.oa||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=l.a.l(e,"propertychange")||(l.a.q(a,"propertychange",function(){g=!0}),l.a.q(a,"focus",function(){g=!1}),l.a.q(a,"blur",function(){g&&d()})),l.a.r(e,function(b){var c=d;l.a.kc(b,"after")&&(c=function(){setTimeout(d,0)},b=b.substring(5)),l.a.q(a,b,c)})},update:function(a,b,c){var d=l.a.c(b());if(b=l.i.p(a),d!==b)if("select"===l.a.B(a)){var e=c.get("valueAllowUnset");c=function(){l.i.X(a,d,e)},c(),e||d===l.i.p(a)?setTimeout(c,0):l.k.t(l.a.ha,null,[a,"change"])}else l.i.X(a,d)}},l.g.W.value=!0,l.d.visible={update:function(a,b){var c=l.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){l.d[a]={init:function(b,c,d,e,f){return l.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e,f)}}}("click"),l.C=function(){},l.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},l.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},l.C.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||c;var d=b.getElementById(a);if(!d)throw Error("Cannot find template with ID "+a);return new l.n.j(d)}if(1==a.nodeType||8==a.nodeType)return new l.n.Z(a);throw Error("Unknown template type: "+a)},l.C.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},l.C.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")},l.C.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},l.b("templateEngine",l.C),l.Za=function(){function a(a,b,c,d){a=l.g.Ra(a);for(var e=l.g.aa,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+l.g.qa(a,{valueAccessors:!0})+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{Ub:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return l.Za.dc(a,b)},c)},dc:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"<!-- ko -->","#comment",e)})},Mb:function(a,b){return l.w.Na(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&l.xa(e,a,d)})}}}(),l.b("__tr_ambtns",l.Za.Mb),function(){l.n={},l.n.j=function(a){this.j=a},l.n.j.prototype.text=function(){var a=l.a.B(this.j),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.j[a];var b=arguments[0];"innerHTML"===a?l.a.Va(this.j,b):this.j[a]=b};var b=l.a.f.L()+"_";l.n.j.prototype.data=function(a){return 1===arguments.length?l.a.f.get(this.j,b+a):void l.a.f.set(this.j,b+a,arguments[1])};var c=l.a.f.L();l.n.Z=function(a){this.j=a},l.n.Z.prototype=new l.n.j,l.n.Z.prototype.text=function(){if(0==arguments.length){var b=l.a.f.get(this.j,c)||{};return b.$a===a&&b.Ba&&(b.$a=b.Ba.innerHTML),b.$a}l.a.f.set(this.j,c,{$a:arguments[0]})},l.n.j.prototype.nodes=function(){return 0==arguments.length?(l.a.f.get(this.j,c)||{}).Ba:void l.a.f.set(this.j,c,{Ba:arguments[0]})},l.b("templateSources",l.n),l.b("templateSources.domElement",l.n.j),l.b("templateSources.anonymousTemplate",l.n.Z)}(),function(){function b(a,b,c){var d;for(b=l.e.nextSibling(b);a&&(d=a)!==b;)a=l.e.nextSibling(d),c(d,a)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=l.J.instance,h=g.preprocessNode;if(h){if(b(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),l.a.ea(a,f))}b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.fb(c,a)}),b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.w.Ib(a,[c])}),l.a.ea(a,f)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,g,h){h=h||{};
var i=a&&d(a),i=i&&i.ownerDocument,j=h.templateEngine||f;if(l.Za.Ub(e,j,i),e=j.renderTemplate(e,g,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":l.e.U(a,e),i=!0;break;case"replaceNode":l.a.Bb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,g),h.afterRender&&l.k.t(h.afterRender,null,[e,g.$data])),e}var f;l.Wa=function(b){if(b!=a&&!(b instanceof l.C))throw Error("templateEngine must inherit from ko.templateEngine");f=b},l.Ta=function(b,c,g,h,i){if(g=g||{},(g.templateEngine||f)==a)throw Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var j=d(h);return l.h(function(){var a=c&&c instanceof l.I?c:new l.I(l.a.c(c)),f=l.v(b)?b():"function"==typeof b?b(a.$data,a):b,a=e(h,i,f,a,g);"replaceNode"==i&&(h=a,j=d(h))},null,{Da:function(){return!j||!l.a.Ea(j)},G:j&&"replaceNode"==i?j.parentNode:j})}return l.w.Na(function(a){l.Ta(b,c,g,a,"replaceNode")})},l.jc=function(b,d,f,g,h){function i(a,b){c(b,k),f.afterRender&&f.afterRender(b,a)}function j(a,c){k=h.createChildContext(a,f.as,function(a){a.$index=c});var d="function"==typeof b?b(a,k):b;return e(null,"ignoreTargetNode",d,k,f)}var k;return l.h(function(){var b=l.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]),b=l.a.la(b,function(b){return f.includeDestroyed||b===a||null===b||!l.a.c(b._destroy)}),l.k.t(l.a.Ua,null,[g,b,j,f,i])},null,{G:g})};var g=l.a.f.L();l.d.template={init:function(a,b){var c=l.a.c(b());return"string"==typeof c||c.name?l.e.da(a):(c=l.e.childNodes(a),c=l.a.ec(c),new l.n.Z(a).nodes(c)),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var h,i=c();c=l.a.c(i),d=!0,e=null,"string"==typeof c?c={}:(i=c.name,"if"in c&&(d=l.a.c(c["if"])),d&&"ifnot"in c&&(d=!l.a.c(c.ifnot)),h=l.a.c(c.data)),"foreach"in c?e=l.jc(i||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(h,c.as):f,e=l.Ta(i||b,f,c,b)):l.e.da(b),f=e,(h=l.a.f.get(b,g))&&"function"==typeof h.F&&h.F(),l.a.f.set(b,g,f&&f.ga()?f:a)}},l.g.aa.template=function(a){return a=l.g.Ra(a),1==a.length&&a[0].unknown||l.g.bc(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},l.e.Q.template=!0}(),l.b("setTemplateEngine",l.Wa),l.b("renderTemplate",l.Ta),l.a.nb=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||c>d)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g.value===h.value){g.moved=h.index,h.moved=g.index,b.splice(f,1),d=f=0;break}d+=f}}},l.a.Aa=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,m=Math.max,n=[],o=a.length,p=b.length,q=p-o||1,r=o+p+1;for(f=0;o>=f;f++)for(i=h,n.push(h=[]),j=k(p,f+q),g=m(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||r,h[g-1]||r)+1:g+1:f+1;for(k=[],m=[],q=[],f=o,g=p;f||g;)p=n[f][g]-1,g&&p===n[f][g-1]?m.push(k[k.length]={status:c,value:b[--g],index:g}):f&&p===n[f-1][g]?q.push(k[k.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||k.push({status:"retained",value:b[g]}));return l.a.nb(m,q,10*o),k.reverse()}return function(b,c,d){return d="boolean"==typeof d?{dontLimitMoves:d}:d||{},b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),l.b("utils.compareArrays",l.a.Aa),function(){function b(b,c,d,e,f){var g=[],h=l.h(function(){var a=c(d,f,l.a.ea(g,b))||[];0<g.length&&(l.a.Bb(g,a),e&&l.k.t(e,null,[d,a,f])),g.length=0,l.a.$(g,a)},null,{G:b,Da:function(){return!l.a.eb(g)}});return{S:g,h:h.ga()?h:a}}var c=l.a.f.L();l.a.Ua=function(d,e,f,g,h){function i(a,b){u=m[b],r!==b&&(x[a]=u),u.Ia(r++),l.a.ea(u.S,d),p.push(u),t.push(u)}function j(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&l.a.r(b[c].S,function(d){a(d,c,b[c].ka)})}e=e||[],g=g||{};var k=l.a.f.get(d,c)===a,m=l.a.f.get(d,c)||[],n=l.a.ya(m,function(a){return a.ka}),o=l.a.Aa(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===a&&(u=m[q],u.h&&u.h.F(),s.push.apply(s,l.a.ea(u.S,d)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==a?i(y,w):(u={ka:v.value,Ia:l.m(r++)},p.push(u),t.push(u),k||(n[y]=u))}j(g.beforeMove,x),l.a.r(s,g.beforeRemove?l.M:l.removeNode);for(var z,y=0,k=l.e.firstChild(d);u=t[y];y++){for(u.S||l.a.extend(u,b(d,f,u.ka,h,u.Ia)),q=0;o=u.S[q];k=o.nextSibling,z=o,q++)o!==k&&l.e.rb(d,o,z);!u.Zb&&h&&(h(u.ka,u.S,u.Ia),u.Zb=!0)}j(g.beforeRemove,e),j(g.afterMove,x),j(g.afterAdd,n),l.a.f.set(d,c,p)}}(),l.b("utils.setDomNodeChildrenFromArrayMapping",l.a.Ua),l.K=function(){this.allowTemplateRewriting=!1},l.K.prototype=new l.C,l.K.prototype.renderTemplateSource=function(a){var b=(9>l.a.oa?0:a.nodes)?a.nodes():null;return b?l.a.R(b.cloneNode(!0).childNodes):(a=a.text(),l.a.Qa(a))},l.K.Ja=new l.K,l.Wa(l.K.Ja),l.b("nativeTemplateEngine",l.K),function(){l.La=function(){var a=this.ac=function(){if(!e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,d,f){if(f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var g=b.data("precompiled");return g||(g=b.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),b.data("precompiled",g)),b=[d.$data],d=e.extend({koBindingContext:d},f.templateOptions),d=e.tmpl(g,b,d),d.appendTo(c.createElement("div")),e.fragments={},d},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){c.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},a>0&&(e.tmpl.tag.ko_code={open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},l.La.prototype=new l.C;var a=new l.La;0<a.ac&&l.Wa(a),l.b("jqueryTmplTemplateEngine",l.La)}()})}()}(),!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko.validation={})}(function(a,b){function c(a){var b="max"===a;return function(c,d){if(f.utils.isEmptyVal(c))return!0;var e,g;void 0===d.typeAttr?(g="text",e=d):(g=d.typeAttr,e=d.value),isNaN(e)||(g="number");var h,i,j;switch(g.toLowerCase()){case"week":if(h=/^(\d{4})-W(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"month":if(h=/^(\d{4})-(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"number":case"range":return b?!isNaN(c)&&parseFloat(c)<=parseFloat(e):!isNaN(c)&&parseFloat(c)>=parseFloat(e);default:return b?e>=c:c>=e}}}function d(a,b,c){return b.validator(a(),void 0===c.params?!0:h(c.params))?!0:(a.setError(f.formatMessage(c.message||b.message,h(c.params),a)),!1)}function e(a,b,c){a.isValidating(!0);var d=function(d){var e=!1,g="";return a.__valid__()?(d.message?(e=d.isValid,g=d.message):e=d,e||(a.error(f.formatMessage(g||c.message||b.message,h(c.params),a)),a.__valid__(e)),void a.isValidating(!1)):void a.isValidating(!1)};b.validator(a(),h(c.params||!0),d)}if(void 0===typeof a)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";a.validation=b;var f=a.validation,g=a.utils,h=g.unwrapObservable,i=g.arrayForEach,j=g.extend,k={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},l=j({},k);l.html5Attributes=["required","pattern","min","max","step"],l.html5InputTypes=["email","number","date"],l.reset=function(){j(l,k)},f.configuration=l,f.utils=function(){var a=(new Date).getTime(),b={},c="__ko_validation__";return{isArray:function(a){return a.isArray||"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return null!==a&&"object"==typeof a},isObservableArray:function(a){return!!a&&"function"==typeof a.remove&&"function"==typeof a.removeAll&&"function"==typeof a.destroy&&"function"==typeof a.destroyAll&&"function"==typeof a.indexOf&&"function"==typeof a.replace},values:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},getValue:function(a){return"function"==typeof a?a():a},hasAttribute:function(a,b){return null!==a.getAttribute(b)},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){return a.setAttribute(b,c)},isValidatable:function(a){return!!(a&&a.rules&&a.isValid&&a.isModified)},insertAfter:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},newId:function(){return a+=1},getConfigOptions:function(a){var b=f.utils.contextFor(a);return b||f.configuration},setDomData:function(a,d){var e=a[c];e||(a[c]=e=f.utils.newId()),b[e]=d},getDomData:function(a){var d=a[c];return d?b[d]:void 0},contextFor:function(a){switch(a.nodeType){case 1:case 8:var b=f.utils.getDomData(a);if(b)return b;if(a.parentNode)return f.utils.contextFor(a.parentNode)}return void 0},isEmptyVal:function(a){return void 0===a?!0:null===a?!0:""===a?!0:void 0},getOriginalElementTitle:function(a){var b=f.utils.getAttribute(a,"data-orig-title"),c=a.title,d=f.utils.hasAttribute(a,"data-orig-title");return d?b:c},async:function(a){window.setImmediate?window.setImmediate(a):window.setTimeout(a,0)},forEach:function(a,b){if(f.utils.isArray(a))return i(a,b);for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}}}();var m=function(){function b(a){i(a.subscriptions,function(a){a.dispose()}),a.subscriptions=[]}function c(a){a.options.deep&&(i(a.flagged,function(a){delete a.__kv_traversed}),a.flagged.length=0),a.options.live||b(a)}function d(a,d){d.validatables=[],b(d),e(a,d),c(d)}function e(b,c,d){var f=[],g=b.peek?b.peek():b;b.__kv_traversed!==!0&&(c.options.deep&&(b.__kv_traversed=!0,c.flagged.push(b)),d=void 0!==d?d:c.options.deep?1:-1,a.isObservable(b)&&(b.isValid||b.extend({validatable:!0}),c.validatables.push(b),c.options.live&&n.isObservableArray(b)&&c.subscriptions.push(b.subscribe(function(){c.graphMonitor.valueHasMutated()}))),g&&!g._destroy&&(n.isArray(g)?f=g:n.isObject(g)&&(f=n.values(g))),0!==d&&n.forEach(f,function(a){a&&!a.nodeType&&e(a,c,d+1)}))}function k(a){var b=[];return i(a,function(a){a.isValid()||b.push(a.error())}),b}var l=0,m=f.configuration,n=f.utils;return{init:function(a,b){l>0&&!b||(a=a||{},a.errorElementClass=a.errorElementClass||a.errorClass||m.errorElementClass,a.errorMessageClass=a.errorMessageClass||a.errorClass||m.errorMessageClass,j(m,a),m.registerExtenders&&f.registerExtenders(),l=1)},configure:function(a){f.init(a)},reset:f.configuration.reset,group:function(b,c){c=j(j({},m.grouping),c);var e={options:c,graphMonitor:a.observable(),flagged:[],subscriptions:[],validatables:[]},f=null;return c.observable?(d(b,e),f=a.computed(function(){return e.graphMonitor(),d(b,e),k(e.validatables)})):f=function(){return d(b,e),k(e.validatables)},f.showAllMessages=function(a){void 0===a&&(a=!0),f(),i(e.validatables,function(b){b.isModified(a)})},b.errors=f,b.isValid=function(){return 0===b.errors().length},b.isAnyMessageShown=function(){var a=!1;return f(),a=!!g.arrayFirst(e.validatables,function(a){return!a.isValid()&&a.isModified()})},f},formatMessage:function(a,b,c){return"function"==typeof a?a(b,c):a.replace(/\{0\}/gi,h(b))},addRule:function(a,b){return a.extend({validatable:!0}),a.rules.push(b),a},addAnonymousRule:function(a,b){void 0===b.message&&(b.message="Error"),b.onlyIf&&(b.condition=b.onlyIf),f.addRule(a,b)},addExtender:function(b){a.extenders[b]=function(a,c){return c&&(c.message||c.onlyIf)?f.addRule(a,{rule:b,message:c.message,params:n.isEmptyVal(c.params)?!0:c.params,condition:c.onlyIf}):f.addRule(a,{rule:b,params:c})}},registerExtenders:function(){if(m.registerExtenders)for(var b in f.rules)f.rules.hasOwnProperty(b)&&(a.extenders[b]||f.addExtender(b))},insertValidationMessage:function(a){var b=document.createElement("SPAN");return b.className=n.getConfigOptions(a).errorMessageClass,n.insertAfter(a,b),b},parseInputValidationAttributes:function(a,b){i(f.configuration.html5Attributes,function(c){if(n.hasAttribute(a,c)){var d=a.getAttribute(c)||!0;if("min"===c||"max"===c){var e=a.getAttribute("type");"undefined"!=typeof e&&e||(e="text"),d={typeAttr:e,value:d}}f.addRule(b(),{rule:c,params:d})}});var c=a.getAttribute("type");i(f.configuration.html5InputTypes,function(a){a===c&&f.addRule(b(),{rule:"date"===a?"dateISO":a,params:!0})})},writeInputValidationAttributes:function(a,b){var c=b();if(c&&c.rules){var d=c.rules();i(f.configuration.html5Attributes,function(b){var c,e=g.arrayFirst(d,function(a){return a.rule.toLowerCase()===b.toLowerCase()});e&&(c=e.params,"pattern"===e.rule&&e.params instanceof RegExp&&(c=e.params.source),a.setAttribute(b,c))}),d=null}},makeBindingHandlerValidatable:function(b){var c=a.bindingHandlers[b].init;a.bindingHandlers[b].init=function(b,d,e,f,g){return c(b,d,e,f,g),a.bindingHandlers.validationCore.init(b,d,e,f,g)}},setRules:function(b,c){var d=function(b,c){if(b&&c)for(var e in c)if(c.hasOwnProperty(e)){var g=c[e];if(b[e]){var i=b[e],j=h(i),k={},l={};for(var m in g)g.hasOwnProperty(m)&&(f.rules[m]?k[m]=g[m]:l[m]=g[m]);if(a.isObservable(i)&&i.extend(k),j&&n.isArray(j))for(var o=0;o<j.length;o++)d(j[o],l);else d(j,l)}}};d(b,c)}}}();j(a.validation,m),f.rules={},f.rules.required={validator:function(a,b){var c,d=/^\s+|\s+$/g;return void 0===a||null===a?!b:(c=a,"string"==typeof a&&(c=a.replace(d,"")),b?(c+"").length>0:!0)},message:"This field is required."},f.rules.min={validator:c("min"),message:"Please enter a value greater than or equal to {0}."},f.rules.max={validator:c("max"),message:"Please enter a value less than or equal to {0}."},f.rules.minLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length>=b},message:"Please enter at least {0} characters."},f.rules.maxLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length<=b},message:"Please enter no more than {0} characters."},f.rules.pattern={validator:function(a,b){return f.utils.isEmptyVal(a)||null!==a.toString().match(b)},message:"Please check this value."},f.rules.step={validator:function(a,b){if(f.utils.isEmptyVal(a)||"any"===b)return!0;var c=100*a%(100*b);return Math.abs(c)<1e-5||Math.abs(1-c)<1e-5},message:"The value must increment by {0}"},f.rules.email={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+)*)|((")(((( |	)*(\x0d\x0a))?( |	)+)?(([--]|\x21|[#-\x5b]|[\x5d-~]|[ -퟿豈-﷏ﷰ-￯])|(\\([-	\x0d-]|[ -퟿豈-﷏ﷰ-￯]))))*((( |	)*(\x0d\x0a))?( |	)+)?(")))@((([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])))\.)+(([a-z]|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|[ -퟿豈-﷏ﷰ-￯])))$/i.test(a):!0},message:"Please enter a proper email address"},f.rules.date={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&!/Invalid|NaN/.test(new Date(a)):!0},message:"Please enter a proper date"},f.rules.dateISO={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a):!0},message:"Please enter a proper date"},f.rules.number={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a):!0},message:"Please enter a number"},f.rules.digit={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d+$/.test(a):!0},message:"Please enter a digit"},f.rules.phoneUS={validator:function(a,b){return b?f.utils.isEmptyVal(a)?!0:"string"!=typeof a?!1:(a=a.replace(/\s+/g,""),b&&a.length>9&&a.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Please specify a valid phone number"},f.rules.equal={validator:function(a,b){var c=b;return a===f.utils.getValue(c)},message:"Values must equal"},f.rules.notEqual={validator:function(a,b){var c=b;return a!==f.utils.getValue(c)},message:"Please choose another value."},f.rules.unique={validator:function(a,b){var c=f.utils.getValue(b.collection),d=f.utils.getValue(b.externalValue),e=0;return a&&c?(g.arrayFilter(c,function(c){a===(b.valueAccessor?b.valueAccessor(c):c)&&e++}),(d?1:2)>e):!0},message:"Please make sure the value is unique."},function(){f.registerExtenders()}(),a.bindingHandlers.validationCore=function(){return{init:function(b,c){var d=f.utils.getConfigOptions(b),e=c();if(d.parseInputAttributes&&f.utils.async(function(){f.parseInputValidationAttributes(b,c)}),d.insertMessages&&f.utils.isValidatable(e)){var g=f.insertValidationMessage(b);d.messageTemplate?a.renderTemplate(d.messageTemplate,{field:e},null,g,"replaceNode"):a.applyBindingsToNode(g,{validationMessage:e})}d.writeInputAttributes&&f.utils.isValidatable(e)&&f.writeInputValidationAttributes(b,c),d.decorateInputElement&&f.utils.isValidatable(e)&&a.applyBindingsToNode(b,{validationElement:e})}}}(),f.makeBindingHandlerValidatable("value"),f.makeBindingHandlerValidatable("checked"),a.bindingHandlers.validationMessage={update:function(b,c){var d=c(),e=f.utils.getConfigOptions(b),i=(h(d),!1),j=!1;if(!d.isValid||!d.isModified)throw new Error("Observable is not validatable");i=d.isModified(),j=d.isValid();var k=null;(!e.messagesOnModified||i)&&(k=j?null:d.error);var l=!e.messagesOnModified||i?!j:!1,m="none"!==b.style.display;e.allowHtmlMessages?g.setHtml(b,k):a.bindingHandlers.text.update(b,function(){return k}),m&&!l?b.style.display="none":!m&&l&&(b.style.display="")}},a.bindingHandlers.validationElement={update:function(b,c,d){var e=c(),g=f.utils.getConfigOptions(b),i=(h(e),!1),j=!1;if(!e.isValid||!e.isModified)throw new Error("Observable is not validatable");i=e.isModified(),j=e.isValid();var k=function(){var a={},b=!g.decorateElementOnModified||i?!j:!1;return a[g.errorElementClass]=b,a};a.bindingHandlers.css.update(b,k,d),g.errorsAsTitle&&a.bindingHandlers.attr.update(b,function(){var a=!g.errorsAsTitleOnModified||i,c=f.utils.getOriginalElementTitle(b);return a&&!j?{title:e.error,"data-orig-title":c}:!a||j?{title:c,"data-orig-title":null}:void 0})}},a.bindingHandlers.validationOptions=function(){return{init:function(a,b){var c=h(b());if(c){var d=j({},f.configuration);j(d,c),f.utils.setDomData(a,d)}}}}(),a.extenders.validation=function(a,b){return i(f.utils.isArray(b)?b:[b],function(b){f.addAnonymousRule(a,b)}),a},a.extenders.validatable=function(b,c){if(f.utils.isObject(c)||(c={enable:c}),"enable"in c||(c.enable=!0),c.enable&&!f.utils.isValidatable(b)){var d=f.configuration.validate||{},e={throttleEvaluation:c.throttle||d.throttle};b.error=a.observable(null),b.rules=a.observableArray(),b.isValidating=a.observable(!1),b.__valid__=a.observable(!0),b.isModified=a.observable(!1),b.isValid=a.computed(b.__valid__),b.setError=function(a){b.error(a),b.__valid__(!1)},b.clearError=function(){return b.error(null),b.__valid__(!0),b};var g=b.subscribe(function(){b.isModified(!0)}),h=a.computed(j({read:function(){return b(),b.rules(),f.validateObservable(b),!0}},e));j(h,e),b._disposeValidation=function(){b.isValid.dispose(),b.rules.removeAll(),b.isModified.getSubscriptionsCount()>0&&(b.isModified._subscriptions.change=[]),b.isValidating.getSubscriptionsCount()>0&&(b.isValidating._subscriptions.change=[]),b.__valid__.getSubscriptionsCount()>0&&(b.__valid__._subscriptions.change=[]),g.dispose(),h.dispose(),delete b.rules,delete b.error,delete b.isValid,delete b.isValidating,delete b.__valid__,delete b.isModified}}else c.enable===!1&&b._disposeValidation&&b._disposeValidation();return b},f.validateObservable=function(a){for(var b,c,g=0,h=a.rules(),i=h.length;i>g;g++)if(c=h[g],!c.condition||c.condition())if(b=c.rule?f.rules[c.rule]:c,b.async||c.async)e(a,b,c);else if(!d(a,b,c))return!1;return a.clearError(),!0},f.localize=function(a){var b;for(b in a)f.rules.hasOwnProperty(b)&&(f.rules[b].message=a[b])},a.applyBindingsWithValidation=function(b,c,d){var e,g,h=arguments.length;h>2?(e=c,g=d):2>h?e=document.body:arguments[1].nodeType?e=c:g=arguments[1],f.init(),g&&f.utils.setDomData(e,g),a.applyBindings(b,c)};var n=a.applyBindings;a.applyBindings=function(a,b){f.init(),n(a,b)},a.validatedObservable=function(b){if(!f.utils.isObject(b))return a.observable(b).extend({validatable:!0});var c=a.observable(b);return c.errors=f.group(b),c.isValid=a.observable(b.isValid()),c.errors.subscribe(function(a){c.isValid(0===a.length)}),c}}),function(){var a,b,c,d,e,f;d=function(a,b,c,d){var e;return e=null,"js"===a?(e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",b)):"css"===a&&(e=document.createElement("link"),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",b)),e.readyState?e.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&c(d)}:e.onload=function(){c(d)},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)},b=function(b){return a.ajax({type:"get",url:""+a("#donation-script").data("pathtoserver")+"/config/"+a("#donation-script").data("org")+".json",dataType:"jsonp",complete:function(c){return b(c,a.extend(a("#donation-script").data()))}})},e=function(){var e,f,g,h,i,j,k,l,m;for(j=a("#donation-script").data("testmode")===!0,e=j?"jquery.donations.a479bbd4.js":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.a479bbd4.js",i=["https://js.stripe.com/v2/","https://d3dy5gmtp8yhk7.cloudfront.net/2.1/pusher.min.js",e],g=0,f=function(){var d,e;return g++,g===i.length?(initJQueryPayments(jQuery),c(),d=function(b){return a(".donations-form-anchor").append(html),ko.applyBindings(new DonationsFormModel(a,b))},e=function(){var b;return b=null,a.ajax({async:!1,dataType:"json",url:"config.json",success:function(a){return b=a}}),b},j?d(a.extend(e(),a("#donation-script").data())):b(d)):void 0},m=[],k=0,l=i.length;l>k;k++)h=i[k],m.push(d("js",h,f));return m},c=function(){return function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","gaDonations"),gaDonations("create","UA-48690908-1","controlshiftlabs.com"),gaDonations("send","pageview")},f=function(){a=jQuery=window.jQuery.noConflict(!0);var b,c;c=a("#donation-script").data("testmode")===!0,b=c?"jquery.donations.3516e2b1.css":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.3516e2b1.css",d("css",b,function(){}),e()},void 0===window.jQuery||window.jQuery.fn.jquery&&(1!==parseInt(window.jQuery.fn.jquery[0])||parseInt(window.jQuery.fn.jquery[1])<9)?d("js","https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",f):f()}.call(this),initJQueryPayments=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].slice,v=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=a,b.payment={},b.payment.fn={},b.fn.payment=function(){var a,c;return c=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],b.payment.fn[c].apply(this,a)},f=/(\d{1,4})/g,e=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:f,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:f,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:f,length:[13,14,15,16],cvcLength:[3],luhn:!0}],c=function(a){var b,c,d;for(a=(a+"").replace(/\D/g,""),c=0,d=e.length;d>c;c++)if(b=e[c],b.pattern.test(a))return b},d=function(a){var b,c,d;for(c=0,d=e.length;d>c;c++)if(b=e[c],b.type===a)return b},n=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},m=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(b=document.selection)?"function"==typeof b.createRange?b.createRange().text:void 0:void 0:void 0)?!0:!1},o=function(a){return setTimeout(function(){var c,d;return c=b(a.currentTarget),d=c.val(),d=b.payment.formatCardNumber(d),c.val(d)})},i=function(a){var d,e,f,g,h,i,j;return f=String.fromCharCode(a.which),!/^\d+$/.test(f)||(d=b(a.currentTarget),j=d.val(),e=c(j+f),g=(j.replace(/\D/g,"")+f).length,i=16,e&&(i=e.length[e.length.length-1]),g>=i||null!=d.prop("selectionStart")&&d.prop("selectionStart")!==j.length)?void 0:(h=e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,h.test(j)?(a.preventDefault(),d.val(j+" "+f)):h.test(j+f)?(a.preventDefault(),d.val(j+f+" ")):void 0)},g=function(a){var c,d;return c=b(a.currentTarget),d=c.val(),a.meta||8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length?void 0:/\d\s$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d\s$/,""))):/\s\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\d?$/,""))):void 0},j=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val()+d,/^\d$/.test(e)&&"0"!==e&&"1"!==e?(a.preventDefault(),c.val("0"+e+" / ")):/^\d\d$/.test(e)?(a.preventDefault(),c.val(""+e+" / ")):void 0):void 0},k=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val(),/^\d\d$/.test(e)?c.val(""+e+" / "):void 0):void 0},l=function(a){var c,d,e;return d=String.fromCharCode(a.which),"/"===d?(c=b(a.currentTarget),e=c.val(),/^\d$/.test(e)&&"0"!==e?c.val("0"+e+" / "):void 0):void 0},h=function(a){var c,d;return a.meta||(c=b(a.currentTarget),d=c.val(),8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length)?void 0:/\d(\s|\/)+$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},s=function(a){var b;return a.metaKey||a.ctrlKey?!0:32===a.which?!1:0===a.which?!0:a.which<33?!0:(b=String.fromCharCode(a.which),!!/[\d\s]/.test(b))},q=function(a){var d,e,f,g;return d=b(a.currentTarget),f=String.fromCharCode(a.which),/^\d+$/.test(f)&&!m(d)?(g=(d.val()+f).replace(/\D/g,""),e=c(g),e?g.length<=e.length[e.length.length-1]:g.length<=16):void 0},r=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)&&!m(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},p=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)?(e=c.val()+d,e.length<=4):void 0},t=function(a){var c,d,f,g,h;return c=b(a.currentTarget),h=c.val(),g=b.payment.cardType(h)||"unknown",c.hasClass(g)?void 0:(d=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)f=e[a],c.push(f.type);return c}(),c.removeClass("unknown"),c.removeClass(d.join(" ")),c.addClass(g),c.toggleClass("identified","unknown"!==g),c.trigger("payment.cardType",g))},b.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",p),this},b.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",r),this.on("keypress",j),this.on("keypress",l),this.on("keypress",k),this.on("keydown",h),this},b.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",q),this.on("keypress",i),this.on("keydown",g),this.on("keyup",t),this.on("paste",o),this},b.payment.fn.restrictNumeric=function(){return this.on("keypress",s),this},b.payment.fn.cardExpiryVal=function(){return b.payment.cardExpiryVal(b(this).val())},b.payment.cardExpiryVal=function(a){var b,c,d,e;return a=a.replace(/\s/g,""),e=a.split("/",2),b=e[0],d=e[1],2===(null!=d?d.length:void 0)&&/^\d+$/.test(d)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),d=c+d),b=parseInt(b,10),d=parseInt(d,10),{month:b,year:d}},b.payment.validateCardNumber=function(a){var b,d;return a=(a+"").replace(/\s+|-/g,""),/^\d+$/.test(a)?(b=c(a),b?(d=a.length,v.call(b.length,d)>=0&&(b.luhn===!1||n(a))):!1):!1},b.payment.validateCardExpiry=function(a,c){var d,e,f,g;return"object"==typeof a&&"month"in a&&(g=a,a=g.month,c=g.year),a&&c?(a=b.trim(a),c=b.trim(c),/^\d+$/.test(a)?/^\d+$/.test(c)?parseInt(a,10)<=12?(2===c.length&&(f=(new Date).getFullYear(),f=f.toString().slice(0,2),c=f+c),e=new Date(c,a),d=new Date,e.setMonth(e.getMonth()-1),e.setMonth(e.getMonth()+1,1),e>d):!1:!1:!1):!1},b.payment.validateCardCVC=function(a,c){var e,f;return a=b.trim(a),/^\d+$/.test(a)?c?(e=a.length,v.call(null!=(f=d(c))?f.cvcLength:void 0,e)>=0):a.length>=3&&a.length<=4:!1},b.payment.cardType=function(a){var b;return a?(null!=(b=c(a))?b.type:void 0)||null:null},b.payment.formatCardNumber=function(a){var b,d,e,f;return(b=c(a))?(e=b.length[b.length.length-1],a=a.replace(/\D/g,""),a=a.slice(0,+e+1||9e9),b.format.global?null!=(f=a.match(b.format))?f.join(" "):void 0:(d=b.format.exec(a),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):a}},function(a,b){"function"==typeof define&&define.amd?define(b):a.form2js=b()}(this,function(){"use strict";function a(a,d,e,f,g){("undefined"==typeof e||null==e)&&(e=!0),("undefined"==typeof d||null==d)&&(d="."),arguments.length<5&&(g=!1),a="string"==typeof a?document.getElementById(a):a;var h,i=[],j=0;if(a.constructor==Array||"undefined"!=typeof NodeList&&a.constructor==NodeList)for(;h=a[j++];)i=i.concat(c(h,f,g));else i=c(a,f,g);return b(i,e,d)}function b(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r={};for(d=0;d<a.length;d++)if(h=a[d].value,!b||""!==h&&null!==h){for(o=a[d].name,p=o.split(c),i=[],j=q,k="",e=0;e<p.length;e++)if(n=p[e].split("]["),n.length>1)for(f=0;f<n.length;f++)if(n[f]=0==f?n[f]+"]":f==n.length-1?"["+n[f]:"["+n[f]+"]",m=n[f].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(g=1;g<m.length;g++)m[g]&&i.push(m[g]);else i.push(n[f]);else i=i.concat(n);for(e=0;e<i.length;e++)n=i[e],n.indexOf("[]")>-1&&e==i.length-1?(l=n.substr(0,n.indexOf("[")),k+=l,j[l]||(j[l]=[]),j[l].push(h)):n.indexOf("[")>-1?(l=n.substr(0,n.indexOf("[")),m=n.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),k+="_"+l+"_"+m,r[k]||(r[k]={}),""==l||j[l]||(j[l]=[]),e==i.length-1?""==l?(j.push(h),r[k][m]=j[j.length-1]):(j[l].push(h),r[k][m]=j[l][j[l].length-1]):r[k][m]||(j[l].push(/^[0-9a-z_]+\[?/i.test(i[e+1])?{}:[]),r[k][m]=j[l][j[l].length-1]),j=r[k][m]):(k+=n,e<i.length-1?(j[n]||(j[n]={}),j=j[n]):j[n]=h)}return q}function c(a,b,c){var f=e(a,b,c);return f.length>0?f:d(a,b,c)}function d(a,b,c){for(var d=[],f=a.firstChild;f;)d=d.concat(e(f,b,c)),f=f.nextSibling;return d}function e(a,b,c){var e,h,i,j=f(a,c);return e=b&&b(a),e&&e.name?i=[e]:""!=j&&a.nodeName.match(/INPUT|TEXTAREA/i)?(h=g(a),i=[{name:j,value:h}]):""!=j&&a.nodeName.match(/SELECT/i)?(h=g(a),i=[{name:j.replace(/\[\]$/,""),value:h}]):i=d(a,b,c),i}function f(a,b){return a.name&&""!=a.name?a.name:b&&a.id&&""!=a.id?a.id:""}function g(a){if(a.disabled)return null;switch(a.nodeName){case"INPUT":case"TEXTAREA":switch(a.type.toLowerCase()){case"radio":if(a.checked&&"false"===a.value)return!1;
case"checkbox":if(a.checked&&"true"===a.value)return!0;if(!a.checked&&"true"===a.value)return!1;if(a.checked)return a.value;break;case"button":case"reset":case"submit":case"image":return"";default:return a.value}break;case"SELECT":return h(a)}return null}function h(a){var b,c,d,e=a.multiple,f=[];if(!e)return a.value;for(b=a.getElementsByTagName("option"),c=0,d=b.length;d>c;c++)b[c].selected&&f.push(b[c].value);return f}return a});var html;html='<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" data-bind="value: org">\n  <input type="hidden" name="customer.country" data-bind="value: countryCode">\n  <input type="hidden" name="customer.charges_attributes[0].currency" data-bind="value: selectedCurrency">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\' data-bind="html: currencySymbol">$</span><span class=\'donation-header-amt\' data-bind="text: displayAmount()">0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header" id="dnt-progress-amount" data-bind="css: { \'dph-active\' : visibleInputSet() >= 0}, click: function() { setInputSet(0); }">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo" data-bind="css: { \'dph-active\' : visibleInputSet() >= 1}, click: function() { setInputSet(1); }">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment" data-bind="css: { \'dph-active\' : visibleInputSet() >= 2}, click: function() { setInputSet(2); }">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first" data-bind="visible: visibleInputSet() === 0">\n    <div class="donations-currency-select-row" data-bind="visible: currenciesEnabled()">\n      Currency: \n      <select class="donations-currency-select" data-bind="options: currenciesArray, value: selectedCurrency"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first" data-bind="validationMessage: displayAmount"></span>\n    </span>\n    <div class="donation-button-set" data-bind="foreach: amounts">\n      <div class="donation-btn donation-btn-sm" data-bind="css: { \'donation-btn-active\' : $parent.selectedBtn() === $index() }, click: function() { $parent.setActiveAmount($index()); }">\n        <span class=\'donation-currency\' data-bind="html: $parent.currencySymbol">$</span><span class=\'donation-amt\' data-bind="text: $data"></span>\n      </div>\n      <!-- ko if: $index() === ($parent.amountsLength() - 1) -->\n        <input class="donation-btn donation-btn-lg" data-bind="value: $parent.inputtedAmount, event: { change: $parent.clearSelectedButton } " type="text" placeholder="Other amount">\n      <!-- /ko -->\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn" data-bind="click: function()\n        { \n          if(inputSet1.isValid()) { incrementInputSet(); } \n          else { inputSet1.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 1">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label" data-bind="validationMessage: firstName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name" data-bind="value: firstName">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label" data-bind="validationMessage: lastName">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name" data-bind="value: lastName">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label" data-bind="validationMessage: email">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email" data-bind="value: email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn" data-bind="click: function()\n        { \n          if(inputSet2.isValid()) { incrementInputSet(); } \n          else { inputSet2.errors.showAllMessages();}\n        }">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set" data-bind="visible: visibleInputSet() === 2">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label" data-bind="validationMessage: cardNumber" data-bind="validationMessage: cardDate">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number" data-bind="value: cardNumber, style: { backgroundImage: ccBackground() } ">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label" data-bind="validationMessage: cardDate">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month" data-bind="value: cardMonth, options: ccMonths">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year" data-bind="value: cardYear, options: ccYears">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label" data-bind="validationMessage: cvc">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc" data-bind="value: cvc">\n    </div>\n    <div class="donation-payment-errors" data-bind="visible: false">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit" data-bind="click: function()\n        { \n          if(inputSet3.isValid()) { submitForm(); } \n          else { inputSet3.errors.showAllMessages();}\n        }">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>';var DonationsFormModel;DonationsFormModel=function(){function a(a,b){var c,d,e;e=this,$=a,c=$.extend({},{imgpath:"https://d2yuwrm8xcn0u8.cloudfront.net",metaviewporttag:!0},b,e.parseQueryString(document.URL.split("?")[1])),ko.validation.configure({insertMessages:!1}),ko.validation.rules.ccDate={validator:function(a){return $.payment.validateCardExpiry(a.month,a.year)},message:"Invalid date"},ko.validation.rules.ccNum={validator:function(a){return $.payment.validateCardNumber(a)},message:"Invalid credit card number"},ko.validation.rules.cvc={validator:function(a){return $.payment.validateCardCVC(a)},message:"Invalid CVC number"},ko.validation.registerExtenders(),e.org=ko.observable(c.org),e.countryCode=ko.observable("US"),e.imgPath=ko.observable(c.imgpath),e.initializeIcons(e.imgPath()),e.seedAmount=c.seedamount||100,e.seedValues=null!=c.seedvalues?c.seedvalues.split(","):[15,35,50,100,250,500,1e3],e.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAD",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},e.currenciesArray=ko.observableArray(["USD","GBP","CAD","AUD","EUR","NZD","SEK","NOK","DKK"]),e.currenciesEnabled=ko.observable("none"!==c.currencyconversion),e.seededCurrency=c.seedcurrency||"USD",e.formCurrency=c.formcurrency||e.seededCurrency,d=function(){var a;return"none"!==(a=c.currencyconversion)&&"choose"!==a?e.currencies[c.country]:e.formCurrency},e.selectedCurrency=ko.observable(d()),e.currencySymbol=ko.computed(function(){var a;return a={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAD:"C$"},a[e.selectedCurrency()]||e.selectedCurrency()},this),e.selectedBtn=ko.observable(-1),e.selectedAmount=ko.observable("0"),e.inputtedAmount=ko.observable(null),e.displayAmount=ko.computed(function(){return e.inputtedAmount()||e.selectedAmount()},this).extend({required:{message:"Please select an amount"},min:1,digit:!0}),e.setActiveAmount=function(a){return a>-1?(e.inputtedAmount(null),e.selectedAmount(e.amounts()[a]),e.selectedBtn(a)):void 0},e.clearSelectedButton=function(){return e.selectedAmount(0),e.selectedBtn(-1)},e.amounts=ko.computed(function(){var a,b,d,f,g,h,i,j,k;for(a=[],k=e.seedValues,g=i=0,j=k.length;j>i;g=++i)h=k[g],b=parseInt(h)/100*parseInt(e.seedAmount),7>g&&(e.currenciesEnabled()?(f=c[e.selectedCurrency()]||1,d=c[e.seededCurrency]||1,a.push(e.round(b*f/d))):a.push(e.round(b)));return a},this),e.amountsLength=ko.computed(function(){return e.amounts().length},this),e.visibleInputSet=ko.observable(0),e.incrementInputSet=function(){return e.visibleInputSet(e.visibleInputSet()+1)},e.setInputSet=function(a){return e.visibleInputSet(a)},e.firstName=ko.observable().extend({required:{message:"Can't be blank"}}),e.lastName=ko.observable().extend({required:{message:"Can't be blank"}}),e.email=ko.observable().extend({required:{message:"Can't be blank"},email:{message:"Invalid email"}}),e.cardNumber=ko.observable().extend({required:{message:"Can't be blank"},ccNum:!0}),e.cardMonth=ko.observable(),e.ccMonths=["01","02","03","04","05","06","07","08","09","10","11","12"],e.cardYear=ko.observable(""+((new Date).getFullYear()+1)),e.ccYears=function(){var a,b,c,d,e;for(a=[],b=(new Date).getFullYear(),c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push(""+c);return a}(),e.cardDate=ko.computed(function(){return{month:e.cardMonth(),year:e.cardYear()}},this).extend({ccDate:!0,observable:!0}),e.cvc=ko.observable().extend({required:{message:"Can't be blank"},digit:!0,cvc:!0}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),e.ccBackground=ko.computed(function(){var a;return a=$.payment.cardType(e.cardNumber()),"amex"===a||"mastercard"===a||"visa"===a||"discover"===a||"dinersclub"===a?"url("+e.imgPath()+"/icon-cc-"+a+".png)":"url("+e.imgPath()+"/icon-cc-none.png)"},this),e.inputSet1=ko.validatedObservable({amount:e.displayAmount}),e.inputSet2=ko.validatedObservable({firstName:e.firstName,lastName:e.lastName,email:e.email}),e.inputSet3=ko.validatedObservable({cardNumber:e.cardNumber,cardDate:e.cardDate,cvc:e.cvc}),e.connectToServer(c,e)}return a.prototype.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},a.prototype.initializeIcons=function(a){var b,c,d,e;b={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"},e=[];for(c in b)d=b[c],e.push($(c).css("background-image","url('"+a+"/"+d+"')"));return e},a.prototype.round=function(a){var b;return b=Math.round(parseFloat(a.toPrecision(2))),0===b?1:b},a.prototype.connectToServer=function(a,b){var c,d,e;return c=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(c.stripepublickey),$.fn.serializeObject=function(){var a,c;return c=form2js(this.attr("id"),".",!0),c["cc-num"]="",c.month="",c.year="",c.cvc="",a=b.displayAmount(),console.log(a),c.customer.charges_attributes[0].amount=a.replace(b.currencySymbol(),"")+"00",c},e=function(a){var b,d;return d=new Pusher(c.pusherpublickey),b=d.subscribe(a),b.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=c.redirectto&&window.location.replace(c.redirectto),$("#donation-form").hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},d=function(a,b){var d,f,g;return d=$("#donation-form"),b.error?(gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(b.error.message),d.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide()):(g=b.id,d.append($('<input type="hidden" name="card_token" />').val(g)),f=$.ajax({url:""+c.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),{config:c})}),f.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),e(a.pusher_channel_token)}),f.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),d.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1)},b.submitForm=function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$("#donation-form"),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,d),!1}},a}(),function(){!function(a){var b=this||(0,eval)("this"),c=b.document,d=b.navigator,e=b.jQuery,f=b.JSON;!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],a):a(b.ko={})}(function(g){function h(a,b){return null===a||typeof a in m?a===b:!1}function i(b,c){var d;return function(){d||(d=setTimeout(function(){d=a,b()},c))}}function j(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function k(a,b,c,d){l.d[a]={init:function(a,e,f,g,h){var i,j;return l.ba(function(){var f=l.a.c(e()),g=!c!=!f,k=!j;(k||b||g!==i)&&(k&&l.ca.fa()&&(j=l.a.lb(l.e.childNodes(a),!0)),g?(k||l.e.U(a,l.a.lb(j)),l.gb(d?d(h,f):h,a)):l.e.da(a),i=g)},null,{G:a}),{controlsDescendantBindings:!0}}},l.g.aa[a]=!1,l.e.Q[a]=!0}var l="undefined"!=typeof g?g:{};l.b=function(a,b){for(var c=a.split("."),d=l,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},l.s=function(a,b,c){a[b]=c},l.version="3.1.0",l.b("version",l.version),l.a=function(){function g(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}var j={__proto__:[]}instanceof Array,k={},m={};k[d&&/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],k.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),g(k,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)m[b[c]]=a});var n={propertychange:!0},o=c&&function(){for(var b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];);return b>4?b:a}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},l:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},hb:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},ma:function(a,b){var c=l.a.l(a,b);c>0?a.splice(c,1):0===c&&a.shift()},ib:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>l.a.l(b,a[c])&&b.push(a[c]);return b},ya:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},la:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},$:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},Y:function(a,b,c){var d=l.a.l(l.a.Sa(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},na:j,extend:h,ra:i,sa:j?i:h,A:g,Oa:function(a,b){if(!a)return a;var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b(a[c],c,a));return d},Fa:function(a){for(;a.firstChild;)l.removeNode(a.firstChild)},ec:function(a){a=l.a.R(a);for(var b=c.createElement("div"),d=0,e=a.length;e>d;d++)b.appendChild(l.M(a[d]));return b},lb:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?l.M(f):f)}return e},U:function(a,b){if(l.a.Fa(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},Bb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)l.removeNode(c[f])}},ea:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},Db:function(a,b){7>o?a.setAttribute("selected",b):a.selected=b},ta:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s ]+|[\s ]+$/g,"")},oc:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=l.a.ta(d[e]);""!==g&&c.push(g)}return c},kc:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},Sb:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Ea:function(a){return l.a.Sb(a,a.ownerDocument.documentElement)},eb:function(a){return!!l.a.hb(a,l.a.Ea)},B:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},q:function(a,b,c){var d=o&&n[b];if(!d&&e)e(a).bind(b,c);else if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var f=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,f),l.a.u.ja(a,function(){a.detachEvent(g,f)})}else a.addEventListener(b,c,!1)},ha:function(a,d){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===l.a.B(a)&&a.type&&"click"==d.toLowerCase()?(f=a.type,f="checkbox"==f||"radio"==f):f=!1,e&&!f)e(a).trigger(d);else if("function"==typeof c.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");f=c.createEvent(m[d]||"HTMLEvents"),f.initEvent(d,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(f)}else if(f&&a.click)a.click();else{if("undefined"==typeof a.fireEvent)throw Error("Browser doesn't support triggering events");a.fireEvent("on"+d)}},c:function(a){return l.v(a)?a():a},Sa:function(a){return l.v(a)?a.o():a},ua:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];l.a.r(b.match(d),function(a){l.a.Y(e,a,c)}),a.className=e.join(" ")}},Xa:function(b,c){var d=l.a.c(c);(null===d||d===a)&&(d="");var e=l.e.firstChild(b);!e||3!=e.nodeType||l.e.nextSibling(e)?l.e.U(b,[b.ownerDocument.createTextNode(d)]):e.data=d,l.a.Vb(b)},Cb:function(a,b){if(a.name=b,7>=o)try{a.mergeAttributes(c.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}},Vb:function(a){o>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Tb:function(a){if(o){var b=a.style.width;a.style.width=0,a.style.width=b}},ic:function(a,b){a=l.a.c(a),b=l.a.c(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},R:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},mc:6===o,nc:7===o,oa:o,ob:function(a,b){for(var c=l.a.R(a.getElementsByTagName("input")).concat(l.a.R(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},fc:function(a){return"string"==typeof a&&(a=l.a.ta(a))?f&&f.parse?f.parse(a):new Function("return "+a)():null},Ya:function(a,b,c){if(!f||!f.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(l.a.c(a),b,c)},gc:function(a,b,d){d=d||{};var e=d.params||{},f=d.includeFields||this.mb,h=a;if("object"==typeof a&&"form"===l.a.B(a))for(var h=a.action,i=f.length-1;i>=0;i--)for(var j=l.a.ob(a,f[i]),k=j.length-1;k>=0;k--)e[j[k].name]=j[k].value;b=l.a.c(b);var m=c.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in b)a=c.createElement("input"),a.name=n,a.value=l.a.Ya(l.a.c(b[n])),m.appendChild(a);g(e,function(a,b){var d=c.createElement("input");d.name=a,d.value=b,m.appendChild(d)}),c.body.appendChild(m),d.submitter?d.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}}(),l.b("utils",l.a),l.b("utils.arrayForEach",l.a.r),l.b("utils.arrayFirst",l.a.hb),l.b("utils.arrayFilter",l.a.la),l.b("utils.arrayGetDistinctValues",l.a.ib),l.b("utils.arrayIndexOf",l.a.l),l.b("utils.arrayMap",l.a.ya),l.b("utils.arrayPushAll",l.a.$),l.b("utils.arrayRemoveItem",l.a.ma),l.b("utils.extend",l.a.extend),l.b("utils.fieldsIncludedWithJsonPost",l.a.mb),l.b("utils.getFormFields",l.a.ob),l.b("utils.peekObservable",l.a.Sa),l.b("utils.postJson",l.a.gc),l.b("utils.parseJson",l.a.fc),l.b("utils.registerEventHandler",l.a.q),l.b("utils.stringifyJson",l.a.Ya),l.b("utils.range",l.a.ic),l.b("utils.toggleDomNodeCssClass",l.a.ua),l.b("utils.triggerEvent",l.a.ha),l.b("utils.unwrapObservable",l.a.c),l.b("utils.objectForEach",l.a.A),l.b("utils.addOrRemoveItem",l.a.Y),l.b("unwrap",l.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),l.a.f=new function(){function b(b,f){var g=b[d];if(!g||"null"===g||!e[g]){if(!f)return a;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=b(c,!1);return e===a?a:e[d]},set:function(c,d,e){(e!==a||b(c,!1)!==a)&&(b(c,!0)[d]=e)},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},L:function(){return c++ +d}}},l.b("utils.domData",l.a.f),l.b("utils.domData.clear",l.a.f.clear),l.a.u=new function(){function b(b,c){var e=l.a.f.get(b,d);return e===a&&c&&(e=[],l.a.f.set(b,d,e)),e}function c(a){var d=b(a,!1);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](a);if(l.a.f.clear(a),l.a.u.cleanExternalData(a),g[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var d=l.a.f.L(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{ja:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Ab:function(c,e){var f=b(c,!1);f&&(l.a.ma(f,e),0==f.length&&l.a.f.set(c,d,a))},M:function(a){if(f[a.nodeType]&&(c(a),g[a.nodeType])){var b=[];l.a.$(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;e>d;d++)c(b[d])}return a},removeNode:function(a){l.M(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(a){e&&"function"==typeof e.cleanData&&e.cleanData([a])}}},l.M=l.a.u.M,l.removeNode=l.a.u.removeNode,l.b("cleanNode",l.M),l.b("removeNode",l.removeNode),l.b("utils.domNodeDisposal",l.a.u),l.b("utils.domNodeDisposal.addDisposeCallback",l.a.u.ja),l.b("utils.domNodeDisposal.removeDisposeCallback",l.a.u.Ab),function(){l.a.Qa=function(a){var d;if(e){if(e.parseHTML)d=e.parseHTML(a)||[];else if((d=e.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var f=l.a.ta(a).toLowerCase();for(d=c.createElement("div"),f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+f[1]+a+f[2]+"</div>","function"==typeof b.innerShiv?d.appendChild(b.innerShiv(a)):d.innerHTML=a;f[0]--;)d=d.lastChild;d=l.a.R(d.lastChild.childNodes)}return d},l.a.Va=function(b,c){if(l.a.Fa(b),c=l.a.c(c),null!==c&&c!==a)if("string"!=typeof c&&(c=c.toString()),e)e(b).html(c);else for(var d=l.a.Qa(c),f=0;f<d.length;f++)b.appendChild(d[f])}}(),l.b("utils.parseHtmlFragment",l.a.Qa),l.b("utils.setHtml",l.a.Va),l.w=function(){function b(a,c){if(a)if(8==a.nodeType){var d=l.w.xb(a.nodeValue);null!=d&&c.push({Rb:a,cc:d})}else if(1==a.nodeType)for(var d=0,e=a.childNodes,f=e.length;f>d;d++)b(e[d],c)}var c={};return{Na:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"<!--[ko_memo:"+b+"]-->"},Hb:function(b,d){var e=c[b];if(e===a)throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[b]}},Ib:function(a,c){var d=[];b(a,d);for(var e=0,f=d.length;f>e;e++){var g=d[e].Rb,h=[g];c&&l.a.$(h,c),l.w.Hb(d[e].cc,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},xb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),l.b("memoization",l.w),l.b("memoization.memoize",l.w.Na),l.b("memoization.unmemoize",l.w.Hb),l.b("memoization.parseMemoText",l.w.xb),l.b("memoization.unmemoizeDomNodeAndDescendants",l.w.Ib),l.Ga={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return l.h({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b.timeout,d=b.method),e="notifyWhenChangesStop"==d?j:i,a.Ma(function(a){return e(a,c)})},notify:function(a,b){a.equalityComparer="always"==b?null:h}};var m={undefined:1,"boolean":1,number:1,string:1};l.b("extenders",l.Ga),l.Fb=function(a,b,c){this.target=a,this.za=b,this.Qb=c,this.sb=!1,l.s(this,"dispose",this.F)},l.Fb.prototype.F=function(){this.sb=!0,this.Qb()},l.N=function(){l.a.sa(this,l.N.fn),this.H={}};var n="change";g={V:function(a,b,c){var d=this;c=c||n;var e=new l.Fb(d,b?a.bind(b):a,function(){l.a.ma(d.H[c],e)});return d.o&&d.o(),d.H[c]||(d.H[c]=[]),d.H[c].push(e),e},notifySubscribers:function(a,b){if(b=b||n,this.qb(b))try{l.k.jb();for(var c,d=this.H[b].slice(0),e=0;c=d[e];++e)c.sb||c.za(a)}finally{l.k.end()}},Ma:function(a){var b,c,d,e=this,f=l.v(e);e.ia||(e.ia=e.notifySubscribers,e.notifySubscribers=function(a,b){b&&b!==n?"beforeChange"===b?e.bb(a):e.ia(a,b):e.cb(a)});var g=a(function(){f&&d===e&&(d=e()),b=!1,e.Ka(c,d)&&e.ia(c=d)});e.cb=function(a){b=!0,d=a,g()},e.bb=function(a){b||(c=a,e.ia(a,"beforeChange"))}},qb:function(a){return this.H[a]&&this.H[a].length},Wb:function(){var a=0;return l.a.A(this.H,function(b,c){a+=c.length}),a},Ka:function(a,b){return!this.equalityComparer||!this.equalityComparer(a,b)},extend:function(a){var b=this;return a&&l.a.A(a,function(a,c){var d=l.Ga[a];"function"==typeof d&&(b=d(b,c)||b)}),b}},l.s(g,"subscribe",g.V),l.s(g,"extend",g.extend),l.s(g,"getSubscriptionsCount",g.Wb),l.a.na&&l.a.ra(g,Function.prototype),l.N.fn=g,l.tb=function(a){return null!=a&&"function"==typeof a.V&&"function"==typeof a.notifySubscribers},l.b("subscribable",l.N),l.b("isSubscribable",l.tb),l.ca=l.k=function(){function a(a){d.push(c),c=a}function b(){c=d.pop()}var c,d=[],e=0;return{jb:a,end:b,zb:function(a){if(c){if(!l.tb(a))throw Error("Only subscribable things can act as dependencies");c.za(a,a.Kb||(a.Kb=++e))}},t:function(c,d,e){try{return a(),c.apply(d,e||[])}finally{b()}},fa:function(){return c?c.ba.fa():void 0},pa:function(){return c?c.pa:void 0}}}(),l.b("computedContext",l.ca),l.b("computedContext.getDependenciesCount",l.ca.fa),l.b("computedContext.isInitial",l.ca.pa),l.m=function(a){function b(){return 0<arguments.length?(b.Ka(c,arguments[0])&&(b.P(),c=arguments[0],b.O()),this):(l.k.zb(b),c)}var c=a;return l.N.call(b),l.a.sa(b,l.m.fn),b.o=function(){return c},b.O=function(){b.notifySubscribers(c)},b.P=function(){b.notifySubscribers(c,"beforeChange")},l.s(b,"peek",b.o),l.s(b,"valueHasMutated",b.O),l.s(b,"valueWillMutate",b.P),b},l.m.fn={equalityComparer:h};var o=l.m.hc="__ko_proto__";l.m.fn[o]=l.m,l.a.na&&l.a.ra(l.m.fn,l.N.fn),l.Ha=function(b,c){return null===b||b===a||b[o]===a?!1:b[o]===c?!0:l.Ha(b[o],c)},l.v=function(a){return l.Ha(a,l.m)},l.ub=function(a){return"function"==typeof a&&a[o]===l.m||"function"==typeof a&&a[o]===l.h&&a.Yb?!0:!1},l.b("observable",l.m),l.b("isObservable",l.v),l.b("isWriteableObservable",l.ub),l.T=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=l.m(a),l.a.sa(a,l.T.fn),a.extend({trackArrayChanges:!0})},l.T.fn={remove:function(a){for(var b=this.o(),c=[],d="function"!=typeof a||l.v(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.P(),c.push(f),b.splice(e,1),e--)}return c.length&&this.O(),c},removeAll:function(b){if(b===a){var c=this.o(),d=c.slice(0);return this.P(),c.splice(0,c.length),this.O(),d}return b?this.remove(function(a){return 0<=l.a.l(b,a)}):[]},destroy:function(a){var b=this.o(),c="function"!=typeof a||l.v(a)?function(b){return b===a}:a;this.P();for(var d=b.length-1;d>=0;d--)c(b[d])&&(b[d]._destroy=!0);this.O()},destroyAll:function(b){return b===a?this.destroy(function(){return!0}):b?this.destroy(function(a){return 0<=l.a.l(b,a)}):[]},indexOf:function(a){var b=this();return l.a.l(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.P(),this.o()[c]=b,this.O())}},l.a.r("pop push reverse shift sort splice unshift".split(" "),function(a){l.T.fn[a]=function(){var b=this.o();return this.P(),this.kb(b,a,arguments),b=b[a].apply(b,arguments),this.O(),b}}),l.a.r(["slice"],function(a){l.T.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),l.a.na&&l.a.ra(l.T.fn,l.m.fn),l.b("observableArray",l.T);var p="arrayChange";l.Ga.trackArrayChanges=function(a){function b(){if(!c){c=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&c!==n||++e,b.apply(this,arguments)};var f=[].concat(a.o()||[]);d=null,a.V(function(b){if(b=[].concat(b||[]),a.qb(p)){var c;(!d||e>1)&&(d=l.a.Aa(f,b,{sparse:!0})),c=d,c.length&&a.notifySubscribers(c,p)}f=b,d=null,e=0})}}if(!a.kb){var c=!1,d=null,e=0,f=a.V;a.V=a.subscribe=function(a,c,d){return d===p&&b(),f.apply(this,arguments)},a.kb=function(a,b,f){function g(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(c&&!e){var h=[],i=a.length,j=f.length,k=0;switch(b){case"push":k=i;case"unshift":for(b=0;j>b;b++)g("added",f[b],k+b);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":b=Math.min(Math.max(0,0>f[0]?i+f[0]:f[0]),i);for(var i=1===j?i:Math.min(b+(f[1]||0),i),j=b+j-2,k=Math.max(i,j),m=[],n=[],o=2;k>b;++b,++o)i>b&&n.push(g("deleted",a[b],b)),j>b&&m.push(g("added",f[o],b));l.a.nb(n,m);break;default:return}d=h}}}},l.ba=l.h=function(a,b,c){function d(){n=!0,l.a.A(u,function(a,b){b.F()}),u={},v=0,j=!1}function e(){var a=g.throttleEvaluation;a&&a>=0?(clearTimeout(w),w=setTimeout(f,a)):g.wa?g.wa():f()
}function f(){if(!k&&!n){if(s&&s()){if(!m)return void t()}else m=!1;k=!0;try{var a=u,c=v;l.k.jb({za:function(b,d){n||(c&&a[d]?(u[d]=a[d],++v,delete a[d],--c):u[d]||(u[d]=b.V(e),++v))},ba:g,pa:!v}),u={},v=0;try{var d=b?o.call(b):o()}finally{l.k.end(),c&&l.a.A(a,function(a,b){b.F()}),j=!1}g.Ka(i,d)&&(g.notifySubscribers(i,"beforeChange"),i=d,g.wa&&!g.throttleEvaluation||g.notifySubscribers(i))}finally{k=!1}v||t()}}function g(){if(0<arguments.length){if("function"!=typeof p)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return p.apply(b,arguments),this}return j&&f(),l.k.zb(g),i}function h(){return j||v>0}var i,j=!0,k=!1,m=!1,n=!1,o=a;if(o&&"object"==typeof o?(c=o,o=c.read):(c=c||{},o||(o=c.read)),"function"!=typeof o)throw Error("Pass a function that returns the value of the ko.computed");var p=c.write,q=c.disposeWhenNodeIsRemoved||c.G||null,r=c.disposeWhen||c.Da,s=r,t=d,u={},v=0,w=null;b||(b=c.owner),l.N.call(g),l.a.sa(g,l.h.fn),g.o=function(){return j&&!v&&f(),i},g.fa=function(){return v},g.Yb="function"==typeof c.write,g.F=function(){t()},g.ga=h;var x=g.Ma;return g.Ma=function(a){x.call(g,a),g.wa=function(){g.bb(i),j=!0,g.cb(g)}},l.s(g,"peek",g.o),l.s(g,"dispose",g.F),l.s(g,"isActive",g.ga),l.s(g,"getDependenciesCount",g.fa),q&&(m=!0,q.nodeType&&(s=function(){return!l.a.Ea(q)||r&&r()})),!0!==c.deferEvaluation&&f(),q&&h()&&q.nodeType&&(t=function(){l.a.u.Ab(q,t),d()},l.a.u.ja(q,t)),g},l.$b=function(a){return l.Ha(a,l.h)},g=l.m.hc,l.h[g]=l.m,l.h.fn={equalityComparer:h},l.h.fn[g]=l.h,l.a.na&&l.a.ra(l.h.fn,l.N.fn),l.b("dependentObservable",l.h),l.b("computed",l.h),l.b("isComputed",l.$b),function(){function b(e,f,g){if(g=g||new d,e=f(e),"object"!=typeof e||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==a?i:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.ab=[]}l.Gb=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(a,function(a){for(var b=0;l.v(a)&&10>b;b++)a=a();return a})},l.toJSON=function(a,b,c){return a=l.Gb(a),l.a.Ya(a,b,c)},d.prototype={save:function(a,b){var c=l.a.l(this.keys,a);c>=0?this.ab[c]=b:(this.keys.push(a),this.ab.push(b))},get:function(b){return b=l.a.l(this.keys,b),b>=0?this.ab[b]:a}}}(),l.b("toJS",l.Gb),l.b("toJSON",l.toJSON),function(){l.i={p:function(b){switch(l.a.B(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?l.a.f.get(b,l.d.options.Pa):7>=l.a.oa?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex]):a;default:return b.value}},X:function(b,c,d){switch(l.a.B(b)){case"option":switch(typeof c){case"string":l.a.f.set(b,l.d.options.Pa,a),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:l.a.f.set(b,l.d.options.Pa,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":(""===c||null===c)&&(c=a);for(var e,f=-1,g=0,h=b.options.length;h>g;++g)if(e=l.i.p(b.options[g]),e==c||""==e&&c===a){f=g;break}(d||f>=0||c===a&&1<b.size)&&(b.selectedIndex=f);break;default:(null===c||c===a)&&(c=""),b.value=c}}}}(),l.b("selectExtensions",l.i),l.b("selectExtensions.readValue",l.i.p),l.b("selectExtensions.writeValue",l.i.X),l.g=function(){function a(a){a=l.a.ta(a),123===a.charCodeAt(0)&&(a=a.slice(1,-1));var b,c,g=[],h=a.match(d),i=0;if(h){h.push(",");for(var j,k=0;j=h[k];++k){var m=j.charCodeAt(0);if(44===m){if(0>=i){b&&g.push(c?{key:b,value:c.join("")}:{unknown:b}),b=c=i=0;continue}}else if(58===m){if(!c)continue}else if(47===m&&k&&1<j.length)(m=h[k-1].match(e))&&!f[m[0]]&&(a=a.substr(a.indexOf(j)+1),h=a.match(d),h.push(","),k=-1,j="/");else if(40===m||123===m||91===m)++i;else if(41===m||125===m||93===m)--i;else if(!b&&!c){b=34===m||39===m?j.slice(1,-1):j;continue}c?c.push(j):c=[j]}}return g}var b=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,f={"in":1,"return":1,"typeof":1},g={};return{aa:[],W:g,Ra:a,qa:function(d,e){function f(a,d){var e,k=l.getBindingHandler(a);(k&&k.preprocess?d=k.preprocess(d,a,f):1)&&((k=g[a])&&(e=d,0<=l.a.l(b,e)?e=!1:(k=e.match(c),e=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:e),k=e),k&&i.push("'"+a+"':function(_z){"+e+"=_z}"),j&&(d="function(){return "+d+" }"),h.push("'"+a+"':"+d))}e=e||{};var h=[],i=[],j=e.valueAccessors,k="string"==typeof d?a(d):d;return l.a.r(k,function(a){f(a.key||a.unknown,a.value)}),i.length&&f("_ko_property_writers","{"+i.join(",")+" }"),h.join(",")},bc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},va:function(a,b,c,d,e){a&&l.v(a)?!l.ub(a)||e&&a.o()===d||a(d):(a=b.get("_ko_property_writers"))&&a[c]&&a[c](d)}}}(),l.b("expressionRewriting",l.g),l.b("expressionRewriting.bindingRewriteValidators",l.g.aa),l.b("expressionRewriting.parseObjectLiteral",l.g.Ra),l.b("expressionRewriting.preProcessBindings",l.g.qa),l.b("expressionRewriting._twoWayBindings",l.g.W),l.b("jsonExpressionRewriting",l.g),l.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",l.g.qa),function(){function a(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=c&&"<!--test-->"===c.createComment("test").text,g=f?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};l.e={Q:{},childNodes:function(b){return a(b)?d(b):b.childNodes},da:function(b){if(a(b)){b=l.e.childNodes(b);for(var c=0,d=b.length;d>c;c++)l.removeNode(b[c])}else l.a.Fa(b)},U:function(b,c){if(a(b)){l.e.da(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else l.a.U(b,c)},yb:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},rb:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):l.e.yb(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},Xb:a,lc:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},wb:function(c){if(i[l.a.B(c)]){var d=c.firstChild;if(d)do if(1===d.nodeType){var f;f=d.firstChild;var g=null;if(f)do if(g)g.push(f);else if(a(f)){var h=e(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f]);while(f=f.nextSibling);if(f=g)for(g=d.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])}while(d=d.nextSibling)}}}}(),l.b("virtualElements",l.e),l.b("virtualElements.allowedBindings",l.e.Q),l.b("virtualElements.emptyNode",l.e.da),l.b("virtualElements.insertAfter",l.e.rb),l.b("virtualElements.prepend",l.e.yb),l.b("virtualElements.setDomNodeChildren",l.e.U),function(){l.J=function(){this.Nb={}},l.a.extend(l.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return l.e.Xb(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return l.e.lc(a);default:return null}},parseBindingsString:function(a,b,c,d){try{var e,f=this.Nb,g=a+(d&&d.valueAccessors||"");if(!(e=f[g])){var h,i="with($context){with($data||{}){return{"+l.g.qa(a,d)+"}}}";h=new Function("$context","$element",i),e=f[g]=h}return e(b,c)}catch(j){throw j.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+j.message,j}}}),l.J.instance=new l.J}(),l.b("bindingProvider",l.J),function(){function c(a){return function(){return a}}function d(a){return a()}function f(a){return l.a.Oa(l.k.t(a),function(b,c){return function(){return a()[c]}})}function g(a,b){return f(this.getBindings.bind(this,a,b))}function h(a,b,c){var d,e=l.e.firstChild(b),f=l.J.instance,g=f.preprocessNode;if(g){for(;d=e;)e=l.e.nextSibling(d),g.call(f,d);e=l.e.firstChild(b)}for(;d=e;)e=l.e.nextSibling(d),i(a,d,c)}function i(a,b,c){var d=!0,e=1===b.nodeType;e&&l.e.wb(b),(e&&c||l.J.instance.nodeHasBindings(b))&&(d=k(b,null,a,c).shouldBindDescendants),d&&!n[l.a.B(b)]&&h(a,b,!e)}function j(a){var b=[],c={},d=[];return l.a.A(a,function e(f){if(!c[f]){var g=l.getBindingHandler(f);g&&(g.after&&(d.push(f),l.a.r(g.after,function(b){if(a[b]){if(-1!==l.a.l(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,pb:g})),c[f]=!0}}),b}function k(b,c,e,f){var h=l.a.f.get(b,o);if(!c){if(h)throw Error("You cannot apply bindings multiple times to the same element.");l.a.f.set(b,o,!0)}!h&&f&&l.Eb(b,e);var i;if(c&&"function"!=typeof c)i=c;else{var k=l.J.instance,m=k.getBindingAccessors||g,n=l.h(function(){return(i=c?c(e,b):m.call(k,b,e))&&e.D&&e.D(),i},null,{G:b});i&&n.ga()||(n=null)}var p;if(i){var q=n?function(a){return function(){return d(n()[a])}}:function(a){return i[a]},r=function(){return l.a.Oa(n?n():i,d)};r.get=function(a){return i[a]&&d(q(a))},r.has=function(a){return a in i},f=j(i),l.a.r(f,function(c){var d=c.pb.init,f=c.pb.update,g=c.key;if(8===b.nodeType&&!l.e.Q[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&l.k.t(function(){var c=d(b,q(g),r,e.$data,e);if(c&&c.controlsDescendantBindings){if(p!==a)throw Error("Multiple bindings ("+p+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=g}}),"function"==typeof f&&l.h(function(){f(b,q(g),r,e.$data,e)},null,{G:b})}catch(h){throw h.message='Unable to process binding "'+g+": "+i[g]+'"\nMessage: '+h.message,h}})}return{shouldBindDescendants:p===a}}function m(a){return a&&a instanceof l.I?a:new l.I(a)}l.d={};var n={script:!0};l.getBindingHandler=function(a){return l.d[a]},l.I=function(b,c,d,e){var f,g=this,h="function"==typeof b&&!l.v(b),i=l.h(function(){var a=h?b():b,f=l.a.c(a);return c?(c.D&&c.D(),l.a.extend(g,c),i&&(g.D=i)):(g.$parents=[],g.$root=f,g.ko=l),g.$rawData=a,g.$data=f,d&&(g[d]=f),e&&e(g,c,f),g.$data},null,{Da:function(){return f&&!l.a.eb(f)},G:!0});i.ga()&&(g.D=i,i.equalityComparer=null,f=[],i.Jb=function(b){f.push(b),l.a.u.ja(b,function(b){l.a.ma(f,b),f.length||(i.F(),g.D=i=a)})})},l.I.prototype.createChildContext=function(a,b,c){return new l.I(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},l.I.prototype.extend=function(a){return new l.I(this.D||this.$data,this,null,function(b,c){b.$rawData=c.$rawData,l.a.extend(b,"function"==typeof a?a():a)})};var o=l.a.f.L(),p=l.a.f.L();l.Eb=function(a,b){return 2!=arguments.length?l.a.f.get(a,p):(l.a.f.set(a,p,b),void(b.D&&b.D.Jb(a)))},l.xa=function(a,b,c){return 1===a.nodeType&&l.e.wb(a),k(a,b,m(c),!0)},l.Lb=function(a,b,d){return d=m(d),l.xa(a,"function"==typeof b?f(b.bind(null,d,a)):l.a.Oa(b,c),d)},l.gb=function(a,b){1!==b.nodeType&&8!==b.nodeType||h(m(a),b,!0)},l.fb=function(a,c){if(!e&&b.jQuery&&(e=b.jQuery),c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");c=c||b.document.body,i(m(a),c,!0)},l.Ca=function(b){switch(b.nodeType){case 1:case 8:var c=l.Eb(b);if(c)return c;if(b.parentNode)return l.Ca(b.parentNode)}return a},l.Pb=function(b){return(b=l.Ca(b))?b.$data:a},l.b("bindingHandlers",l.d),l.b("applyBindings",l.fb),l.b("applyBindingsToDescendants",l.gb),l.b("applyBindingAccessorsToNode",l.xa),l.b("applyBindingsToNode",l.Lb),l.b("contextFor",l.Ca),l.b("dataFor",l.Pb)}();var q={"class":"className","for":"htmlFor"};l.d.attr={update:function(b,c){var d=l.a.c(c())||{};l.a.A(d,function(c,d){d=l.a.c(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c),8>=l.a.oa&&c in q?(c=q[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString()),"name"===c&&l.a.Cb(b,e?"":d.toString())})}},function(){l.d.checked={after:["value","attr"],init:function(b,c,d){function e(){return d.has("checkedValue")?l.a.c(d.get("checkedValue")):b.value}function f(){var a=b.checked,f=m?e():a;if(!l.ca.pa()&&(!i||a)){var g=l.k.t(c);j?k!==f?(a&&(l.a.Y(g,f,!0),l.a.Y(g,k,!1)),k=f):l.a.Y(g,f,a):l.g.va(g,d,"checked",f,!0)}}function g(){var a=l.a.c(c());b.checked=j?0<=l.a.l(a,e()):h?a:e()===a}var h="checkbox"==b.type,i="radio"==b.type;if(h||i){var j=h&&l.a.c(c())instanceof Array,k=j?e():a,m=i||j;i&&!b.name&&l.d.uniqueName.init(b,function(){return!0}),l.ba(f,null,{G:b}),l.a.q(b,"click",f),l.ba(g,null,{G:b})}}},l.g.W.checked=!0,l.d.checkedValue={update:function(a,b){a.value=l.a.c(b())}}}(),l.d.css={update:function(a,b){var c=l.a.c(b());"object"==typeof c?l.a.A(c,function(b,c){c=l.a.c(c),l.a.ua(a,b,c)}):(c=String(c||""),l.a.ua(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,l.a.ua(a,c,!0))}},l.d.enable={update:function(a,b){var c=l.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},l.d.disable={update:function(a,b){l.d.enable.update(a,function(){return!l.a.c(b())})}},l.d.event={init:function(a,b,c,d,e){var f=b()||{};l.a.A(f,function(f){"string"==typeof f&&l.a.q(a,f,function(a){var g,h=b()[f];if(h){try{var i=l.a.R(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===c.get(f+"Bubble")&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},l.d.foreach={vb:function(a){return function(){var b=a(),c=l.a.Sa(b);return c&&"number"!=typeof c.length?(l.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:l.K.Ja}):{foreach:b,templateEngine:l.K.Ja}}},init:function(a,b){return l.d.template.init(a,l.d.foreach.vb(b))},update:function(a,b,c,d,e){return l.d.template.update(a,l.d.foreach.vb(b),c,d,e)}},l.g.aa.foreach=!1,l.e.Q.foreach=!0,l.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(g){f=e.body}d=f===a}e=b(),l.g.va(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);l.a.q(a,"focus",e),l.a.q(a,"focusin",e),l.a.q(a,"blur",f),l.a.q(a,"focusout",f)},update:function(a,b){var c=!!l.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),l.k.t(l.a.ha,null,[a,c?"focusin":"focusout"]))}},l.g.W.hasfocus=!0,l.d.hasFocus=l.d.hasfocus,l.g.W.hasFocus=!0,l.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Va(a,b())}},k("if"),k("ifnot",!1,!0),k("with",!0,!1,function(a,b){return a.createChildContext(b)});var r={};l.d.options={init:function(a){if("select"!==l.a.B(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return l.a.la(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(a,c){if(m.length){var d=0<=l.a.l(m,l.i.p(c[0]));l.a.Db(c[0],d),n&&!d&&l.k.t(l.a.ha,null,[b,"change"])}}var h=0!=b.length&&b.multiple?b.scrollTop:null,i=l.a.c(c()),j=d.get("optionsIncludeDestroyed");c={};var k,m;m=b.multiple?l.a.ya(e(),l.i.p):0<=b.selectedIndex?[l.i.p(b.options[b.selectedIndex])]:[],i&&("undefined"==typeof i.length&&(i=[i]),k=l.a.la(i,function(b){return j||b===a||null===b||!l.a.c(b._destroy)}),d.has("optionsCaption")&&(i=l.a.c(d.get("optionsCaption")),null!==i&&i!==a&&k.unshift(r)));var n=!1;c.beforeRemove=function(a){b.removeChild(a)},i=g,d.has("optionsAfterRender")&&(i=function(b,c){g(0,c),l.k.t(d.get("optionsAfterRender"),null,[c[0],b!==r?b:a])}),l.a.Ua(b,k,function(c,e,g){return g.length&&(m=g[0].selected?[l.i.p(g[0])]:[],n=!0),e=b.ownerDocument.createElement("option"),c===r?(l.a.Xa(e,d.get("optionsCaption")),l.i.X(e,a)):(g=f(c,d.get("optionsValue"),c),l.i.X(e,l.a.c(g)),c=f(c,d.get("optionsText"),g),l.a.Xa(e,c)),[e]},c,i),l.k.t(function(){d.get("valueAllowUnset")&&d.has("value")?l.i.X(b,l.a.c(d.get("value")),!0):(b.multiple?m.length&&e().length<m.length:m.length&&0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex])!==m[0]:m.length||0<=b.selectedIndex)&&l.a.ha(b,"change")}),l.a.Tb(b),h&&20<Math.abs(h-b.scrollTop)&&(b.scrollTop=h)}},l.d.options.Pa=l.a.f.L(),l.d.selectedOptions={after:["options","foreach"],init:function(a,b,c){l.a.q(a,"change",function(){var d=b(),e=[];l.a.r(a.getElementsByTagName("option"),function(a){a.selected&&e.push(l.i.p(a))}),l.g.va(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=l.a.B(a))throw Error("values binding applies only to SELECT elements");var c=l.a.c(b());c&&"number"==typeof c.length&&l.a.r(a.getElementsByTagName("option"),function(a){var b=0<=l.a.l(c,l.i.p(a));l.a.Db(a,b)})}},l.g.W.selectedOptions=!0,l.d.style={update:function(a,b){var c=l.a.c(b()||{});l.a.A(c,function(b,c){c=l.a.c(c),a.style[b]=c||""})}},l.d.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");l.a.q(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{!0!==d&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},l.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Xa(a,b())}},l.e.Q.text=!0,l.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++l.d.uniqueName.Ob;l.a.Cb(a,c)}}},l.d.uniqueName.Ob=0,l.d.value={after:["options","foreach"],init:function(a,b,c){function d(){g=!1;var d=b(),e=l.i.p(a);l.g.va(d,c,"value",e)}var e=["change"],f=c.get("valueUpdate"),g=!1;f&&("string"==typeof f&&(f=[f]),l.a.$(e,f),e=l.a.ib(e)),!l.a.oa||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=l.a.l(e,"propertychange")||(l.a.q(a,"propertychange",function(){g=!0}),l.a.q(a,"focus",function(){g=!1}),l.a.q(a,"blur",function(){g&&d()})),l.a.r(e,function(b){var c=d;l.a.kc(b,"after")&&(c=function(){setTimeout(d,0)},b=b.substring(5)),l.a.q(a,b,c)})},update:function(a,b,c){var d=l.a.c(b());if(b=l.i.p(a),d!==b)if("select"===l.a.B(a)){var e=c.get("valueAllowUnset");c=function(){l.i.X(a,d,e)},c(),e||d===l.i.p(a)?setTimeout(c,0):l.k.t(l.a.ha,null,[a,"change"])}else l.i.X(a,d)}},l.g.W.value=!0,l.d.visible={update:function(a,b){var c=l.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){l.d[a]={init:function(b,c,d,e,f){return l.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e,f)}}}("click"),l.C=function(){},l.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},l.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},l.C.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||c;var d=b.getElementById(a);if(!d)throw Error("Cannot find template with ID "+a);return new l.n.j(d)}if(1==a.nodeType||8==a.nodeType)return new l.n.Z(a);throw Error("Unknown template type: "+a)},l.C.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},l.C.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")},l.C.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},l.b("templateEngine",l.C),l.Za=function(){function a(a,b,c,d){a=l.g.Ra(a);for(var e=l.g.aa,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+l.g.qa(a,{valueAccessors:!0})+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{Ub:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return l.Za.dc(a,b)},c)},dc:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"<!-- ko -->","#comment",e)})},Mb:function(a,b){return l.w.Na(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&l.xa(e,a,d)})}}}(),l.b("__tr_ambtns",l.Za.Mb),function(){l.n={},l.n.j=function(a){this.j=a},l.n.j.prototype.text=function(){var a=l.a.B(this.j),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.j[a];var b=arguments[0];"innerHTML"===a?l.a.Va(this.j,b):this.j[a]=b};var b=l.a.f.L()+"_";l.n.j.prototype.data=function(a){return 1===arguments.length?l.a.f.get(this.j,b+a):void l.a.f.set(this.j,b+a,arguments[1])};var c=l.a.f.L();l.n.Z=function(a){this.j=a},l.n.Z.prototype=new l.n.j,l.n.Z.prototype.text=function(){if(0==arguments.length){var b=l.a.f.get(this.j,c)||{};return b.$a===a&&b.Ba&&(b.$a=b.Ba.innerHTML),b.$a}l.a.f.set(this.j,c,{$a:arguments[0]})},l.n.j.prototype.nodes=function(){return 0==arguments.length?(l.a.f.get(this.j,c)||{}).Ba:void l.a.f.set(this.j,c,{Ba:arguments[0]})},l.b("templateSources",l.n),l.b("templateSources.domElement",l.n.j),l.b("templateSources.anonymousTemplate",l.n.Z)}(),function(){function b(a,b,c){var d;for(b=l.e.nextSibling(b);a&&(d=a)!==b;)a=l.e.nextSibling(d),c(d,a)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=l.J.instance,h=g.preprocessNode;if(h){if(b(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),l.a.ea(a,f))}b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.fb(c,a)}),b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.w.Ib(a,[c])}),l.a.ea(a,f)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,g,h){h=h||{};var i=a&&d(a),i=i&&i.ownerDocument,j=h.templateEngine||f;if(l.Za.Ub(e,j,i),e=j.renderTemplate(e,g,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":l.e.U(a,e),i=!0;break;case"replaceNode":l.a.Bb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,g),h.afterRender&&l.k.t(h.afterRender,null,[e,g.$data])),e}var f;l.Wa=function(b){if(b!=a&&!(b instanceof l.C))throw Error("templateEngine must inherit from ko.templateEngine");f=b},l.Ta=function(b,c,g,h,i){if(g=g||{},(g.templateEngine||f)==a)throw Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var j=d(h);return l.h(function(){var a=c&&c instanceof l.I?c:new l.I(l.a.c(c)),f=l.v(b)?b():"function"==typeof b?b(a.$data,a):b,a=e(h,i,f,a,g);"replaceNode"==i&&(h=a,j=d(h))},null,{Da:function(){return!j||!l.a.Ea(j)},G:j&&"replaceNode"==i?j.parentNode:j})}return l.w.Na(function(a){l.Ta(b,c,g,a,"replaceNode")})},l.jc=function(b,d,f,g,h){function i(a,b){c(b,k),f.afterRender&&f.afterRender(b,a)}function j(a,c){k=h.createChildContext(a,f.as,function(a){a.$index=c});var d="function"==typeof b?b(a,k):b;return e(null,"ignoreTargetNode",d,k,f)}var k;return l.h(function(){var b=l.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]),b=l.a.la(b,function(b){return f.includeDestroyed||b===a||null===b||!l.a.c(b._destroy)}),l.k.t(l.a.Ua,null,[g,b,j,f,i])},null,{G:g})};var g=l.a.f.L();l.d.template={init:function(a,b){var c=l.a.c(b());return"string"==typeof c||c.name?l.e.da(a):(c=l.e.childNodes(a),c=l.a.ec(c),new l.n.Z(a).nodes(c)),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var h,i=c();c=l.a.c(i),d=!0,e=null,"string"==typeof c?c={}:(i=c.name,"if"in c&&(d=l.a.c(c["if"])),d&&"ifnot"in c&&(d=!l.a.c(c.ifnot)),h=l.a.c(c.data)),"foreach"in c?e=l.jc(i||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(h,c.as):f,e=l.Ta(i||b,f,c,b)):l.e.da(b),f=e,(h=l.a.f.get(b,g))&&"function"==typeof h.F&&h.F(),l.a.f.set(b,g,f&&f.ga()?f:a)}},l.g.aa.template=function(a){return a=l.g.Ra(a),1==a.length&&a[0].unknown||l.g.bc(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},l.e.Q.template=!0}(),l.b("setTemplateEngine",l.Wa),l.b("renderTemplate",l.Ta),l.a.nb=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||c>d)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g.value===h.value){g.moved=h.index,h.moved=g.index,b.splice(f,1),d=f=0;break}d+=f}}},l.a.Aa=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,m=Math.max,n=[],o=a.length,p=b.length,q=p-o||1,r=o+p+1;for(f=0;o>=f;f++)for(i=h,n.push(h=[]),j=k(p,f+q),g=m(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||r,h[g-1]||r)+1:g+1:f+1;for(k=[],m=[],q=[],f=o,g=p;f||g;)p=n[f][g]-1,g&&p===n[f][g-1]?m.push(k[k.length]={status:c,value:b[--g],index:g}):f&&p===n[f-1][g]?q.push(k[k.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||k.push({status:"retained",value:b[g]}));return l.a.nb(m,q,10*o),k.reverse()}return function(b,c,d){return d="boolean"==typeof d?{dontLimitMoves:d}:d||{},b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),l.b("utils.compareArrays",l.a.Aa),function(){function b(b,c,d,e,f){var g=[],h=l.h(function(){var a=c(d,f,l.a.ea(g,b))||[];0<g.length&&(l.a.Bb(g,a),e&&l.k.t(e,null,[d,a,f])),g.length=0,l.a.$(g,a)},null,{G:b,Da:function(){return!l.a.eb(g)}});return{S:g,h:h.ga()?h:a}}var c=l.a.f.L();l.a.Ua=function(d,e,f,g,h){function i(a,b){u=m[b],r!==b&&(x[a]=u),u.Ia(r++),l.a.ea(u.S,d),p.push(u),t.push(u)}function j(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&l.a.r(b[c].S,function(d){a(d,c,b[c].ka)})}e=e||[],g=g||{};var k=l.a.f.get(d,c)===a,m=l.a.f.get(d,c)||[],n=l.a.ya(m,function(a){return a.ka}),o=l.a.Aa(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===a&&(u=m[q],u.h&&u.h.F(),s.push.apply(s,l.a.ea(u.S,d)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==a?i(y,w):(u={ka:v.value,Ia:l.m(r++)},p.push(u),t.push(u),k||(n[y]=u))}j(g.beforeMove,x),l.a.r(s,g.beforeRemove?l.M:l.removeNode);for(var z,y=0,k=l.e.firstChild(d);u=t[y];y++){for(u.S||l.a.extend(u,b(d,f,u.ka,h,u.Ia)),q=0;o=u.S[q];k=o.nextSibling,z=o,q++)o!==k&&l.e.rb(d,o,z);!u.Zb&&h&&(h(u.ka,u.S,u.Ia),u.Zb=!0)}j(g.beforeRemove,e),j(g.afterMove,x),j(g.afterAdd,n),l.a.f.set(d,c,p)}}(),l.b("utils.setDomNodeChildrenFromArrayMapping",l.a.Ua),l.K=function(){this.allowTemplateRewriting=!1},l.K.prototype=new l.C,l.K.prototype.renderTemplateSource=function(a){var b=(9>l.a.oa?0:a.nodes)?a.nodes():null;return b?l.a.R(b.cloneNode(!0).childNodes):(a=a.text(),l.a.Qa(a))},l.K.Ja=new l.K,l.Wa(l.K.Ja),l.b("nativeTemplateEngine",l.K),function(){l.La=function(){var a=this.ac=function(){if(!e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,d,f){if(f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var g=b.data("precompiled");return g||(g=b.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),b.data("precompiled",g)),b=[d.$data],d=e.extend({koBindingContext:d},f.templateOptions),d=e.tmpl(g,b,d),d.appendTo(c.createElement("div")),e.fragments={},d},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){c.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},a>0&&(e.tmpl.tag.ko_code={open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},l.La.prototype=new l.C;var a=new l.La;0<a.ac&&l.Wa(a),l.b("jqueryTmplTemplateEngine",l.La)}()})}()}(),!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko.validation={})}(function(a,b){function c(a){var b="max"===a;return function(c,d){if(f.utils.isEmptyVal(c))return!0;var e,g;void 0===d.typeAttr?(g="text",e=d):(g=d.typeAttr,e=d.value),isNaN(e)||(g="number");var h,i,j;switch(g.toLowerCase()){case"week":if(h=/^(\d{4})-W(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"month":if(h=/^(\d{4})-(\d{2})$/,i=c.match(h),null===i)throw"Invalid value for "+a+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min";return j=e.match(h),j?b?i[1]<j[1]||i[1]===j[1]&&i[2]<=j[2]:i[1]>j[1]||i[1]===j[1]&&i[2]>=j[2]:!1;case"number":case"range":return b?!isNaN(c)&&parseFloat(c)<=parseFloat(e):!isNaN(c)&&parseFloat(c)>=parseFloat(e);default:return b?e>=c:c>=e}}}function d(a,b,c){return b.validator(a(),void 0===c.params?!0:h(c.params))?!0:(a.setError(f.formatMessage(c.message||b.message,h(c.params),a)),!1)}function e(a,b,c){a.isValidating(!0);var d=function(d){var e=!1,g="";return a.__valid__()?(d.message?(e=d.isValid,g=d.message):e=d,e||(a.error(f.formatMessage(g||c.message||b.message,h(c.params),a)),a.__valid__(e)),void a.isValidating(!1)):void a.isValidating(!1)};b.validator(a(),h(c.params||!0),d)}if(void 0===typeof a)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";a.validation=b;var f=a.validation,g=a.utils,h=g.unwrapObservable,i=g.arrayForEach,j=g.extend,k={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},l=j({},k);l.html5Attributes=["required","pattern","min","max","step"],l.html5InputTypes=["email","number","date"],l.reset=function(){j(l,k)},f.configuration=l,f.utils=function(){var a=(new Date).getTime(),b={},c="__ko_validation__";return{isArray:function(a){return a.isArray||"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return null!==a&&"object"==typeof a},isObservableArray:function(a){return!!a&&"function"==typeof a.remove&&"function"==typeof a.removeAll&&"function"==typeof a.destroy&&"function"==typeof a.destroyAll&&"function"==typeof a.indexOf&&"function"==typeof a.replace
},values:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},getValue:function(a){return"function"==typeof a?a():a},hasAttribute:function(a,b){return null!==a.getAttribute(b)},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){return a.setAttribute(b,c)},isValidatable:function(a){return!!(a&&a.rules&&a.isValid&&a.isModified)},insertAfter:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},newId:function(){return a+=1},getConfigOptions:function(a){var b=f.utils.contextFor(a);return b||f.configuration},setDomData:function(a,d){var e=a[c];e||(a[c]=e=f.utils.newId()),b[e]=d},getDomData:function(a){var d=a[c];return d?b[d]:void 0},contextFor:function(a){switch(a.nodeType){case 1:case 8:var b=f.utils.getDomData(a);if(b)return b;if(a.parentNode)return f.utils.contextFor(a.parentNode)}return void 0},isEmptyVal:function(a){return void 0===a?!0:null===a?!0:""===a?!0:void 0},getOriginalElementTitle:function(a){var b=f.utils.getAttribute(a,"data-orig-title"),c=a.title,d=f.utils.hasAttribute(a,"data-orig-title");return d?b:c},async:function(a){window.setImmediate?window.setImmediate(a):window.setTimeout(a,0)},forEach:function(a,b){if(f.utils.isArray(a))return i(a,b);for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}}}();var m=function(){function b(a){i(a.subscriptions,function(a){a.dispose()}),a.subscriptions=[]}function c(a){a.options.deep&&(i(a.flagged,function(a){delete a.__kv_traversed}),a.flagged.length=0),a.options.live||b(a)}function d(a,d){d.validatables=[],b(d),e(a,d),c(d)}function e(b,c,d){var f=[],g=b.peek?b.peek():b;b.__kv_traversed!==!0&&(c.options.deep&&(b.__kv_traversed=!0,c.flagged.push(b)),d=void 0!==d?d:c.options.deep?1:-1,a.isObservable(b)&&(b.isValid||b.extend({validatable:!0}),c.validatables.push(b),c.options.live&&n.isObservableArray(b)&&c.subscriptions.push(b.subscribe(function(){c.graphMonitor.valueHasMutated()}))),g&&!g._destroy&&(n.isArray(g)?f=g:n.isObject(g)&&(f=n.values(g))),0!==d&&n.forEach(f,function(a){a&&!a.nodeType&&e(a,c,d+1)}))}function k(a){var b=[];return i(a,function(a){a.isValid()||b.push(a.error())}),b}var l=0,m=f.configuration,n=f.utils;return{init:function(a,b){l>0&&!b||(a=a||{},a.errorElementClass=a.errorElementClass||a.errorClass||m.errorElementClass,a.errorMessageClass=a.errorMessageClass||a.errorClass||m.errorMessageClass,j(m,a),m.registerExtenders&&f.registerExtenders(),l=1)},configure:function(a){f.init(a)},reset:f.configuration.reset,group:function(b,c){c=j(j({},m.grouping),c);var e={options:c,graphMonitor:a.observable(),flagged:[],subscriptions:[],validatables:[]},f=null;return c.observable?(d(b,e),f=a.computed(function(){return e.graphMonitor(),d(b,e),k(e.validatables)})):f=function(){return d(b,e),k(e.validatables)},f.showAllMessages=function(a){void 0===a&&(a=!0),f(),i(e.validatables,function(b){b.isModified(a)})},b.errors=f,b.isValid=function(){return 0===b.errors().length},b.isAnyMessageShown=function(){var a=!1;return f(),a=!!g.arrayFirst(e.validatables,function(a){return!a.isValid()&&a.isModified()})},f},formatMessage:function(a,b,c){return"function"==typeof a?a(b,c):a.replace(/\{0\}/gi,h(b))},addRule:function(a,b){return a.extend({validatable:!0}),a.rules.push(b),a},addAnonymousRule:function(a,b){void 0===b.message&&(b.message="Error"),b.onlyIf&&(b.condition=b.onlyIf),f.addRule(a,b)},addExtender:function(b){a.extenders[b]=function(a,c){return c&&(c.message||c.onlyIf)?f.addRule(a,{rule:b,message:c.message,params:n.isEmptyVal(c.params)?!0:c.params,condition:c.onlyIf}):f.addRule(a,{rule:b,params:c})}},registerExtenders:function(){if(m.registerExtenders)for(var b in f.rules)f.rules.hasOwnProperty(b)&&(a.extenders[b]||f.addExtender(b))},insertValidationMessage:function(a){var b=document.createElement("SPAN");return b.className=n.getConfigOptions(a).errorMessageClass,n.insertAfter(a,b),b},parseInputValidationAttributes:function(a,b){i(f.configuration.html5Attributes,function(c){if(n.hasAttribute(a,c)){var d=a.getAttribute(c)||!0;if("min"===c||"max"===c){var e=a.getAttribute("type");"undefined"!=typeof e&&e||(e="text"),d={typeAttr:e,value:d}}f.addRule(b(),{rule:c,params:d})}});var c=a.getAttribute("type");i(f.configuration.html5InputTypes,function(a){a===c&&f.addRule(b(),{rule:"date"===a?"dateISO":a,params:!0})})},writeInputValidationAttributes:function(a,b){var c=b();if(c&&c.rules){var d=c.rules();i(f.configuration.html5Attributes,function(b){var c,e=g.arrayFirst(d,function(a){return a.rule.toLowerCase()===b.toLowerCase()});e&&(c=e.params,"pattern"===e.rule&&e.params instanceof RegExp&&(c=e.params.source),a.setAttribute(b,c))}),d=null}},makeBindingHandlerValidatable:function(b){var c=a.bindingHandlers[b].init;a.bindingHandlers[b].init=function(b,d,e,f,g){return c(b,d,e,f,g),a.bindingHandlers.validationCore.init(b,d,e,f,g)}},setRules:function(b,c){var d=function(b,c){if(b&&c)for(var e in c)if(c.hasOwnProperty(e)){var g=c[e];if(b[e]){var i=b[e],j=h(i),k={},l={};for(var m in g)g.hasOwnProperty(m)&&(f.rules[m]?k[m]=g[m]:l[m]=g[m]);if(a.isObservable(i)&&i.extend(k),j&&n.isArray(j))for(var o=0;o<j.length;o++)d(j[o],l);else d(j,l)}}};d(b,c)}}}();j(a.validation,m),f.rules={},f.rules.required={validator:function(a,b){var c,d=/^\s+|\s+$/g;return void 0===a||null===a?!b:(c=a,"string"==typeof a&&(c=a.replace(d,"")),b?(c+"").length>0:!0)},message:"This field is required."},f.rules.min={validator:c("min"),message:"Please enter a value greater than or equal to {0}."},f.rules.max={validator:c("max"),message:"Please enter a value less than or equal to {0}."},f.rules.minLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length>=b},message:"Please enter at least {0} characters."},f.rules.maxLength={validator:function(a,b){return f.utils.isEmptyVal(a)||a.length<=b},message:"Please enter no more than {0} characters."},f.rules.pattern={validator:function(a,b){return f.utils.isEmptyVal(a)||null!==a.toString().match(b)},message:"Please check this value."},f.rules.step={validator:function(a,b){if(f.utils.isEmptyVal(a)||"any"===b)return!0;var c=100*a%(100*b);return Math.abs(c)<1e-5||Math.abs(1-c)<1e-5},message:"The value must increment by {0}"},f.rules.email={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+)*)|((")(((( |	)*(\x0d\x0a))?( |	)+)?(([--]|\x21|[#-\x5b]|[\x5d-~]|[ -퟿豈-﷏ﷰ-￯])|(\\([-	\x0d-]|[ -퟿豈-﷏ﷰ-￯]))))*((( |	)*(\x0d\x0a))?( |	)+)?(")))@((([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|\d|[ -퟿豈-﷏ﷰ-￯])))\.)+(([a-z]|[ -퟿豈-﷏ﷰ-￯])|(([a-z]|[ -퟿豈-﷏ﷰ-￯])([a-z]|\d|-|\.|_|~|[ -퟿豈-﷏ﷰ-￯])*([a-z]|[ -퟿豈-﷏ﷰ-￯])))$/i.test(a):!0},message:"Please enter a proper email address"},f.rules.date={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&!/Invalid|NaN/.test(new Date(a)):!0},message:"Please enter a proper date"},f.rules.dateISO={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a):!0},message:"Please enter a proper date"},f.rules.number={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a):!0},message:"Please enter a number"},f.rules.digit={validator:function(a,b){return b?f.utils.isEmptyVal(a)||b&&/^\d+$/.test(a):!0},message:"Please enter a digit"},f.rules.phoneUS={validator:function(a,b){return b?f.utils.isEmptyVal(a)?!0:"string"!=typeof a?!1:(a=a.replace(/\s+/g,""),b&&a.length>9&&a.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Please specify a valid phone number"},f.rules.equal={validator:function(a,b){var c=b;return a===f.utils.getValue(c)},message:"Values must equal"},f.rules.notEqual={validator:function(a,b){var c=b;return a!==f.utils.getValue(c)},message:"Please choose another value."},f.rules.unique={validator:function(a,b){var c=f.utils.getValue(b.collection),d=f.utils.getValue(b.externalValue),e=0;return a&&c?(g.arrayFilter(c,function(c){a===(b.valueAccessor?b.valueAccessor(c):c)&&e++}),(d?1:2)>e):!0},message:"Please make sure the value is unique."},function(){f.registerExtenders()}(),a.bindingHandlers.validationCore=function(){return{init:function(b,c){var d=f.utils.getConfigOptions(b),e=c();if(d.parseInputAttributes&&f.utils.async(function(){f.parseInputValidationAttributes(b,c)}),d.insertMessages&&f.utils.isValidatable(e)){var g=f.insertValidationMessage(b);d.messageTemplate?a.renderTemplate(d.messageTemplate,{field:e},null,g,"replaceNode"):a.applyBindingsToNode(g,{validationMessage:e})}d.writeInputAttributes&&f.utils.isValidatable(e)&&f.writeInputValidationAttributes(b,c),d.decorateInputElement&&f.utils.isValidatable(e)&&a.applyBindingsToNode(b,{validationElement:e})}}}(),f.makeBindingHandlerValidatable("value"),f.makeBindingHandlerValidatable("checked"),a.bindingHandlers.validationMessage={update:function(b,c){var d=c(),e=f.utils.getConfigOptions(b),i=(h(d),!1),j=!1;if(!d.isValid||!d.isModified)throw new Error("Observable is not validatable");i=d.isModified(),j=d.isValid();var k=null;(!e.messagesOnModified||i)&&(k=j?null:d.error);var l=!e.messagesOnModified||i?!j:!1,m="none"!==b.style.display;e.allowHtmlMessages?g.setHtml(b,k):a.bindingHandlers.text.update(b,function(){return k}),m&&!l?b.style.display="none":!m&&l&&(b.style.display="")}},a.bindingHandlers.validationElement={update:function(b,c,d){var e=c(),g=f.utils.getConfigOptions(b),i=(h(e),!1),j=!1;if(!e.isValid||!e.isModified)throw new Error("Observable is not validatable");i=e.isModified(),j=e.isValid();var k=function(){var a={},b=!g.decorateElementOnModified||i?!j:!1;return a[g.errorElementClass]=b,a};a.bindingHandlers.css.update(b,k,d),g.errorsAsTitle&&a.bindingHandlers.attr.update(b,function(){var a=!g.errorsAsTitleOnModified||i,c=f.utils.getOriginalElementTitle(b);return a&&!j?{title:e.error,"data-orig-title":c}:!a||j?{title:c,"data-orig-title":null}:void 0})}},a.bindingHandlers.validationOptions=function(){return{init:function(a,b){var c=h(b());if(c){var d=j({},f.configuration);j(d,c),f.utils.setDomData(a,d)}}}}(),a.extenders.validation=function(a,b){return i(f.utils.isArray(b)?b:[b],function(b){f.addAnonymousRule(a,b)}),a},a.extenders.validatable=function(b,c){if(f.utils.isObject(c)||(c={enable:c}),"enable"in c||(c.enable=!0),c.enable&&!f.utils.isValidatable(b)){var d=f.configuration.validate||{},e={throttleEvaluation:c.throttle||d.throttle};b.error=a.observable(null),b.rules=a.observableArray(),b.isValidating=a.observable(!1),b.__valid__=a.observable(!0),b.isModified=a.observable(!1),b.isValid=a.computed(b.__valid__),b.setError=function(a){b.error(a),b.__valid__(!1)},b.clearError=function(){return b.error(null),b.__valid__(!0),b};var g=b.subscribe(function(){b.isModified(!0)}),h=a.computed(j({read:function(){return b(),b.rules(),f.validateObservable(b),!0}},e));j(h,e),b._disposeValidation=function(){b.isValid.dispose(),b.rules.removeAll(),b.isModified.getSubscriptionsCount()>0&&(b.isModified._subscriptions.change=[]),b.isValidating.getSubscriptionsCount()>0&&(b.isValidating._subscriptions.change=[]),b.__valid__.getSubscriptionsCount()>0&&(b.__valid__._subscriptions.change=[]),g.dispose(),h.dispose(),delete b.rules,delete b.error,delete b.isValid,delete b.isValidating,delete b.__valid__,delete b.isModified}}else c.enable===!1&&b._disposeValidation&&b._disposeValidation();return b},f.validateObservable=function(a){for(var b,c,g=0,h=a.rules(),i=h.length;i>g;g++)if(c=h[g],!c.condition||c.condition())if(b=c.rule?f.rules[c.rule]:c,b.async||c.async)e(a,b,c);else if(!d(a,b,c))return!1;return a.clearError(),!0},f.localize=function(a){var b;for(b in a)f.rules.hasOwnProperty(b)&&(f.rules[b].message=a[b])},a.applyBindingsWithValidation=function(b,c,d){var e,g,h=arguments.length;h>2?(e=c,g=d):2>h?e=document.body:arguments[1].nodeType?e=c:g=arguments[1],f.init(),g&&f.utils.setDomData(e,g),a.applyBindings(b,c)};var n=a.applyBindings;a.applyBindings=function(a,b){f.init(),n(a,b)},a.validatedObservable=function(b){if(!f.utils.isObject(b))return a.observable(b).extend({validatable:!0});var c=a.observable(b);return c.errors=f.group(b),c.isValid=a.observable(b.isValid()),c.errors.subscribe(function(a){c.isValid(0===a.length)}),c}});