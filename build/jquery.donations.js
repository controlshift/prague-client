function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}function getJasmineRequireObj(){return"undefined"!=typeof module&&module.exports?exports:(window.jasmineRequire=window.jasmineRequire||{},window.jasmineRequire)}var donationsForm={},$,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};donationsForm.init=function(a,b){$=a;var c,d,e,f,g,h,i,j,k,l,m,n,o;e=$.extend({},{imgpath:"https://d3dy5gmtp8yhk7.cloudfront.net",metaviewporttag:!0},b,donationsForm.parseQueryString(document.URL.split("?")[1])),i='<meta name="viewport" content="width=device-width, initial-scale=1">',e.metaviewporttag===!1&&(i=""),$(".donations-form-anchor").append(function(){return'<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n'+i+'\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" value="'+e.org+'">\n  <input type="hidden" name="customer.charges_attributes[0].currency" value="usd">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\'>$</span><span class=\'donation-header-amt\'>0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header dph-active" id="dnt-progress-amount">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first">\n    <div class="donations-currency-select-row">\n      Currency: \n      <select class="donations-currency-select"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n    </span>\n    <div class="donation-input-row">\n      <div class="donation-btn donation-btn-sm '+("1"===e.select?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt1||15)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("2"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt2||35)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("3"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt3||50)+'</span></div>\n    </div>\n    <div class="donation-input-row">      \n      <div class="donation-btn donation-btn-sm '+("4"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt4||100)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("5"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt5||250)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("6"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt6||500)+'</span></div>\n    </div>\n    <div class="donation-input-row"> \n      <div class="donation-btn donation-btn-sm '+("7"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt7||1e3)+'</span></div>\n      <input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount">\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc">\n    </div>\n    <div class="donation-payment-errors">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>'}),d=function(a){var b,c,d,e,f,g;for(c=[],g=donationsForm.currenciesArray,e=0,f=g.length;f>e;e++)b=g[e],d=b===a?"selected":"",c.push('<option value="',b,'" ',d,">",b,"</option>");return $(".donations-currency-select").append(c.join("")),$(".donations-currency-select").change(function(){var a;return a=$("option:selected",this),k(donationsForm.getSymbolFromCurrency(a.val()),a.val())})},d(),c=function(){return $(".donation-btn-lg").payment("restrictNumeric"),$(".donation-btn-sm").click(function(){return gaDonations("send","event","amount","click",$(this).text(),1),$(".donation-header-amt").text($(this).find(".donation-amt").text()),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active")}),$(".donation-btn-lg").change(function(){var a;return a=$(this),$(this).val()?(gaDonations("send","event","amount","click",$(this).val(),1),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active"),$(".donation-header-amt").text(a.val())):void 0}),$(".donation-next-btn").click(function(){var a,b;return o($(this).parent())?(gaDonations("send","event","advance-button","click#success",$(this).attr("id"),1),a=$(this).parent(),b=$(this).parent().next(),$(".donation-progress-header").eq($(".donation-input-set").index(b)).addClass("dph-active"),b.show(),a.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$(".donation-submit").click(function(){return o($(this).parent())})},c(),l=function(){var a;return a=$(".donation-btn-active .donation-amt").text(),$(".donation-header-amt").text(a?a:"0")},k=function(a,b,f){return b=null!=b?b:e.currency,$("input[name='customer.charges_attributes[0].currency']").val(b),$(".donation-currency").html(a),$("#input-set-first").html(donationsForm.donationsButtons(e.seedamount,e.seedvalues,e.select,a,f)),l(),c(),d(b)},null!=e.currency?(j=donationsForm.getSymbolFromCurrency(e.currency),k(j,e.currency)):$.ajax({type:"get",url:"https://freegeoip.net/json/",dataType:"jsonp",success:function(a){var b,c;return b=donationsForm.getCurrencyFromCountryCode(a.country_code),j=donationsForm.getSymbolFromCurrency(b),k(j,b),e.seedcurrency!==b?(c=function(a){var c;return a=e.rates?e.rates:a,c=donationsForm.conversionRt(e.seedcurrency,b,a),k(j,b,c)},null!=e.rates||null!=$("#donations-config").attr("defaults")?c(JSON.parse($("#donations-config").attr("defaults")).rates):$("#donation-script").on("donations:defaultsloaded",function(a,b){return c(b.rates)})):k(j,b)}}),$("#donation-form").show(),f=this,g={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"};for(h in g)n=g[h],$(h).css("background-image","url('"+e.imgpath+"/"+n+"')");return o=function(a){var b,c,d,e,f,g;if(c=!0,0===$(".donation-input-set").index(a)&&0===a.find(".donation-btn-active").length)return gaDonations("send","event","error","initiated","amount",1),$(".donation-error-label").first().show(),!1;for($(".donation-error-label").first().hide(),g=a.find(".donation-text-field, .donation-select"),e=0,f=g.length;f>e;e++)b=g[e],d=donationsForm.validField($(b).val(),$(b).attr("type")),d!==!0?(gaDonations("send","event","error","initiated",$(b).attr("name"),1),c=!1,$(b).addClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").text(d),$(b).parent().find(".donation-error-label").show()):($(b).removeClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").hide());return c},$(".donation-text-field").blur(function(){var a,b;return a=$(this),b=donationsForm.validField(a.val(),a.attr("type")),b===!0?(a.removeClass("donation-text-field-error"),a.parent().find(".donation-error-label").hide(),a.addClass("donation-text-field-completed")):(a.addClass("donation-text-field-error"),a.parent().find(".donation-error-label").text(b),a.parent().find(".donation-error-label").show(),void 0)}),$(".donation-text-field[type=cc-num]").blur(function(){var a,b;return a=$(this),b=$.payment.cardType(a.val()),"amex"===b||"mastercard"===b||"visa"===b||"discover"===b||"dinersclub"===b?a.css("background-image","url("+e.imgpath+"/icon-cc-"+b+".png)"):void 0}),$(".donation-select[type='month']").html(function(){var a,b,c;for(b=["<option value='' disabled selected>Month</option>"],a=1;12>=a;)c=a>9?""+a:"0"+a,b.push("<option value='"+c+"'>"+c+"</option>"),a++;return b.join("")}),$(".donation-select[type='year']").html(function(){var a,b,c,d,e;for(b=(new Date).getFullYear(),a=["<option value='' disabled selected>Year</option>"],c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push("<option value='"+c+"'>"+c+"</option>");return a}),m=function(a){var b,c;for(b=1;a>=b;)$(".donation-progress-header").eq(b).addClass("dph-active"),b++;for(c=[];2>=b;)$(".donation-progress-header").eq(b).removeClass("dph-active"),c.push(b++);return c},$(".donation-progress-header").click(function(){var a,b,c;return a=$(".donation-progress-header").index($(this)),c=$(".donation-input-set").eq(a),b=$(".donation-input-set").filter(":visible:first"),o(b)?(gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1),m(a),c.show(),b.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),donationsForm.connectToServer(e),this},donationsForm.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},donationsForm.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAN",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},donationsForm.currenciesArray=["USD","GBP","CAN","AUD","EUR","NZD","SEK","NOK","DKK"],donationsForm.conversionRt=function(a,b,c){return 1/c[b]*c[a]},donationsForm.donationsButtons=function(a,b,c,d,e){var f,g,h,i,j,k,l;for(null==e&&(e=1),h=b.split(","),g=' <div class="donations-currency-select-row">\n  Currency: \n  <select class="donations-currency-select"></select>\n</div>\n<span class="donation-field-label">\n  <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n</span> ',g+="<div class='donation-input-row'>",f=1,j=function(){var b;return b=(e*parseFloat(i)*parseFloat(a)/100).toFixed(),g+='<div class="donation-btn donation-btn-sm '+(c===f.toString()?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>"+d+"</span><span class='donation-amt'>"+b+"</span></div>",f%3===0?g+="</div><div class='donation-input-row'>":void 0},k=0,l=h.length;l>k;k++)i=h[k],j(),f+=1;return h.length%5===0&&(g+="</div><div class='donation-input-row'>"),g+='<input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount"></div>\n<div class="donation-next-btn" id="donation-first-next-btn">\n  <div class="donation-next-btn-header">\n    NEXT\n  </div>\n</div>'},donationsForm.getCurrencyFromCountryCode=function(a){var b,c;return c=["AT","BE","BG","HR","CY","CZ","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES"],b=donationsForm.currencies[a],null!=b?b:__indexOf.call(c,a)>=0?"EUR":"USD"},donationsForm.getSymbolFromCurrency=function(a){var b;return b={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAN:"C$"},b[a]||a},donationsForm.validField=function(a,b){var c,d,e;return a?"email"===b?(d=/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,d.test(a)?!0:"Invalid email format."):"cc-num"===b?$.payment.validateCardNumber(a)?!0:"Invalid card format.":"cvc"===b?$.payment.validateCardCVC(a)?!0:"Invalid CVC.":"month"===b||"year"===b?("month"===b&&(e=$(".donation-select[type='year']").val(),c=a),"year"===b&&(c=$(".donation-select[type='month']").val(),e=a),/^\d+$/.test(c)&&/^\d+$/.test(e)?$.payment.validateCardExpiry(c,e)?!0:"Expiry must be in the future.":"Invalid expiry date."):!0:"Can't be blank"},donationsForm.hide=function(){return $("#donation-form").hide()},donationsForm.connectToServer=function(a){var b,c,d;return b=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(b.stripepublickey),$.fn.serializeObject=function(){var a,b;return b=form2js(this.attr("id"),".",!0),a=$(".donation-btn-active").text()?$(".donation-btn-active").text():$(".donation-btn-active").val(),b.customer.charges_attributes[0].amount=a.replace("$","")+"00",b},d=function(a){var c,d;return d=new Pusher(b.pusherpublickey),c=d.subscribe(a),c.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=b.redirectto&&window.location.replace(b.redirectto),donationsForm.hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},c=function(a,c){var e,f,g,h,i,j,k;if(e=$("#donation-form"),c.error)return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c.error.message),e.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide();j=c.id,e.append($('<input type="hidden" name="card_token" />').val(j)),g=$.extend(JSON.parse($("#donations-config").attr("defaults")),b),f={};for(h in g)k=g[h],$.extend(f,"ak"===h.substring(0,2)?{key:k}:void 0);return i=$.ajax({url:""+b.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),f)}),i.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),d(a.pusher_channel_token)}),i.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1},$("#donation-form").submit(function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$(this),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,c),!1})},function(){function a(a,b){for(var c in b)a[c]=b[c];return a}window.jasmine=jasmineRequire.core(jasmineRequire),jasmineRequire.html(jasmine);var b=jasmine.getEnv(),c={describe:function(a,c){return b.describe(a,c)},xdescribe:function(a,c){return b.xdescribe(a,c)},it:function(a,c){return b.it(a,c)},xit:function(a,c){return b.xit(a,c)},beforeEach:function(a){return b.beforeEach(a)},afterEach:function(a){return b.afterEach(a)},expect:function(a){return b.expect(a)},pending:function(){return b.pending()},spyOn:function(a,c){return b.spyOn(a,c)},jsApiReporter:new jasmine.JsApiReporter({timer:new jasmine.Timer})};"undefined"==typeof window&&"object"==typeof exports?a(exports,c):a(window,c),jasmine.addCustomEqualityTester=function(a){b.addCustomEqualityTester(a)},jasmine.addMatchers=function(a){return b.addMatchers(a)},jasmine.clock=function(){return b.clock};var d=new jasmine.QueryString({getWindowLocation:function(){return window.location}}),e=d.getParam("catch");b.catchExceptions("undefined"==typeof e?!0:e);var f=new jasmine.HtmlReporter({env:b,onRaiseExceptionsClick:function(){d.setParam("catch",!b.catchingExceptions())},getContainer:function(){return document.body},createElement:function(){return document.createElement.apply(document,arguments)},createTextNode:function(){return document.createTextNode.apply(document,arguments)},timer:new jasmine.Timer});b.addReporter(c.jsApiReporter),b.addReporter(f);var g=new jasmine.HtmlSpecFilter({filterString:function(){return d.getParam("spec")}});b.specFilter=function(a){return g.matches(a.getFullName())},window.setTimeout=window.setTimeout,window.setInterval=window.setInterval,window.clearTimeout=window.clearTimeout,window.clearInterval=window.clearInterval;var h=window.onload;window.onload=function(){h&&h(),f.initialize(),b.execute()}}(),getJasmineRequireObj().console=function(a,b){b.ConsoleReporter=a.ConsoleReporter()},getJasmineRequireObj().ConsoleReporter=function(){function a(a){function c(){l("\n")}function d(a,b){return m?q[a]+b+q.none:b}function e(a,b){return 1==b?a:a+"s"}function f(a,b){for(var c=[],d=0;b>d;d++)c.push(a);return c}function g(a,b){for(var c=(a||"").split("\n"),d=[],e=0;e<c.length;e++)d.push(f(" ",b).join("")+c[e]);return d.join("\n")}function h(a){c(),l(a.fullName);for(var b=0;b<a.failedExpectations.length;b++){var d=a.failedExpectations[b];c(),l(g(d.stack,2))}c()}var i,j,k,l=a.print,m=a.showColors||!1,n=a.onComplete||function(){},o=a.timer||b,p=[],q={green:"[32m",red:"[31m",yellow:"[33m",none:"[0m"};return this.jasmineStarted=function(){i=0,j=0,k=0,l("Started"),c(),o.start()},this.jasmineDone=function(){c();for(var a=0;a<p.length;a++)h(p[a]);c();var b=i+" "+e("spec",i)+", "+j+" "+e("failure",j);k&&(b+=", "+k+" pending "+e("spec",k)),l(b),c();var d=o.elapsed()/1e3;l("Finished in "+d+" "+e("second",d)),c(),n(0===j)},this.specDone=function(a){return i++,"pending"==a.status?(k++,void l(d("yellow","*"))):"passed"==a.status?void l(d("green",".")):void("failed"==a.status&&(j++,p.push(a),l(d("red","F"))))},this}var b={start:function(){},elapsed:function(){return 0}};return a},jasmineRequire.html=function(a){a.ResultsNode=jasmineRequire.ResultsNode(),a.HtmlReporter=jasmineRequire.HtmlReporter(a),a.QueryString=jasmineRequire.QueryString(),a.HtmlSpecFilter=jasmineRequire.HtmlSpecFilter()},jasmineRequire.HtmlReporter=function(a){function b(b){function d(a){return l().querySelector(a)}function e(a,b){for(var c=m(a),d=2;d<arguments.length;d++){var e=arguments[d];"string"==typeof e?c.appendChild(n(e)):e&&c.appendChild(e)}for(var f in b)"className"==f?c[f]=b[f]:c.setAttribute(f,b[f]);return c}function f(a,b){var c=1==b?a:a+"s";return""+b+" "+c}function g(a){return"?spec="+encodeURIComponent(a.fullName)}function h(a){i.setAttribute("class","html-reporter "+a)}var i,j,k=b.env||{},l=b.getContainer,m=b.createElement,n=b.createTextNode,o=b.onRaiseExceptionsClick||function(){},p=b.timer||c,q=0,r=0,s=0;this.initialize=function(){i=e("div",{className:"html-reporter"},e("div",{className:"banner"},e("span",{className:"title"},"Jasmine"),e("span",{className:"version"},a.version)),e("ul",{className:"symbol-summary"}),e("div",{className:"alert"}),e("div",{className:"results"},e("div",{className:"failures"}))),l().appendChild(i),j=d(".symbol-summary")};var t;this.jasmineStarted=function(a){t=a.totalSpecsDefined||0,p.start()};var u=e("div",{className:"summary"}),v=new a.ResultsNode({},"",null),w=v;this.suiteStarted=function(a){w.addChild(a,"suite"),w=w.last()},this.suiteDone=function(){w!=v&&(w=w.parent)},this.specStarted=function(a){w.addChild(a,"spec")};var x=[];return this.specDone=function(a){if("disabled"!=a.status&&q++,j.appendChild(e("li",{className:a.status,id:"spec_"+a.id,title:a.fullName})),"failed"==a.status){r++;for(var b=e("div",{className:"spec-detail failed"},e("div",{className:"description"},e("a",{title:a.fullName,href:g(a)},a.fullName)),e("div",{className:"messages"})),c=b.childNodes[1],d=0;d<a.failedExpectations.length;d++){var f=a.failedExpectations[d];c.appendChild(e("div",{className:"result-message"},f.message)),c.appendChild(e("div",{className:"stack-trace"},f.stack))}x.push(b)}"pending"==a.status&&s++},this.jasmineDone=function(){function a(b,c){for(var d,f=0;f<b.children.length;f++){var h=b.children[f];if("suite"==h.type){var i=e("ul",{className:"suite",id:"suite-"+h.result.id},e("li",{className:"suite-detail"},e("a",{href:g(h.result)},h.result.description)));a(h,i),c.appendChild(i)}"spec"==h.type&&("specs"!=c.getAttribute("class")&&(d=e("ul",{className:"specs"}),c.appendChild(d)),d.appendChild(e("li",{className:h.result.status,id:"spec-"+h.result.id},e("a",{href:g(h.result)},h.result.description))))}}var b=d(".banner");b.appendChild(e("span",{className:"duration"},"finished in "+p.elapsed()/1e3+"s"));var c=d(".alert");c.appendChild(e("span",{className:"exceptions"},e("label",{className:"label","for":"raise-exceptions"},"raise exceptions"),e("input",{className:"raise",id:"raise-exceptions",type:"checkbox"})));var i=d("input");if(i.checked=!k.catchingExceptions(),i.onclick=o,t>q){var j="Ran "+q+" of "+t+" specs - run all";c.appendChild(e("span",{className:"bar skipped"},e("a",{href:"?",title:"Run all specs"},j)))}var l=""+f("spec",q)+", "+f("failure",r);s&&(l+=", "+f("pending spec",s));var m="bar "+(r>0?"failed":"passed");c.appendChild(e("span",{className:m},l));var n=d(".results");if(n.appendChild(u),a(v,u),x.length){c.appendChild(e("span",{className:"menu bar spec-list"},e("span",{},"Spec List | "),e("a",{className:"failures-menu",href:"#"},"Failures"))),c.appendChild(e("span",{className:"menu bar failure-list"},e("a",{className:"spec-list-menu",href:"#"},"Spec List"),e("span",{}," | Failures "))),d(".failures-menu").onclick=function(){h("failure-list")},d(".spec-list-menu").onclick=function(){h("spec-list")},h("failure-list");for(var w=d(".failures"),y=0;y<x.length;y++)w.appendChild(x[y])}},this}var c={start:function(){},elapsed:function(){return 0}};return b},jasmineRequire.HtmlSpecFilter=function(){function a(a){var b=a&&a.filterString()&&a.filterString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=new RegExp(b);this.matches=function(a){return c.test(a)}}return a},jasmineRequire.ResultsNode=function(){function a(b,c,d){this.result=b,this.type=c,this.parent=d,this.children=[],this.addChild=function(b,c){this.children.push(new a(b,c,this))},this.last=function(){return this.children[this.children.length-1]}}return a},jasmineRequire.QueryString=function(){function a(a){function b(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return"?"+b.join("&")}function c(){var b=a.getWindowLocation().search.substring(1),c=[],d={};if(b.length>0){c=b.split("&");for(var e=0;e<c.length;e++){var f=c[e].split("="),g=decodeURIComponent(f[1]);("true"===g||"false"===g)&&(g=JSON.parse(g)),d[decodeURIComponent(f[0])]=g}}return d}return this.setParam=function(d,e){var f=c();f[d]=e,a.getWindowLocation().search=b(f)},this.getParam=function(a){return c()[a]},this}return a},+function(a,b,c){"use strict";b.spiedEventsKey=function(a,b){return[c(a).selector,b].toString()},b.getFixtures=function(){return b.currentFixtures_=b.currentFixtures_||new b.Fixtures},b.getStyleFixtures=function(){return b.currentStyleFixtures_=b.currentStyleFixtures_||new b.StyleFixtures},b.Fixtures=function(){this.containerId="jasmine-fixtures",this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures"},b.Fixtures.prototype.set=function(a){return this.cleanUp(),this.createContainer_(a)},b.Fixtures.prototype.appendSet=function(a){this.addToContainer_(a)},b.Fixtures.prototype.preload=function(){this.read.apply(this,arguments)},b.Fixtures.prototype.load=function(){this.cleanUp(),this.createContainer_(this.read.apply(this,arguments))},b.Fixtures.prototype.appendLoad=function(){this.addToContainer_(this.read.apply(this,arguments))},b.Fixtures.prototype.read=function(){for(var a=[],b=arguments,c=b.length,d=0;c>d;d++)a.push(this.getFixtureHtml_(b[d]));return a.join("")},b.Fixtures.prototype.clearCache=function(){this.fixturesCache_={}},b.Fixtures.prototype.cleanUp=function(){c("#"+this.containerId).remove()},b.Fixtures.prototype.sandbox=function(a){var b=a||{};return c('<div id="sandbox" />').attr(b)},b.Fixtures.prototype.createContainer_=function(a){var b=c("<div>").attr("id",this.containerId).html(a);return c(document.body).append(b),b},b.Fixtures.prototype.addToContainer_=function(a){var b=c(document.body).find("#"+this.containerId).append(a);b.length||this.createContainer_(a)},b.Fixtures.prototype.getFixtureHtml_=function(a){return"undefined"==typeof this.fixturesCache_[a]&&this.loadFixtureIntoCache_(a),this.fixturesCache_[a]},b.Fixtures.prototype.loadFixtureIntoCache_=function(a){var b=this,d=this.makeFixtureUrl_(a),e="",f=(c.ajax({async:!1,cache:!1,url:d,success:function(a,b,c){e=c.responseText}}).fail(function(){throw new Error("Fixture could not be loaded: "+d+" (status: "+status+", message: "+errorThrown.message+")")}),c(c.parseHTML(e,!0)).find("script[src]")||[]);f.each(function(){c.ajax({async:!1,cache:!1,dataType:"script",url:c(this).attr("src"),success:function(a,b,c){e+="<script>"+c.responseText+"</script>"},error:function(a,b,c){throw new Error("Script could not be loaded: "+scriptSrc+" (status: "+b+", message: "+c.message+")")}})}),b.fixturesCache_[a]=e},b.Fixtures.prototype.makeFixtureUrl_=function(a){return this.fixturesPath.match("/$")?this.fixturesPath+a:this.fixturesPath+"/"+a},b.Fixtures.prototype.proxyCallTo_=function(a,b){return this[a].apply(this,b)},b.StyleFixtures=function(){this.fixturesCache_={},this.fixturesNodes_=[],this.fixturesPath="spec/javascripts/fixtures"},b.StyleFixtures.prototype.set=function(a){this.cleanUp(),this.createStyle_(a)},b.StyleFixtures.prototype.appendSet=function(a){this.createStyle_(a)},b.StyleFixtures.prototype.preload=function(){this.read_.apply(this,arguments)},b.StyleFixtures.prototype.load=function(){this.cleanUp(),this.createStyle_(this.read_.apply(this,arguments))},b.StyleFixtures.prototype.appendLoad=function(){this.createStyle_(this.read_.apply(this,arguments))},b.StyleFixtures.prototype.cleanUp=function(){for(;this.fixturesNodes_.length;)this.fixturesNodes_.pop().remove()},b.StyleFixtures.prototype.createStyle_=function(a){var b=c("<div></div>").html(a).text(),d=c("<style>"+b+"</style>");this.fixturesNodes_.push(d),c("head").append(d)},b.StyleFixtures.prototype.clearCache=b.Fixtures.prototype.clearCache,b.StyleFixtures.prototype.read_=b.Fixtures.prototype.read,b.StyleFixtures.prototype.getFixtureHtml_=b.Fixtures.prototype.getFixtureHtml_,b.StyleFixtures.prototype.loadFixtureIntoCache_=b.Fixtures.prototype.loadFixtureIntoCache_,b.StyleFixtures.prototype.makeFixtureUrl_=b.Fixtures.prototype.makeFixtureUrl_,b.StyleFixtures.prototype.proxyCallTo_=b.Fixtures.prototype.proxyCallTo_,b.getJSONFixtures=function(){return b.currentJSONFixtures_=b.currentJSONFixtures_||new b.JSONFixtures},b.JSONFixtures=function(){this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures/json"},b.JSONFixtures.prototype.load=function(){return this.read.apply(this,arguments),this.fixturesCache_},b.JSONFixtures.prototype.read=function(){for(var a=arguments,b=a.length,c=0;b>c;c++)this.getFixtureData_(a[c]);return this.fixturesCache_},b.JSONFixtures.prototype.clearCache=function(){this.fixturesCache_={}},b.JSONFixtures.prototype.getFixtureData_=function(a){return this.fixturesCache_[a]||this.loadFixtureIntoCache_(a),this.fixturesCache_[a]},b.JSONFixtures.prototype.loadFixtureIntoCache_=function(a){var b=this,d=this.fixturesPath.match("/$")?this.fixturesPath+a:this.fixturesPath+"/"+a;c.ajax({async:!1,cache:!1,dataType:"json",url:d,success:function(c){b.fixturesCache_[a]=c},error:function(a,b,c){throw new Error("JSONFixture could not be loaded: "+d+" (status: "+b+", message: "+c.message+")")}})},b.JSONFixtures.prototype.proxyCallTo_=function(a,b){return this[a].apply(this,b)},b.jQuery=function(){},b.jQuery.browserTagCaseIndependentHtml=function(a){return c("<div/>").append(a).html()},b.jQuery.elementToString=function(a){return c(a).map(function(){return this.outerHTML}).toArray().join(", ")};var d={spiedEvents:{},handlers:[]};b.jQuery.events={spyOn:function(a,e){var f=function(){d.spiedEvents[b.spiedEventsKey(a,e)]=b.util.argsToArray(arguments)};return c(a).on(e,f),d.handlers.push(f),{selector:a,eventName:e,handler:f,reset:function(){delete d.spiedEvents[b.spiedEventsKey(a,e)]}}},args:function(a,c){var e=d.spiedEvents[b.spiedEventsKey(a,c)];if(!e)throw"There is no spy for "+c+" on "+a.toString()+". Make sure to create a spy using spyOnEvent.";return e},wasTriggered:function(a,c){return!!d.spiedEvents[b.spiedEventsKey(a,c)]},wasTriggeredWith:function(a,c,d,e,f){var g=b.jQuery.events.args(a,c).slice(1);return"[object Array]"!==Object.prototype.toString.call(d)&&(g=g[0]),e.equals(d,g,f)},wasPrevented:function(a,c){var e=d.spiedEvents[b.spiedEventsKey(a,c)],f=e?e[0]:void 0;return f&&f.isDefaultPrevented()},wasStopped:function(a,c){var e=d.spiedEvents[b.spiedEventsKey(a,c)],f=e?e[0]:void 0;return f&&f.isPropagationStopped()},cleanUp:function(){d.spiedEvents={},d.handlers=[]}};var e=function(a,b){return void 0===b?void 0!==a:a===b};beforeEach(function(){b.addMatchers({toHaveClass:function(){return{compare:function(a,b){return{pass:c(a).hasClass(b)}}}},toHaveCss:function(){return{compare:function(a,b){for(var d in b){var e=b[d];if(("auto"!==e||"auto"!==c(a).get(0).style[d])&&c(a).css(d)!==e)return{pass:!1}}return{pass:!0}}}},toBeVisible:function(){return{compare:function(a){return{pass:c(a).is(":visible")}}}},toBeHidden:function(){return{compare:function(a){return{pass:c(a).is(":hidden")}}}},toBeSelected:function(){return{compare:function(a){return{pass:c(a).is(":selected")}
}}},toBeChecked:function(){return{compare:function(a){return{pass:c(a).is(":checked")}}}},toBeEmpty:function(){return{compare:function(a){return{pass:c(a).is(":empty")}}}},toBeInDOM:function(){return{compare:function(a){return{pass:c.contains(document.documentElement,c(a)[0])}}}},toExist:function(){return{compare:function(a){return{pass:c(a).length}}}},toHaveLength:function(){return{compare:function(a,b){return{pass:c(a).length===b}}}},toHaveAttr:function(){return{compare:function(a,b,d){return{pass:e(c(a).attr(b),d)}}}},toHaveProp:function(){return{compare:function(a,b,d){return{pass:e(c(a).prop(b),d)}}}},toHaveId:function(){return{compare:function(a,b){return{pass:c(a).attr("id")==b}}}},toHaveHtml:function(){return{compare:function(a,d){return{pass:c(a).html()==b.jQuery.browserTagCaseIndependentHtml(d)}}}},toContainHtml:function(){return{compare:function(a,d){var e=c(a).html(),f=b.jQuery.browserTagCaseIndependentHtml(d);return{pass:e.indexOf(f)>=0}}}},toHaveText:function(){return{compare:function(a,b){var d=c.trim(c(a).text());return b&&c.isFunction(b.test)?{pass:b.test(d)}:{pass:d==b}}}},toContainText:function(){return{compare:function(a,b){var d=c.trim(c(a).text());return b&&c.isFunction(b.test)?{pass:b.test(d)}:{pass:-1!=d.indexOf(b)}}}},toHaveValue:function(){return{compare:function(a,b){return{pass:c(a).val()===b}}}},toHaveData:function(){return{compare:function(a,b,d){return{pass:e(c(a).data(b),d)}}}},toContainElement:function(){return{compare:function(b,d){return a.debug,{pass:c(b).find(d).length}}}},toBeMatchedBy:function(){return{compare:function(a,b){return{pass:c(a).filter(b).length}}}},toBeDisabled:function(){return{compare:function(a){return{pass:c(a).is(":disabled")}}}},toBeFocused:function(){return{compare:function(a){return{pass:c(a)[0]===c(a)[0].ownerDocument.activeElement}}}},toHandle:function(){return{compare:function(a,b){var d=c._data(c(a).get(0),"events");if(!d||!b||"string"!=typeof b)return{pass:!1};var e=b.split("."),f=e.shift(),g=e.slice(0).sort(),h=new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+"(\\.|$)");if(!d[f]||!e.length)return{pass:d[f]&&d[f].length>0};for(var i=0;i<d[f].length;i++){var j=d[f][i].namespace;if(h.test(j))return{pass:!0}}return{pass:!1}}}},toHandleWith:function(){return{compare:function(a,b,d){for(var e=b.split(".")[0],f=c._data(c(a).get(0),"events")[e],g=0;g<f.length;g++)if(f[g].handler==d)return{pass:!0};return{pass:!1}}}},toHaveBeenTriggeredOn:function(){return{compare:function(a,d){var e={pass:b.jQuery.events.wasTriggered(d,a)};return e.message=e.pass?"Expected event "+c(a)+" not to have been triggered on "+d:"Expected event "+c(a)+" to have been triggered on "+d,e}}},toHaveBeenTriggered:function(){return{compare:function(a){var c=a.eventName,d=a.selector,e={pass:b.jQuery.events.wasTriggered(d,c)};return e.message=e.pass?"Expected event "+c+" not to have been triggered on "+d:"Expected event "+c+" to have been triggered on "+d,e}}},toHaveBeenTriggeredOnAndWith:function(a,c){return{compare:function(d,e,f){var g=b.jQuery.events.wasTriggered(e,d),h={pass:g&&b.jQuery.events.wasTriggeredWith(e,d,f,a,c)};if(g){var i=b.jQuery.events.args(e,d,f)[1];h.message=h.pass?"Expected event "+d+" not to have been triggered with "+b.pp(f)+" but it was triggered with "+b.pp(i):"Expected event "+d+" to have been triggered with "+b.pp(f)+"  but it was triggered with "+b.pp(i)}else h.message=h.pass?"Expected event "+d+" not to have been triggered on "+e:"Expected event "+d+" to have been triggered on "+e;return h}}},toHaveBeenPreventedOn:function(){return{compare:function(a,c){var d={pass:b.jQuery.events.wasPrevented(c,a)};return d.message=d.pass?"Expected event "+a+" not to have been prevented on "+c:"Expected event "+a+" to have been prevented on "+c,d}}},toHaveBeenPrevented:function(){return{compare:function(a){var c=a.eventName,d=a.selector,e={pass:b.jQuery.events.wasPrevented(d,c)};return e.message=e.pass?"Expected event "+c+" not to have been prevented on "+d:"Expected event "+c+" to have been prevented on "+d,e}}},toHaveBeenStoppedOn:function(){return{compare:function(a,c){var d={pass:b.jQuery.events.wasStopped(c,a)};return d.message=d.pass?"Expected event "+a+" not to have been stopped on "+c:"Expected event "+a+" to have been stopped on "+c,d}}},toHaveBeenStopped:function(){return{compare:function(a){var c=a.eventName,d=a.selector,e={pass:b.jQuery.events.wasStopped(d,c)};return e.message=e.pass?"Expected event "+c+" not to have been stopped on "+d:"Expected event "+c+" to have been stopped on "+d,e}}}}),b.getEnv().addCustomEqualityTester(function(a,d){if(a&&d){if(a instanceof c||b.isDomNode(a)){var e=c(a);return d instanceof c?e.length==d.length&&a.is(d):e.is(d)}if(d instanceof c||b.isDomNode(d)){var f=c(d);return a instanceof jQuery?a.length==f.length&&f.is(a):c(d).is(a)}}}),b.getEnv().addCustomEqualityTester(function(a,b){return a instanceof jQuery&&b instanceof jQuery&&a.size()==b.size()?a.is(b):void 0})}),afterEach(function(){b.getFixtures().cleanUp(),b.getStyleFixtures().cleanUp(),b.jQuery.events.cleanUp()}),a.readFixtures=function(){return b.getFixtures().proxyCallTo_("read",arguments)},a.preloadFixtures=function(){b.getFixtures().proxyCallTo_("preload",arguments)},a.loadFixtures=function(){b.getFixtures().proxyCallTo_("load",arguments)},a.appendLoadFixtures=function(){b.getFixtures().proxyCallTo_("appendLoad",arguments)},a.setFixtures=function(){return b.getFixtures().proxyCallTo_("set",arguments)},a.appendSetFixtures=function(){b.getFixtures().proxyCallTo_("appendSet",arguments)},a.sandbox=function(a){return b.getFixtures().sandbox(a)},a.spyOnEvent=function(a,c){return b.jQuery.events.spyOn(a,c)},a.preloadStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("preload",arguments)},a.loadStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("load",arguments)},a.appendLoadStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("appendLoad",arguments)},a.setStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("set",arguments)},a.appendSetStyleFixtures=function(){b.getStyleFixtures().proxyCallTo_("appendSet",arguments)},a.loadJSONFixtures=function(){return b.getJSONFixtures().proxyCallTo_("load",arguments)},a.getJSONFixture=function(a){return b.getJSONFixtures().proxyCallTo_("read",arguments)[a]}}(window,window.jasmine,window.jQuery),getJasmineRequireObj().core=function(a){var b={};return a.base(b),b.util=a.util(),b.Any=a.Any(),b.CallTracker=a.CallTracker(),b.Clock=a.Clock(),b.DelayedFunctionScheduler=a.DelayedFunctionScheduler(),b.Env=a.Env(b),b.ExceptionFormatter=a.ExceptionFormatter(),b.Expectation=a.Expectation(),b.buildExpectationResult=a.buildExpectationResult(),b.JsApiReporter=a.JsApiReporter(),b.matchersUtil=a.matchersUtil(b),b.ObjectContaining=a.ObjectContaining(b),b.pp=a.pp(b),b.QueueRunner=a.QueueRunner(),b.ReportDispatcher=a.ReportDispatcher(),b.Spec=a.Spec(b),b.SpyStrategy=a.SpyStrategy(),b.Suite=a.Suite(),b.Timer=a.Timer(),b.version=a.version(),b.matchers=a.requireMatchers(a,b),b},getJasmineRequireObj().requireMatchers=function(a,b){for(var c=["toBe","toBeCloseTo","toBeDefined","toBeFalsy","toBeGreaterThan","toBeLessThan","toBeNaN","toBeNull","toBeTruthy","toBeUndefined","toContain","toEqual","toHaveBeenCalled","toHaveBeenCalledWith","toMatch","toThrow","toThrowError"],d={},e=0;e<c.length;e++){var f=c[e];d[f]=a[f](b)}return d},getJasmineRequireObj().base=function(a){a.unimplementedMethod_=function(){throw new Error("unimplemented method")},a.MAX_PRETTY_PRINT_DEPTH=40,a.DEFAULT_TIMEOUT_INTERVAL=5e3,a.getGlobal=function(){var a=eval.call(null,"this");return function(){return a}}(),a.getEnv=function(b){var c=a.currentEnv_=a.currentEnv_||new a.Env(b);return c},a.isArray_=function(b){return a.isA_("Array",b)},a.isString_=function(b){return a.isA_("String",b)},a.isNumber_=function(b){return a.isA_("Number",b)},a.isA_=function(a,b){return Object.prototype.toString.apply(b)==="[object "+a+"]"},a.isDomNode=function(a){return a.nodeType>0},a.any=function(b){return new a.Any(b)},a.objectContaining=function(b){return new a.ObjectContaining(b)},a.createSpy=function(b,c){var d=new a.SpyStrategy({name:b,fn:c,getSpy:function(){return f}}),e=new a.CallTracker,f=function(){return e.track({object:this,args:Array.prototype.slice.apply(arguments)}),d.exec.apply(this,arguments)};for(var g in c){if("and"===g||"calls"===g)throw new Error("Jasmine spies would overwrite the 'and' and 'calls' properties on the object being spied upon");f[g]=c[g]}return f.and=d,f.calls=e,f},a.isSpy=function(b){return b?b.and instanceof a.SpyStrategy&&b.calls instanceof a.CallTracker:!1},a.createSpyObj=function(b,c){if(!a.isArray_(c)||0===c.length)throw"createSpyObj requires a non-empty array of method names to create spies for";for(var d={},e=0;e<c.length;e++)d[c[e]]=a.createSpy(b+"."+c[e]);return d}},getJasmineRequireObj().util=function(){var a={};return a.inherit=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},a.htmlEscape=function(a){return a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},a.argsToArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},a.isUndefined=function(a){return void 0===a},a},getJasmineRequireObj().Spec=function(a){function b(a){this.expectationFactory=a.expectationFactory,this.resultCallback=a.resultCallback||function(){},this.id=a.id,this.description=a.description||"",this.fn=a.fn,this.beforeFns=a.beforeFns||function(){return[]},this.afterFns=a.afterFns||function(){return[]},this.onStart=a.onStart||function(){},this.exceptionFormatter=a.exceptionFormatter||function(){},this.getSpecName=a.getSpecName||function(){return""},this.expectationResultFactory=a.expectationResultFactory||function(){},this.queueRunnerFactory=a.queueRunnerFactory||function(){},this.catchingExceptions=a.catchingExceptions||function(){return!0},this.timer=a.timer||{setTimeout:setTimeout,clearTimeout:clearTimeout},this.fn||this.pend(),this.result={id:this.id,description:this.description,fullName:this.getFullName(),failedExpectations:[]}}return b.prototype.addExpectationResult=function(a,b){a||this.result.failedExpectations.push(this.expectationResultFactory(b))},b.prototype.expect=function(a){return this.expectationFactory(a,this)},b.prototype.execute=function(c){function d(b){return function(c){h=Function.prototype.apply.apply(i.timer.setTimeout,[a.getGlobal(),[function(){f(new Error("Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL.")),c()},a.DEFAULT_TIMEOUT_INTERVAL]]);var d=function(){e(),c()};b.call(this,d)}}function e(){Function.prototype.apply.apply(i.timer.clearTimeout,[a.getGlobal(),[h]]),h=void 0}function f(a){return e(),b.isPendingSpecException(a)?void i.pend():void i.addExpectationResult(!1,{matcherName:"",passed:!1,expected:"",actual:"",error:a})}function g(){i.result.status=i.status(),i.resultCallback(i.result),c&&c()}var h,i=this;if(this.onStart(this),this.markedPending||this.disabled)return void g();for(var j=this.beforeFns().concat(this.fn).concat(this.afterFns()),k=[],l=0;l<j.length;l++){var m=j[l];k.push(m.length>0?d(m):m)}this.queueRunnerFactory({fns:k,onException:f,onComplete:g})},b.prototype.disable=function(){this.disabled=!0},b.prototype.pend=function(){this.markedPending=!0},b.prototype.status=function(){return this.disabled?"disabled":this.markedPending?"pending":this.result.failedExpectations.length>0?"failed":"passed"},b.prototype.getFullName=function(){return this.getSpecName(this)},b.pendingSpecExceptionMessage="=> marked Pending",b.isPendingSpecException=function(a){return-1!==a.toString().indexOf(b.pendingSpecExceptionMessage)},b},void 0==typeof window&&"object"==typeof exports&&(exports.Spec=jasmineRequire.Spec),getJasmineRequireObj().Env=function(a){function b(b){function c(a){C++,C>=B?(C=0,h(a,0)):a()}b=b||{};var d=this,e=b.global||a.getGlobal(),f=0,g=!0,h=a.getGlobal().setTimeout,i=a.getGlobal().clearTimeout;this.clock=new a.Clock(e,new a.DelayedFunctionScheduler);var j={},k=[],l=null,m=null,n=new a.ReportDispatcher(["jasmineStarted","jasmineDone","suiteStarted","suiteDone","specStarted","specDone"]);this.specFilter=function(){return!0};var o=[];this.addCustomEqualityTester=function(a){o.push(a)},a.Expectation.addCoreMatchers(a.matchers);var p=0,q=function(){return"spec"+p++},r=0,s=function(){return"suite"+r++},t=function(b,c){function d(a,b){return c.addExpectationResult(a,b)}return a.Expectation.Factory({util:a.matchersUtil,customEqualityTesters:o,actual:b,addExpectationResult:d})},u=function(a){l=a,n.specStarted(a.result)},v=function(a){return function(){for(var b=[];a;)b=b.concat(a.beforeFns),a=a.parentSuite;return b.reverse()}},w=function(a){return function(){for(var b=[];a;)b=b.concat(a.afterFns),a=a.parentSuite;return b}},x=function(a,b){return b.getFullName()+" "+a.description},y=a.buildExpectationResult,z=new a.ExceptionFormatter,A=function(a){return a.messageFormatter=z.message,a.stackFormatter=z.stack,y(a)};this.catchExceptions=function(a){return g=!!a},this.catchingExceptions=function(){return g};var B=20,C=0,D=function(b){return a.Spec.isPendingSpecException(b)||g},E=function(b){b.catchException=D,b.clearStack=b.clearStack||c,new a.QueueRunner(b).execute()},F=new a.Suite({env:this,id:s(),description:"Jasmine__TopLevel__Suite",queueRunner:E,resultCallback:function(){}});j[F.id]=F,m=F,this.topSuite=function(){return F},this.execute=function(a){a=a||[F.id];for(var b=[],c=0;c<a.length;c++){var d=j[a[c]];b.push(function(a){return function(b){a.execute(b)}}(d))}n.jasmineStarted({totalSpecsDefined:f}),E({fns:b,onComplete:n.jasmineDone})},this.addReporter=function(a){n.addReporter(a)},this.addMatchers=function(b){a.Expectation.addMatchers(b)},this.spyOn=function(b,c){if(a.util.isUndefined(b))throw new Error("spyOn could not find an object to spy upon for "+c+"()");if(a.util.isUndefined(b[c]))throw new Error(c+"() method does not exist");if(b[c]&&a.isSpy(b[c]))throw new Error(c+" has already been spied upon");var d=a.createSpy(c,b[c]);return k.push({spy:d,baseObj:b,methodName:c,originalValue:b[c]}),b[c]=d,d};var G=function(b){var c=new a.Suite({env:d,id:s(),description:b,parentSuite:m,queueRunner:E,onStart:I,resultCallback:function(a){n.suiteDone(a)}});return j[c.id]=c,c};this.describe=function(a,b){var c=G(a),d=m;d.addChild(c),m=c;var e=null;try{b.call(c)}catch(f){e=f}return e&&this.it("encountered a declaration exception",function(){throw e}),m=d,c},this.xdescribe=function(a,b){var c=this.describe(a,b);return c.disable(),c};var H=function(b,c,e){function g(){for(var a=0;a<k.length;a++){var b=k[a];b.baseObj[b.methodName]=b.originalValue}k=[]}function m(b){g(),a.Expectation.resetMatchers(),o=[],l=null,n.specDone(b)}f++;var p=new a.Spec({id:q(),beforeFns:v(e),afterFns:w(e),expectationFactory:t,exceptionFormatter:z,resultCallback:m,getSpecName:function(a){return x(a,e)},onStart:u,description:b,expectationResultFactory:A,queueRunnerFactory:E,fn:c,timer:{setTimeout:h,clearTimeout:i}});return j[p.id]=p,d.specFilter(p)||p.disable(),p},I=function(a){n.suiteStarted(a.result)};this.it=function(a,b){var c=H(a,b,m);return m.addChild(c),c},this.xit=function(a,b){var c=this.it(a,b);return c.pend(),c},this.expect=function(a){return l.expect(a)},this.beforeEach=function(a){m.beforeEach(a)},this.afterEach=function(a){m.afterEach(a)},this.pending=function(){throw a.Spec.pendingSpecExceptionMessage}}return b},getJasmineRequireObj().JsApiReporter=function(){function a(a){function c(a){g[a.id]=a}var d=a.timer||b,e="loaded";this.started=!1,this.finished=!1,this.jasmineStarted=function(){this.started=!0,e="started",d.start()};var f;this.jasmineDone=function(){this.finished=!0,f=d.elapsed(),e="done"},this.status=function(){return e};var g={};this.suiteStarted=function(a){c(a)},this.suiteDone=function(a){c(a)},this.suites=function(){return g};var h=[];this.specStarted=function(){},this.specDone=function(a){h.push(a)},this.specResults=function(a,b){return h.slice(a,a+b)},this.specs=function(){return h},this.executionTime=function(){return f}}var b={start:function(){},elapsed:function(){return 0}};return a},getJasmineRequireObj().Any=function(){function a(a){this.expectedObject=a}return a.prototype.jasmineMatches=function(a){return this.expectedObject==String?"string"==typeof a||a instanceof String:this.expectedObject==Number?"number"==typeof a||a instanceof Number:this.expectedObject==Function?"function"==typeof a||a instanceof Function:this.expectedObject==Object?"object"==typeof a:this.expectedObject==Boolean?"boolean"==typeof a:a instanceof this.expectedObject},a.prototype.jasmineToString=function(){return"<jasmine.any("+this.expectedClass+")>"},a},getJasmineRequireObj().CallTracker=function(){function a(){var a=[];this.track=function(b){a.push(b)},this.any=function(){return!!a.length},this.count=function(){return a.length},this.argsFor=function(b){var c=a[b];return c?c.args:[]},this.all=function(){return a},this.allArgs=function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].args);return b},this.first=function(){return a[0]},this.mostRecent=function(){return a[a.length-1]},this.reset=function(){a=[]}}return a},getJasmineRequireObj().Clock=function(){function a(a,b){function c(){return!(l.setTimeout||l.setInterval).apply}function d(a,b){for(var c in b)a[c]=b[c]}function e(a,c){return b.scheduleFunction(a,c,i(arguments,2))}function f(a){return b.removeFunctionWithId(a)}function g(a,c){return b.scheduleFunction(a,c,i(arguments,2),!0)}function h(a){return b.removeFunctionWithId(a)}function i(a){return Array.prototype.slice.call(a,2)}var j,k=this,l={setTimeout:a.setTimeout,clearTimeout:a.clearTimeout,setInterval:a.setInterval,clearInterval:a.clearInterval},m={setTimeout:e,clearTimeout:f,setInterval:g,clearInterval:h},n=!1;return k.install=function(){d(a,m),j=m,n=!0},k.uninstall=function(){b.reset(),d(a,l),j=l,n=!1},k.setTimeout=function(b,d){if(c()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setTimeout without a polyfill");return j.setTimeout(b,d)}return Function.prototype.apply.apply(j.setTimeout,[a,arguments])},k.setInterval=function(b,d){if(c()){if(arguments.length>2)throw new Error("IE < 9 cannot support extra params to setInterval without a polyfill");return j.setInterval(b,d)}return Function.prototype.apply.apply(j.setInterval,[a,arguments])},k.clearTimeout=function(b){return Function.prototype.call.apply(j.clearTimeout,[a,b])},k.clearInterval=function(b){return Function.prototype.call.apply(j.clearInterval,[a,b])},k.tick=function(a){if(!n)throw new Error("Mock clock is not installed, use jasmine.clock().install()");b.tick(a)},k}return a},getJasmineRequireObj().DelayedFunctionScheduler=function(){function DelayedFunctionScheduler(){function indexOfFirstToPass(a,b){for(var c=-1,d=0;d<a.length;++d)if(b(a[d])){c=d;break}return c}function deleteFromLookup(a){var b=Number(a),c=indexOfFirstToPass(scheduledLookup,function(a){return a===b});c>-1&&scheduledLookup.splice(c,1)}function reschedule(a){self.scheduleFunction(a.funcToCall,a.millis,a.params,!0,a.timeoutKey,a.runAtMillis+a.millis)}function runScheduledFunctions(a){if(!(0===scheduledLookup.length||scheduledLookup[0]>a))do{currentTime=scheduledLookup.shift();var b=scheduledFunctions[currentTime];delete scheduledFunctions[currentTime];for(var c=0;c<b.length;++c){var d=b[c];d.funcToCall.apply(null,d.params||[]),d.recurring&&reschedule(d)}}while(scheduledLookup.length>0&&currentTime!==a&&scheduledLookup[0]<=a)}var self=this,scheduledLookup=[],scheduledFunctions={},currentTime=0,delayedFnCount=0;return self.tick=function(a){a=a||0;var b=currentTime+a;runScheduledFunctions(b),currentTime=b},self.scheduleFunction=function(funcToCall,millis,params,recurring,timeoutKey,runAtMillis){var f;f="string"==typeof funcToCall?function(){return eval(funcToCall)}:funcToCall,millis=millis||0,timeoutKey=timeoutKey||++delayedFnCount,runAtMillis=runAtMillis||currentTime+millis;var funcToSchedule={runAtMillis:runAtMillis,funcToCall:f,recurring:recurring,params:params,timeoutKey:timeoutKey,millis:millis};return runAtMillis in scheduledFunctions?scheduledFunctions[runAtMillis].push(funcToSchedule):(scheduledFunctions[runAtMillis]=[funcToSchedule],scheduledLookup.push(runAtMillis),scheduledLookup.sort(function(a,b){return a-b})),timeoutKey},self.removeFunctionWithId=function(a){for(var b in scheduledFunctions){var c=scheduledFunctions[b],d=indexOfFirstToPass(c,function(b){return b.timeoutKey===a});if(d>-1){1===c.length?(delete scheduledFunctions[b],deleteFromLookup(b)):c.splice(d,1);break}}},self.reset=function(){currentTime=0,scheduledLookup=[],scheduledFunctions={},delayedFnCount=0},self}return DelayedFunctionScheduler},getJasmineRequireObj().ExceptionFormatter=function(){function a(){this.message=function(a){var b=a.name+": "+a.message;return(a.fileName||a.sourceURL)&&(b+=" in "+(a.fileName||a.sourceURL)),(a.line||a.lineNumber)&&(b+=" (line "+(a.line||a.lineNumber)+")"),b},this.stack=function(a){return a?a.stack:null}}return a},getJasmineRequireObj().Expectation=function(){function a(a){this.util=a.util||{buildFailureMessage:function(){}},this.customEqualityTesters=a.customEqualityTesters||[],this.actual=a.actual,this.addExpectationResult=a.addExpectationResult||function(){},this.isNot=a.isNot;for(var c in b)this[c]=b[c]}var b={};return a.prototype.wrapCompare=function(a,b){return function(){function c(){var a=g.compare.apply(null,d);return a.pass=!a.pass,a}var d=Array.prototype.slice.call(arguments,0),e=d.slice(0),f="";d.unshift(this.actual);var g=b(this.util,this.customEqualityTesters),h=g.compare;this.isNot&&(h=g.negativeCompare||c);var i=h.apply(null,d);i.pass||(i.message?f=i.message:(d.unshift(this.isNot),d.unshift(a),f=this.util.buildFailureMessage.apply(null,d))),1==e.length&&(e=e[0]),this.addExpectationResult(i.pass,{matcherName:a,passed:i.pass,message:f,actual:this.actual,expected:e})}},a.addCoreMatchers=function(b){var c=a.prototype;for(var d in b){var e=b[d];c[d]=c.wrapCompare(d,e)}},a.addMatchers=function(c){for(var d in c){var e=c[d];b[d]=a.prototype.wrapCompare(d,e)}},a.resetMatchers=function(){for(var a in b)delete b[a]},a.Factory=function(b){b=b||{};var c=new a(b);return b.isNot=!0,c.not=new a(b),c},a},getJasmineRequireObj().buildExpectationResult=function(){function a(a){function b(){return a.passed?"Passed.":a.message?a.message:a.error?d(a.error):""}function c(){if(a.passed)return"";var c=a.error;if(!c)try{throw new Error(b())}catch(d){c=d}return e(c)}var d=a.messageFormatter||function(){},e=a.stackFormatter||function(){};return{matcherName:a.matcherName,expected:a.expected,actual:a.actual,message:b(),stack:c(),passed:a.passed}}return a},getJasmineRequireObj().ObjectContaining=function(a){function b(a){this.sample=a}return b.prototype.jasmineMatches=function(b,c,d){if("object"!=typeof this.sample)throw new Error("You must provide an object to objectContaining, not '"+this.sample+"'.");c=c||[],d=d||[];var e=function(b,c){return null!==b&&!a.util.isUndefined(b[c])};for(var f in this.sample)!e(b,f)&&e(this.sample,f)?c.push("expected has key '"+f+"', but missing from actual."):a.matchersUtil.equals(this.sample[f],b[f])||d.push("'"+f+"' was '"+(b[f]?a.util.htmlEscape(b[f].toString()):b[f])+"' in actual, but was '"+(this.sample[f]?a.util.htmlEscape(this.sample[f].toString()):this.sample[f])+"' in expected.");return 0===c.length&&0===d.length},b.prototype.jasmineToString=function(){return"<jasmine.objectContaining("+a.pp(this.sample)+")>"},b},getJasmineRequireObj().pp=function(a){function b(){this.ppNestLevel_=0}function c(){b.call(this),this.string=""}return b.prototype.format=function(b){this.ppNestLevel_++;try{a.util.isUndefined(b)?this.emitScalar("undefined"):null===b?this.emitScalar("null"):b===a.getGlobal()?this.emitScalar("<global>"):b.jasmineToString?this.emitScalar(b.jasmineToString()):"string"==typeof b?this.emitString(b):a.isSpy(b)?this.emitScalar("spy on "+b.and.identity()):b instanceof RegExp?this.emitScalar(b.toString()):"function"==typeof b?this.emitScalar("Function"):"number"==typeof b.nodeType?this.emitScalar("HTMLNode"):b instanceof Date?this.emitScalar("Date("+b+")"):b.__Jasmine_been_here_before__?this.emitScalar("<circular reference: "+(a.isArray_(b)?"Array":"Object")+">"):a.isArray_(b)||a.isA_("Object",b)?(b.__Jasmine_been_here_before__=!0,a.isArray_(b)?this.emitArray(b):this.emitObject(b),delete b.__Jasmine_been_here_before__):this.emitScalar(b.toString())}finally{this.ppNestLevel_--}},b.prototype.iterateObject=function(b,c){for(var d in b)b.hasOwnProperty(d)&&"__Jasmine_been_here_before__"!=d&&c(d,b.__lookupGetter__?!a.util.isUndefined(b.__lookupGetter__(d))&&null!==b.__lookupGetter__(d):!1)},b.prototype.emitArray=a.unimplementedMethod_,b.prototype.emitObject=a.unimplementedMethod_,b.prototype.emitScalar=a.unimplementedMethod_,b.prototype.emitString=a.unimplementedMethod_,a.util.inherit(c,b),c.prototype.emitScalar=function(a){this.append(a)},c.prototype.emitString=function(a){this.append("'"+a+"'")},c.prototype.emitArray=function(b){if(this.ppNestLevel_>a.MAX_PRETTY_PRINT_DEPTH)return void this.append("Array");this.append("[ ");for(var c=0;c<b.length;c++)c>0&&this.append(", "),this.format(b[c]);this.append(" ]")},c.prototype.emitObject=function(b){if(this.ppNestLevel_>a.MAX_PRETTY_PRINT_DEPTH)return void this.append("Object");var c=this;this.append("{ ");var d=!0;this.iterateObject(b,function(a,e){d?d=!1:c.append(", "),c.append(a),c.append(" : "),e?c.append("<getter>"):c.format(b[a])}),this.append(" }")},c.prototype.append=function(a){this.string+=a},function(a){var b=new c;return b.format(a),b.string}},getJasmineRequireObj().QueueRunner=function(){function a(a){this.fns=a.fns||[],this.onComplete=a.onComplete||function(){},this.clearStack=a.clearStack||function(a){a()},this.onException=a.onException||function(){},this.catchException=a.catchException||function(){return!0},this.userContext={}}return a.prototype.execute=function(){this.run(this.fns,0)},a.prototype.run=function(a,b){function c(a){try{a.call(h.userContext)}catch(b){e(b)}}function d(b){var c=function(){h.run(a,f+1)};try{b.call(h.userContext,c)}catch(d){e(d),c()}}function e(a){if(h.onException(a),!h.catchException(a))throw a}var f,g=a.length,h=this;for(f=b;g>f;f++){var i=a[f];if(i.length>0)return d(i);c(i)}var j=f>=g;j&&this.clearStack(this.onComplete)},a},getJasmineRequireObj().ReportDispatcher=function(){function a(a){function b(a,b){for(var c=0;c<f.length;c++){var d=f[c];d[a]&&d[a].apply(d,b)}}for(var c=a||[],d=0;d<c.length;d++){var e=c[d];this[e]=function(a){return function(){b(a,arguments)}}(e)}var f=[];return this.addReporter=function(a){f.push(a)},this}return a},getJasmineRequireObj().SpyStrategy=function(){function a(a){a=a||{};var b=a.name||"unknown",c=a.fn||function(){},d=a.getSpy||function(){},e=function(){};this.identity=function(){return b},this.exec=function(){return e.apply(this,arguments)},this.callThrough=function(){return e=c,d()},this.returnValue=function(a){return e=function(){return a},d()},this.throwError=function(a){var b=a instanceof Error?a:new Error(a);return e=function(){throw b},d()},this.callFake=function(a){return e=a,d()},this.stub=function(){return e=function(){},d()}}return a},getJasmineRequireObj().Suite=function(){function a(a){this.env=a.env,this.id=a.id,this.parentSuite=a.parentSuite,this.description=a.description,this.onStart=a.onStart||function(){},this.resultCallback=a.resultCallback||function(){},this.clearStack=a.clearStack||function(a){a()},this.beforeFns=[],this.afterFns=[],this.queueRunner=a.queueRunner||function(){},this.disabled=!1,this.children=[],this.result={id:this.id,status:this.disabled?"disabled":"",description:this.description,fullName:this.getFullName()}}return a.prototype.getFullName=function(){for(var a=this.description,b=this.parentSuite;b;b=b.parentSuite)b.parentSuite&&(a=b.description+" "+a);return a},a.prototype.disable=function(){this.disabled=!0},a.prototype.beforeEach=function(a){this.beforeFns.unshift(a)},a.prototype.afterEach=function(a){this.afterFns.unshift(a)},a.prototype.addChild=function(a){this.children.push(a)},a.prototype.execute=function(a){function b(){d.resultCallback(d.result),a&&a()}function c(a){return function(b){a.execute(b)}}var d=this;if(this.disabled)return void b();for(var e=[],f=0;f<this.children.length;f++)e.push(c(this.children[f]));this.onStart(this),this.queueRunner({fns:e,onComplete:b})},a},void 0==typeof window&&"object"==typeof exports&&(exports.Suite=jasmineRequire.Suite),getJasmineRequireObj().Timer=function(){function a(a){a=a||{};var b,c=a.now||function(){return(new Date).getTime()};this.start=function(){b=c()},this.elapsed=function(){return c()-b}}return a},getJasmineRequireObj().matchersUtil=function(a){function b(c,d,e,f,g){function h(a,b){return a.hasOwnProperty(b)}function i(a){return"function"==typeof a}for(var j=!0,k=0;k<g.length;k++){var l=g[k](c,d);if(!a.util.isUndefined(l))return l}if(c instanceof a.Any&&(j=c.jasmineMatches(d)))return!0;if(d instanceof a.Any&&(j=d.jasmineMatches(c)))return!0;if(d instanceof a.ObjectContaining&&(j=d.jasmineMatches(c)))return!0;if(c instanceof Error&&d instanceof Error)return c.message==d.message;if(c===d)return 0!==c||1/c==1/d;if(null===c||null===d)return c===d;var m=Object.prototype.toString.call(c);if(m!=Object.prototype.toString.call(d))return!1;switch(m){case"[object String]":return c==String(d);case"[object Number]":return c!=+c?d!=+d:0===c?1/c==1/d:c==+d;case"[object Date]":case"[object Boolean]":return+c==+d;case"[object RegExp]":return c.source==d.source&&c.global==d.global&&c.multiline==d.multiline&&c.ignoreCase==d.ignoreCase}if("object"!=typeof c||"object"!=typeof d)return!1;for(var n=e.length;n--;)if(e[n]==c)return f[n]==d;e.push(c),f.push(d);var o=0;if("[object Array]"==m){if(o=c.length,j=o==d.length)for(;o--&&(j=b(c[o],d[o],e,f,g)););}else{var p=c.constructor,q=d.constructor;if(p!==q&&!(i(p)&&p instanceof p&&i(q)&&q instanceof q))return!1;for(var r in c)if(h(c,r)&&(o++,!(j=h(d,r)&&b(c[r],d[r],e,f,g))))break;if(j){for(r in d)if(h(d,r)&&!o--)break;j=!o}}return e.pop(),f.pop(),j}return{equals:function(a,c,d){return d=d||[],b(a,c,[],[],d)},contains:function(a,c,d){if(d=d||[],"[object Array]"===Object.prototype.toString.apply(a)){for(var e=0;e<a.length;e++)if(b(a[e],c,[],[],d))return!0;return!1}return a.indexOf(c)>=0},buildFailureMessage:function(){var b=Array.prototype.slice.call(arguments,0),c=b[0],d=b[1],e=b[2],f=b.slice(3),g=c.replace(/[A-Z]/g,function(a){return" "+a.toLowerCase()}),h="Expected "+a.pp(e)+(d?" not ":" ")+g;if(f.length>0)for(var i=0;i<f.length;i++)i>0&&(h+=","),h+=" "+a.pp(f[i]);return h+"."}}},getJasmineRequireObj().toBe=function(){function a(){return{compare:function(a,b){return{pass:a===b}}}}return a},getJasmineRequireObj().toBeCloseTo=function(){function a(){return{compare:function(a,b,c){return 0!==c&&(c=c||2),{pass:Math.abs(b-a)<Math.pow(10,-c)/2}}}}return a},getJasmineRequireObj().toBeDefined=function(){function a(){return{compare:function(a){return{pass:void 0!==a}}}}return a},getJasmineRequireObj().toBeFalsy=function(){function a(){return{compare:function(a){return{pass:!a}}}}return a},getJasmineRequireObj().toBeGreaterThan=function(){function a(){return{compare:function(a,b){return{pass:a>b}}}}return a},getJasmineRequireObj().toBeLessThan=function(){function a(){return{compare:function(a,b){return{pass:b>a}}}}return a},getJasmineRequireObj().toBeNaN=function(a){function b(){return{compare:function(b){var c={pass:b!==b};return c.message=c.pass?"Expected actual not to be NaN.":"Expected "+a.pp(b)+" to be NaN.",c}}}return b},getJasmineRequireObj().toBeNull=function(){function a(){return{compare:function(a){return{pass:null===a}}}}return a},getJasmineRequireObj().toBeTruthy=function(){function a(){return{compare:function(a){return{pass:!!a}}}}return a},getJasmineRequireObj().toBeUndefined=function(){function a(){return{compare:function(a){return{pass:void 0===a}}}}return a},getJasmineRequireObj().toContain=function(){function a(a,b){return b=b||[],{compare:function(c,d){return{pass:a.contains(c,d,b)}
}}}return a},getJasmineRequireObj().toEqual=function(){function a(a,b){return b=b||[],{compare:function(c,d){var e={pass:!1};return e.pass=a.equals(c,d,b),e}}}return a},getJasmineRequireObj().toHaveBeenCalled=function(a){function b(){return{compare:function(b){var c={};if(!a.isSpy(b))throw new Error("Expected a spy, but got "+a.pp(b)+".");if(arguments.length>1)throw new Error("toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith");return c.pass=b.calls.any(),c.message=c.pass?"Expected spy "+b.and.identity()+" not to have been called.":"Expected spy "+b.and.identity()+" to have been called.",c}}}return b},getJasmineRequireObj().toHaveBeenCalledWith=function(a){function b(b){return{compare:function(){var c=Array.prototype.slice.call(arguments,0),d=c[0],e=c.slice(1),f={pass:!1};if(!a.isSpy(d))throw new Error("Expected a spy, but got "+a.pp(d)+".");return d.calls.any()?(b.contains(d.calls.allArgs(),e)?(f.pass=!0,f.message="Expected spy "+d.and.identity()+" not to have been called with "+a.pp(e)+" but it was."):f.message="Expected spy "+d.and.identity()+" to have been called with "+a.pp(e)+" but actual calls were "+a.pp(d.calls.allArgs()).replace(/^\[ | \]$/g,"")+".",f):(f.message="Expected spy "+d.and.identity()+" to have been called with "+a.pp(e)+" but it was never called.",f)}}}return b},getJasmineRequireObj().toMatch=function(){function a(){return{compare:function(a,b){var c=new RegExp(b);return{pass:c.test(a)}}}}return a},getJasmineRequireObj().toThrow=function(a){function b(b){return{compare:function(c,d){var e,f={pass:!1},g=!1;if("function"!=typeof c)throw new Error("Actual is not a Function");try{c()}catch(h){g=!0,e=h}return g?1==arguments.length?(f.pass=!0,f.message="Expected function not to throw, but it threw "+a.pp(e)+".",f):(b.equals(e,d)?(f.pass=!0,f.message="Expected function not to throw "+a.pp(d)+"."):f.message="Expected function to throw "+a.pp(d)+", but it threw "+a.pp(e)+".",f):(f.message="Expected function to throw an exception.",f)}}}return b},getJasmineRequireObj().toThrowError=function(a){function b(b){return{compare:function(c){function d(a){return a.name||a.toString().match(/^\s*function\s*(\w*)\s*\(/)[1]}function e(a){return{pass:!0,message:a}}function f(a){return{pass:!1,message:a}}function g(){if(1!=arguments.length)if(2==arguments.length){var a=arguments[1];if(a instanceof RegExp?l=a:"string"==typeof a?k=a:h(a)&&(j=a),!(j||k||l))throw new Error("Expected is not an Error, string, or RegExp.")}else{if(!h(arguments[1]))throw new Error("Expected error type is not an Error.");if(j=arguments[1],arguments[2]instanceof RegExp)l=arguments[2];else{if("string"!=typeof arguments[2])throw new Error("Expected error message is not a string or RegExp.");k=arguments[2]}}}function h(a){if("function"!=typeof a)return!1;var b=function(){};return b.prototype=a.prototype,new b instanceof Error}var i,j,k,l,m,n,o=!1;if("function"!=typeof c)throw new Error("Actual is not a Function");g.apply(null,arguments);try{c()}catch(p){o=!0,i=p}return o?i instanceof Error?1==arguments.length?e("Expected function not to throw an Error, but it threw "+d(i)+"."):(j&&(m=d(j),n=d(i.constructor)),j&&k?i.constructor==j&&b.equals(i.message,k)?e("Expected function not to throw "+m+' with message "'+k+'".'):f("Expected function to throw "+m+' with message "'+k+'", but it threw '+n+' with message "'+i.message+'".'):j&&l?i.constructor==j&&l.test(i.message)?e("Expected function not to throw "+m+" with message matching "+l+"."):f("Expected function to throw "+m+" with message matching "+l+", but it threw "+n+' with message "'+i.message+'".'):j?i.constructor==j?e("Expected function not to throw "+m+"."):f("Expected function to throw "+m+", but it threw "+n+"."):k?i.message==k?e("Expected function not to throw an exception with message "+a.pp(k)+"."):f("Expected function to throw an exception with message "+a.pp(k)+", but it threw an exception with message "+a.pp(i.message)+"."):l?l.test(i.message)?e("Expected function not to throw an exception with a message matching "+a.pp(l)+"."):f("Expected function to throw an exception with a message matching "+a.pp(l)+", but it threw an exception with message "+a.pp(i.message)+"."):void 0):f("Expected function to throw an Error, but it threw "+i+"."):f("Expected function to throw an Error.")}}}return b},getJasmineRequireObj().version=function(){return"2.0.0"},initJQueryPayments=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].slice,v=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=a,b.payment={},b.payment.fn={},b.fn.payment=function(){var a,c;return c=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],b.payment.fn[c].apply(this,a)},f=/(\d{1,4})/g,e=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:f,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:f,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:f,length:[13,14,15,16],cvcLength:[3],luhn:!0}],c=function(a){var b,c,d;for(a=(a+"").replace(/\D/g,""),c=0,d=e.length;d>c;c++)if(b=e[c],b.pattern.test(a))return b},d=function(a){var b,c,d;for(c=0,d=e.length;d>c;c++)if(b=e[c],b.type===a)return b},n=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},m=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(b=document.selection)?"function"==typeof b.createRange?b.createRange().text:void 0:void 0:void 0)?!0:!1},o=function(a){return setTimeout(function(){var c,d;return c=b(a.currentTarget),d=c.val(),d=b.payment.formatCardNumber(d),c.val(d)})},i=function(a){var d,e,f,g,h,i,j;return f=String.fromCharCode(a.which),!/^\d+$/.test(f)||(d=b(a.currentTarget),j=d.val(),e=c(j+f),g=(j.replace(/\D/g,"")+f).length,i=16,e&&(i=e.length[e.length.length-1]),g>=i||null!=d.prop("selectionStart")&&d.prop("selectionStart")!==j.length)?void 0:(h=e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,h.test(j)?(a.preventDefault(),d.val(j+" "+f)):h.test(j+f)?(a.preventDefault(),d.val(j+f+" ")):void 0)},g=function(a){var c,d;return c=b(a.currentTarget),d=c.val(),a.meta||8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length?void 0:/\d\s$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d\s$/,""))):/\s\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\d?$/,""))):void 0},j=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val()+d,/^\d$/.test(e)&&"0"!==e&&"1"!==e?(a.preventDefault(),c.val("0"+e+" / ")):/^\d\d$/.test(e)?(a.preventDefault(),c.val(""+e+" / ")):void 0):void 0},k=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val(),/^\d\d$/.test(e)?c.val(""+e+" / "):void 0):void 0},l=function(a){var c,d,e;return d=String.fromCharCode(a.which),"/"===d?(c=b(a.currentTarget),e=c.val(),/^\d$/.test(e)&&"0"!==e?c.val("0"+e+" / "):void 0):void 0},h=function(a){var c,d;return a.meta||(c=b(a.currentTarget),d=c.val(),8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length)?void 0:/\d(\s|\/)+$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},s=function(a){var b;return a.metaKey||a.ctrlKey?!0:32===a.which?!1:0===a.which?!0:a.which<33?!0:(b=String.fromCharCode(a.which),!!/[\d\s]/.test(b))},q=function(a){var d,e,f,g;return d=b(a.currentTarget),f=String.fromCharCode(a.which),/^\d+$/.test(f)&&!m(d)?(g=(d.val()+f).replace(/\D/g,""),e=c(g),e?g.length<=e.length[e.length.length-1]:g.length<=16):void 0},r=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)&&!m(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},p=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)?(e=c.val()+d,e.length<=4):void 0},t=function(a){var c,d,f,g,h;return c=b(a.currentTarget),h=c.val(),g=b.payment.cardType(h)||"unknown",c.hasClass(g)?void 0:(d=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)f=e[a],c.push(f.type);return c}(),c.removeClass("unknown"),c.removeClass(d.join(" ")),c.addClass(g),c.toggleClass("identified","unknown"!==g),c.trigger("payment.cardType",g))},b.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",p),this},b.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",r),this.on("keypress",j),this.on("keypress",l),this.on("keypress",k),this.on("keydown",h),this},b.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",q),this.on("keypress",i),this.on("keydown",g),this.on("keyup",t),this.on("paste",o),this},b.payment.fn.restrictNumeric=function(){return this.on("keypress",s),this},b.payment.fn.cardExpiryVal=function(){return b.payment.cardExpiryVal(b(this).val())},b.payment.cardExpiryVal=function(a){var b,c,d,e;return a=a.replace(/\s/g,""),e=a.split("/",2),b=e[0],d=e[1],2===(null!=d?d.length:void 0)&&/^\d+$/.test(d)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),d=c+d),b=parseInt(b,10),d=parseInt(d,10),{month:b,year:d}},b.payment.validateCardNumber=function(a){var b,d;return a=(a+"").replace(/\s+|-/g,""),/^\d+$/.test(a)?(b=c(a),b?(d=a.length,v.call(b.length,d)>=0&&(b.luhn===!1||n(a))):!1):!1},b.payment.validateCardExpiry=function(a,c){var d,e,f,g;return"object"==typeof a&&"month"in a&&(g=a,a=g.month,c=g.year),a&&c?(a=b.trim(a),c=b.trim(c),/^\d+$/.test(a)?/^\d+$/.test(c)?parseInt(a,10)<=12?(2===c.length&&(f=(new Date).getFullYear(),f=f.toString().slice(0,2),c=f+c),e=new Date(c,a),d=new Date,e.setMonth(e.getMonth()-1),e.setMonth(e.getMonth()+1,1),e>d):!1:!1:!1):!1},b.payment.validateCardCVC=function(a,c){var e,f;return a=b.trim(a),/^\d+$/.test(a)?c?(e=a.length,v.call(null!=(f=d(c))?f.cvcLength:void 0,e)>=0):a.length>=3&&a.length<=4:!1},b.payment.cardType=function(a){var b;return a?(null!=(b=c(a))?b.type:void 0)||null:null},b.payment.formatCardNumber=function(a){var b,d,e,f;return(b=c(a))?(e=b.length[b.length.length-1],a=a.replace(/\D/g,""),a=a.slice(0,+e+1||9e9),b.format.global?null!=(f=a.match(b.format))?f.join(" "):void 0:(d=b.format.exec(a),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):a}},function(a,b){"function"==typeof define&&define.amd?define(b):a.form2js=b()}(this,function(){"use strict";function a(a,d,e,f,g){("undefined"==typeof e||null==e)&&(e=!0),("undefined"==typeof d||null==d)&&(d="."),arguments.length<5&&(g=!1),a="string"==typeof a?document.getElementById(a):a;var h,i=[],j=0;if(a.constructor==Array||"undefined"!=typeof NodeList&&a.constructor==NodeList)for(;h=a[j++];)i=i.concat(c(h,f,g));else i=c(a,f,g);return b(i,e,d)}function b(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r={};for(d=0;d<a.length;d++)if(h=a[d].value,!b||""!==h&&null!==h){for(o=a[d].name,p=o.split(c),i=[],j=q,k="",e=0;e<p.length;e++)if(n=p[e].split("]["),n.length>1)for(f=0;f<n.length;f++)if(n[f]=0==f?n[f]+"]":f==n.length-1?"["+n[f]:"["+n[f]+"]",m=n[f].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(g=1;g<m.length;g++)m[g]&&i.push(m[g]);else i.push(n[f]);else i=i.concat(n);for(e=0;e<i.length;e++)n=i[e],n.indexOf("[]")>-1&&e==i.length-1?(l=n.substr(0,n.indexOf("[")),k+=l,j[l]||(j[l]=[]),j[l].push(h)):n.indexOf("[")>-1?(l=n.substr(0,n.indexOf("[")),m=n.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),k+="_"+l+"_"+m,r[k]||(r[k]={}),""==l||j[l]||(j[l]=[]),e==i.length-1?""==l?(j.push(h),r[k][m]=j[j.length-1]):(j[l].push(h),r[k][m]=j[l][j[l].length-1]):r[k][m]||(j[l].push(/^[0-9a-z_]+\[?/i.test(i[e+1])?{}:[]),r[k][m]=j[l][j[l].length-1]),j=r[k][m]):(k+=n,e<i.length-1?(j[n]||(j[n]={}),j=j[n]):j[n]=h)}return q}function c(a,b,c){var f=e(a,b,c);return f.length>0?f:d(a,b,c)}function d(a,b,c){for(var d=[],f=a.firstChild;f;)d=d.concat(e(f,b,c)),f=f.nextSibling;return d}function e(a,b,c){var e,h,i,j=f(a,c);return e=b&&b(a),e&&e.name?i=[e]:""!=j&&a.nodeName.match(/INPUT|TEXTAREA/i)?(h=g(a),i=[{name:j,value:h}]):""!=j&&a.nodeName.match(/SELECT/i)?(h=g(a),i=[{name:j.replace(/\[\]$/,""),value:h}]):i=d(a,b,c),i}function f(a,b){return a.name&&""!=a.name?a.name:b&&a.id&&""!=a.id?a.id:""}function g(a){if(a.disabled)return null;switch(a.nodeName){case"INPUT":case"TEXTAREA":switch(a.type.toLowerCase()){case"radio":if(a.checked&&"false"===a.value)return!1;case"checkbox":if(a.checked&&"true"===a.value)return!0;if(!a.checked&&"true"===a.value)return!1;if(a.checked)return a.value;break;case"button":case"reset":case"submit":case"image":return"";default:return a.value}break;case"SELECT":return h(a)}return null}function h(a){var b,c,d,e=a.multiple,f=[];if(!e)return a.value;for(b=a.getElementsByTagName("option"),c=0,d=b.length;d>c;c++)b[c].selected&&f.push(b[c].value);return f}return a});var donationsForm={},$,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};donationsForm.init=function(a,b){$=a;var c,d,e,f,g,h,i,j,k,l,m,n,o;e=$.extend({},{imgpath:"https://d3dy5gmtp8yhk7.cloudfront.net",metaviewporttag:!0},b,donationsForm.parseQueryString(document.URL.split("?")[1])),i='<meta name="viewport" content="width=device-width, initial-scale=1">',e.metaviewporttag===!1&&(i=""),$(".donations-form-anchor").append(function(){return'<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n'+i+'\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" value="'+e.org+'">\n  <input type="hidden" name="customer.charges_attributes[0].currency" value="usd">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\'>$</span><span class=\'donation-header-amt\'>0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header dph-active" id="dnt-progress-amount">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first">\n    <div class="donations-currency-select-row">\n      Currency: \n      <select class="donations-currency-select"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n    </span>\n    <div class="donation-input-row">\n      <div class="donation-btn donation-btn-sm '+("1"===e.select?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt1||15)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("2"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt2||35)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("3"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt3||50)+'</span></div>\n    </div>\n    <div class="donation-input-row">      \n      <div class="donation-btn donation-btn-sm '+("4"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt4||100)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("5"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt5||250)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("6"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt6||500)+'</span></div>\n    </div>\n    <div class="donation-input-row"> \n      <div class="donation-btn donation-btn-sm '+("7"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt7||1e3)+'</span></div>\n      <input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount">\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc">\n    </div>\n    <div class="donation-payment-errors">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>'}),d=function(a){var b,c,d,e,f,g;for(c=[],g=donationsForm.currenciesArray,e=0,f=g.length;f>e;e++)b=g[e],d=b===a?"selected":"",c.push('<option value="',b,'" ',d,">",b,"</option>");return $(".donations-currency-select").append(c.join("")),$(".donations-currency-select").change(function(){var a;return a=$("option:selected",this),k(donationsForm.getSymbolFromCurrency(a.val()),a.val())})},d(),c=function(){return $(".donation-btn-lg").payment("restrictNumeric"),$(".donation-btn-sm").click(function(){return gaDonations("send","event","amount","click",$(this).text(),1),$(".donation-header-amt").text($(this).find(".donation-amt").text()),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active")}),$(".donation-btn-lg").change(function(){var a;return a=$(this),$(this).val()?(gaDonations("send","event","amount","click",$(this).val(),1),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active"),$(".donation-header-amt").text(a.val())):void 0}),$(".donation-next-btn").click(function(){var a,b;return o($(this).parent())?(gaDonations("send","event","advance-button","click#success",$(this).attr("id"),1),a=$(this).parent(),b=$(this).parent().next(),$(".donation-progress-header").eq($(".donation-input-set").index(b)).addClass("dph-active"),b.show(),a.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$(".donation-submit").click(function(){return o($(this).parent())})},c(),l=function(){var a;return a=$(".donation-btn-active .donation-amt").text(),$(".donation-header-amt").text(a?a:"0")},k=function(a,b,f){return b=null!=b?b:e.currency,$("input[name='customer.charges_attributes[0].currency']").val(b),$(".donation-currency").html(a),$("#input-set-first").html(donationsForm.donationsButtons(e.seedamount,e.seedvalues,e.select,a,f)),l(),c(),d(b)},null!=e.currency?(j=donationsForm.getSymbolFromCurrency(e.currency),k(j,e.currency)):$.ajax({type:"get",url:"https://freegeoip.net/json/",dataType:"jsonp",success:function(a){var b,c;return b=donationsForm.getCurrencyFromCountryCode(a.country_code),j=donationsForm.getSymbolFromCurrency(b),k(j,b),e.seedcurrency!==b?(c=function(a){var c;return a=e.rates?e.rates:a,c=donationsForm.conversionRt(e.seedcurrency,b,a),k(j,b,c)},null!=e.rates||null!=$("#donations-config").attr("defaults")?c(JSON.parse($("#donations-config").attr("defaults")).rates):$("#donation-script").on("donations:defaultsloaded",function(a,b){return c(b.rates)})):k(j,b)}}),$("#donation-form").show(),f=this,g={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"};for(h in g)n=g[h],$(h).css("background-image","url('"+e.imgpath+"/"+n+"')");return o=function(a){var b,c,d,e,f,g;if(c=!0,0===$(".donation-input-set").index(a)&&0===a.find(".donation-btn-active").length)return gaDonations("send","event","error","initiated","amount",1),$(".donation-error-label").first().show(),!1;for($(".donation-error-label").first().hide(),g=a.find(".donation-text-field, .donation-select"),e=0,f=g.length;f>e;e++)b=g[e],d=donationsForm.validField($(b).val(),$(b).attr("type")),d!==!0?(gaDonations("send","event","error","initiated",$(b).attr("name"),1),c=!1,$(b).addClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").text(d),$(b).parent().find(".donation-error-label").show()):($(b).removeClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").hide());return c},$(".donation-text-field").blur(function(){var a,b;return a=$(this),b=donationsForm.validField(a.val(),a.attr("type")),b===!0?(a.removeClass("donation-text-field-error"),a.parent().find(".donation-error-label").hide(),a.addClass("donation-text-field-completed")):(a.addClass("donation-text-field-error"),a.parent().find(".donation-error-label").text(b),void a.parent().find(".donation-error-label").show())}),$(".donation-text-field[type=cc-num]").blur(function(){var a,b;return a=$(this),b=$.payment.cardType(a.val()),"amex"===b||"mastercard"===b||"visa"===b||"discover"===b||"dinersclub"===b?a.css("background-image","url("+e.imgpath+"/icon-cc-"+b+".png)"):void 0}),$(".donation-select[type='month']").html(function(){var a,b,c;for(b=["<option value='' disabled selected>Month</option>"],a=1;12>=a;)c=a>9?""+a:"0"+a,b.push("<option value='"+c+"'>"+c+"</option>"),a++;return b.join("")}),$(".donation-select[type='year']").html(function(){var a,b,c,d,e;for(b=(new Date).getFullYear(),a=["<option value='' disabled selected>Year</option>"],c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push("<option value='"+c+"'>"+c+"</option>");return a}),m=function(a){var b,c;for(b=1;a>=b;)$(".donation-progress-header").eq(b).addClass("dph-active"),b++;for(c=[];2>=b;)$(".donation-progress-header").eq(b).removeClass("dph-active"),c.push(b++);return c},$(".donation-progress-header").click(function(){var a,b,c;return a=$(".donation-progress-header").index($(this)),c=$(".donation-input-set").eq(a),b=$(".donation-input-set").filter(":visible:first"),o(b)?(gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1),m(a),c.show(),b.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),donationsForm.connectToServer(e),this},donationsForm.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},donationsForm.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAN",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},donationsForm.currenciesArray=["USD","GBP","CAN","AUD","EUR","NZD","SEK","NOK","DKK"],donationsForm.conversionRt=function(a,b,c){return 1/c[b]*c[a]},donationsForm.donationsButtons=function(a,b,c,d,e){var f,g,h,i,j,k,l;for(null==e&&(e=1),h=b.split(","),g=' <div class="donations-currency-select-row">\n  Currency: \n  <select class="donations-currency-select"></select>\n</div>\n<span class="donation-field-label">\n  <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n</span> ',g+="<div class='donation-input-row'>",f=1,j=function(){var b;return b=(e*parseFloat(i)*parseFloat(a)/100).toFixed(),g+='<div class="donation-btn donation-btn-sm '+(c===f.toString()?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>"+d+"</span><span class='donation-amt'>"+b+"</span></div>",f%3===0?g+="</div><div class='donation-input-row'>":void 0},k=0,l=h.length;l>k;k++)i=h[k],j(),f+=1;return h.length%5===0&&(g+="</div><div class='donation-input-row'>"),g+='<input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount"></div>\n<div class="donation-next-btn" id="donation-first-next-btn">\n  <div class="donation-next-btn-header">\n    NEXT\n  </div>\n</div>'},donationsForm.getCurrencyFromCountryCode=function(a){var b,c;return c=["AT","BE","BG","HR","CY","CZ","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES"],b=donationsForm.currencies[a],null!=b?b:__indexOf.call(c,a)>=0?"EUR":"USD"},donationsForm.getSymbolFromCurrency=function(a){var b;return b={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAN:"C$"},b[a]||a},donationsForm.validField=function(a,b){var c,d,e;return a?"email"===b?(d=/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,d.test(a)?!0:"Invalid email format."):"cc-num"===b?$.payment.validateCardNumber(a)?!0:"Invalid card format.":"cvc"===b?$.payment.validateCardCVC(a)?!0:"Invalid CVC.":"month"===b||"year"===b?("month"===b&&(e=$(".donation-select[type='year']").val(),c=a),"year"===b&&(c=$(".donation-select[type='month']").val(),e=a),/^\d+$/.test(c)&&/^\d+$/.test(e)?$.payment.validateCardExpiry(c,e)?!0:"Expiry must be in the future.":"Invalid expiry date."):!0:"Can't be blank"},donationsForm.hide=function(){return $("#donation-form").hide()},donationsForm.connectToServer=function(a){var b,c,d;return b=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(b.stripepublickey),$.fn.serializeObject=function(){var a,b;return b=form2js(this.attr("id"),".",!0),a=$(".donation-btn-active").text()?$(".donation-btn-active").text():$(".donation-btn-active").val(),b.customer.charges_attributes[0].amount=a.replace("$","")+"00",b},d=function(a){var c,d;return d=new Pusher(b.pusherpublickey),c=d.subscribe(a),c.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=b.redirectto&&window.location.replace(b.redirectto),donationsForm.hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},c=function(a,c){var e,f,g,h,i,j;if(e=$("#donation-form"),c.error)return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c.error.message),e.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide();i=c.id,e.append($('<input type="hidden" name="card_token" />').val(i)),f={};for(g in b)j=b[g],$.extend(f,"ak"===g.substring(0,2)?{key:j}:void 0);return h=$.ajax({url:""+b.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),f)}),h.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),d(a.pusher_channel_token)}),h.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1},$("#donation-form").submit(function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$(this),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,c),!1})},function(){var a,b,c,d,e,f;d=function(a,b,c,d){var e;return e=null,"js"===a?(e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",b)):"css"===a&&(e=document.createElement("link"),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",b)),e.readyState?e.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&c(d)}:e.onload=function(){c(d)},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)};var g={};b=function(){return a.ajax({type:"get",url:""+a("#donation-script").data("pathtoserver")+"/organizations/"+a("#donation-script").data("org")+".json",dataType:"jsonp",success:function(b){var c;return c=b,a("#donation-script").trigger("donations:defaultsloaded",b),a(".donations-form-anchor").append(a("<div>").attr("id","donations-config").attr("hidden",!0).attr("defaults",JSON.stringify(b)))}})},e=function(){var b,e,f,h,i,j,k,l;for(b=a("#donation-script").data("testmode")===!0?"jquery.donations.68b3a4ee.js":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.68b3a4ee.js",i=["https://js.stripe.com/v2/","https://d3dy5gmtp8yhk7.cloudfront.net/2.1/pusher.min.js",b],f=0,e=function(){return f++,f===i.length?(initJQueryPayments(jQuery),c(),donationsForm.init(a,a.extend({},g,a("#donation-script").data()))):void 0},l=[],j=0,k=i.length;k>j;j++)h=i[j],l.push(d("js",h,e));return l},c=function(){return function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)
}(window,document,"script","//www.google-analytics.com/analytics.js","gaDonations"),gaDonations("create","UA-48690908-1","controlshiftlabs.com"),gaDonations("send","pageview")},f=function(){a=jQuery=window.jQuery.noConflict(!0);var c,f;f=a("#donation-script").data("testmode")===!0,c=f?"jquery.donations.b44ba55b.css":"https://d2yuwrm8xcn0u8.cloudfront.net/jquery.donations.b44ba55b.css",d("css",c,function(){}),b(),e()},void 0===window.jQuery||window.jQuery.fn.jquery&&(1!==parseInt(window.jQuery.fn.jquery[0])||parseInt(window.jQuery.fn.jquery[1])<9)?d("js","https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",f):f()}.call(this),initJQueryPayments=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].slice,v=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=a,b.payment={},b.payment.fn={},b.fn.payment=function(){var a,c;return c=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],b.payment.fn[c].apply(this,a)},f=/(\d{1,4})/g,e=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:f,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:f,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:f,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:f,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:f,length:[13,14,15,16],cvcLength:[3],luhn:!0}],c=function(a){var b,c,d;for(a=(a+"").replace(/\D/g,""),c=0,d=e.length;d>c;c++)if(b=e[c],b.pattern.test(a))return b},d=function(a){var b,c,d;for(c=0,d=e.length;d>c;c++)if(b=e[c],b.type===a)return b},n=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},m=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(b=document.selection)?"function"==typeof b.createRange?b.createRange().text:void 0:void 0:void 0)?!0:!1},o=function(a){return setTimeout(function(){var c,d;return c=b(a.currentTarget),d=c.val(),d=b.payment.formatCardNumber(d),c.val(d)})},i=function(a){var d,e,f,g,h,i,j;return f=String.fromCharCode(a.which),!/^\d+$/.test(f)||(d=b(a.currentTarget),j=d.val(),e=c(j+f),g=(j.replace(/\D/g,"")+f).length,i=16,e&&(i=e.length[e.length.length-1]),g>=i||null!=d.prop("selectionStart")&&d.prop("selectionStart")!==j.length)?void 0:(h=e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,h.test(j)?(a.preventDefault(),d.val(j+" "+f)):h.test(j+f)?(a.preventDefault(),d.val(j+f+" ")):void 0)},g=function(a){var c,d;return c=b(a.currentTarget),d=c.val(),a.meta||8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length?void 0:/\d\s$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d\s$/,""))):/\s\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\d?$/,""))):void 0},j=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val()+d,/^\d$/.test(e)&&"0"!==e&&"1"!==e?(a.preventDefault(),c.val("0"+e+" / ")):/^\d\d$/.test(e)?(a.preventDefault(),c.val(""+e+" / ")):void 0):void 0},k=function(a){var c,d,e;return d=String.fromCharCode(a.which),/^\d+$/.test(d)?(c=b(a.currentTarget),e=c.val(),/^\d\d$/.test(e)?c.val(""+e+" / "):void 0):void 0},l=function(a){var c,d,e;return d=String.fromCharCode(a.which),"/"===d?(c=b(a.currentTarget),e=c.val(),/^\d$/.test(e)&&"0"!==e?c.val("0"+e+" / "):void 0):void 0},h=function(a){var c,d;return a.meta||(c=b(a.currentTarget),d=c.val(),8!==a.which||null!=c.prop("selectionStart")&&c.prop("selectionStart")!==d.length)?void 0:/\d(\s|\/)+$/.test(d)?(a.preventDefault(),c.val(d.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(d)?(a.preventDefault(),c.val(d.replace(/\s\/\s?\d?$/,""))):void 0},s=function(a){var b;return a.metaKey||a.ctrlKey?!0:32===a.which?!1:0===a.which?!0:a.which<33?!0:(b=String.fromCharCode(a.which),!!/[\d\s]/.test(b))},q=function(a){var d,e,f,g;return d=b(a.currentTarget),f=String.fromCharCode(a.which),/^\d+$/.test(f)&&!m(d)?(g=(d.val()+f).replace(/\D/g,""),e=c(g),e?g.length<=e.length[e.length.length-1]:g.length<=16):void 0},r=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)&&!m(c)?(e=c.val()+d,e=e.replace(/\D/g,""),e.length>6?!1:void 0):void 0},p=function(a){var c,d,e;return c=b(a.currentTarget),d=String.fromCharCode(a.which),/^\d+$/.test(d)?(e=c.val()+d,e.length<=4):void 0},t=function(a){var c,d,f,g,h;return c=b(a.currentTarget),h=c.val(),g=b.payment.cardType(h)||"unknown",c.hasClass(g)?void 0:(d=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)f=e[a],c.push(f.type);return c}(),c.removeClass("unknown"),c.removeClass(d.join(" ")),c.addClass(g),c.toggleClass("identified","unknown"!==g),c.trigger("payment.cardType",g))},b.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",p),this},b.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",r),this.on("keypress",j),this.on("keypress",l),this.on("keypress",k),this.on("keydown",h),this},b.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",q),this.on("keypress",i),this.on("keydown",g),this.on("keyup",t),this.on("paste",o),this},b.payment.fn.restrictNumeric=function(){return this.on("keypress",s),this},b.payment.fn.cardExpiryVal=function(){return b.payment.cardExpiryVal(b(this).val())},b.payment.cardExpiryVal=function(a){var b,c,d,e;return a=a.replace(/\s/g,""),e=a.split("/",2),b=e[0],d=e[1],2===(null!=d?d.length:void 0)&&/^\d+$/.test(d)&&(c=(new Date).getFullYear(),c=c.toString().slice(0,2),d=c+d),b=parseInt(b,10),d=parseInt(d,10),{month:b,year:d}},b.payment.validateCardNumber=function(a){var b,d;return a=(a+"").replace(/\s+|-/g,""),/^\d+$/.test(a)?(b=c(a),b?(d=a.length,v.call(b.length,d)>=0&&(b.luhn===!1||n(a))):!1):!1},b.payment.validateCardExpiry=function(a,c){var d,e,f,g;return"object"==typeof a&&"month"in a&&(g=a,a=g.month,c=g.year),a&&c?(a=b.trim(a),c=b.trim(c),/^\d+$/.test(a)?/^\d+$/.test(c)?parseInt(a,10)<=12?(2===c.length&&(f=(new Date).getFullYear(),f=f.toString().slice(0,2),c=f+c),e=new Date(c,a),d=new Date,e.setMonth(e.getMonth()-1),e.setMonth(e.getMonth()+1,1),e>d):!1:!1:!1):!1},b.payment.validateCardCVC=function(a,c){var e,f;return a=b.trim(a),/^\d+$/.test(a)?c?(e=a.length,v.call(null!=(f=d(c))?f.cvcLength:void 0,e)>=0):a.length>=3&&a.length<=4:!1},b.payment.cardType=function(a){var b;return a?(null!=(b=c(a))?b.type:void 0)||null:null},b.payment.formatCardNumber=function(a){var b,d,e,f;return(b=c(a))?(e=b.length[b.length.length-1],a=a.replace(/\D/g,""),a=a.slice(0,+e+1||9e9),b.format.global?null!=(f=a.match(b.format))?f.join(" "):void 0:(d=b.format.exec(a),null!=d&&d.shift(),null!=d?d.join(" "):void 0)):a}},function(a,b){"function"==typeof define&&define.amd?define(b):a.form2js=b()}(this,function(){"use strict";function a(a,d,e,f,g){("undefined"==typeof e||null==e)&&(e=!0),("undefined"==typeof d||null==d)&&(d="."),arguments.length<5&&(g=!1),a="string"==typeof a?document.getElementById(a):a;var h,i=[],j=0;if(a.constructor==Array||"undefined"!=typeof NodeList&&a.constructor==NodeList)for(;h=a[j++];)i=i.concat(c(h,f,g));else i=c(a,f,g);return b(i,e,d)}function b(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r={};for(d=0;d<a.length;d++)if(h=a[d].value,!b||""!==h&&null!==h){for(o=a[d].name,p=o.split(c),i=[],j=q,k="",e=0;e<p.length;e++)if(n=p[e].split("]["),n.length>1)for(f=0;f<n.length;f++)if(n[f]=0==f?n[f]+"]":f==n.length-1?"["+n[f]:"["+n[f]+"]",m=n[f].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(g=1;g<m.length;g++)m[g]&&i.push(m[g]);else i.push(n[f]);else i=i.concat(n);for(e=0;e<i.length;e++)n=i[e],n.indexOf("[]")>-1&&e==i.length-1?(l=n.substr(0,n.indexOf("[")),k+=l,j[l]||(j[l]=[]),j[l].push(h)):n.indexOf("[")>-1?(l=n.substr(0,n.indexOf("[")),m=n.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),k+="_"+l+"_"+m,r[k]||(r[k]={}),""==l||j[l]||(j[l]=[]),e==i.length-1?""==l?(j.push(h),r[k][m]=j[j.length-1]):(j[l].push(h),r[k][m]=j[l][j[l].length-1]):r[k][m]||(j[l].push(/^[0-9a-z_]+\[?/i.test(i[e+1])?{}:[]),r[k][m]=j[l][j[l].length-1]),j=r[k][m]):(k+=n,e<i.length-1?(j[n]||(j[n]={}),j=j[n]):j[n]=h)}return q}function c(a,b,c){var f=e(a,b,c);return f.length>0?f:d(a,b,c)}function d(a,b,c){for(var d=[],f=a.firstChild;f;)d=d.concat(e(f,b,c)),f=f.nextSibling;return d}function e(a,b,c){var e,h,i,j=f(a,c);return e=b&&b(a),e&&e.name?i=[e]:""!=j&&a.nodeName.match(/INPUT|TEXTAREA/i)?(h=g(a),i=[{name:j,value:h}]):""!=j&&a.nodeName.match(/SELECT/i)?(h=g(a),i=[{name:j.replace(/\[\]$/,""),value:h}]):i=d(a,b,c),i}function f(a,b){return a.name&&""!=a.name?a.name:b&&a.id&&""!=a.id?a.id:""}function g(a){if(a.disabled)return null;switch(a.nodeName){case"INPUT":case"TEXTAREA":switch(a.type.toLowerCase()){case"radio":if(a.checked&&"false"===a.value)return!1;case"checkbox":if(a.checked&&"true"===a.value)return!0;if(!a.checked&&"true"===a.value)return!1;if(a.checked)return a.value;break;case"button":case"reset":case"submit":case"image":return"";default:return a.value}break;case"SELECT":return h(a)}return null}function h(a){var b,c,d,e=a.multiple,f=[];if(!e)return a.value;for(b=a.getElementsByTagName("option"),c=0,d=b.length;d>c;c++)b[c].selected&&f.push(b[c].value);return f}return a});var donationsForm={},$,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};donationsForm.init=function(a,b){$=a;var c,d,e,f,g,h,i,j,k,l,m,n,o;e=$.extend({},{imgpath:"https://d3dy5gmtp8yhk7.cloudfront.net",metaviewporttag:!0},b,donationsForm.parseQueryString(document.URL.split("?")[1])),i='<meta name="viewport" content="width=device-width, initial-scale=1">',e.metaviewporttag===!1&&(i=""),$(".donations-form-anchor").append(function(){return'<div class="cleanslate donations-callback-flash">\n  Success! You\'ll receive a notification for your payment. \n</div>\n\n'+i+'\n<form class="cleanslate donation-form" id="donation-form" autocomplete="on">\n  <div class="donation-loading-overlay"></div>\n  <input type="hidden" name="organization_slug" value="'+e.org+'">\n  <input type="hidden" name="customer.charges_attributes[0].currency" value="usd">\n  <div class="donation-header">\n    <div class="donation-header-main-message">\n      I\'M DONATING\n    </div>\n    <div class="donation-subheader-amount">\n      <span class=\'donation-currency\'>$</span><span class=\'donation-header-amt\'>0</span>\n    </div>\n  </div>\n  <div class="donation-progress-banner">\n    <div class="donation-progress-banner-container">\n      <span class="donation-progress-header dph-active" id="dnt-progress-amount">\n        Amount\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-myinfo">\n        My Info\n      </span>\n      <span class="donation-progress-arrow"></span>\n      <span class="donation-progress-header" id="dnt-progress-payment">\n        Payment\n      </span>\n    </div>\n  </div>\n  <div class="donation-input-set" id="input-set-first">\n    <div class="donations-currency-select-row">\n      Currency: \n      <select class="donations-currency-select"></select>\n    </div>\n    <span class="donation-field-label">\n      <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n    </span>\n    <div class="donation-input-row">\n      <div class="donation-btn donation-btn-sm '+("1"===e.select?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt1||15)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("2"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt2||35)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("3"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt3||50)+'</span></div>\n    </div>\n    <div class="donation-input-row">      \n      <div class="donation-btn donation-btn-sm '+("4"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt4||100)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("5"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt5||250)+'</span></div>\n      <div class="donation-btn donation-btn-sm '+("6"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt6||500)+'</span></div>\n    </div>\n    <div class="donation-input-row"> \n      <div class="donation-btn donation-btn-sm '+("7"===e.select?"donation-btn-active":void 0)+"\"><span class='donation-currency'>$</span><span class='donation-amt'>"+(e.amt7||1e3)+'</span></div>\n      <input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount">\n    </div>\n    <div class="donation-next-btn" id="donation-first-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        First Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="given-name" name="customer.first_name">\n    </div>\n    <div class="donation-input-row">      \n      <span class="donation-field-label">\n        Last Name*\n        <span class="donation-error-label">Can\'t be blank</span>\n      </span>\n      \n      <input type="text" class="donation-text-field" autocompletetype="family-name" name="customer.last_name">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Email*\n        <span class="donation-error-label">Invalid email format</span>\n      </span>\n      \n      <input type="email" class="donation-text-field" autocompletetype="email" name="customer.email">\n    </div>\n    <div class="donation-next-btn" id="donation-second-next-btn">\n      <div class="donation-next-btn-header">\n        NEXT\n      </div>\n    </div>\n  </div>\n  \n  <div class="donation-input-set">\n    <div class="donation-input-row">\n      <span class="donation-field-label">\n        Card Number*\n        <span class="donation-error-label">Invalid number</span>\n      </span>\n      <input name="cc-num" type="cc-num" class="donation-text-field" autocompletetype="cc-number" data-stripe="number">\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        Expiration*\n        <span class="donation-error-label">Invalid date</span>\n      </span>\n      <select name="month" class="donation-select" type="month" data-stripe="exp-month">\n      </select>\n      <select name="year" class="donation-select" type="year" data-stripe="exp-year">\n      </select>\n    </div>\n    <div class="donation-input-row"> \n      <span class="donation-field-label">\n        CVV/CVC* <a class="what-is-cvv" title="For MasterCard, Visa or Discover, it\'s the three digits in the signature area on the back of your card. For American Express, it\'s the four digits on the front of the card.">What is this?</a>\n        <span class="donation-error-label">Invalid CVV number</span>\n      </span>\n      <input name="cvc" type="cvc" class="donation-text-field donation-text-field-sm" autocomplete="off" data-stripe="cvc">\n    </div>\n    <div class="donation-payment-errors">\n      Something went wrong.\n    </div>\n    <button type="submit" class="donation-submit">\n      <div class="donation-submit-header">\n        SUBMIT\n      </div>\n    </div>\n  </div>\n</form>'}),d=function(a){var b,c,d,e,f,g;for(c=[],g=donationsForm.currenciesArray,e=0,f=g.length;f>e;e++)b=g[e],d=b===a?"selected":"",c.push('<option value="',b,'" ',d,">",b,"</option>");return $(".donations-currency-select").append(c.join("")),$(".donations-currency-select").change(function(){var a;return a=$("option:selected",this),k(donationsForm.getSymbolFromCurrency(a.val()),a.val())})},d(),c=function(){return $(".donation-btn-lg").payment("restrictNumeric"),$(".donation-btn-sm").click(function(){return gaDonations("send","event","amount","click",$(this).text(),1),$(".donation-header-amt").text($(this).find(".donation-amt").text()),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active")}),$(".donation-btn-lg").change(function(){var a;return a=$(this),$(this).val()?(gaDonations("send","event","amount","click",$(this).val(),1),$(".donation-btn-active").removeClass("donation-btn-active"),$(this).addClass("donation-btn-active"),$(".donation-header-amt").text(a.val())):void 0}),$(".donation-next-btn").click(function(){var a,b;return o($(this).parent())?(gaDonations("send","event","advance-button","click#success",$(this).attr("id"),1),a=$(this).parent(),b=$(this).parent().next(),$(".donation-progress-header").eq($(".donation-input-set").index(b)).addClass("dph-active"),b.show(),a.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$(".donation-submit").click(function(){return o($(this).parent())})},c(),l=function(){var a;return a=$(".donation-btn-active .donation-amt").text(),$(".donation-header-amt").text(a?a:"0")},k=function(a,b,f){return b=null!=b?b:e.currency,$("input[name='customer.charges_attributes[0].currency']").val(b),$(".donation-currency").html(a),$("#input-set-first").html(donationsForm.donationsButtons(e.seedamount,e.seedvalues,e.select,a,f)),l(),c(),d(b)},null!=e.currency?(j=donationsForm.getSymbolFromCurrency(e.currency),k(j,e.currency)):$.ajax({type:"get",url:"https://freegeoip.net/json/",dataType:"jsonp",success:function(a){var b,c;return b=donationsForm.getCurrencyFromCountryCode(a.country_code),j=donationsForm.getSymbolFromCurrency(b),k(j,b),e.seedcurrency!==b?(c=function(a){var c;return a=e.rates?e.rates:a,c=donationsForm.conversionRt(e.seedcurrency,b,a),k(j,b,c)},null!=e.rates||null!=$("#donations-config").attr("defaults")?c(JSON.parse($("#donations-config").attr("defaults")).rates):$("#donation-script").on("donations:defaultsloaded",function(a,b){return c(b.rates)})):k(j,b)}}),$("#donation-form").show(),f=this,g={"#dnt-progress-amount":"icon-amount.png","#dnt-progress-myinfo":"icon-myinfo.png","#dnt-progress-payment":"icon-payment.png",".donation-progress-arrow":"icon-arrow.png",'.donation-text-field[type="cc-num"]':"icon-cc-none.png",".donation-select":"icon-dropdown-arrows.png",".donation-loading-overlay":"712.GIF"};for(h in g)n=g[h],$(h).css("background-image","url('"+e.imgpath+"/"+n+"')");return o=function(a){var b,c,d,e,f,g;if(c=!0,0===$(".donation-input-set").index(a)&&0===a.find(".donation-btn-active").length)return gaDonations("send","event","error","initiated","amount",1),$(".donation-error-label").first().show(),!1;for($(".donation-error-label").first().hide(),g=a.find(".donation-text-field, .donation-select"),e=0,f=g.length;f>e;e++)b=g[e],d=donationsForm.validField($(b).val(),$(b).attr("type")),d!==!0?(gaDonations("send","event","error","initiated",$(b).attr("name"),1),c=!1,$(b).addClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").text(d),$(b).parent().find(".donation-error-label").show()):($(b).removeClass("donation-text-field-error"),$(b).parent().find(".donation-error-label").hide());return c},$(".donation-text-field").blur(function(){var a,b;return a=$(this),b=donationsForm.validField(a.val(),a.attr("type")),b===!0?(a.removeClass("donation-text-field-error"),a.parent().find(".donation-error-label").hide(),a.addClass("donation-text-field-completed")):(a.addClass("donation-text-field-error"),a.parent().find(".donation-error-label").text(b),void a.parent().find(".donation-error-label").show())}),$(".donation-text-field[type=cc-num]").blur(function(){var a,b;return a=$(this),b=$.payment.cardType(a.val()),"amex"===b||"mastercard"===b||"visa"===b||"discover"===b||"dinersclub"===b?a.css("background-image","url("+e.imgpath+"/icon-cc-"+b+".png)"):void 0}),$(".donation-select[type='month']").html(function(){var a,b,c;for(b=["<option value='' disabled selected>Month</option>"],a=1;12>=a;)c=a>9?""+a:"0"+a,b.push("<option value='"+c+"'>"+c+"</option>"),a++;return b.join("")}),$(".donation-select[type='year']").html(function(){var a,b,c,d,e;for(b=(new Date).getFullYear(),a=["<option value='' disabled selected>Year</option>"],c=d=b,e=b+19;e>=b?e>=d:d>=e;c=e>=b?++d:--d)a.push("<option value='"+c+"'>"+c+"</option>");return a}),m=function(a){var b,c;for(b=1;a>=b;)$(".donation-progress-header").eq(b).addClass("dph-active"),b++;for(c=[];2>=b;)$(".donation-progress-header").eq(b).removeClass("dph-active"),c.push(b++);return c},$(".donation-progress-header").click(function(){var a,b,c;return a=$(".donation-progress-header").index($(this)),c=$(".donation-input-set").eq(a),b=$(".donation-input-set").filter(":visible:first"),o(b)?(gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1),m(a),c.show(),b.hide()):gaDonations("send","event","advance-button","click#with-errors",$(this).attr("id"),1)}),$('.donation-text-field[type="cc-num"]').payment("formatCardNumber"),$('.donation-text-field[type="cvc"]').payment("formatCardCVC"),donationsForm.connectToServer(e),this},donationsForm.parseQueryString=function(a){var b,c,d;if(b={},void 0!==a&&""!==a)for(a=a.split("&"),c=0;c<a.length;)d=a[c].split("="),b[d[0]]=d[1],c++;return b},donationsForm.currencies={US:"USD",GB:"GBP",AU:"AUD",CA:"CAN",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD"},donationsForm.currenciesArray=["USD","GBP","CAN","AUD","EUR","NZD","SEK","NOK","DKK"],donationsForm.conversionRt=function(a,b,c){return 1/c[b]*c[a]},donationsForm.donationsButtons=function(a,b,c,d,e){var f,g,h,i,j,k,l;for(null==e&&(e=1),h=b.split(","),g=' <div class="donations-currency-select-row">\n  Currency: \n  <select class="donations-currency-select"></select>\n</div>\n<span class="donation-field-label">\n  <span class="donation-error-label" id="d-error-label-first">You must choose an amount.</span>\n</span> ',g+="<div class='donation-input-row'>",f=1,j=function(){var b;return b=(e*parseFloat(i)*parseFloat(a)/100).toFixed(),g+='<div class="donation-btn donation-btn-sm '+(c===f.toString()?"donation-btn-active":void 0)+"\" ><span class='donation-currency'>"+d+"</span><span class='donation-amt'>"+b+"</span></div>",f%3===0?g+="</div><div class='donation-input-row'>":void 0},k=0,l=h.length;l>k;k++)i=h[k],j(),f+=1;return h.length%5===0&&(g+="</div><div class='donation-input-row'>"),g+='<input class="donation-btn donation-btn-lg" type="text" placeholder="Other amount"></div>\n<div class="donation-next-btn" id="donation-first-next-btn">\n  <div class="donation-next-btn-header">\n    NEXT\n  </div>\n</div>'},donationsForm.getCurrencyFromCountryCode=function(a){var b,c;return c=["AT","BE","BG","HR","CY","CZ","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES"],b=donationsForm.currencies[a],null!=b?b:__indexOf.call(c,a)>=0?"EUR":"USD"},donationsForm.getSymbolFromCurrency=function(a){var b;return b={USD:"$",GBP:"&pound;",EUR:"&euro;",NZD:"NZ$",AUD:"AU$",CAN:"C$"},b[a]||a},donationsForm.validField=function(a,b){var c,d,e;return a?"email"===b?(d=/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,d.test(a)?!0:"Invalid email format."):"cc-num"===b?$.payment.validateCardNumber(a)?!0:"Invalid card format.":"cvc"===b?$.payment.validateCardCVC(a)?!0:"Invalid CVC.":"month"===b||"year"===b?("month"===b&&(e=$(".donation-select[type='year']").val(),c=a),"year"===b&&(c=$(".donation-select[type='month']").val(),e=a),/^\d+$/.test(c)&&/^\d+$/.test(e)?$.payment.validateCardExpiry(c,e)?!0:"Expiry must be in the future.":"Invalid expiry date."):!0:"Can't be blank"},donationsForm.hide=function(){return $("#donation-form").hide()},donationsForm.connectToServer=function(a){var b,c,d;return b=$.extend({},{stripepublickey:"pk_test_LGrYxpfzI89s9yxXJfKcBB0R",pusherpublickey:"331ca3447b91e264a76f",pathtoserver:"http://localhost:3000"},a),Stripe.setPublishableKey(b.stripepublickey),$.fn.serializeObject=function(){var a,b;return b=form2js(this.attr("id"),".",!0),a=$(".donation-btn-active").text()?$(".donation-btn-active").text():$(".donation-btn-active").val(),b.customer.charges_attributes[0].amount=a.replace("$","")+"00",b},d=function(a){var c,d;return d=new Pusher(b.pusherpublickey),c=d.subscribe(a),c.bind("charge_completed",function(a){return $(".donation-loading-overlay").hide(),d.disconnect(),"success"===a.status?($("#donation-script").trigger("donations:success"),null!=b.redirectto&&window.location.replace(b.redirectto),donationsForm.hide(),$(".donations-callback-flash").show(0).delay(8e3).hide(0)):$(".donation-payment-errors").text(a.message||"Something went wrong.").show()})},c=function(a,c){var e,f,g,h,i,j;if(e=$("#donation-form"),c.error)return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c.error.message),e.find("button").prop("disabled",!1),$(".donation-loading-overlay").hide();i=c.id,e.append($('<input type="hidden" name="card_token" />').val(i)),f={};for(g in b)j=b[g],$.extend(f,"ak"===g.substring(0,2)?{key:j}:void 0);return h=$.ajax({url:""+b.pathtoserver+"/charges",type:"post",data:$.extend({},$("#donation-form").serializeObject(),f)}),h.done(function(a){return gaDonations("send","event","advance-button","click#success","submit",1),d(a.pusher_channel_token)}),h.fail(function(a,b,c){return gaDonations("send","event","advance-button","click#with-errors","submit",1),e.find(".donation-payment-errors").text(c||"Something went wrong.").show(),$(".donation-loading-overlay").hide()}),!1},$("#donation-form").submit(function(){var a;return gaDonations("send","event","advance-button","click#submit","submit",1),a=$(this),$(".donation-loading-overlay").show(),a.find("button").prop("disabled",!0),Stripe.createToken(a,c),!1})};